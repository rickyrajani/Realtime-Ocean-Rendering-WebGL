(function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e['default']}:function getModuleExports(){return e};return __webpack_require__.d(t,'a',t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p='',__webpack_require__(__webpack_require__.s=1)})([function(e,t,n){'use strict';var a=Math.abs;n.d(t,'a',function(){return o});const r=1e-6;t.b=r;let o='undefined'==typeof Float32Array?Array:Float32Array;const i=Math.random;t.c=i;const s=Math.PI/180},function(e,t,n){'use strict';function setSize(e,t){h.width=e,h.height=t,y.aspect=e/t,y.updateProjectionMatrix()}Object.defineProperty(t,'__esModule',{value:!0}),n.d(t,'ABORTED',function(){return g}),t.abort=function abort(e){throw g=!0,e},n.d(t,'canvas',function(){return h}),n.d(t,'gl',function(){return E}),n.d(t,'gui',function(){return _}),n.d(t,'camera',function(){return y}),n.d(t,'cameraControls',function(){return A}),t.makeRenderLoop=function makeRenderLoop(e){return function tick(){A.update(),C.begin(),e(),C.end(),g||requestAnimationFrame(tick)}};var a=n(6),r=n.n(a),o=n(9),i=n.n(o),s=n(11),l=n.n(s),d=n(2),c=n(12),p=n.n(c),u=n(13),m=n.n(u),g=!1,h=document.getElementById('canvas'),f=h.getContext('webgl2',{premultipliedAlpha:!1}),E=f;E.enable(E.CULL_FACE);var _=new r.a.GUI,C=new l.a;C.setMode(1),C.domElement.style.position='absolute',C.domElement.style.left='0px',C.domElement.style.top='0px',document.body.appendChild(C.domElement);var y=new d.PerspectiveCamera(75,h.clientWidth/h.clientHeight,0.1,5e3),A=new p.a(y,h);A.enableDamping=!0,A.enableZoom=!0,A.rotateSpeed=0.3,A.zoomSpeed=1,A.panSpeed=2,setSize(h.clientWidth,h.clientHeight),window.addEventListener('resize',function(){return setSize(h.clientWidth,h.clientHeight)}),n(14)},function(e,t,n){'use strict';function EventDispatcher(){}function Vector2(e,t){this.x=e||0,this.y=t||0}function Texture(e,t,n,a,r,o,i,s,l,d){Object.defineProperty(this,'id',{value:Wt++}),this.uuid=kt.generateUUID(),this.name='',this.image=e===void 0?Texture.DEFAULT_IMAGE:e,this.mipmaps=[],this.mapping=t===void 0?Texture.DEFAULT_MAPPING:t,this.wrapS=n===void 0?Ne:n,this.wrapT=a===void 0?Ne:a,this.magFilter=r===void 0?ke:r,this.minFilter=o===void 0?He:o,this.anisotropy=l===void 0?1:l,this.format=i===void 0?at:i,this.type=s===void 0?Ve:s,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=d===void 0?Lt:d,this.version=0,this.onUpdate=null}function Vector4(e,t,n,a){this.x=e||0,this.y=t||0,this.z=n||0,this.w=a===void 0?1:a}function WebGLRenderTarget(e,t,n){this.uuid=kt.generateUUID(),this.width=e,this.height=t,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t),n=n||{},n.minFilter===void 0&&(n.minFilter=ke),this.texture=new Texture(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=!(n.depthBuffer!==void 0)||n.depthBuffer,this.stencilBuffer=!(n.stencilBuffer!==void 0)||n.stencilBuffer,this.depthTexture=n.depthTexture===void 0?null:n.depthTexture}function WebGLRenderTargetCube(e,t,n){WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function Quaternion(e,t,n,a){this._x=e||0,this._y=t||0,this._z=n||0,this._w=a===void 0?1:a}function Vector3(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error('THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.')}function DataTexture(e,t,n,a,r,o,i,s,l,d,c,p){Texture.call(this,null,o,i,s,l,d,a,r,c,p),this.image={data:e,width:t,height:n},this.magFilter=l===void 0?Oe:l,this.minFilter=d===void 0?Oe:d,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function CubeTexture(e,t,n,a,r,o,i,s,l,d){e=e===void 0?[]:e,t=t===void 0?Re:t,Texture.call(this,e,t,n,a,r,o,i,s,l,d),this.flipY=!1}function UniformContainer(){this.seq=[],this.map={}}function flatten(e,t,a){var o=e[0];if(0>=o||0<o)return e;var s=t*a,n=$t[s];if(void 0===n&&(n=new Float32Array(s),$t[s]=n),0!==t){o.toArray(n,0);for(var r=1,i=0;r!==t;++r)i+=a,e[r].toArray(n,i)}return n}function allocTexUnits(e,t){var n=zt[t];n===void 0&&(n=new Int32Array(t),zt[t]=n);for(var a=0;a!==t;++a)n[a]=e.allocTextureUnit();return n}function setValue1f(e,t){e.uniform1f(this.addr,t)}function setValue1i(e,t){e.uniform1i(this.addr,t)}function setValue2fv(e,t){t.x===void 0?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function setValue3fv(e,t){t.x===void 0?t.r===void 0?e.uniform3fv(this.addr,t):e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3f(this.addr,t.x,t.y,t.z)}function setValue4fv(e,t){t.x===void 0?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function setValue2fm(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function setValue3fm(e,t){t.elements===void 0?e.uniformMatrix3fv(this.addr,!1,t):(jt.set(t.elements),e.uniformMatrix3fv(this.addr,!1,jt))}function setValue4fm(e,t){t.elements===void 0?e.uniformMatrix4fv(this.addr,!1,t):(Xt.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Xt))}function setValueT1(e,t,n){var a=n.allocTextureUnit();e.uniform1i(this.addr,a),n.setTexture2D(t||Ht,a)}function setValueT6(e,t,n){var a=n.allocTextureUnit();e.uniform1i(this.addr,a),n.setTextureCube(t||Vt,a)}function setValue2iv(e,t){e.uniform2iv(this.addr,t)}function setValue3iv(e,t){e.uniform3iv(this.addr,t)}function setValue4iv(e,t){e.uniform4iv(this.addr,t)}function getSingularSetter(e){return 5126===e?setValue1f:35664===e?setValue2fv:35665===e?setValue3fv:35666===e?setValue4fv:35674===e?setValue2fm:35675===e?setValue3fm:35676===e?setValue4fm:35678===e||36198===e?setValueT1:35680===e?setValueT6:5124===e||35670===e?setValue1i:35667===e||35671===e?setValue2iv:35668===e||35672===e?setValue3iv:35669===e||35673===e?setValue4iv:void 0}function setValue1fv(e,t){e.uniform1fv(this.addr,t)}function setValue1iv(e,t){e.uniform1iv(this.addr,t)}function setValueV2a(e,t){e.uniform2fv(this.addr,flatten(t,this.size,2))}function setValueV3a(e,t){e.uniform3fv(this.addr,flatten(t,this.size,3))}function setValueV4a(e,t){e.uniform4fv(this.addr,flatten(t,this.size,4))}function setValueM2a(e,t){e.uniformMatrix2fv(this.addr,!1,flatten(t,this.size,4))}function setValueM3a(e,t){e.uniformMatrix3fv(this.addr,!1,flatten(t,this.size,9))}function setValueM4a(e,t){e.uniformMatrix4fv(this.addr,!1,flatten(t,this.size,16))}function setValueT1a(e,t,a){var r=t.length,n=allocTexUnits(a,r);e.uniform1iv(this.addr,n);for(var o=0;o!==r;++o)a.setTexture2D(t[o]||Ht,n[o])}function setValueT6a(e,t,a){var r=t.length,n=allocTexUnits(a,r);e.uniform1iv(this.addr,n);for(var o=0;o!==r;++o)a.setTextureCube(t[o]||Vt,n[o])}function getPureArraySetter(e){return 5126===e?setValue1fv:35664===e?setValueV2a:35665===e?setValueV3a:35666===e?setValueV4a:35674===e?setValueM2a:35675===e?setValueM3a:35676===e?setValueM4a:35678===e?setValueT1a:35680===e?setValueT6a:5124===e||35670===e?setValue1iv:35667===e||35671===e?setValue2iv:35668===e||35672===e?setValue3iv:35669===e||35673===e?setValue4iv:void 0}function SingleUniform(e,t,n){this.id=e,this.addr=n,this.setValue=getSingularSetter(t.type)}function PureArrayUniform(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=getPureArraySetter(t.type)}function StructuredUniform(e){this.id=e,UniformContainer.call(this)}function addUniform(e,t){e.seq.push(t),e.map[t.id]=t}function parseUniform(e,t,n){var a=e.name,r=a.length;for(Yt.lastIndex=0;;){var o=Yt.exec(a),i=Yt.lastIndex,s=o[1],l=']'===o[2],d=o[3];if(l&&(s|=0),void 0===d||'['===d&&i+2===r){addUniform(n,void 0===d?new SingleUniform(s,e,t):new PureArrayUniform(s,e,t));break}else{var c=n.map,p=c[s];void 0===p&&(p=new StructuredUniform(s),addUniform(n,p)),n=p}}}function WebGLUniforms(e,t,a){UniformContainer.call(this),this.renderer=a;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;++n){var o=e.getActiveUniform(t,n),i=o.name,s=e.getUniformLocation(t,i);parseUniform(o,s,this)}}function Color(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function Box2(e,t){this.min=e===void 0?new Vector2(+Infinity,+Infinity):e,this.max=t===void 0?new Vector2(-Infinity,-Infinity):t}function WebGLFlareRenderer(e,t,n,a,r){function init(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),a=new Uint16Array([0,1,2,0,2,3]);o=t.createBuffer(),s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.bufferData(t.ELEMENT_ARRAY_BUFFER,a,t.STATIC_DRAW),l=t.createTexture(),u=t.createTexture(),n.bindTexture(t.TEXTURE_2D,l),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),n.bindTexture(t.TEXTURE_2D,u),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),i={vertexShader:'uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}',fragmentShader:'uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}'},d=createProgram(i),c={vertex:t.getAttribLocation(d,'position'),uv:t.getAttribLocation(d,'uv')},p={renderType:t.getUniformLocation(d,'renderType'),map:t.getUniformLocation(d,'map'),occlusionMap:t.getUniformLocation(d,'occlusionMap'),opacity:t.getUniformLocation(d,'opacity'),color:t.getUniformLocation(d,'color'),scale:t.getUniformLocation(d,'scale'),rotation:t.getUniformLocation(d,'rotation'),screenPosition:t.getUniformLocation(d,'screenPosition')}}function createProgram(e){var n=t.createProgram(),a=t.createShader(t.FRAGMENT_SHADER),o=t.createShader(t.VERTEX_SHADER),i='precision '+r.precision+' float;\n';return t.shaderSource(a,i+e.fragmentShader),t.shaderSource(o,i+e.vertexShader),t.compileShader(a),t.compileShader(o),t.attachShader(n,a),t.attachShader(n,o),t.linkProgram(n),n}var o,s,i,d,c,p,l,u;this.render=function(e,r,m,g){if(0!==e.length){var h=new Vector3,f=g.w/g.z,E=0.5*g.z,_=0.5*g.w,C=16/g.w,y=new Vector2(C*f,C),A=new Vector3(1,1,0),b=new Vector2(1,1),x=new Box2;x.min.set(g.x,g.y),x.max.set(g.x+(g.z-16),g.y+(g.w-16)),void 0===d&&init(),n.useProgram(d),n.initAttributes(),n.enableAttribute(c.vertex),n.enableAttribute(c.uv),n.disableUnusedAttributes(),t.uniform1i(p.occlusionMap,0),t.uniform1i(p.map,1),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(c.vertex,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(c.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),n.disable(t.CULL_FACE),n.buffers.depth.setMask(!1);for(var v=0,i=e.length;v<i;v++){C=16/g.w,y.set(C*f,C);var S=e[v];if(h.set(S.matrixWorld.elements[12],S.matrixWorld.elements[13],S.matrixWorld.elements[14]),h.applyMatrix4(m.matrixWorldInverse),h.applyMatrix4(m.projectionMatrix),A.copy(h),b.x=g.x+A.x*E+E-8,b.y=g.y+A.y*_+_-8,!0===x.containsPoint(b)){n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,null),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,l),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,b.x,b.y,16,16,0),t.uniform1i(p.renderType,0),t.uniform2f(p.scale,y.x,y.y),t.uniform3f(p.screenPosition,A.x,A.y,A.z),n.disable(t.BLEND),n.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,u),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,b.x,b.y,16,16,0),t.uniform1i(p.renderType,1),n.disable(t.DEPTH_TEST),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,l),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),S.positionScreen.copy(A),S.customUpdateCallback?S.customUpdateCallback(S):S.updateLensFlares(),t.uniform1i(p.renderType,2),n.enable(t.BLEND);for(var T=0,R=S.lensFlares.length,F;T<R;T++)F=S.lensFlares[T],1e-3<F.opacity&&1e-3<F.scale&&(A.x=F.x,A.y=F.y,A.z=F.z,C=F.size*F.scale/g.w,y.x=C*f,y.y=C,t.uniform3f(p.screenPosition,A.x,A.y,A.z),t.uniform2f(p.scale,y.x,y.y),t.uniform1f(p.rotation,F.rotation),t.uniform1f(p.opacity,F.opacity),t.uniform3f(p.color,F.color.r,F.color.g,F.color.b),n.setBlending(F.blending,F.blendEquation,F.blendSrc,F.blendDst),a.setTexture2D(F.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}n.enable(t.CULL_FACE),n.enable(t.DEPTH_TEST),n.buffers.depth.setMask(!0),n.reset()}}}function CanvasTexture(e,t,n,a,r,o,i,s,l){Texture.call(this,e,t,n,a,r,o,i,s,l),this.needsUpdate=!0}function WebGLSpriteRenderer(e,t,n,a,r){function init(){var e=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);d=t.createBuffer(),c=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),p=createProgram(),u={position:t.getAttribLocation(p,'position'),uv:t.getAttribLocation(p,'uv')},m={uvOffset:t.getUniformLocation(p,'uvOffset'),uvScale:t.getUniformLocation(p,'uvScale'),rotation:t.getUniformLocation(p,'rotation'),scale:t.getUniformLocation(p,'scale'),color:t.getUniformLocation(p,'color'),map:t.getUniformLocation(p,'map'),opacity:t.getUniformLocation(p,'opacity'),modelViewMatrix:t.getUniformLocation(p,'modelViewMatrix'),projectionMatrix:t.getUniformLocation(p,'projectionMatrix'),fogType:t.getUniformLocation(p,'fogType'),fogDensity:t.getUniformLocation(p,'fogDensity'),fogNear:t.getUniformLocation(p,'fogNear'),fogFar:t.getUniformLocation(p,'fogFar'),fogColor:t.getUniformLocation(p,'fogColor'),alphaTest:t.getUniformLocation(p,'alphaTest')};var a=document.createElementNS('http://www.w3.org/1999/xhtml','canvas');a.width=8,a.height=8;var r=a.getContext('2d');r.fillStyle='white',r.fillRect(0,0,8,8),l=new CanvasTexture(a)}function createProgram(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),a=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,['precision '+r.precision+' float;','#define SHADER_NAME SpriteMaterial','uniform mat4 modelViewMatrix;','uniform mat4 projectionMatrix;','uniform float rotation;','uniform vec2 scale;','uniform vec2 uvOffset;','uniform vec2 uvScale;','attribute vec2 position;','attribute vec2 uv;','varying vec2 vUV;','void main() {','vUV = uvOffset + uv * uvScale;','vec2 alignedPosition = position * scale;','vec2 rotatedPosition;','rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;','rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;','vec4 finalPosition;','finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );','finalPosition.xy += rotatedPosition;','finalPosition = projectionMatrix * finalPosition;','gl_Position = finalPosition;','}'].join('\n')),t.shaderSource(a,['precision '+r.precision+' float;','#define SHADER_NAME SpriteMaterial','uniform vec3 color;','uniform sampler2D map;','uniform float opacity;','uniform int fogType;','uniform vec3 fogColor;','uniform float fogDensity;','uniform float fogNear;','uniform float fogFar;','uniform float alphaTest;','varying vec2 vUV;','void main() {','vec4 texture = texture2D( map, vUV );','if ( texture.a < alphaTest ) discard;','gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );','if ( fogType > 0 ) {','float depth = gl_FragCoord.z / gl_FragCoord.w;','float fogFactor = 0.0;','if ( fogType == 1 ) {','fogFactor = smoothstep( fogNear, fogFar, depth );','} else {','const float LOG2 = 1.442695;','fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );','fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );','}','gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );','}','}'].join('\n')),t.compileShader(n),t.compileShader(a),t.attachShader(e,n),t.attachShader(e,a),t.linkProgram(e),e}function painterSortStable(e,t){return e.renderOrder===t.renderOrder?e.z===t.z?t.id-e.id:t.z-e.z:e.renderOrder-t.renderOrder}var o=new Vector3,i=new Quaternion,s=new Vector3,d,c,p,u,m,l;this.render=function(r,g,h){if(0!==r.length){void 0===p&&init(),n.useProgram(p),n.initAttributes(),n.enableAttribute(u.position),n.enableAttribute(u.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,d),t.vertexAttribPointer(u.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(u.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.uniformMatrix4fv(m.projectionMatrix,!1,h.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(m.map,0);var f=0,E=0,_=g.fog;_?(t.uniform3f(m.fogColor,_.color.r,_.color.g,_.color.b),_.isFog?(t.uniform1f(m.fogNear,_.near),t.uniform1f(m.fogFar,_.far),t.uniform1i(m.fogType,1),f=1,E=1):_.isFogExp2&&(t.uniform1f(m.fogDensity,_.density),t.uniform1i(m.fogType,2),f=2,E=2)):(t.uniform1i(m.fogType,0),f=0,E=0);for(var C=0,y=r.length,A;C<y;C++)A=r[C],A.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,A.matrixWorld),A.z=-A.modelViewMatrix.elements[14];r.sort(painterSortStable);for(var b=[],C=0,y=r.length;C<y;C++){var A=r[C],x=A.material;if(!1!==x.visible){A.onBeforeRender(e,g,h,void 0,x,void 0),t.uniform1f(m.alphaTest,x.alphaTest),t.uniformMatrix4fv(m.modelViewMatrix,!1,A.modelViewMatrix.elements),A.matrixWorld.decompose(o,i,s),b[0]=s.x,b[1]=s.y;var v=0;g.fog&&x.fog&&(v=E),f!=v&&(t.uniform1i(m.fogType,v),f=v),null===x.map?(t.uniform2f(m.uvOffset,0,0),t.uniform2f(m.uvScale,1,1)):(t.uniform2f(m.uvOffset,x.map.offset.x,x.map.offset.y),t.uniform2f(m.uvScale,x.map.repeat.x,x.map.repeat.y)),t.uniform1f(m.opacity,x.opacity),t.uniform3f(m.color,x.color.r,x.color.g,x.color.b),t.uniform1f(m.rotation,x.rotation),t.uniform2fv(m.scale,b),n.setBlending(x.blending,x.blendEquation,x.blendSrc,x.blendDst,x.blendEquationAlpha,x.blendSrcAlpha,x.blendDstAlpha,x.premultipliedAlpha),n.buffers.depth.setTest(x.depthTest),n.buffers.depth.setMask(x.depthWrite),a.setTexture2D(x.map||l,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),A.onAfterRender(e,g,h,void 0,x,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function Material(){Object.defineProperty(this,'id',{value:en++}),this.uuid=kt.generateUUID(),this.name='',this.type='Material',this.fog=!0,this.lights=!0,this.blending=V,this.side=I,this.flatShading=!1,this.vertexColors=G,this.opacity=1,this.transparent=!1,this.blendSrc=ae,this.blendDst=re,this.blendEquation=Y,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=me,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function ShaderMaterial(e){Material.call(this),this.type='ShaderMaterial',this.defines={},this.uniforms={},this.vertexShader='void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}',this.fragmentShader='void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}',this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,e!==void 0&&(e.attributes!==void 0&&console.error('THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.'),this.setValues(e))}function MeshDepthMaterial(e){Material.call(this),this.type='MeshDepthMaterial',this.depthPacking=Ut,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function MeshDistanceMaterial(e){Material.call(this),this.type='MeshDistanceMaterial',this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Box3(e,t){this.min=e===void 0?new Vector3(+Infinity,+Infinity,+Infinity):e,this.max=t===void 0?new Vector3(-Infinity,-Infinity,-Infinity):t}function Sphere(e,t){this.center=e===void 0?new Vector3:e,this.radius=t===void 0?0:t}function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error('THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.')}function Plane(e,t){this.normal=e===void 0?new Vector3(1,0,0):e,this.constant=t===void 0?0:t}function Frustum(e,t,n,a,r,o){this.planes=[e===void 0?new Plane:e,t===void 0?new Plane:t,n===void 0?new Plane:n,a===void 0?new Plane:a,r===void 0?new Plane:r,o===void 0?new Plane:o]}function WebGLShadowMap(e,t,n){function getDepthMaterial(t,n,a,r,o,i){var s=t.geometry,l=null,d=u,h=t.customDepthMaterial;if(a&&(d=m,h=t.customDistanceMaterial),!h){var f=!1;n.morphTargets&&(s&&s.isBufferGeometry?f=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(f=s.morphTargets&&0<s.morphTargets.length)),t.isSkinnedMesh&&!1===n.skinning&&console.warn('THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:',t);var E=t.isSkinnedMesh&&n.skinning,_=0;f&&(_|=c),E&&(_|=p),l=d[_]}else l=h;if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var C=l.uuid,y=n.uuid,A=g[C];void 0===A&&(A={},g[C]=A);var x=A[y];void 0===x&&(x=l.clone(),A[y]=x),l=x}l.visible=n.visible,l.wireframe=n.wireframe;var v=n.side;return b.renderSingleSided&&v==P&&(v=I),b.renderReverseSided&&(v===I?v=N:v===N&&(v=I)),l.side=v,l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,a&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=o,l.farDistance=i),l}function renderObject(n,r,o,s){if(!1!==n.visible){var c=n.layers.test(r.layers);if(c&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||a.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var p=t.update(n),u=n.material;if(Array.isArray(u))for(var m=p.groups,g=0,h=m.length;g<h;g++){var f=m[g],E=u[f.materialIndex];if(E&&E.visible){var _=getDepthMaterial(n,E,s,d,o.near,o.far);e.renderBufferDirect(o,null,p,_,n,f)}}else if(u.visible){var _=getDepthMaterial(n,u,s,d,o.near,o.far);e.renderBufferDirect(o,null,p,_,n,null)}}for(var C=n.children,y=0,i=C.length;y<i;y++)renderObject(C[y],r,o,s)}}for(var a=new Frustum,r=new Matrix4,o=new Vector2,s=new Vector2(n,n),l=new Vector3,d=new Vector3,c=1,p=2,u=[,,,,],m=[,,,,],g={},h=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],f=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)],E=[new Vector4,new Vector4,new Vector4,new Vector4,new Vector4,new Vector4],_=0;_!==(c|p)+1;++_){var i=0!=(_&c),C=0!=(_&p),y=new MeshDepthMaterial({depthPacking:Gt,morphTargets:i,skinning:C});u[_]=y;var A=new MeshDistanceMaterial({morphTargets:i,skinning:C});m[_]=A}var b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=B,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,n,c){if(!1!==b.enabled&&(!1!==b.autoUpdate||!1!==b.needsUpdate)&&0!==t.length){var p=e.context,u=e.state;u.disable(p.BLEND),u.buffers.color.setClear(1,1,1,1),u.buffers.depth.setTest(!0),u.setScissorTest(!1);for(var m=0,i=t.length,g;m<i;m++){var _=t[m],C=_.shadow,y=_&&_.isPointLight;if(void 0===C){console.warn('THREE.WebGLShadowMap:',_,'has no shadow.');continue}var A=C.camera;if(o.copy(C.mapSize),o.min(s),y){var x=o.x,v=o.y;E[0].set(2*x,v,x,v),E[1].set(0,v,x,v),E[2].set(3*x,v,x,v),E[3].set(x,v,x,v),E[4].set(3*x,0,x,v),E[5].set(x,0,x,v),o.x*=4,o.y*=2}if(null===C.map){C.map=new WebGLRenderTarget(o.x,o.y,{minFilter:Oe,magFilter:Oe,format:at}),C.map.texture.name=_.name+'.shadowMap',A.updateProjectionMatrix()}C.isSpotLightShadow&&C.update(_);var S=C.map,T=C.matrix;d.setFromMatrixPosition(_.matrixWorld),A.position.copy(d),y?(g=6,T.makeTranslation(-d.x,-d.y,-d.z)):(g=1,l.setFromMatrixPosition(_.target.matrixWorld),A.lookAt(l),A.updateMatrixWorld(),T.set(0.5,0,0,0.5,0,0.5,0,0.5,0,0,0.5,0.5,0,0,0,1),T.multiply(A.projectionMatrix),T.multiply(A.matrixWorldInverse)),e.setRenderTarget(S),e.clear();for(var R=0;R<g;R++){if(y){l.copy(A.position),l.add(h[R]),A.up.copy(f[R]),A.lookAt(l),A.updateMatrixWorld();var F=E[R];u.viewport(F)}r.multiplyMatrices(A.projectionMatrix,A.matrixWorldInverse),a.setFromMatrix(r),renderObject(n,c,A,y)}}b.needsUpdate=!1}}}function WebGLAttributes(e){function createBuffer(t,n){var a=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,a,r),t.onUploadCallback();var i=e.FLOAT;return a instanceof Float32Array?i=e.FLOAT:a instanceof Float64Array?console.warn('THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.'):a instanceof Uint16Array?i=e.UNSIGNED_SHORT:a instanceof Int16Array?i=e.SHORT:a instanceof Uint32Array?i=e.UNSIGNED_INT:a instanceof Int32Array?i=e.INT:a instanceof Int8Array?i=e.BYTE:a instanceof Uint8Array&&(i=e.UNSIGNED_BYTE),{buffer:o,type:i,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}function updateBuffer(t,n,a){var r=n.array,o=n.updateRange;e.bindBuffer(a,t),!1===n.dynamic?e.bufferData(a,r,e.STATIC_DRAW):-1===o.count?e.bufferSubData(a,0,r):0===o.count?console.error('THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.'):(e.bufferSubData(a,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}var t={};return{get:function get(e){return e.isInterleavedBufferAttribute&&(e=e.data),t[e.uuid]},remove:function remove(n){n.isInterleavedBufferAttribute&&(n=n.data);var a=t[n.uuid];a&&(e.deleteBuffer(a.buffer),delete t[n.uuid])},update:function update(e,n){e.isInterleavedBufferAttribute&&(e=e.data);var a=t[e.uuid];a===void 0?t[e.uuid]=createBuffer(e,n):a.version<e.version&&(updateBuffer(a.buffer,e,n),a.version=e.version)}}}function Euler(e,t,n,a){this._x=e||0,this._y=t||0,this._z=n||0,this._order=a||Euler.DefaultOrder}function Layers(){this.mask=1}function Object3D(){Object.defineProperty(this,'id',{value:tn++}),this.uuid=kt.generateUUID(),this.name='',this.type='Object3D',this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var e=new Vector3,t=new Euler,n=new Quaternion,a=new Vector3(1,1,1);t.onChange(function onRotationChange(){n.setFromEuler(t,!1)}),n.onChange(function onQuaternionChange(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Camera(){Object3D.call(this),this.type='Camera',this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4}function OrthographicCamera(e,t,n,a,r,o){Camera.call(this),this.type='OrthographicCamera',this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=a,this.near=r===void 0?0.1:r,this.far=o===void 0?2e3:o,this.updateProjectionMatrix()}function PerspectiveCamera(e,t,n,a){Camera.call(this),this.type='PerspectiveCamera',this.fov=e===void 0?50:e,this.zoom=1,this.near=n===void 0?0.1:n,this.far=a===void 0?2e3:a,this.focus=10,this.aspect=t===void 0?1:t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Face3(e,t,n,a,r,o){this.a=e,this.b=t,this.c=n,this.normal=a&&a.isVector3?a:new Vector3,this.vertexNormals=Array.isArray(a)?a:[],this.color=r&&r.isColor?r:new Color,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=o===void 0?0:o}function GeometryIdCount(){return nn++}function Geometry(){Object.defineProperty(this,'id',{value:GeometryIdCount()}),this.uuid=kt.generateUUID(),this.name='',this.type='Geometry',this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function BufferAttribute(e,t,n){if(Array.isArray(e))throw new TypeError('THREE.BufferAttribute: array should be a Typed Array.');this.uuid=kt.generateUUID(),this.name='',this.array=e,this.itemSize=t,this.count=e===void 0?0:e.length/t,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Int8BufferAttribute(e,t){BufferAttribute.call(this,new Int8Array(e),t)}function Uint8BufferAttribute(e,t){BufferAttribute.call(this,new Uint8Array(e),t)}function Uint8ClampedBufferAttribute(e,t){BufferAttribute.call(this,new Uint8ClampedArray(e),t)}function Int16BufferAttribute(e,t){BufferAttribute.call(this,new Int16Array(e),t)}function Uint16BufferAttribute(e,t){BufferAttribute.call(this,new Uint16Array(e),t)}function Int32BufferAttribute(e,t){BufferAttribute.call(this,new Int32Array(e),t)}function Uint32BufferAttribute(e,t){BufferAttribute.call(this,new Uint32Array(e),t)}function Float32BufferAttribute(e,t){BufferAttribute.call(this,new Float32Array(e),t)}function Float64BufferAttribute(e,t){BufferAttribute.call(this,new Float64Array(e),t)}function DirectGeometry(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function arrayMax(e){if(0===e.length)return-Infinity;for(var t=e[0],n=1,a=e.length;n<a;++n)e[n]>t&&(t=e[n]);return t}function BufferGeometry(){Object.defineProperty(this,'id',{value:GeometryIdCount()}),this.uuid=kt.generateUUID(),this.name='',this.type='BufferGeometry',this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:Infinity}}function BoxGeometry(e,t,n,a,r,o){Geometry.call(this),this.type='BoxGeometry',this.parameters={width:e,height:t,depth:n,widthSegments:a,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new BoxBufferGeometry(e,t,n,a,r,o)),this.mergeVertices()}function BoxBufferGeometry(e,t,n,a,r,o){function buildPlane(e,t,n,r,o,u,g,h,f,E,_){var C=f+1,A=0,v=0,S=new Vector3,T,R;for(R=0;R<E+1;R++){var F=R*(g/E)-g/2;for(T=0;T<C;T++){var y=T*(u/f)-u/2;S[e]=y*r,S[t]=F*o,S[n]=h/2,l.push(S.x,S.y,S.z),S[e]=0,S[t]=0,S[n]=0<h?1:-1,d.push(S.x,S.y,S.z),c.push(T/f),c.push(1-R/E),A+=1}}for(R=0;R<E;R++)for(T=0;T<f;T++){var x=p+T+C*R,a=p+T+C*(R+1),b=p+(T+1)+C*(R+1),w=p+(T+1)+C*R;s.push(x,a,w),s.push(a,b,w),v+=6}i.addGroup(m,v,_),m+=v,p+=A}BufferGeometry.call(this),this.type='BoxBufferGeometry',this.parameters={width:e,height:t,depth:n,widthSegments:a,heightSegments:r,depthSegments:o};var i=this;a=E(a)||1,r=E(r)||1,o=E(o)||1;var s=[],l=[],d=[],c=[],p=0,m=0;buildPlane('z','y','x',-1,-1,n,t,e,o,r,0),buildPlane('z','y','x',1,-1,n,t,-e,o,r,1),buildPlane('x','z','y',1,1,e,n,t,a,o,2),buildPlane('x','z','y',1,-1,e,n,-t,a,o,3),buildPlane('x','y','z',1,-1,e,t,n,a,r,4),buildPlane('x','y','z',-1,-1,e,t,-n,a,r,5),this.setIndex(s),this.addAttribute('position',new Float32BufferAttribute(l,3)),this.addAttribute('normal',new Float32BufferAttribute(d,3)),this.addAttribute('uv',new Float32BufferAttribute(c,2))}function PlaneGeometry(e,t,n,a){Geometry.call(this),this.type='PlaneGeometry',this.parameters={width:e,height:t,widthSegments:n,heightSegments:a},this.fromBufferGeometry(new PlaneBufferGeometry(e,t,n,a)),this.mergeVertices()}function PlaneBufferGeometry(e,t,n,r){BufferGeometry.call(this),this.type='PlaneBufferGeometry',this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var o=E(n)||1,i=E(r)||1,s=o+1,l=[],p=[],u=[],m=[],g,h;for(h=0;h<i+1;h++){var f=h*(t/i)-t/2;for(g=0;g<s;g++){var _=g*(e/o)-e/2;p.push(_,-f,0),u.push(0,0,1),m.push(g/o),m.push(1-h/i)}}for(h=0;h<i;h++)for(g=0;g<o;g++){var C=g+s*h,a=g+s*(h+1),A=g+1+s*(h+1),c=g+1+s*h;l.push(C,a,c),l.push(a,A,c)}this.setIndex(l),this.addAttribute('position',new Float32BufferAttribute(p,3)),this.addAttribute('normal',new Float32BufferAttribute(u,3)),this.addAttribute('uv',new Float32BufferAttribute(m,2))}function MeshBasicMaterial(e){Material.call(this),this.type='MeshBasicMaterial',this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_e,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ray(e,t){this.origin=e===void 0?new Vector3:e,this.direction=t===void 0?new Vector3:t}function Line3(e,t){this.start=e===void 0?new Vector3:e,this.end=t===void 0?new Vector3:t}function Triangle(e,t,n){this.a=e===void 0?new Vector3:e,this.b=t===void 0?new Vector3:t,this.c=n===void 0?new Vector3:n}function Mesh(e,t){Object3D.call(this),this.type='Mesh',this.geometry=e===void 0?new BufferGeometry:e,this.material=t===void 0?new MeshBasicMaterial({color:16777215*Math.random()}):t,this.drawMode=Rt,this.updateMorphTargets()}function WebGLBackground(e,t,n,a){function setClear(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,a)}var r=new Color(0),o=0,i,s,l;return{getClearColor:function(){return r},setClearColor:function(e,t){r.set(e),o=t===void 0?1:t,setClear(r,o)},getClearAlpha:function(){return o},setClearAlpha:function(e){o=e,setClear(r,o)},render:function render(t,a,d,c){var p=a.background;null===p?setClear(r,o):p&&p.isColor&&(setClear(p,1),c=!0),(e.autoClear||c)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&p.isCubeTexture?(l==void 0&&(l=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({uniforms:Jt.cube.uniforms,vertexShader:Jt.cube.vertexShader,fragmentShader:Jt.cube.fragmentShader,side:N,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1})),l.geometry.removeAttribute('normal'),l.geometry.removeAttribute('uv'),l.onBeforeRender=function(e,t,n){var a=n.far;this.matrixWorld.makeScale(a,a,a),this.matrixWorld.copyPosition(n.matrixWorld),this.material.polygonOffsetUnits=10*a},n.update(l.geometry)),l.material.uniforms.tCube.value=p,t.push(l,l.geometry,l.material,0,null)):p&&p.isTexture&&(i==void 0&&(i=new OrthographicCamera(-1,1,1,-1,0,1),s=new Mesh(new PlaneBufferGeometry(2,2),new MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1})),n.update(s.geometry)),s.material.map=p,e.renderBufferDirect(i,null,s.geometry,s.material,s,null))}}}function painterSortStable(e,t){return e.renderOrder===t.renderOrder?e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id===t.material.id?e.z===t.z?e.id-t.id:e.z-t.z:e.material.id-t.material.id:e.renderOrder-t.renderOrder}function reversePainterSortStable(e,t){return e.renderOrder===t.renderOrder?e.z===t.z?e.id-t.id:t.z-e.z:e.renderOrder-t.renderOrder}function WebGLRenderList(){var e=[],t=0,n=[],a=[];return{opaque:n,transparent:a,init:function init(){t=0,n.length=0,a.length=0},push:function push(r,o,i,s,l){var d=e[t];d===void 0?(d={id:r.id,object:r,geometry:o,material:i,program:i.program,renderOrder:r.renderOrder,z:s,group:l},e[t]=d):(d.id=r.id,d.object=r,d.geometry=o,d.material=i,d.program=i.program,d.renderOrder=r.renderOrder,d.z=s,d.group=l),(!0===i.transparent?a:n).push(d),t++},sort:function sort(){1<n.length&&n.sort(painterSortStable),1<a.length&&a.sort(reversePainterSortStable)}}}function WebGLRenderLists(){var e={};return{get:function get(t,n){var a=t.id+','+n.id,r=e[a];return void 0===r&&(r=new WebGLRenderList,e[a]=r),r},dispose:function dispose(){e={}}}}function absNumericalSort(e,t){return A(t[1])-A(e[1])}function WebGLMorphtargets(e){var t={},n=new Float32Array(8);return{update:function update(a,r,o,s){var l=a.morphTargetInfluences,d=l.length,c=t[r.id];if(c===void 0){c=[];for(var p=0;p<d;p++)c[p]=[p,0];t[r.id]=c}for(var i=o.morphTargets&&r.morphAttributes.position,u=o.morphNormals&&r.morphAttributes.normal,p=0,m;p<d;p++)m=c[p],0!==m[1]&&(i&&r.removeAttribute('morphTarget'+p),u&&r.removeAttribute('morphNormal'+p));for(var p=0,m;p<d;p++)m=c[p],m[0]=p,m[1]=l[p];c.sort(absNumericalSort);for(var p=0,m;8>p;p++){if(m=c[p],m){var g=m[0],h=m[1];if(h){i&&r.addAttribute('morphTarget'+p,i[g]),u&&r.addAttribute('morphNormal'+p,u[g]),n[p]=h;continue}}n[p]=0}s.getUniforms().setValue(e,'morphTargetInfluences',n)}}}function WebGLIndexedBufferRenderer(e,t,n){var a,r,o;this.setMode=function setMode(e){a=e},this.setIndex=function setIndex(e){r=e.type,o=e.bytesPerElement},this.render=function render(t,i){e.drawElements(a,i,r,t*o),n.calls++,n.vertices+=i,a===e.TRIANGLES?n.faces+=i/3:a===e.POINTS&&(n.points+=i)},this.renderInstances=function renderInstances(i,s,l){var d=t.get('ANGLE_instanced_arrays');return null===d?void console.error('THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.'):void(d.drawElementsInstancedANGLE(a,l,r,s*o,i.maxInstancedCount),n.calls++,n.vertices+=l*i.maxInstancedCount,a===e.TRIANGLES?n.faces+=i.maxInstancedCount*l/3:a===e.POINTS&&(n.points+=i.maxInstancedCount*l))}}function WebGLBufferRenderer(e,t,n){var a;this.setMode=function setMode(e){a=e},this.render=function render(t,r){e.drawArrays(a,t,r),n.calls++,n.vertices+=r,a===e.TRIANGLES?n.faces+=r/3:a===e.POINTS&&(n.points+=r)},this.renderInstances=function renderInstances(r,o,i){var s=t.get('ANGLE_instanced_arrays');if(null===s)return void console.error('THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');var l=r.attributes.position;l.isInterleavedBufferAttribute?(i=l.data.count,s.drawArraysInstancedANGLE(a,0,i,r.maxInstancedCount)):s.drawArraysInstancedANGLE(a,o,i,r.maxInstancedCount),n.calls++,n.vertices+=i*r.maxInstancedCount,a===e.TRIANGLES?n.faces+=r.maxInstancedCount*i/3:a===e.POINTS&&(n.points+=r.maxInstancedCount*i)}}function WebGLGeometries(e,t,n){function onGeometryDispose(e){var o=e.target,i=a[o.id];for(var s in null!==i.index&&t.remove(i.index),i.attributes)t.remove(i.attributes[s]);o.removeEventListener('dispose',onGeometryDispose),delete a[o.id];var l=r[o.id];l&&(t.remove(l),delete r[o.id]),l=r[i.id],l&&(t.remove(l),delete r[i.id]),n.geometries--}var a={},r={};return{get:function get(e,t){var r=a[t.id];return r?r:(t.addEventListener('dispose',onGeometryDispose),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new BufferGeometry().setFromObject(e)),r=t._bufferGeometry),a[t.id]=r,n.geometries++,r)},update:function update(n){var a=n.index,r=n.attributes;for(var o in null!==a&&t.update(a,e.ELEMENT_ARRAY_BUFFER),r)t.update(r[o],e.ARRAY_BUFFER);var s=n.morphAttributes;for(var o in s)for(var d=s[o],c=0,i=d.length;c<i;c++)t.update(d[c],e.ARRAY_BUFFER)},getWireframeAttribute:function getWireframeAttribute(n){var o=r[n.id];if(o)return o;var s=[],d=n.index,p=n.attributes;if(null!==d)for(var u=d.array,m=0,i=u.length;m<i;m+=3){var l=u[m+0],a=u[m+1],g=u[m+2];s.push(l,a,a,g,g,l)}else for(var u=p.position.array,m=0,i=u.length/3-1;m<i;m+=3){var l=m+0,a=m+1,g=m+2;s.push(l,a,a,g,g,l)}return o=new(65535<arrayMax(s)?Uint32BufferAttribute:Uint16BufferAttribute)(s,1),t.update(o,e.ELEMENT_ARRAY_BUFFER),r[n.id]=o,o}}}function UniformsCache(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case'DirectionalLight':n={direction:new Vector3,color:new Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case'SpotLight':n={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case'PointLight':n={position:new Vector3,color:new Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break;case'HemisphereLight':n={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case'RectAreaLight':n={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};}return e[t.id]=n,n}}}function WebGLLights(){var e=new UniformsCache,t={hash:'',ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Vector3,a=new Matrix4,r=new Matrix4;return{setup:function setup(o,s,d){for(var c=0,p=0,u=0,m=0,h=0,f=0,E=0,_=0,C=d.matrixWorldInverse,y=0,i=o.length;y<i;y++){var l=o[y],A=l.color,b=l.intensity,x=l.distance,v=l.shadow&&l.shadow.map?l.shadow.map.texture:null;if(l.isAmbientLight)c+=A.r*b,p+=A.g*b,u+=A.b*b;else if(l.isDirectionalLight){var S=e.get(l);if(S.color.copy(l.color).multiplyScalar(l.intensity),S.direction.setFromMatrixPosition(l.matrixWorld),n.setFromMatrixPosition(l.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(C),S.shadow=l.castShadow,l.castShadow){var T=l.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize}t.directionalShadowMap[m]=v,t.directionalShadowMatrix[m]=l.shadow.matrix,t.directional[m]=S,m++}else if(l.isSpotLight){var S=e.get(l);if(S.position.setFromMatrixPosition(l.matrixWorld),S.position.applyMatrix4(C),S.color.copy(A).multiplyScalar(b),S.distance=x,S.direction.setFromMatrixPosition(l.matrixWorld),n.setFromMatrixPosition(l.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(C),S.coneCos=g(l.angle),S.penumbraCos=g(l.angle*(1-l.penumbra)),S.decay=0===l.distance?0:l.decay,S.shadow=l.castShadow,l.castShadow){var T=l.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize}t.spotShadowMap[f]=v,t.spotShadowMatrix[f]=l.shadow.matrix,t.spot[f]=S,f++}else if(l.isRectAreaLight){var S=e.get(l);S.color.copy(A).multiplyScalar(b/(l.width*l.height)),S.position.setFromMatrixPosition(l.matrixWorld),S.position.applyMatrix4(C),r.identity(),a.copy(l.matrixWorld),a.premultiply(C),r.extractRotation(a),S.halfWidth.set(0.5*l.width,0,0),S.halfHeight.set(0,0.5*l.height,0),S.halfWidth.applyMatrix4(r),S.halfHeight.applyMatrix4(r),t.rectArea[E]=S,E++}else if(l.isPointLight){var S=e.get(l);if(S.position.setFromMatrixPosition(l.matrixWorld),S.position.applyMatrix4(C),S.color.copy(l.color).multiplyScalar(l.intensity),S.distance=l.distance,S.decay=0===l.distance?0:l.decay,S.shadow=l.castShadow,l.castShadow){var T=l.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize,S.shadowCameraNear=T.camera.near,S.shadowCameraFar=T.camera.far}t.pointShadowMap[h]=v,t.pointShadowMatrix[h]=l.shadow.matrix,t.point[h]=S,h++}else if(l.isHemisphereLight){var S=e.get(l);S.direction.setFromMatrixPosition(l.matrixWorld),S.direction.transformDirection(C),S.direction.normalize(),S.skyColor.copy(l.color).multiplyScalar(b),S.groundColor.copy(l.groundColor).multiplyScalar(b),t.hemi[_]=S,_++}}t.ambient[0]=c,t.ambient[1]=p,t.ambient[2]=u,t.directional.length=m,t.spot.length=f,t.rectArea.length=E,t.point.length=h,t.hemi.length=_,t.hash=m+','+h+','+f+','+E+','+_+','+s.length},state:t}}function WebGLObjects(e,t){var n={};return{update:function update(a){var r=t.frame,o=a.geometry,i=e.get(a,o);return n[i.id]!==r&&(o.isGeometry&&i.updateFromObject(a),e.update(i),n[i.id]=r),i},clear:function clear(){n={}}}}function addLineNumbers(e){for(var t=e.split('\n'),n=0;n<t.length;n++)t[n]=n+1+': '+t[n];return t.join('\n')}function WebGLShader(e,t,n){var a=e.createShader(t);return e.shaderSource(a,n),e.compileShader(a),!1===e.getShaderParameter(a,e.COMPILE_STATUS)&&console.error('THREE.WebGLShader: Shader couldn\'t compile.'),''!==e.getShaderInfoLog(a)&&console.warn('THREE.WebGLShader: gl.getShaderInfoLog()',t===e.VERTEX_SHADER?'vertex':'fragment',e.getShaderInfoLog(a),addLineNumbers(n)),a}function getEncodingComponents(e){switch(e){case Lt:return['Linear','( value )'];case Mt:return['sRGB','( value )'];case Dt:return['RGBE','( value )'];case Nt:return['RGBM','( value, 7.0 )'];case Pt:return['RGBM','( value, 16.0 )'];case Ot:return['RGBD','( value, 256.0 )'];case Bt:return['Gamma','( value, float( GAMMA_FACTOR ) )'];default:throw new Error('unsupported encoding: '+e);}}function getTexelDecodingFunction(e,t){var n=getEncodingComponents(t);return'vec4 '+e+'( vec4 value ) { return '+n[0]+'ToLinear'+n[1]+'; }'}function getTexelEncodingFunction(e,t){var n=getEncodingComponents(t);return'vec4 '+e+'( vec4 value ) { return LinearTo'+n[0]+n[1]+'; }'}function getToneMappingFunction(e,t){var n;switch(t){case be:n='Linear';break;case xe:n='Reinhard';break;case ve:n='Uncharted2';break;case Se:n='OptimizedCineon';break;default:throw new Error('unsupported toneMapping: '+t);}return'vec3 '+e+'( vec3 color ) { return '+n+'ToneMapping( color ); }'}function generateExtensions(e,t,n){e=e||{};var a=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?'#extension GL_OES_standard_derivatives : enable':'',(e.fragDepth||t.logarithmicDepthBuffer)&&n.get('EXT_frag_depth')?'#extension GL_EXT_frag_depth : enable':'',e.drawBuffers&&n.get('WEBGL_draw_buffers')?'#extension GL_EXT_draw_buffers : require':'',(e.shaderTextureLOD||t.envMap)&&n.get('EXT_shader_texture_lod')?'#extension GL_EXT_shader_texture_lod : enable':''];return a.filter(filterEmptyLine).join('\n')}function generateDefines(e){var t=[];for(var n in e){var a=e[n];!1===a||t.push('#define '+n+' '+a)}return t.join('\n')}function fetchAttributeLocations(e,t){for(var a={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var o=e.getActiveAttrib(t,n),i=o.name;a[i]=e.getAttribLocation(t,i)}return a}function filterEmptyLine(e){return''!==e}function replaceLightNums(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function parseIncludes(e){function replace(e,t){var n=Qt[t];if(n===void 0)throw new Error('Can not resolve #include <'+t+'>');return parseIncludes(n)}var t=/^[ \t]*#include +<([\w\d.]+)>/gm;return e.replace(t,replace)}function unrollLoops(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(t,function replace(e,t,n,a){for(var r='',o=parseInt(t);o<parseInt(n);o++)r+=a.replace(/\[ i \]/g,'[ '+o+' ]');return r})}function WebGLProgram(e,t,n,a,r,o){var i=e.context,s=a.defines,l=r.vertexShader,d=r.fragmentShader,c='SHADOWMAP_TYPE_BASIC';o.shadowMapType===B?c='SHADOWMAP_TYPE_PCF':o.shadowMapType===D&&(c='SHADOWMAP_TYPE_PCF_SOFT');var p='ENVMAP_TYPE_CUBE',u='ENVMAP_MODE_REFLECTION',m='ENVMAP_BLENDING_MULTIPLY';if(o.envMap){switch(a.envMap.mapping){case Re:case Fe:p='ENVMAP_TYPE_CUBE';break;case Be:case De:p='ENVMAP_TYPE_CUBE_UV';break;case we:case Le:p='ENVMAP_TYPE_EQUIREC';break;case Me:p='ENVMAP_TYPE_SPHERE';}switch(a.envMap.mapping){case Fe:case Le:u='ENVMAP_MODE_REFRACTION';}switch(a.combine){case _e:m='ENVMAP_BLENDING_MULTIPLY';break;case Ce:m='ENVMAP_BLENDING_MIX';break;case ye:m='ENVMAP_BLENDING_ADD';}}var g=0<e.gammaFactor?e.gammaFactor:1,h=generateExtensions(a.extensions,o,t),f=generateDefines(s),E=i.createProgram(),_,C;a.isRawShaderMaterial?(_=[f,'\n'].filter(filterEmptyLine).join('\n'),C=[h,f,'\n'].filter(filterEmptyLine).join('\n')):(_=['precision '+o.precision+' float;','precision '+o.precision+' int;','#define SHADER_NAME '+r.name,f,o.supportsVertexTextures?'#define VERTEX_TEXTURES':'','#define GAMMA_FACTOR '+g,'#define MAX_BONES '+o.maxBones,o.useFog&&o.fog?'#define USE_FOG':'',o.useFog&&o.fogExp?'#define FOG_EXP2':'',o.map?'#define USE_MAP':'',o.envMap?'#define USE_ENVMAP':'',o.envMap?'#define '+u:'',o.lightMap?'#define USE_LIGHTMAP':'',o.aoMap?'#define USE_AOMAP':'',o.emissiveMap?'#define USE_EMISSIVEMAP':'',o.bumpMap?'#define USE_BUMPMAP':'',o.normalMap?'#define USE_NORMALMAP':'',o.displacementMap&&o.supportsVertexTextures?'#define USE_DISPLACEMENTMAP':'',o.specularMap?'#define USE_SPECULARMAP':'',o.roughnessMap?'#define USE_ROUGHNESSMAP':'',o.metalnessMap?'#define USE_METALNESSMAP':'',o.alphaMap?'#define USE_ALPHAMAP':'',o.vertexColors?'#define USE_COLOR':'',o.flatShading?'#define FLAT_SHADED':'',o.skinning?'#define USE_SKINNING':'',o.useVertexTexture?'#define BONE_TEXTURE':'',o.morphTargets?'#define USE_MORPHTARGETS':'',o.morphNormals&&!1===o.flatShading?'#define USE_MORPHNORMALS':'',o.doubleSided?'#define DOUBLE_SIDED':'',o.flipSided?'#define FLIP_SIDED':'','#define NUM_CLIPPING_PLANES '+o.numClippingPlanes,o.shadowMapEnabled?'#define USE_SHADOWMAP':'',o.shadowMapEnabled?'#define '+c:'',o.sizeAttenuation?'#define USE_SIZEATTENUATION':'',o.logarithmicDepthBuffer?'#define USE_LOGDEPTHBUF':'',o.logarithmicDepthBuffer&&t.get('EXT_frag_depth')?'#define USE_LOGDEPTHBUF_EXT':'','uniform mat4 modelMatrix;','uniform mat4 modelViewMatrix;','uniform mat4 projectionMatrix;','uniform mat4 viewMatrix;','uniform mat3 normalMatrix;','uniform vec3 cameraPosition;','attribute vec3 position;','attribute vec3 normal;','attribute vec2 uv;','#ifdef USE_COLOR','\tattribute vec3 color;','#endif','#ifdef USE_MORPHTARGETS','\tattribute vec3 morphTarget0;','\tattribute vec3 morphTarget1;','\tattribute vec3 morphTarget2;','\tattribute vec3 morphTarget3;','\t#ifdef USE_MORPHNORMALS','\t\tattribute vec3 morphNormal0;','\t\tattribute vec3 morphNormal1;','\t\tattribute vec3 morphNormal2;','\t\tattribute vec3 morphNormal3;','\t#else','\t\tattribute vec3 morphTarget4;','\t\tattribute vec3 morphTarget5;','\t\tattribute vec3 morphTarget6;','\t\tattribute vec3 morphTarget7;','\t#endif','#endif','#ifdef USE_SKINNING','\tattribute vec4 skinIndex;','\tattribute vec4 skinWeight;','#endif','\n'].filter(filterEmptyLine).join('\n'),C=[h,'precision '+o.precision+' float;','precision '+o.precision+' int;','#define SHADER_NAME '+r.name,f,o.alphaTest?'#define ALPHATEST '+o.alphaTest:'','#define GAMMA_FACTOR '+g,o.useFog&&o.fog?'#define USE_FOG':'',o.useFog&&o.fogExp?'#define FOG_EXP2':'',o.map?'#define USE_MAP':'',o.envMap?'#define USE_ENVMAP':'',o.envMap?'#define '+p:'',o.envMap?'#define '+u:'',o.envMap?'#define '+m:'',o.lightMap?'#define USE_LIGHTMAP':'',o.aoMap?'#define USE_AOMAP':'',o.emissiveMap?'#define USE_EMISSIVEMAP':'',o.bumpMap?'#define USE_BUMPMAP':'',o.normalMap?'#define USE_NORMALMAP':'',o.specularMap?'#define USE_SPECULARMAP':'',o.roughnessMap?'#define USE_ROUGHNESSMAP':'',o.metalnessMap?'#define USE_METALNESSMAP':'',o.alphaMap?'#define USE_ALPHAMAP':'',o.vertexColors?'#define USE_COLOR':'',o.gradientMap?'#define USE_GRADIENTMAP':'',o.flatShading?'#define FLAT_SHADED':'',o.doubleSided?'#define DOUBLE_SIDED':'',o.flipSided?'#define FLIP_SIDED':'','#define NUM_CLIPPING_PLANES '+o.numClippingPlanes,'#define UNION_CLIPPING_PLANES '+(o.numClippingPlanes-o.numClipIntersection),o.shadowMapEnabled?'#define USE_SHADOWMAP':'',o.shadowMapEnabled?'#define '+c:'',o.premultipliedAlpha?'#define PREMULTIPLIED_ALPHA':'',o.physicallyCorrectLights?'#define PHYSICALLY_CORRECT_LIGHTS':'',o.logarithmicDepthBuffer?'#define USE_LOGDEPTHBUF':'',o.logarithmicDepthBuffer&&t.get('EXT_frag_depth')?'#define USE_LOGDEPTHBUF_EXT':'',o.envMap&&t.get('EXT_shader_texture_lod')?'#define TEXTURE_LOD_EXT':'','uniform mat4 viewMatrix;','uniform vec3 cameraPosition;',o.toneMapping===Ae?'':'#define TONE_MAPPING',o.toneMapping===Ae?'':Qt.tonemapping_pars_fragment,o.toneMapping===Ae?'':getToneMappingFunction('toneMapping',o.toneMapping),o.dithering?'#define DITHERING':'',o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Qt.encodings_pars_fragment:'',o.mapEncoding?getTexelDecodingFunction('mapTexelToLinear',o.mapEncoding):'',o.envMapEncoding?getTexelDecodingFunction('envMapTexelToLinear',o.envMapEncoding):'',o.emissiveMapEncoding?getTexelDecodingFunction('emissiveMapTexelToLinear',o.emissiveMapEncoding):'',o.outputEncoding?getTexelEncodingFunction('linearToOutputTexel',o.outputEncoding):'',o.depthPacking?'#define DEPTH_PACKING '+a.depthPacking:'','\n'].filter(filterEmptyLine).join('\n')),l=parseIncludes(l),l=replaceLightNums(l,o),d=parseIncludes(d),d=replaceLightNums(d,o),a.isShaderMaterial||(l=unrollLoops(l),d=unrollLoops(d));var y=_+l,A=C+d,b=WebGLShader(i,i.VERTEX_SHADER,y),x=WebGLShader(i,i.FRAGMENT_SHADER,A);i.attachShader(E,b),i.attachShader(E,x),void 0===a.index0AttributeName?!0===o.morphTargets&&i.bindAttribLocation(E,0,'position'):i.bindAttribLocation(E,0,a.index0AttributeName),i.linkProgram(E);var v=i.getProgramInfoLog(E),S=i.getShaderInfoLog(b),T=i.getShaderInfoLog(x),R=!0,F=!0;!1===i.getProgramParameter(E,i.LINK_STATUS)?(R=!1,console.error('THREE.WebGLProgram: shader error: ',i.getError(),'gl.VALIDATE_STATUS',i.getProgramParameter(E,i.VALIDATE_STATUS),'gl.getProgramInfoLog',v,S,T)):''===v?(''===S||''===T)&&(F=!1):console.warn('THREE.WebGLProgram: gl.getProgramInfoLog()',v),F&&(this.diagnostics={runnable:R,material:a,programLog:v,vertexShader:{log:S,prefix:_},fragmentShader:{log:T,prefix:C}}),i.deleteShader(b),i.deleteShader(x);var w;this.getUniforms=function(){return void 0==w&&(w=new WebGLUniforms(i,E,e)),w};var L;return this.getAttributes=function(){return void 0==L&&(L=fetchAttributeLocations(i,E)),L},this.destroy=function(){i.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn('THREE.WebGLProgram: .uniforms is now .getUniforms().'),this.getUniforms()}},attributes:{get:function(){return console.warn('THREE.WebGLProgram: .attributes is now .getAttributes().'),this.getAttributes()}}}),this.id=an++,this.code=n,this.usedTimes=1,this.program=E,this.vertexShader=b,this.fragmentShader=x,this}function WebGLPrograms(e,t,n){function allocateBones(e){var t=e.skeleton,a=t.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,o=E((r-20)/4),i=f(o,a.length);return i<a.length?(console.warn('THREE.WebGLRenderer: Skeleton has '+a.length+' bones. This GPU supports '+i+'.'),0):i}function getTextureEncodingFromMap(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn('THREE.WebGLPrograms.getTextureEncodingFromMap: don\'t use render targets as textures. Use their .texture property instead.'),n=e.texture.encoding):n=Lt,n===Lt&&t&&(n=Bt),n}var a=[],r={MeshDepthMaterial:'depth',MeshDistanceMaterial:'distanceRGBA',MeshNormalMaterial:'normal',MeshBasicMaterial:'basic',MeshLambertMaterial:'lambert',MeshPhongMaterial:'phong',MeshToonMaterial:'phong',MeshStandardMaterial:'physical',MeshPhysicalMaterial:'physical',LineBasicMaterial:'basic',LineDashedMaterial:'dashed',PointsMaterial:'points',ShadowMaterial:'shadow'},o=['precision','supportsVertexTextures','map','mapEncoding','envMap','envMapMode','envMapEncoding','lightMap','aoMap','emissiveMap','emissiveMapEncoding','bumpMap','normalMap','displacementMap','specularMap','roughnessMap','metalnessMap','gradientMap','alphaMap','combine','vertexColors','fog','useFog','fogExp','flatShading','sizeAttenuation','logarithmicDepthBuffer','skinning','maxBones','useVertexTexture','morphTargets','morphNormals','maxMorphTargets','maxMorphNormals','premultipliedAlpha','numDirLights','numPointLights','numSpotLights','numHemiLights','numRectAreaLights','shadowMapEnabled','shadowMapType','toneMapping','physicallyCorrectLights','alphaTest','doubleSided','flipSided','numClippingPlanes','numClipIntersection','depthPacking','dithering'];this.getParameters=function(t,a,o,i,s,l,d){var c=r[t.type],p=d.isSkinnedMesh?allocateBones(d):0,u=n.precision;null!==t.precision&&(u=n.getMaxPrecision(t.precision),u!==t.precision&&console.warn('THREE.WebGLProgram.getParameters:',t.precision,'not supported, using',u,'instead.'));var m=e.getRenderTarget(),g={shaderID:c,precision:u,supportsVertexTextures:n.vertexTextures,outputEncoding:getTextureEncodingFromMap(m?m.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:getTextureEncodingFromMap(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:getTextureEncodingFromMap(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Be||t.envMap.mapping===De),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!i,useFog:t.fog,fogExp:i&&i.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&0<p,maxBones:p,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numClippingPlanes:s,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&d.receiveShadow&&0<o.length,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===P,flipSided:t.side===N,depthPacking:t.depthPacking!==void 0&&t.depthPacking};return g},this.getProgramCode=function(t,n){var a=[];if(n.shaderID?a.push(n.shaderID):(a.push(t.fragmentShader),a.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)a.push(r),a.push(t.defines[r]);for(var s=0;s<o.length;s++)a.push(n[o[s]]);return a.push(t.onBeforeCompile.toString()),a.push(e.gammaOutput),a.join()},this.acquireProgram=function(n,r,o,i){for(var s=0,l=a.length,d,c;s<l;s++)if(c=a[s],c.code===i){d=c,++d.usedTimes;break}return void 0===d&&(d=new WebGLProgram(e,t,i,n,r,o),a.push(d)),d},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=a.indexOf(e);a[t]=a[a.length-1],a.pop(),e.destroy()}},this.programs=a}function WebGLTextures(e,t,n,a,r,o,s){function clampToMaxSize(e,t){if(e.width>t||e.height>t){var n=t/y(e.width,e.height),a=document.createElementNS('http://www.w3.org/1999/xhtml','canvas');a.width=E(e.width*n),a.height=E(e.height*n);var r=a.getContext('2d');return r.drawImage(e,0,0,e.width,e.height,0,0,a.width,a.height),console.warn('THREE.WebGLRenderer: image is too big ('+e.width+'x'+e.height+'). Resized to '+a.width+'x'+a.height,e),a}return e}function isPowerOfTwo(e){return kt.isPowerOfTwo(e.width)&&kt.isPowerOfTwo(e.height)}function makePowerOfTwo(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS('http://www.w3.org/1999/xhtml','canvas');t.width=kt.nearestPowerOfTwo(e.width),t.height=kt.nearestPowerOfTwo(e.height);var n=t.getContext('2d');return n.drawImage(e,0,0,t.width,t.height),console.warn('THREE.WebGLRenderer: image is not power of two ('+e.width+'x'+e.height+'). Resized to '+t.width+'x'+t.height,e),t}return e}function textureNeedsPowerOfTwo(e){return e.wrapS!==Ne||e.wrapT!==Ne||e.minFilter!==Oe&&e.minFilter!==ke}function textureNeedsGenerateMipmaps(e,t){return e.generateMipmaps&&t&&e.minFilter!==Oe&&e.minFilter!==ke}function filterFallback(t){return t===Oe||t===Ue||t===Ge?e.NEAREST:e.LINEAR}function onTextureDispose(e){var t=e.target;t.removeEventListener('dispose',onTextureDispose),deallocateTexture(t),s.textures--}function onRenderTargetDispose(e){var t=e.target;t.removeEventListener('dispose',onRenderTargetDispose),deallocateRenderTarget(t),s.textures--}function deallocateTexture(t){var n=a.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(n.__webglInit===void 0)return;e.deleteTexture(n.__webglTexture)}a.remove(t)}function deallocateRenderTarget(t){var n=a.get(t),r=a.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;6>o;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);a.remove(t.texture),a.remove(t)}}function setTexture2D(t,r){var o=a.get(t);if(0<t.version&&o.__version!==t.version){var i=t.image;if(i===void 0)console.warn('THREE.WebGLRenderer: Texture marked for update but image is undefined',t);else if(!1===i.complete)console.warn('THREE.WebGLRenderer: Texture marked for update but image is incomplete',t);else return void uploadTexture(o,t,r)}n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function setTextureParameters(n,i,s){var l;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(i.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(i.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(i.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(i.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(i.wrapS!==Ne||i.wrapT!==Ne)&&console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.',i),e.texParameteri(n,e.TEXTURE_MAG_FILTER,filterFallback(i.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,filterFallback(i.minFilter)),i.minFilter!==Oe&&i.minFilter!==ke&&console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.',i)),l=t.get('EXT_texture_filter_anisotropic'),l){if(i.type===Ke&&null===t.get('OES_texture_float_linear'))return;if(i.type===qe&&null===t.get('OES_texture_half_float_linear'))return;(1<i.anisotropy||a.get(i).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,f(i.anisotropy,r.getMaxAnisotropy())),a.get(i).__currentAnisotropy=i.anisotropy)}}function uploadTexture(t,a,l){t.__webglInit===void 0&&(t.__webglInit=!0,a.addEventListener('dispose',onTextureDispose),t.__webglTexture=e.createTexture(),s.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment);var d=clampToMaxSize(a.image,r.maxTextureSize);textureNeedsPowerOfTwo(a)&&!1===isPowerOfTwo(d)&&(d=makePowerOfTwo(d));var c=isPowerOfTwo(d),p=o.convert(a.format),u=o.convert(a.type);setTextureParameters(e.TEXTURE_2D,a,c);var m=a.mipmaps,g;if(a.isDepthTexture){var h=e.DEPTH_COMPONENT;if(a.type===Ke){if(!i)throw new Error('Float Depth Texture only supported in WebGL2.0');h=e.DEPTH_COMPONENT32F}else i&&(h=e.DEPTH_COMPONENT16);a.format===st&&h===e.DEPTH_COMPONENT&&a.type!==Xe&&a.type!==Ye&&(console.warn('THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.'),a.type=Xe,u=o.convert(a.type)),a.format===lt&&(h=e.DEPTH_STENCIL,a.type!==et&&(console.warn('THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.'),a.type=et,u=o.convert(a.type))),n.texImage2D(e.TEXTURE_2D,0,h,d.width,d.height,0,p,u,null)}else if(a.isDataTexture){if(0<m.length&&c){for(var f=0,E=m.length;f<E;f++)g=m[f],n.texImage2D(e.TEXTURE_2D,f,p,g.width,g.height,0,p,u,g.data);a.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,p,d.width,d.height,0,p,u,d.data);}else if(a.isCompressedTexture)for(var f=0,E=m.length;f<E;f++)g=m[f],a.format!==at&&a.format!==nt?-1<n.getCompressedTextureFormats().indexOf(p)?n.compressedTexImage2D(e.TEXTURE_2D,f,p,g.width,g.height,0,g.data):console.warn('THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()'):n.texImage2D(e.TEXTURE_2D,f,p,g.width,g.height,0,p,u,g.data);else if(0<m.length&&c){for(var f=0,E=m.length;f<E;f++)g=m[f],n.texImage2D(e.TEXTURE_2D,f,p,p,u,g);a.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,p,p,u,d);textureNeedsGenerateMipmaps(a,c)&&e.generateMipmap(e.TEXTURE_2D),t.__version=a.version,a.onUpdate&&a.onUpdate(a)}function setupFrameBufferTexture(t,r,i,s){var l=o.convert(r.texture.format),d=o.convert(r.texture.type);n.texImage2D(s,0,l,r.width,r.height,0,l,d,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,i,s,a.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function setupRenderBufferStorage(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function setupDepthTexture(t,n){var r=n&&n.isWebGLRenderTargetCube;if(r)throw new Error('Depth Texture with cube render targets is not supported');if(e.bindFramebuffer(e.FRAMEBUFFER,t),!(n.depthTexture&&n.depthTexture.isDepthTexture))throw new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');a.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),setTexture2D(n.depthTexture,0);var o=a.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===st)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else if(n.depthTexture.format===lt)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0);else throw new Error('Unknown depthTexture format')}function setupDepthRenderbuffer(t){var n=a.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error('target.depthTexture not supported in Cube render targets');setupDepthTexture(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;6>o;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),setupRenderBufferStorage(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),setupRenderBufferStorage(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}var i='undefined'!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=setTexture2D,this.setTextureCube=function setTextureCube(t,l){var d=a.get(t);if(6===t.image.length)if(0<t.version&&d.__version!==t.version){d.__image__webglTextureCube||(t.addEventListener('dispose',onTextureDispose),d.__image__webglTextureCube=e.createTexture(),s.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,d.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var c=t&&t.isCompressedTexture,p=t.image[0]&&t.image[0].isDataTexture,u=[],m=0;6>m;m++)u[m]=c||p?p?t.image[m].image:t.image[m]:clampToMaxSize(t.image[m],r.maxCubemapSize);var i=u[0],g=isPowerOfTwo(i),h=o.convert(t.format),f=o.convert(t.type);setTextureParameters(e.TEXTURE_CUBE_MAP,t,g);for(var m=0;6>m;m++)if(!c)p?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,h,u[m].width,u[m].height,0,h,f,u[m].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,h,h,f,u[m]);else for(var E=u[m].mipmaps,_=0,C=E.length,y;_<C;_++)y=E[_],t.format!==at&&t.format!==nt?-1<n.getCompressedTextureFormats().indexOf(h)?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,_,h,y.width,y.height,0,y.data):console.warn('THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()'):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,_,h,y.width,y.height,0,h,f,y.data);textureNeedsGenerateMipmaps(t,g)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),d.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,d.__image__webglTextureCube)},this.setTextureCubeDynamic=function setTextureCubeDynamic(t,r){n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,a.get(t).__webglTexture)},this.setupRenderTarget=function setupRenderTarget(t){var r=a.get(t),o=a.get(t.texture);t.addEventListener('dispose',onRenderTargetDispose),o.__webglTexture=e.createTexture(),s.textures++;var l=!0===t.isWebGLRenderTargetCube,d=isPowerOfTwo(t);if(l){r.__webglFramebuffer=[];for(var c=0;6>c;c++)r.__webglFramebuffer[c]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(l){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),setTextureParameters(e.TEXTURE_CUBE_MAP,t.texture,d);for(var c=0;6>c;c++)setupFrameBufferTexture(r.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);textureNeedsGenerateMipmaps(t.texture,d)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),setTextureParameters(e.TEXTURE_2D,t.texture,d),setupFrameBufferTexture(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),textureNeedsGenerateMipmaps(t.texture,d)&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&setupDepthRenderbuffer(t)},this.updateRenderTargetMipmap=function updateRenderTargetMipmap(t){var r=t.texture,o=isPowerOfTwo(t);if(textureNeedsGenerateMipmaps(r,o)){var i=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=a.get(r).__webglTexture;n.bindTexture(i,s),e.generateMipmap(i),n.bindTexture(i,null)}}}function WebGLProperties(){var e={};return{get:function get(t){var n=t.uuid,a=e[n];return void 0===a&&(a={},e[n]=a),a},remove:function remove(t){delete e[t.uuid]},clear:function clear(){e={}}}}function WebGLState(e,t,n){function createTexture(t,n,a){var r=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<a;s++)e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return o}function enable(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function disable(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}function setBlending(t,a,r,o,i,s,l,d){t===H?disable(e.BLEND):enable(e.BLEND),t===j?(i=i||a,s=s||r,l=l||o,(a!==g||i!==E)&&(e.blendEquationSeparate(n.convert(a),n.convert(i)),g=a,E=i),(r!==h||o!==f||s!==_||l!==C)&&(e.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(s),n.convert(l)),h=r,f=o,_=s,C=l)):((t!==m||d!==y)&&(t===$?d?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===z?d?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===X?d?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):d?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))),g=null,h=null,f=null,E=null,_=null,C=null),m=t,y=d}function setFlipSided(t){A!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),A=t)}function setCullFace(t){t===v?disable(e.CULL_FACE):(enable(e.CULL_FACE),t!==b&&(t===T?e.cullFace(e.BACK):t===R?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))),b=t}function setPolygonOffset(t,n,a){t?(enable(e.POLYGON_OFFSET_FILL),(S!==n||F!==a)&&(e.polygonOffset(n,a),S=n,F=a)):disable(e.POLYGON_OFFSET_FILL)}function activeTexture(t){void 0===t&&(t=e.TEXTURE0+w-1),B!==t&&(e.activeTexture(t),B=t)}function scissor(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))}function viewport(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))}var a=new function ColorBuffer(){var t=!1,n=new Vector4,a=null,o=new Vector4(0,0,0,0);return{setMask:function(n){a===n||t||(e.colorMask(n,n,n,n),a=n)},setLocked:function(e){t=e},setClear:function(t,r,i,s,a){!0===a&&(t*=s,r*=s,i*=s),n.set(t,r,i,s),!1===o.equals(n)&&(e.clearColor(t,r,i,s),o.copy(n))},reset:function(){t=!1,a=null,o.set(-1,0,0,0)}}},r=new function DepthBuffer(){var t=!1,n=null,a=null,r=null;return{setTest:function(t){t?enable(e.DEPTH_TEST):disable(e.DEPTH_TEST)},setMask:function(a){n===a||t||(e.depthMask(a),n=a)},setFunc:function(t){a!==t&&(t?t===ce?e.depthFunc(e.NEVER):t===pe?e.depthFunc(e.ALWAYS):t===ue?e.depthFunc(e.LESS):t===me?e.depthFunc(e.LEQUAL):t===ge?e.depthFunc(e.EQUAL):t===he?e.depthFunc(e.GEQUAL):t===fe?e.depthFunc(e.GREATER):t===Ee?e.depthFunc(e.NOTEQUAL):e.depthFunc(e.LEQUAL):e.depthFunc(e.LEQUAL),a=t)},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,a=null,r=null}}},o=new function StencilBuffer(){var t=!1,n=null,a=null,r=null,o=null,i=null,s=null,l=null,d=null;return{setTest:function(t){t?enable(e.STENCIL_TEST):disable(e.STENCIL_TEST)},setMask:function(a){n===a||t||(e.stencilMask(a),n=a)},setFunc:function(t,n,i){(a!==t||r!==n||o!==i)&&(e.stencilFunc(t,n,i),a=t,r=n,o=i)},setOp:function(t,n,a){(i!==t||s!==n||l!==a)&&(e.stencilOp(t,n,a),i=t,s=n,l=a)},setLocked:function(e){t=e},setClear:function(t){d!==t&&(e.clearStencil(t),d=t)},reset:function(){t=!1,n=null,a=null,r=null,o=null,i=null,s=null,l=null,d=null}}},i=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(i),d=new Uint8Array(i),l=new Uint8Array(i),c={},p=null,u=null,m=null,g=null,h=null,f=null,E=null,_=null,C=null,y=!1,A=null,b=null,x=null,S=null,F=null,w=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),L=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),M=1<=parseFloat(L),B=null,D={},I=new Vector4,O=new Vector4,U={};return U[e.TEXTURE_2D]=createTexture(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=createTexture(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),a.setClear(0,0,0,1),r.setClear(1),o.setClear(0),enable(e.DEPTH_TEST),r.setFunc(me),setFlipSided(!1),setCullFace(T),enable(e.CULL_FACE),enable(e.BLEND),setBlending(V),{buffers:{color:a,depth:r,stencil:o},initAttributes:function initAttributes(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function enableAttribute(n){if(s[n]=1,0===d[n]&&(e.enableVertexAttribArray(n),d[n]=1),0!==l[n]){var a=t.get('ANGLE_instanced_arrays');a.vertexAttribDivisorANGLE(n,0),l[n]=0}},enableAttributeAndDivisor:function enableAttributeAndDivisor(n,a){if(s[n]=1,0===d[n]&&(e.enableVertexAttribArray(n),d[n]=1),l[n]!==a){var r=t.get('ANGLE_instanced_arrays');r.vertexAttribDivisorANGLE(n,a),l[n]=a}},disableUnusedAttributes:function disableUnusedAttributes(){for(var t=0,n=d.length;t!==n;++t)d[t]!==s[t]&&(e.disableVertexAttribArray(t),d[t]=0)},enable:enable,disable:disable,getCompressedTextureFormats:function getCompressedTextureFormats(){if(null==p&&(p=[],t.get('WEBGL_compressed_texture_pvrtc')||t.get('WEBGL_compressed_texture_s3tc')||t.get('WEBGL_compressed_texture_etc1')))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),a=0;a<n.length;a++)p.push(n[a]);return p},useProgram:function useProgram(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:setBlending,setMaterial:function setMaterial(t){t.side===P?disable(e.CULL_FACE):enable(e.CULL_FACE),setFlipSided(t.side===N),!0===t.transparent?setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):setBlending(H),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),a.setMask(t.colorWrite),setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:function setLineWidth(t){t!==x&&(M&&e.lineWidth(t),x=t)},setPolygonOffset:setPolygonOffset,setScissorTest:function setScissorTest(t){t?enable(e.SCISSOR_TEST):disable(e.SCISSOR_TEST)},activeTexture:activeTexture,bindTexture:function bindTexture(t,n){null===B&&activeTexture();var a=D[B];void 0===a&&(a={type:void 0,texture:void 0},D[B]=a),(a.type!==t||a.texture!==n)&&(e.bindTexture(t,n||U[t]),a.type=t,a.texture=n)},compressedTexImage2D:function compressedTexImage2D(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error('THREE.WebGLState:',e)}},texImage2D:function texImage2D(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error('THREE.WebGLState:',e)}},scissor:scissor,viewport:viewport,reset:function reset(){for(var t=0;t<d.length;t++)1===d[t]&&(e.disableVertexAttribArray(t),d[t]=0);c={},p=null,B=null,D={},u=null,m=null,A=null,b=null,a.reset(),r.reset(),o.reset()}}}function WebGLCapabilities(e,t,n){function getMaxPrecision(t){if('highp'===t){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return'highp';t='mediump'}return'mediump'===t&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?'mediump':'lowp'}var a=n.precision===void 0?'highp':n.precision,r=getMaxPrecision(a),o;r!==a&&(console.warn('THREE.WebGLRenderer:',a,'not supported, using',r,'instead.'),a=r);var i=!0===n.logarithmicDepthBuffer&&!!t.get('EXT_frag_depth'),s=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),c=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),u=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),h=0<l,f=!!t.get('OES_texture_float');return{getMaxAnisotropy:function getMaxAnisotropy(){if(void 0!=o)return o;var n=t.get('EXT_texture_filter_anisotropic');return o=null===n?0:e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT),o},getMaxPrecision:getMaxPrecision,precision:a,logarithmicDepthBuffer:i,maxTextures:s,maxVertexTextures:l,maxTextureSize:d,maxCubemapSize:c,maxAttributes:p,maxVertexUniforms:u,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:h,floatFragmentTextures:f,floatVertexTextures:h&&f}}function ArrayCamera(e){PerspectiveCamera.call(this),this.cameras=e||[]}function WebVRManager(e){function onVRDisplayPresentChange(){if(null!=n&&n.isPresenting){var a=n.getEyeParameters('left'),r=a.renderWidth,o=a.renderHeight;p=e.getPixelRatio(),c=e.getSize(),e.setDrawingBufferSize(2*r,o,1)}else t.enabled&&e.setDrawingBufferSize(c.width,c.height,p)}var t=this,n=null,a=null;'VRFrameData'in window&&(a=new window.VRFrameData);var r=new Matrix4,o=new Matrix4,i=new Matrix4,s=new PerspectiveCamera;s.bounds=new Vector4(0,0,0.5,1),s.layers.enable(1);var l=new PerspectiveCamera;l.bounds=new Vector4(0.5,0,0.5,1),l.layers.enable(2);var d=new ArrayCamera([s,l]);d.layers.enable(1),d.layers.enable(2);var c,p;window.addEventListener('vrdisplaypresentchange',onVRDisplayPresentChange,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return n},this.setDevice=function(e){e!==void 0&&(n=e)},this.getCamera=function(e){if(null===n)return e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(a);var t=a.pose;null===t.position?e.position.set(0,0,0):e.position.fromArray(t.position),null!==t.orientation&&e.quaternion.fromArray(t.orientation),e.updateMatrixWorld();var c=n.stageParameters;if(this.standing&&c&&(o.fromArray(c.sittingToStandingTransform),i.getInverse(o),e.matrixWorld.multiply(o),e.matrixWorldInverse.multiply(i)),!1===n.isPresenting)return e;s.near=e.near,l.near=e.near,s.far=e.far,l.far=e.far,d.matrixWorld.copy(e.matrixWorld),d.matrixWorldInverse.copy(e.matrixWorldInverse),s.matrixWorldInverse.fromArray(a.leftViewMatrix),l.matrixWorldInverse.fromArray(a.rightViewMatrix),this.standing&&c&&(s.matrixWorldInverse.multiply(i),l.matrixWorldInverse.multiply(i));var p=e.parent;null!==p&&(r.getInverse(p.matrixWorld),s.matrixWorldInverse.multiply(r),l.matrixWorldInverse.multiply(r)),s.matrixWorld.getInverse(s.matrixWorldInverse),l.matrixWorld.getInverse(l.matrixWorldInverse),s.projectionMatrix.fromArray(a.leftProjectionMatrix),l.projectionMatrix.fromArray(a.rightProjectionMatrix),d.projectionMatrix.copy(s.projectionMatrix);var u=n.getLayers();if(u.length){var m=u[0];null!==m.leftBounds&&4===m.leftBounds.length&&s.bounds.fromArray(m.leftBounds),null!==m.rightBounds&&4===m.rightBounds.length&&l.bounds.fromArray(m.rightBounds)}return d},this.getStandingMatrix=function(){return o},this.submitFrame=function(){n&&n.isPresenting&&n.submitFrame()},this.dispose=function(){window.removeEventListener('vrdisplaypresentchange',onVRDisplayPresentChange)}}function WebGLExtensions(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var a;return a='WEBGL_depth_texture'===n?e.getExtension('WEBGL_depth_texture')||e.getExtension('MOZ_WEBGL_depth_texture')||e.getExtension('WEBKIT_WEBGL_depth_texture'):'EXT_texture_filter_anisotropic'===n?e.getExtension('EXT_texture_filter_anisotropic')||e.getExtension('MOZ_EXT_texture_filter_anisotropic')||e.getExtension('WEBKIT_EXT_texture_filter_anisotropic'):'WEBGL_compressed_texture_s3tc'===n?e.getExtension('WEBGL_compressed_texture_s3tc')||e.getExtension('MOZ_WEBGL_compressed_texture_s3tc')||e.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc'):'WEBGL_compressed_texture_pvrtc'===n?e.getExtension('WEBGL_compressed_texture_pvrtc')||e.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc'):'WEBGL_compressed_texture_etc1'===n?e.getExtension('WEBGL_compressed_texture_etc1'):e.getExtension(n),null===a&&console.warn('THREE.WebGLRenderer: '+n+' extension not supported.'),t[n]=a,a}}}function WebGLClipping(){function resetGlobalState(){l.value!==t&&(l.value=t,l.needsUpdate=0<n),e.numPlanes=n,e.numIntersection=0}function projectPlanes(t,n,a,r){var d=null===t?0:t.length,c=null;if(0!==d){if(c=l.value,!0!==r||null===c){var p=a+4*d,u=n.matrixWorldInverse;s.getNormalMatrix(u),(null===c||c.length<p)&&(c=new Float32Array(p));for(var m=0,i=a;m!==d;++m,i+=4)o.copy(t[m]).applyMatrix4(u,s),o.normal.toArray(c,i),c[i+3]=o.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=d,c}var e=this,t=null,n=0,a=!1,r=!1,o=new Plane,s=new Matrix3,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,o){var i=0!==e.length||r||0!=n||a;return a=r,t=projectPlanes(e,o,0),n=e.length,i},this.beginShadows=function(){r=!0,projectPlanes(null)},this.endShadows=function(){r=!1,resetGlobalState()},this.setState=function(e,o,s,d,c,p){if(!a||null===e||0===e.length||r&&!s)r?projectPlanes(null):resetGlobalState();else{var u=r?0:n,m=4*u,g=c.clippingState||null;l.value=g,g=projectPlanes(e,d,m,p);for(var h=0;h!==m;++h)g[h]=t[h];c.clippingState=g,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=u}}}function WebGLUtils(e,t){return{convert:function convert(n){var a;if(n===Ie)return e.REPEAT;if(n===Ne)return e.CLAMP_TO_EDGE;if(n===Pe)return e.MIRRORED_REPEAT;if(n===Oe)return e.NEAREST;if(n===Ue)return e.NEAREST_MIPMAP_NEAREST;if(n===Ge)return e.NEAREST_MIPMAP_LINEAR;if(n===ke)return e.LINEAR;if(n===We)return e.LINEAR_MIPMAP_NEAREST;if(n===He)return e.LINEAR_MIPMAP_LINEAR;if(n===Ve)return e.UNSIGNED_BYTE;if(n===Ze)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Qe)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Je)return e.UNSIGNED_SHORT_5_6_5;if(n===$e)return e.BYTE;if(n===ze)return e.SHORT;if(n===Xe)return e.UNSIGNED_SHORT;if(n===je)return e.INT;if(n===Ye)return e.UNSIGNED_INT;if(n===Ke)return e.FLOAT;if(n===qe&&(a=t.get('OES_texture_half_float'),null!==a))return a.HALF_FLOAT_OES;if(n===tt)return e.ALPHA;if(n===nt)return e.RGB;if(n===at)return e.RGBA;if(n===rt)return e.LUMINANCE;if(n===ot)return e.LUMINANCE_ALPHA;if(n===st)return e.DEPTH_COMPONENT;if(n===lt)return e.DEPTH_STENCIL;if(n===Y)return e.FUNC_ADD;if(n===K)return e.FUNC_SUBTRACT;if(n===q)return e.FUNC_REVERSE_SUBTRACT;if(n===J)return e.ZERO;if(n===ee)return e.ONE;if(n===te)return e.SRC_COLOR;if(n===ne)return e.ONE_MINUS_SRC_COLOR;if(n===ae)return e.SRC_ALPHA;if(n===re)return e.ONE_MINUS_SRC_ALPHA;if(n===oe)return e.DST_ALPHA;if(n===ie)return e.ONE_MINUS_DST_ALPHA;if(n===se)return e.DST_COLOR;if(n===le)return e.ONE_MINUS_DST_COLOR;if(n===de)return e.SRC_ALPHA_SATURATE;if((n===dt||n===ct||n===pt||n===ut)&&(a=t.get('WEBGL_compressed_texture_s3tc'),null!==a)){if(n===dt)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ct)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===pt)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ut)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===mt||n===gt||n===ht||n===ft)&&(a=t.get('WEBGL_compressed_texture_pvrtc'),null!==a)){if(n===mt)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===gt)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ht)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ft)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Et&&(a=t.get('WEBGL_compressed_texture_etc1'),null!==a))return a.COMPRESSED_RGB_ETC1_WEBGL;if((n===Z||n===Q)&&(a=t.get('EXT_blend_minmax'),null!==a)){if(n===Z)return a.MIN_EXT;if(n===Q)return a.MAX_EXT}return n===et&&(a=t.get('WEBGL_depth_texture'),null!==a)?a.UNSIGNED_INT_24_8_WEBGL:0}}}function WebGLRenderer(e){function getTargetPixelRatio(){return null==x?P:1}function initGLContext(){Z=new WebGLExtensions(K),Z.get('WEBGL_depth_texture'),Z.get('OES_texture_float'),Z.get('OES_texture_float_linear'),Z.get('OES_texture_half_float'),Z.get('OES_texture_half_float_linear'),Z.get('OES_standard_derivatives'),Z.get('ANGLE_instanced_arrays'),Z.get('OES_element_index_uint')&&(BufferGeometry.MaxIndex=4294967296),ge=new WebGLUtils(K,Z),Q=new WebGLCapabilities(K,Z,e),J=new WebGLState(K,Z,ge),J.scissor(M.copy(U).multiplyScalar(P)),J.viewport(L.copy(O).multiplyScalar(P)),ee=new WebGLProperties,te=new WebGLTextures(K,Z,J,ee,Q,ge,j),ne=new WebGLAttributes(K),ae=new WebGLGeometries(K,ne,j),re=new WebGLObjects(ae,Y),de=new WebGLMorphtargets(K),ie=new WebGLPrograms(C,Z,Q),oe=new WebGLLights,se=new WebGLRenderLists,le=new WebGLBackground(C,J,ae,d),ce=new WebGLBufferRenderer(K,Z,Y),pe=new WebGLIndexedBufferRenderer(K,Z,Y),ue=new WebGLFlareRenderer(C,K,J,te,Q),me=new WebGLSpriteRenderer(C,K,J,te,Q),C.info.programs=ie.programs,C.context=K,C.capabilities=Q,C.extensions=Z,C.properties=ee,C.renderLists=se,C.state=J}function onContextLost(e){e.preventDefault(),console.log('THREE.WebGLRenderer: Context Lost.'),A=!0}function onContextRestore(){console.log('THREE.WebGLRenderer: Context Restored.'),A=!1,initGLContext()}function onMaterialDispose(e){var t=e.target;t.removeEventListener('dispose',onMaterialDispose),deallocateMaterial(t)}function deallocateMaterial(e){releaseMaterialProgramReference(e),ee.remove(e)}function releaseMaterialProgramReference(e){var t=ee.get(e).program;e.program=void 0,t!==void 0&&ie.releaseProgram(t)}function renderObjectImmediate(e,t,n){e.render(function(e){C.renderBufferImmediate(e,t,n)})}function setupVertexAttributes(e,t,n,a){if(n&&n.isInstancedBufferGeometry&&null===Z.get('ANGLE_instanced_arrays'))return void console.error('THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');a===void 0&&(a=0),J.initAttributes();var r=n.attributes,o=t.getAttributes(),i=e.defaultAttributeValues;for(var s in o){var l=o[s];if(0<=l){var d=r[s];if(d!==void 0){var c=d.normalized,p=d.itemSize,u=ne.get(d);if(u===void 0)continue;var m=u.buffer,g=u.type,h=u.bytesPerElement;if(d.isInterleavedBufferAttribute){var f=d.data,E=f.stride,_=d.offset;f&&f.isInstancedInterleavedBuffer?(J.enableAttributeAndDivisor(l,f.meshPerAttribute),n.maxInstancedCount===void 0&&(n.maxInstancedCount=f.meshPerAttribute*f.count)):J.enableAttribute(l),K.bindBuffer(K.ARRAY_BUFFER,m),K.vertexAttribPointer(l,p,g,c,E*h,(a*E+_)*h)}else d.isInstancedBufferAttribute?(J.enableAttributeAndDivisor(l,d.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=d.meshPerAttribute*d.count)):J.enableAttribute(l),K.bindBuffer(K.ARRAY_BUFFER,m),K.vertexAttribPointer(l,p,g,c,0,a*p*h)}else if(i!==void 0){var C=i[s];if(C!==void 0)switch(C.length){case 2:K.vertexAttrib2fv(l,C);break;case 3:K.vertexAttrib3fv(l,C);break;case 4:K.vertexAttrib4fv(l,C);break;default:K.vertexAttrib1fv(l,C);}}}}J.disableUnusedAttributes()}function start(){Ee||((he.getDevice()||window).requestAnimationFrame(loop),Ee=!0)}function loop(e){null!=_e&&_e(e),(he.getDevice()||window).requestAnimationFrame(loop)}function projectObject(e,t,n){if(e.visible){var a=e.layers.test(t.layers);if(a)if(e.isLight)m.push(e),e.castShadow&&g.push(e);else if(e.isSprite)(!e.frustumCulled||W.intersectsSprite(e))&&E.push(e);else if(e.isLensFlare)_.push(e);else if(e.isImmediateRenderObject)n&&X.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z),h.push(e,null,e.material,X.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||W.intersectsObject(e))){n&&X.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);var r=re.update(e),o=e.material;if(Array.isArray(o))for(var s=r.groups,d=0,i=s.length;d<i;d++){var l=s[d],c=o[l.materialIndex];c&&c.visible&&h.push(e,r,c,X.z,l)}else o.visible&&h.push(e,r,o,X.z,null)}for(var p=e.children,d=0,i=p.length;d<i;d++)projectObject(p[d],t,n)}}function renderObjects(e,t,n,a){for(var r=0,o=e.length;r<o;r++){var i=e[r],s=i.object,l=i.geometry,d=a===void 0?i.material:a,c=i.group;if(n.isArrayCamera){F=n;for(var p=n.cameras,u=0,m=p.length,g;u<m;u++)if(g=p[u],s.layers.test(g.layers)){var h=g.bounds,f=h.x*I,E=h.y*N,_=h.z*I,C=h.w*N;J.viewport(L.set(f,E,_,C).multiplyScalar(P)),renderObject(s,t,g,l,d,c)}}else F=null,renderObject(s,t,n,l,d,c)}}function renderObject(e,t,n,a,r,o){if(e.onBeforeRender(C,t,n,a,r,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){J.setMaterial(r);var i=setProgram(n,t.fog,r,e);T='',renderObjectImmediate(e,i,r)}else C.renderBufferDirect(n,t.fog,a,r,e,o);e.onAfterRender(C,t,n,a,r,o)}function initMaterial(e,t,n){var a=ee.get(e),r=ie.getParameters(e,oe.state,g,t,H.numPlanes,H.numIntersection,n),o=ie.getProgramCode(e,r),s=a.program,l=!0;if(s===void 0)e.addEventListener('dispose',onMaterialDispose);else if(s.code!==o)releaseMaterialProgramReference(e);else{if(r.shaderID!==void 0)return;l=!1}if(l){if(r.shaderID){var d=Jt[r.shaderID];a.shader={name:e.type,uniforms:Zt.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else a.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(a.shader),s=ie.acquireProgram(e,a.shader,r,o),a.program=s,e.program=s}var c=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<C.maxMorphTargets;p++)0<=c['morphTarget'+p]&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var p=0;p<C.maxMorphNormals;p++)0<=c['morphNormal'+p]&&e.numSupportedMorphNormals++}var i=a.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(a.numClippingPlanes=H.numPlanes,a.numIntersection=H.numIntersection,i.clippingPlanes=H.uniform),a.fog=t,a.lightsHash=oe.state.hash,e.lights&&(i.ambientLightColor.value=oe.state.ambient,i.directionalLights.value=oe.state.directional,i.spotLights.value=oe.state.spot,i.rectAreaLights.value=oe.state.rectArea,i.pointLights.value=oe.state.point,i.hemisphereLights.value=oe.state.hemi,i.directionalShadowMap.value=oe.state.directionalShadowMap,i.directionalShadowMatrix.value=oe.state.directionalShadowMatrix,i.spotShadowMap.value=oe.state.spotShadowMap,i.spotShadowMatrix.value=oe.state.spotShadowMatrix,i.pointShadowMap.value=oe.state.pointShadowMap,i.pointShadowMatrix.value=oe.state.pointShadowMatrix);var u=a.program.getUniforms(),m=WebGLUniforms.seqWithValue(u.seq,i);a.uniformsList=m}function setProgram(e,t,n,a){D=0;var r=ee.get(n);if(V&&($||e!==R)){var o=e===R&&n.id===S;H.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,o)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:n.lights&&r.lightsHash!==oe.state.hash?n.needsUpdate=!0:void 0!==r.numClippingPlanes&&(r.numClippingPlanes!==H.numPlanes||r.numIntersection!==H.numIntersection)&&(n.needsUpdate=!0)),n.needsUpdate&&(initMaterial(n,t,a),n.needsUpdate=!1);var i=!1,d=!1,c=!1,m=r.program,g=m.getUniforms(),h=r.shader.uniforms;if(J.useProgram(m.program)&&(i=!0,d=!0,c=!0),n.id!==S&&(S=n.id,d=!0),i||e!==R){if(g.setValue(K,'projectionMatrix',e.projectionMatrix),Q.logarithmicDepthBuffer&&g.setValue(K,'logDepthBufFC',2/(u(e.far+1)/p)),R!==(F||e)&&(R=F||e,d=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var f=g.map.cameraPosition;void 0!==f&&f.setValue(K,X.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&g.setValue(K,'viewMatrix',e.matrixWorldInverse)}if(n.skinning){g.setOptional(K,a,'bindMatrix'),g.setOptional(K,a,'bindMatrixInverse');var E=a.skeleton;if(E){var _=E.bones;if(Q.floatVertexTextures){if(void 0===E.boneTexture){var A=l(4*_.length);A=kt.nextPowerOfTwo(s(A)),A=y(A,4);var b=new Float32Array(4*(A*A));b.set(E.boneMatrices);var x=new DataTexture(b,A,A,at,Ke);E.boneMatrices=b,E.boneTexture=x,E.boneTextureSize=A}g.setValue(K,'boneTexture',E.boneTexture),g.setValue(K,'boneTextureSize',E.boneTextureSize)}else g.setOptional(K,E,'boneMatrices')}}return d&&(g.setValue(K,'toneMappingExposure',C.toneMappingExposure),g.setValue(K,'toneMappingWhitePoint',C.toneMappingWhitePoint),n.lights&&markUniformsLightsNeedsUpdate(h,c),t&&n.fog&&refreshUniformsFog(h,t),n.isMeshBasicMaterial?refreshUniformsCommon(h,n):n.isMeshLambertMaterial?(refreshUniformsCommon(h,n),refreshUniformsLambert(h,n)):n.isMeshPhongMaterial?(refreshUniformsCommon(h,n),n.isMeshToonMaterial?refreshUniformsToon(h,n):refreshUniformsPhong(h,n)):n.isMeshStandardMaterial?(refreshUniformsCommon(h,n),n.isMeshPhysicalMaterial?refreshUniformsPhysical(h,n):refreshUniformsStandard(h,n)):n.isMeshDepthMaterial?(refreshUniformsCommon(h,n),refreshUniformsDepth(h,n)):n.isMeshDistanceMaterial?(refreshUniformsCommon(h,n),refreshUniformsDistance(h,n)):n.isMeshNormalMaterial?(refreshUniformsCommon(h,n),refreshUniformsNormal(h,n)):n.isLineBasicMaterial?(refreshUniformsLine(h,n),n.isLineDashedMaterial&&refreshUniformsDash(h,n)):n.isPointsMaterial?refreshUniformsPoints(h,n):n.isShadowMaterial&&(h.color.value=n.color,h.opacity.value=n.opacity),void 0!==h.ltcMat&&(h.ltcMat.value=qt.LTC_MAT_TEXTURE),void 0!==h.ltcMag&&(h.ltcMag.value=qt.LTC_MAG_TEXTURE),WebGLUniforms.upload(K,r.uniformsList,h,C)),g.setValue(K,'modelViewMatrix',a.modelViewMatrix),g.setValue(K,'normalMatrix',a.normalMatrix),g.setValue(K,'modelMatrix',a.matrixWorld),m}function refreshUniformsCommon(e,t){e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var a=n.offset,r=n.repeat;e.offsetRepeat.value.set(a.x,a.y,r.x,r.y)}}function refreshUniformsLine(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function refreshUniformsDash(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function refreshUniformsPoints(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*P,e.scale.value=0.5*N,e.map.value=t.map,null!==t.map){var n=t.map.offset,a=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,a.x,a.y)}}function refreshUniformsFog(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function refreshUniformsLambert(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function refreshUniformsPhong(e,t){e.specular.value=t.specular,e.shininess.value=y(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function refreshUniformsToon(e,t){refreshUniformsPhong(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function refreshUniformsStandard(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function refreshUniformsPhysical(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,refreshUniformsStandard(e,t)}function refreshUniformsDepth(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function refreshUniformsDistance(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function refreshUniformsNormal(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function markUniformsLightsNeedsUpdate(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}console.log('THREE.WebGLRenderer',b),e=e||{};var t=e.canvas===void 0?document.createElementNS('http://www.w3.org/1999/xhtml','canvas'):e.canvas,n=e.context===void 0?null:e.context,a=e.alpha!==void 0&&e.alpha,r=!(e.depth!==void 0)||e.depth,o=!(e.stencil!==void 0)||e.stencil,i=e.antialias!==void 0&&e.antialias,d=!(e.premultipliedAlpha!==void 0)||e.premultipliedAlpha,c=e.preserveDrawingBuffer!==void 0&&e.preserveDrawingBuffer,m=[],g=[],h=null,E=[],_=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=be,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var C=this,A=!1,x=null,v=null,S=-1,T='',R=null,F=null,L=new Vector4,M=new Vector4,B=null,D=0,I=t.width,N=t.height,P=1,O=new Vector4(0,0,I,N),U=new Vector4(0,0,I,N),k=!1,W=new Frustum,H=new WebGLClipping,V=!1,$=!1,z=new Matrix4,X=new Vector3,j={geometries:0,textures:0},Y={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Y,memory:j,programs:null};var K;try{var q={alpha:a,depth:r,stencil:o,antialias:i,premultipliedAlpha:d,preserveDrawingBuffer:c};if(K=n||t.getContext('webgl',q)||t.getContext('experimental-webgl',q),null===K)if(null!==t.getContext('webgl'))throw'Error creating WebGL context with your selected attributes.';else throw'Error creating WebGL context.';void 0===K.getShaderPrecisionFormat&&(K.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),t.addEventListener('webglcontextlost',onContextLost,!1),t.addEventListener('webglcontextrestored',onContextRestore,!1)}catch(e){console.error('THREE.WebGLRenderer: '+e)}var Z,Q,J,ee,te,ne,ae,re,oe,ie,se,le,de,ce,pe,ue,me,ge;initGLContext();var he=new WebVRManager(C);this.vr=he;var fe=new WebGLShadowMap(C,re,Q.maxTextureSize);this.shadowMap=fe,this.getContext=function(){return K},this.getContextAttributes=function(){return K.getContextAttributes()},this.forceContextLoss=function(){var e=Z.get('WEBGL_lose_context');e&&e.loseContext()},this.forceContextRestore=function(){var e=Z.get('WEBGL_lose_context');e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0===e||(P=e,this.setSize(I,N,!1))},this.getSize=function(){return{width:I,height:N}},this.setSize=function(e,n,a){var r=he.getDevice();return r&&r.isPresenting?void console.warn('THREE.WebGLRenderer: Can\'t change size while VR device is presenting.'):void(I=e,N=n,t.width=e*P,t.height=n*P,!1!==a&&(t.style.width=e+'px',t.style.height=n+'px'),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:I*P,height:N*P}},this.setDrawingBufferSize=function(e,n,a){I=e,N=n,P=a,t.width=e*a,t.height=n*a,this.setViewport(0,0,e,n)},this.setViewport=function(e,t,n,a){O.set(e,N-t-a,n,a),J.viewport(L.copy(O).multiplyScalar(P))},this.setScissor=function(e,t,n,a){U.set(e,N-t-a,n,a),J.scissor(M.copy(U).multiplyScalar(P))},this.setScissorTest=function(e){J.setScissorTest(k=e)},this.getClearColor=le.getClearColor,this.setClearColor=le.setClearColor,this.getClearAlpha=le.getClearAlpha,this.setClearAlpha=le.setClearAlpha,this.clear=function(e,t,n){var a=0;(e===void 0||e)&&(a|=K.COLOR_BUFFER_BIT),(t===void 0||t)&&(a|=K.DEPTH_BUFFER_BIT),(n===void 0||n)&&(a|=K.STENCIL_BUFFER_BIT),K.clear(a)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,a){this.setRenderTarget(e),this.clear(t,n,a)},this.dispose=function(){t.removeEventListener('webglcontextlost',onContextLost,!1),t.removeEventListener('webglcontextrestored',onContextRestore,!1),se.dispose(),he.dispose()},this.renderBufferImmediate=function(e,t,n){J.initAttributes();var a=ee.get(e);e.hasPositions&&!a.position&&(a.position=K.createBuffer()),e.hasNormals&&!a.normal&&(a.normal=K.createBuffer()),e.hasUvs&&!a.uv&&(a.uv=K.createBuffer()),e.hasColors&&!a.color&&(a.color=K.createBuffer());var r=t.getAttributes();if(e.hasPositions&&(K.bindBuffer(K.ARRAY_BUFFER,a.position),K.bufferData(K.ARRAY_BUFFER,e.positionArray,K.DYNAMIC_DRAW),J.enableAttribute(r.position),K.vertexAttribPointer(r.position,3,K.FLOAT,!1,0,0)),e.hasNormals){if(K.bindBuffer(K.ARRAY_BUFFER,a.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,i=3*e.count;o<i;o+=9){var s=e.normalArray,l=(s[o+0]+s[o+3]+s[o+6])/3,d=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=l,s[o+1]=d,s[o+2]=c,s[o+3]=l,s[o+4]=d,s[o+5]=c,s[o+6]=l,s[o+7]=d,s[o+8]=c}K.bufferData(K.ARRAY_BUFFER,e.normalArray,K.DYNAMIC_DRAW),J.enableAttribute(r.normal),K.vertexAttribPointer(r.normal,3,K.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(K.bindBuffer(K.ARRAY_BUFFER,a.uv),K.bufferData(K.ARRAY_BUFFER,e.uvArray,K.DYNAMIC_DRAW),J.enableAttribute(r.uv),K.vertexAttribPointer(r.uv,2,K.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==G&&(K.bindBuffer(K.ARRAY_BUFFER,a.color),K.bufferData(K.ARRAY_BUFFER,e.colorArray,K.DYNAMIC_DRAW),J.enableAttribute(r.color),K.vertexAttribPointer(r.color,3,K.FLOAT,!1,0,0)),J.disableUnusedAttributes(),K.drawArrays(K.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,a,r,o){J.setMaterial(a);var i=setProgram(e,t,a,r),s=n.id+'_'+i.id+'_'+(!0===a.wireframe),l=!1;s!=T&&(T=s,l=!0),r.morphTargetInfluences&&(de.update(r,n,a,i),l=!0);var d=n.index,c=n.attributes.position,p=1;!0===a.wireframe&&(d=ae.getWireframeAttribute(n),p=2);var u=ce,m;null!==d&&(m=ne.get(d),u=pe,u.setIndex(m)),l&&(setupVertexAttributes(a,i,n),null!==d&&K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,m.buffer));var g=0;null===d?c!==void 0&&(g=c.count):g=d.count;var h=n.drawRange.start*p,E=n.drawRange.count*p,_=null===o?0:o.start*p,C=null===o?Infinity:o.count*p,A=y(h,_),b=f(g,h+E,_+C)-1,x=y(0,b-A+1);if(0!==x){if(r.isMesh){if(!0===a.wireframe)J.setLineWidth(a.wireframeLinewidth*getTargetPixelRatio()),u.setMode(K.LINES);else switch(r.drawMode){case Rt:u.setMode(K.TRIANGLES);break;case Ft:u.setMode(K.TRIANGLE_STRIP);break;case wt:u.setMode(K.TRIANGLE_FAN);}}else if(r.isLine){var v=a.linewidth;void 0===v&&(v=1),J.setLineWidth(v*getTargetPixelRatio()),r.isLineSegments?u.setMode(K.LINES):r.isLineLoop?u.setMode(K.LINE_LOOP):u.setMode(K.LINE_STRIP)}else r.isPoints&&u.setMode(K.POINTS);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&u.renderInstances(n,A,x):u.render(A,x)}},this.compile=function(e,t){m.length=0,g.length=0,e.traverse(function(e){e.isLight&&(m.push(e),e.castShadow&&g.push(e))}),oe.setup(m,g,t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)initMaterial(t.material[n],e.fog,t);else initMaterial(t.material,e.fog,t)})};var Ee=!1,_e=null;this.animate=function(e){_e=e,start()},this.render=function(e,t,n,a){if(!(t&&t.isCamera))return void console.error('THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.');if(!A){T='',S=-1,R=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),he.enabled&&(t=he.getCamera(t)),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),W.setFromMatrix(z),m.length=0,g.length=0,E.length=0,_.length=0,$=this.localClippingEnabled,V=H.init(this.clippingPlanes,$,t),h=se.get(e,t),h.init(),projectObject(e,t,C.sortObjects),!0===C.sortObjects&&h.sort(),V&&H.beginShadows(),fe.render(g,e,t),oe.setup(m,g,t),V&&H.endShadows(),Y.frame++,Y.calls=0,Y.vertices=0,Y.faces=0,Y.points=0,void 0===n&&(n=null),this.setRenderTarget(n),le.render(h,e,t,a);var r=h.opaque,o=h.transparent;if(e.overrideMaterial){var i=e.overrideMaterial;r.length&&renderObjects(r,e,t,i),o.length&&renderObjects(o,e,t,i)}else r.length&&renderObjects(r,e,t),o.length&&renderObjects(o,e,t);me.render(E,e,t),ue.render(_,e,t,L),n&&te.updateRenderTargetMipmap(n),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1),he.enabled&&he.submitFrame()}},this.setFaceCulling=function(e,t){J.setCullFace(e),J.setFlipSided(t===w)},this.allocTextureUnit=function allocTextureUnit(){var e=D;return e>=Q.maxTextures&&console.warn('THREE.WebGLRenderer: Trying to use '+e+' texture units while this GPU supports only '+Q.maxTextures),D+=1,e},this.setTexture2D=function(){var e=!1;return function setTexture2D(t,n){t&&t.isWebGLRenderTarget&&(!e&&(console.warn('THREE.WebGLRenderer.setTexture2D: don\'t use render targets as textures. Use their .texture property instead.'),e=!0),t=t.texture),te.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function setTexture(t,n){e||(console.warn('THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.'),e=!0),te.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function setTextureCube(t,n){t&&t.isWebGLRenderTargetCube&&(!e&&(console.warn('THREE.WebGLRenderer.setTextureCube: don\'t use cube render targets as textures. Use their .texture property instead.'),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?te.setTextureCube(t,n):te.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return x},this.setRenderTarget=function(e){x=e,e&&void 0===ee.get(e).__webglFramebuffer&&te.setupRenderTarget(e);var t=null,n=!1;if(e){var a=ee.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=a[e.activeCubeFace],n=!0):t=a,L.copy(e.viewport),M.copy(e.scissor),B=e.scissorTest}else L.copy(O).multiplyScalar(P),M.copy(U).multiplyScalar(P),B=k;if(v!==t&&(K.bindFramebuffer(K.FRAMEBUFFER,t),v=t),J.viewport(L),J.scissor(M),J.setScissorTest(B),n){var r=ee.get(e.texture);K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,a,r,o){if(!(e&&e.isWebGLRenderTarget))return void console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.');var i=ee.get(e).__webglFramebuffer;if(i){var s=!1;i!==v&&(K.bindFramebuffer(K.FRAMEBUFFER,i),s=!0);try{var l=e.texture,d=l.format,c=l.type;if(d!==at&&ge.convert(d)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.');if(c!==Ve&&ge.convert(c)!==K.getParameter(K.IMPLEMENTATION_COLOR_READ_TYPE)&&!(c===Ke&&(Z.get('OES_texture_float')||Z.get('WEBGL_color_buffer_float')))&&!(c===qe&&Z.get('EXT_color_buffer_half_float')))return void console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.');K.checkFramebufferStatus(K.FRAMEBUFFER)===K.FRAMEBUFFER_COMPLETE?0<=t&&t<=e.width-a&&0<=n&&n<=e.height-r&&K.readPixels(t,n,a,r,ge.convert(d),ge.convert(c),o):console.error('THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.')}finally{s&&K.bindFramebuffer(K.FRAMEBUFFER,v)}}}}function FogExp2(e,t){this.name='',this.color=new Color(e),this.density=t===void 0?2.5e-4:t}function Fog(e,t,n){this.name='',this.color=new Color(e),this.near=t===void 0?1:t,this.far=n===void 0?1e3:n}function Scene(){Object3D.call(this),this.type='Scene',this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function LensFlare(e,t,n,a,r){Object3D.call(this),this.lensFlares=[],this.positionScreen=new Vector3,this.customUpdateCallback=void 0,e!==void 0&&this.add(e,t,n,a,r)}function SpriteMaterial(e){Material.call(this),this.type='SpriteMaterial',this.color=new Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Sprite(e){Object3D.call(this),this.type='Sprite',this.material=e===void 0?new SpriteMaterial:e}function LOD(){Object3D.call(this),this.type='LOD',Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Skeleton(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn('THREE.Skeleton boneInverses is the wrong length.'),this.boneInverses=[];for(var n=0,a=this.bones.length;n<a;n++)this.boneInverses.push(new Matrix4)}}function Bone(){Object3D.call(this),this.type='Bone'}function SkinnedMesh(e,t){Mesh.call(this,e,t),this.type='SkinnedMesh',this.bindMode='attached',this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4;var n=this.initBones(),a=new Skeleton(n);this.bind(a,this.matrixWorld),this.normalizeSkinWeights()}function LineBasicMaterial(e){Material.call(this),this.type='LineBasicMaterial',this.color=new Color(16777215),this.linewidth=1,this.linecap='round',this.linejoin='round',this.lights=!1,this.setValues(e)}function Line(e,t,n){return 1===n?(console.warn('THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.'),new LineSegments(e,t)):void(Object3D.call(this),this.type='Line',this.geometry=e===void 0?new BufferGeometry:e,this.material=t===void 0?new LineBasicMaterial({color:16777215*Math.random()}):t)}function LineSegments(e,t){Line.call(this,e,t),this.type='LineSegments'}function LineLoop(e,t){Line.call(this,e,t),this.type='LineLoop'}function PointsMaterial(e){Material.call(this),this.type='PointsMaterial',this.color=new Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Points(e,t){Object3D.call(this),this.type='Points',this.geometry=e===void 0?new BufferGeometry:e,this.material=t===void 0?new PointsMaterial({color:16777215*Math.random()}):t}function Group(){Object3D.call(this),this.type='Group'}function VideoTexture(e,t,n,a,r,o,i,s,l){function update(){requestAnimationFrame(update),e.readyState>=e.HAVE_CURRENT_DATA&&(d.needsUpdate=!0)}Texture.call(this,e,t,n,a,r,o,i,s,l),this.generateMipmaps=!1;var d=this;update()}function CompressedTexture(e,t,n,a,r,o,i,s,l,d,c,p){Texture.call(this,null,o,i,s,l,d,a,r,c,p),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function DepthTexture(e,t,n,a,r,o,i,s,l,d){if(d=void 0===d?st:d,d!==st&&d!==lt)throw new Error('DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat');void 0===n&&d===st&&(n=Xe),void 0===n&&d===lt&&(n=et),Texture.call(this,null,a,r,o,i,s,d,n,l),this.image={width:e,height:t},this.magFilter=void 0===i?Oe:i,this.minFilter=void 0===s?Oe:s,this.flipY=!1,this.generateMipmaps=!1}function WireframeGeometry(t){BufferGeometry.call(this),this.type='WireframeGeometry';var n=[],a=[0,0],r={},s=['a','b','c'],d,i,c,l,o,p,e,u,m,g;if(t&&t.isGeometry){var h=t.faces;for(d=0,c=h.length;d<c;d++){var E=h[d];for(i=0;3>i;i++)e=E[s[i]],u=E[s[(i+1)%3]],a[0]=f(e,u),a[1]=y(e,u),m=a[0]+','+a[1],void 0===r[m]&&(r[m]={index1:a[0],index2:a[1]})}for(m in r)p=r[m],g=t.vertices[p.index1],n.push(g.x,g.y,g.z),g=t.vertices[p.index2],n.push(g.x,g.y,g.z)}else if(t&&t.isBufferGeometry){var _,C,A,b,x,v,S,T;if(g=new Vector3,null!==t.index){for(_=t.attributes.position,C=t.index,A=t.groups,0===A.length&&(A=[{start:0,count:C.count,materialIndex:0}]),(l=0,o=A.length);l<o;++l)for(b=A[l],x=b.start,v=b.count,(d=x,c=x+v);d<c;d+=3)for(i=0;3>i;i++)e=C.getX(d+i),u=C.getX(d+(i+1)%3),a[0]=f(e,u),a[1]=y(e,u),m=a[0]+','+a[1],void 0===r[m]&&(r[m]={index1:a[0],index2:a[1]});for(m in r)p=r[m],g.fromBufferAttribute(_,p.index1),n.push(g.x,g.y,g.z),g.fromBufferAttribute(_,p.index2),n.push(g.x,g.y,g.z)}else for(_=t.attributes.position,d=0,c=_.count/3;d<c;d++)for(i=0;3>i;i++)S=3*d+i,g.fromBufferAttribute(_,S),n.push(g.x,g.y,g.z),T=3*d+(i+1)%3,g.fromBufferAttribute(_,T),n.push(g.x,g.y,g.z)}this.addAttribute('position',new Float32BufferAttribute(n,3))}function ParametricGeometry(e,t,n){Geometry.call(this),this.type='ParametricGeometry',this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new ParametricBufferGeometry(e,t,n)),this.mergeVertices()}function ParametricBufferGeometry(e,t,n){BufferGeometry.call(this),this.type='ParametricBufferGeometry',this.parameters={func:e,slices:t,stacks:n};var r=[],o=[],s=[],l=[],p=1e-5,m=new Vector3,g=new Vector3,h=new Vector3,f=new Vector3,E=new Vector3,_=t+1,C,i;for(C=0;C<=n;C++){var y=C/n;for(i=0;i<=t;i++){var A=i/t;g=e(A,y,g),o.push(g.x,g.y,g.z),0<=A-p?(h=e(A-p,y,h),f.subVectors(g,h)):(h=e(A+p,y,h),f.subVectors(h,g)),0<=y-p?(h=e(A,y-p,h),E.subVectors(g,h)):(h=e(A,y+p,h),E.subVectors(h,g)),m.crossVectors(f,E).normalize(),s.push(m.x,m.y,m.z),l.push(A,y)}}for(C=0;C<n;C++)for(i=0;i<t;i++){var u=C*_+i,a=C*_+i+1,b=(C+1)*_+i+1,c=(C+1)*_+i;r.push(u,a,c),r.push(a,b,c)}this.setIndex(r),this.addAttribute('position',new Float32BufferAttribute(o,3)),this.addAttribute('normal',new Float32BufferAttribute(s,3)),this.addAttribute('uv',new Float32BufferAttribute(l,2))}function PolyhedronGeometry(e,t,n,a){Geometry.call(this),this.type='PolyhedronGeometry',this.parameters={vertices:e,indices:t,radius:n,detail:a},this.fromBufferGeometry(new PolyhedronBufferGeometry(e,t,n,a)),this.mergeVertices()}function PolyhedronBufferGeometry(e,t,n,a){function subdivideFace(e,t,n,a){var r=d(2,a),o=[],s,i;for(s=0;s<=r;s++){o[s]=[];var l=e.clone().lerp(n,s/r),c=t.clone().lerp(n,s/r),p=r-s;for(i=0;i<=p;i++)o[s][i]=0===i&&s===r?l:l.clone().lerp(c,i/p)}for(s=0;s<r;s++)for(i=0;i<2*(r-s)-1;i++){var u=E(i/2);0==i%2?(pushVertex(o[s][u+1]),pushVertex(o[s+1][u]),pushVertex(o[s][u])):(pushVertex(o[s][u+1]),pushVertex(o[s+1][u+1]),pushVertex(o[s+1][u]))}}function correctSeam(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],a=o[e+4],r=y(t,n,a),i=f(t,n,a);0.9<r&&0.1>i&&(0.2>t&&(o[e+0]+=1),0.2>n&&(o[e+2]+=1),0.2>a&&(o[e+4]+=1))}}function pushVertex(e){r.push(e.x,e.y,e.z)}function getVertexByIndex(t,n){var a=3*t;n.x=e[a+0],n.y=e[a+1],n.z=e[a+2]}function correctUVs(){for(var e=new Vector3,t=new Vector3,n=new Vector3,a=new Vector3,s=new Vector2,l=new Vector2,d=new Vector2,c=0,i=0;c<r.length;c+=9,i+=6){e.set(r[c+0],r[c+1],r[c+2]),t.set(r[c+3],r[c+4],r[c+5]),n.set(r[c+6],r[c+7],r[c+8]),s.set(o[i+0],o[i+1]),l.set(o[i+2],o[i+3]),d.set(o[i+4],o[i+5]),a.copy(e).add(t).add(n).divideScalar(3);var p=azimuth(a);correctUV(s,i+0,e,p),correctUV(l,i+2,t,p),correctUV(d,i+4,n,p)}}function correctUV(e,t,n,a){0>a&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=a/2/S+0.5)}function azimuth(e){return i(e.z,-e.x)}function inclination(e){return i(-e.y,l(e.x*e.x+e.z*e.z))}BufferGeometry.call(this),this.type='PolyhedronBufferGeometry',this.parameters={vertices:e,indices:t,radius:n,detail:a},n=n||1,a=a||0;var r=[],o=[];(function subdivide(e){for(var n=new Vector3,a=new Vector3,r=new Vector3,o=0;o<t.length;o+=3)getVertexByIndex(t[o+0],n),getVertexByIndex(t[o+1],a),getVertexByIndex(t[o+2],r),subdivideFace(n,a,r,e)})(a),function appplyRadius(e){for(var t=new Vector3,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function generateUVs(){for(var e=new Vector3,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=azimuth(e)/2/S+0.5,a=inclination(e)/S+0.5;o.push(n,1-a)}correctUVs(),correctSeam()}(),this.addAttribute('position',new Float32BufferAttribute(r,3)),this.addAttribute('normal',new Float32BufferAttribute(r.slice(),3)),this.addAttribute('uv',new Float32BufferAttribute(o,2)),0===a?this.computeVertexNormals():this.normalizeNormals()}function TetrahedronGeometry(e,t){Geometry.call(this),this.type='TetrahedronGeometry',this.parameters={radius:e,detail:t},this.fromBufferGeometry(new TetrahedronBufferGeometry(e,t)),this.mergeVertices()}function TetrahedronBufferGeometry(e,t){PolyhedronBufferGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type='TetrahedronBufferGeometry',this.parameters={radius:e,detail:t}}function OctahedronGeometry(e,t){Geometry.call(this),this.type='OctahedronGeometry',this.parameters={radius:e,detail:t},this.fromBufferGeometry(new OctahedronBufferGeometry(e,t)),this.mergeVertices()}function OctahedronBufferGeometry(e,t){PolyhedronBufferGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type='OctahedronBufferGeometry',this.parameters={radius:e,detail:t}}function IcosahedronGeometry(e,t){Geometry.call(this),this.type='IcosahedronGeometry',this.parameters={radius:e,detail:t},this.fromBufferGeometry(new IcosahedronBufferGeometry(e,t)),this.mergeVertices()}function IcosahedronBufferGeometry(e,n){var a=(1+2.23606797749979)/2;PolyhedronBufferGeometry.call(this,[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,n),this.type='IcosahedronBufferGeometry',this.parameters={radius:e,detail:n}}function DodecahedronGeometry(e,t){Geometry.call(this),this.type='DodecahedronGeometry',this.parameters={radius:e,detail:t},this.fromBufferGeometry(new DodecahedronBufferGeometry(e,t)),this.mergeVertices()}function DodecahedronBufferGeometry(e,n){var a=(1+2.23606797749979)/2,o=1/a;PolyhedronBufferGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,n),this.type='DodecahedronBufferGeometry',this.parameters={radius:e,detail:n}}function TubeGeometry(e,t,n,a,r,o){Geometry.call(this),this.type='TubeGeometry',this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:a,closed:r},o!==void 0&&console.warn('THREE.TubeGeometry: taper has been removed.');var i=new TubeBufferGeometry(e,t,n,a,r);this.tangents=i.tangents,this.normals=i.normals,this.binormals=i.binormals,this.fromBufferGeometry(i),this.mergeVertices()}function TubeBufferGeometry(e,t,n,r,a){function generateSegment(a){var d=e.getPointAt(a/t),u=o.normals[a],h=o.binormals[a];for(i=0;i<=r;i++){var f=2*(i/r*S),E=m(f),_=-g(f);l.x=_*u.x+E*h.x,l.y=_*u.y+E*h.y,l.z=_*u.z+E*h.z,l.normalize(),p.push(l.x,l.y,l.z),s.x=d.x+n*l.x,s.y=d.y+n*l.y,s.z=d.z+n*l.z,c.push(s.x,s.y,s.z)}}function generateIndices(){for(i=1;i<=t;i++)for(f=1;f<=r;f++){var e=(r+1)*(i-1)+(f-1),n=(r+1)*i+(f-1),a=(r+1)*i+f,o=(r+1)*(i-1)+f;h.push(e,n,o),h.push(n,a,o)}}function generateUVs(){for(f=0;f<=t;f++)for(i=0;i<=r;i++)d.x=f/t,d.y=i/r,u.push(d.x,d.y)}BufferGeometry.call(this),this.type='TubeBufferGeometry',this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:a},t=t||64,n=n||1,r=r||8,a=a||!1;var o=e.computeFrenetFrames(t,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var s=new Vector3,l=new Vector3,d=new Vector2,c=[],p=[],u=[],h=[],f,i;(function generateBufferData(){for(f=0;f<t;f++)generateSegment(f);generateSegment(!1===a?t:0),generateUVs(),generateIndices()})(),this.setIndex(h),this.addAttribute('position',new Float32BufferAttribute(c,3)),this.addAttribute('normal',new Float32BufferAttribute(p,3)),this.addAttribute('uv',new Float32BufferAttribute(u,2))}function TorusKnotGeometry(e,t,n,a,r,o,i){Geometry.call(this),this.type='TorusKnotGeometry',this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:a,p:r,q:o},i!==void 0&&console.warn('THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.'),this.fromBufferGeometry(new TorusKnotBufferGeometry(e,t,n,a,r,o)),this.mergeVertices()}function TorusKnotBufferGeometry(e,t,n,r,o,s){function calculatePositionOnCurve(e,t,n,a,r){var o=g(e),i=m(e),s=n/t*e,l=g(s);r.x=0.5*(a*(2+l))*o,r.y=0.5*(a*(2+l)*i),r.z=0.5*(a*m(s))}BufferGeometry.call(this),this.type='TorusKnotBufferGeometry',this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:o,q:s},e=e||100,t=t||40,n=E(n)||64,r=E(r)||8,o=o||2,s=s||3;var l=[],h=[],f=[],_=[],C=new Vector3,y=new Vector3,A=new Vector3,x=new Vector3,R=new Vector3,F=new Vector3,T=new Vector3,w,i;for(w=0;w<=n;++w){var L=2*(w/n*o*S);for(calculatePositionOnCurve(L,o,s,e,A),calculatePositionOnCurve(L+0.01,o,s,e,x),F.subVectors(x,A),T.addVectors(x,A),R.crossVectors(F,T),T.crossVectors(R,F),R.normalize(),T.normalize(),i=0;i<=r;++i){var u=2*(i/r*S),v=-t*g(u),M=t*m(u);C.x=A.x+(v*T.x+M*R.x),C.y=A.y+(v*T.y+M*R.y),C.z=A.z+(v*T.z+M*R.z),h.push(C.x,C.y,C.z),y.subVectors(C,A).normalize(),f.push(y.x,y.y,y.z),_.push(w/n),_.push(i/r)}}for(i=1;i<=n;i++)for(w=1;w<=r;w++){var B=(r+1)*(i-1)+(w-1),a=(r+1)*i+(w-1),b=(r+1)*i+w,c=(r+1)*(i-1)+w;l.push(B,a,c),l.push(a,b,c)}this.setIndex(l),this.addAttribute('position',new Float32BufferAttribute(h,3)),this.addAttribute('normal',new Float32BufferAttribute(f,3)),this.addAttribute('uv',new Float32BufferAttribute(_,2))}function TorusGeometry(e,t,n,a,r){Geometry.call(this),this.type='TorusGeometry',this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:a,arc:r},this.fromBufferGeometry(new TorusBufferGeometry(e,t,n,a,r)),this.mergeVertices()}function TorusBufferGeometry(e,t,n,r,o){BufferGeometry.call(this),this.type='TorusBufferGeometry',this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:o},e=e||100,t=t||40,n=E(n)||8,r=E(r)||6,o=o||2*S;var s=[],l=[],p=[],h=[],f=new Vector3,_=new Vector3,C=new Vector3,y,A;for(y=0;y<=n;y++)for(A=0;A<=r;A++){var i=A/r*o,u=2*(y/n*S);_.x=(e+t*g(u))*g(i),_.y=(e+t*g(u))*m(i),_.z=t*m(u),l.push(_.x,_.y,_.z),f.x=e*g(i),f.y=e*m(i),C.subVectors(_,f).normalize(),p.push(C.x,C.y,C.z),h.push(A/r),h.push(y/n)}for(y=1;y<=n;y++)for(A=1;A<=r;A++){var x=(r+1)*y+A-1,a=(r+1)*(y-1)+A-1,b=(r+1)*(y-1)+A,c=(r+1)*y+A;s.push(x,a,c),s.push(a,b,c)}this.setIndex(s),this.addAttribute('position',new Float32BufferAttribute(l,3)),this.addAttribute('normal',new Float32BufferAttribute(p,3)),this.addAttribute('uv',new Float32BufferAttribute(h,2))}function ExtrudeGeometry(e,t){Geometry.call(this),this.type='ExtrudeGeometry',this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ExtrudeBufferGeometry(e,t)),this.mergeVertices()}function ExtrudeBufferGeometry(e,t){'undefined'==typeof e||(BufferGeometry.call(this),this.type='ExtrudeBufferGeometry',e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function TextGeometry(e,t){Geometry.call(this),this.type='TextGeometry',this.parameters={text:e,parameters:t},this.fromBufferGeometry(new TextBufferGeometry(e,t)),this.mergeVertices()}function TextBufferGeometry(e,t){t=t||{};var n=t.font;if(!(n&&n.isFont))return console.error('THREE.TextGeometry: font parameter is not an instance of THREE.Font.'),new Geometry;var a=n.generateShapes(e,t.size,t.curveSegments);t.amount=t.height===void 0?50:t.height,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,a,t),this.type='TextBufferGeometry'}function SphereGeometry(e,t,n,a,r,o,i){Geometry.call(this),this.type='SphereGeometry',this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:a,phiLength:r,thetaStart:o,thetaLength:i},this.fromBufferGeometry(new SphereBufferGeometry(e,t,n,a,r,o,i)),this.mergeVertices()}function SphereBufferGeometry(e,t,n,r,o,i,s){BufferGeometry.call(this),this.type='SphereBufferGeometry',this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:o,thetaStart:i,thetaLength:s},e=e||50,t=y(3,E(t)||8),n=y(2,E(n)||6),r=r===void 0?0:r,o=o===void 0?2*S:o,i=i===void 0?0:i,s=s===void 0?S:s;var l=i+s,p=0,h=[],f=new Vector3,_=new Vector3,C=[],A=[],x=[],T=[],R,F;for(F=0;F<=n;F++){var w=[],L=F/n;for(R=0;R<=t;R++){var v=R/t;f.x=-e*g(r+v*o)*m(i+L*s),f.y=e*g(i+L*s),f.z=e*m(r+v*o)*m(i+L*s),A.push(f.x,f.y,f.z),_.set(f.x,f.y,f.z).normalize(),x.push(_.x,_.y,_.z),T.push(v,1-L),w.push(p++)}h.push(w)}for(F=0;F<n;F++)for(R=0;R<t;R++){var u=h[F][R+1],a=h[F][R],b=h[F+1][R],c=h[F+1][R+1];(0!==F||0<i)&&C.push(u,a,c),(F!==n-1||l<S)&&C.push(a,b,c)}this.setIndex(C),this.addAttribute('position',new Float32BufferAttribute(A,3)),this.addAttribute('normal',new Float32BufferAttribute(x,3)),this.addAttribute('uv',new Float32BufferAttribute(T,2))}function RingGeometry(e,t,n,a,r,o){Geometry.call(this),this.type='RingGeometry',this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:a,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new RingBufferGeometry(e,t,n,a,r,o)),this.mergeVertices()}function RingBufferGeometry(e,t,n,r,o,s){BufferGeometry.call(this),this.type='RingBufferGeometry',this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:s},e=e||20,t=t||50,o=o===void 0?0:o,s=s===void 0?2*S:s,n=n===void 0?8:y(3,n),r=r===void 0?1:y(1,r);var l=[],p=[],u=[],h=[],f=e,E=(t-e)/r,_=new Vector3,C=new Vector2,A,x,v;for(x=0;x<=r;x++){for(v=0;v<=n;v++)A=o+v/n*s,_.x=f*g(A),_.y=f*m(A),p.push(_.x,_.y,_.z),u.push(0,0,1),C.x=(_.x/t+1)/2,C.y=(_.y/t+1)/2,h.push(C.x,C.y);f+=E}for(x=0;x<r;x++){var i=x*(n+1);for(v=0;v<n;v++){A=v+i;var T=A,a=A+n+1,b=A+n+2,c=A+1;l.push(T,a,c),l.push(a,b,c)}}this.setIndex(l),this.addAttribute('position',new Float32BufferAttribute(p,3)),this.addAttribute('normal',new Float32BufferAttribute(u,3)),this.addAttribute('uv',new Float32BufferAttribute(h,2))}function LatheGeometry(e,t,n,a){Geometry.call(this),this.type='LatheGeometry',this.parameters={points:e,segments:t,phiStart:n,phiLength:a},this.fromBufferGeometry(new LatheBufferGeometry(e,t,n,a)),this.mergeVertices()}function LatheBufferGeometry(e,t,r,o){BufferGeometry.call(this),this.type='LatheBufferGeometry',this.parameters={points:e,segments:t,phiStart:r,phiLength:o},t=E(t)||12,r=r||0,o=o||2*S,o=kt.clamp(o,0,2*S);var s=[],l=[],p=[],u=1/t,h=new Vector3,f=new Vector2,_,C,i;for(C=0;C<=t;C++){var y=r+C*u*o,A=m(y),x=g(y);for(i=0;i<=e.length-1;i++)h.x=e[i].x*A,h.y=e[i].y,h.z=e[i].x*x,l.push(h.x,h.y,h.z),f.x=C/t,f.y=i/(e.length-1),p.push(f.x,f.y)}for(C=0;C<t;C++)for(i=0;i<e.length-1;i++){_=i+C*e.length;var v=_,a=_+e.length,b=_+e.length+1,c=_+1;s.push(v,a,c),s.push(a,b,c)}if(this.setIndex(s),this.addAttribute('position',new Float32BufferAttribute(l,3)),this.addAttribute('uv',new Float32BufferAttribute(p,2)),this.computeVertexNormals(),o===2*S){var d=this.attributes.normal.array,T=new Vector3,R=new Vector3,F=new Vector3;for(_=3*(t*e.length),C=0,i=0;C<e.length;C++,i+=3)T.x=d[i+0],T.y=d[i+1],T.z=d[i+2],R.x=d[_+i+0],R.y=d[_+i+1],R.z=d[_+i+2],F.addVectors(T,R).normalize(),d[i+0]=d[_+i+0]=F.x,d[i+1]=d[_+i+1]=F.y,d[i+2]=d[_+i+2]=F.z}}function ShapeGeometry(e,t){Geometry.call(this),this.type='ShapeGeometry','object'==typeof t&&(console.warn('THREE.ShapeGeometry: Options parameter has been removed.'),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ShapeBufferGeometry(e,t)),this.mergeVertices()}function ShapeBufferGeometry(e,t){function addShape(e){var s=r.length/3,d=e.extractPoints(t),p=d.shape,u=d.holes,m,i,g;if(!1===rn.isClockWise(p))for(p=p.reverse(),m=0,i=u.length;m<i;m++)g=u[m],!0===rn.isClockWise(g)&&(u[m]=g.reverse());var h=rn.triangulateShape(p,u);for(m=0,i=u.length;m<i;m++)g=u[m],p=p.concat(g);for(m=0,i=p.length;m<i;m++){var f=p[m];r.push(f.x,f.y,0),a.push(0,0,1),o.push(f.x,f.y)}for(m=0,i=h.length;m<i;m++){var E=h[m],_=E[0]+s,C=E[1]+s,y=E[2]+s;n.push(_,C,y),l+=3}}BufferGeometry.call(this),this.type='ShapeBufferGeometry',this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],a=[],o=[],s=0,l=0;if(!1===Array.isArray(e))addShape(e);else for(var d=0;d<e.length;d++)addShape(e[d]),this.addGroup(s,l,d),s+=l,l=0;this.setIndex(n),this.addAttribute('position',new Float32BufferAttribute(r,3)),this.addAttribute('normal',new Float32BufferAttribute(a,3)),this.addAttribute('uv',new Float32BufferAttribute(o,2))}function EdgesGeometry(t,n){BufferGeometry.call(this),this.type='EdgesGeometry',this.parameters={thresholdAngle:n},n=n===void 0?1:n;var a=[],r=g(kt.DEG2RAD*n),o=[0,0],s={},d=['a','b','c'],c,p,u,m;t.isBufferGeometry?(m=new Geometry,m.fromBufferGeometry(t)):m=t.clone(),m.mergeVertices(),m.computeFaceNormals();for(var h=m.vertices,E=m.faces,_=0,C=E.length,l;_<C;_++){l=E[_];for(var A=0;3>A;A++)c=l[d[A]],p=l[d[(A+1)%3]],o[0]=f(c,p),o[1]=y(c,p),u=o[0]+','+o[1],void 0===s[u]?s[u]={index1:o[0],index2:o[1],face1:_,face2:void 0}:s[u].face2=_}for(u in s){var b=s[u];if(b.face2===void 0||E[b.face1].normal.dot(E[b.face2].normal)<=r){var e=h[b.index1];a.push(e.x,e.y,e.z),e=h[b.index2],a.push(e.x,e.y,e.z)}}this.addAttribute('position',new Float32BufferAttribute(a,3))}function CylinderGeometry(e,t,n,a,r,o,i,s){Geometry.call(this),this.type='CylinderGeometry',this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:a,heightSegments:r,openEnded:o,thetaStart:i,thetaLength:s},this.fromBufferGeometry(new CylinderBufferGeometry(e,t,n,a,r,o,i,s)),this.mergeVertices()}function CylinderBufferGeometry(e,t,n,r,o,a,i,s){function generateCap(n){var a=new Vector2,o=new Vector3,E=0,_=!0===n?e:t,y=!0===n?1:-1,b,x,v;for(x=f,b=1;b<=r;b++)d.push(0,C*y,0),c.push(0,y,0),h.push(0.5,0.5),f++;for(v=f,b=0;b<=r;b++){var S=b/r,u=S*s+i,T=g(u),R=m(u);o.x=_*R,o.y=C*y,o.z=_*T,d.push(o.x,o.y,o.z),c.push(0,y,0),a.x=0.5*T+0.5,a.y=0.5*R*y+0.5,h.push(a.x,a.y),f++}for(b=0;b<r;b++){var F=x+b,w=v+b;!0===n?p.push(w,w+1,F):p.push(w+1,w,F),E+=3}l.addGroup(A,E,!0===n?1:2),A+=E}BufferGeometry.call(this),this.type='CylinderBufferGeometry',this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:a,thetaStart:i,thetaLength:s};var l=this;e=e===void 0?20:e,t=t===void 0?20:t,n=n===void 0?100:n,r=E(r)||8,o=E(o)||1,a=a!==void 0&&a,i=i===void 0?0:i,s=s===void 0?2*S:s;var p=[],d=[],c=[],h=[],f=0,_=[],C=n/2,A=0;(function generateTorso(){var E=new Vector3,S=new Vector3,T=0,R=(t-e)/n,F,x;for(x=0;x<=o;x++){var y=[],w=x/o,L=w*(t-e)+e;for(F=0;F<=r;F++){var M=F/r,u=M*s+i,B=m(u),D=g(u);S.x=L*B,S.y=-w*n+C,S.z=L*D,d.push(S.x,S.y,S.z),E.set(B,R,D).normalize(),c.push(E.x,E.y,E.z),h.push(M,1-w),y.push(f++)}_.push(y)}for(F=0;F<r;F++)for(x=0;x<o;x++){var I=_[x][F],a=_[x+1][F],b=_[x+1][F+1],N=_[x][F+1];p.push(I,a,N),p.push(a,b,N),T+=6}l.addGroup(A,T,0),A+=T})(),!1===a&&(0<e&&generateCap(!0),0<t&&generateCap(!1)),this.setIndex(p),this.addAttribute('position',new Float32BufferAttribute(d,3)),this.addAttribute('normal',new Float32BufferAttribute(c,3)),this.addAttribute('uv',new Float32BufferAttribute(h,2))}function ConeGeometry(e,t,n,a,r,o,i){CylinderGeometry.call(this,0,e,t,n,a,r,o,i),this.type='ConeGeometry',this.parameters={radius:e,height:t,radialSegments:n,heightSegments:a,openEnded:r,thetaStart:o,thetaLength:i}}function ConeBufferGeometry(e,t,n,a,r,o,i){CylinderBufferGeometry.call(this,0,e,t,n,a,r,o,i),this.type='ConeBufferGeometry',this.parameters={radius:e,height:t,radialSegments:n,heightSegments:a,openEnded:r,thetaStart:o,thetaLength:i}}function CircleGeometry(e,t,n,a){Geometry.call(this),this.type='CircleGeometry',this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:a},this.fromBufferGeometry(new CircleBufferGeometry(e,t,n,a)),this.mergeVertices()}function CircleBufferGeometry(e,t,n,a){BufferGeometry.call(this),this.type='CircleBufferGeometry',this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:a},e=e||50,t=t===void 0?8:y(3,t),n=n===void 0?0:n,a=a===void 0?2*S:a;var r=[],o=[],l=[],d=[],c=new Vector3,p=new Vector2,u,i;for(o.push(0,0,0),l.push(0,0,1),d.push(0.5,0.5),(i=0,u=3);i<=t;i++,u+=3){var s=n+i/t*a;c.x=e*g(s),c.y=e*m(s),o.push(c.x,c.y,c.z),l.push(0,0,1),p.x=(o[u]/e+1)/2,p.y=(o[u+1]/e+1)/2,d.push(p.x,p.y)}for(u=1;u<=t;u++)r.push(u,u+1,0);this.setIndex(r),this.addAttribute('position',new Float32BufferAttribute(o,3)),this.addAttribute('normal',new Float32BufferAttribute(l,3)),this.addAttribute('uv',new Float32BufferAttribute(d,2))}function ShadowMaterial(e){Material.call(this),this.type='ShadowMaterial',this.color=new Color(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}function RawShaderMaterial(e){ShaderMaterial.call(this,e),this.type='RawShaderMaterial'}function MeshStandardMaterial(e){Material.call(this),this.defines={STANDARD:''},this.type='MeshStandardMaterial',this.color=new Color(16777215),this.roughness=0.5,this.metalness=0.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshPhysicalMaterial(e){MeshStandardMaterial.call(this),this.defines={PHYSICAL:''},this.type='MeshPhysicalMaterial',this.reflectivity=0.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function MeshPhongMaterial(e){Material.call(this),this.type='MeshPhongMaterial',this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_e,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshToonMaterial(e){MeshPhongMaterial.call(this),this.defines={TOON:''},this.type='MeshToonMaterial',this.gradientMap=null,this.setValues(e)}function MeshNormalMaterial(e){Material.call(this),this.type='MeshNormalMaterial',this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshLambertMaterial(e){Material.call(this),this.type='MeshLambertMaterial',this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=_e,this.reflectivity=1,this.refractionRatio=0.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function LineDashedMaterial(e){LineBasicMaterial.call(this),this.type='LineDashedMaterial',this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function LoadingManager(e,t,n){var a=this,r=!1,o=0,i=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){i++,!1==r&&a.onStart!==void 0&&a.onStart(e,o,i),r=!0},this.itemEnd=function(e){o++,a.onProgress!==void 0&&a.onProgress(e,o,i),o==i&&(r=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(e){a.onError!==void 0&&a.onError(e)}}function FileLoader(e){this.manager=e===void 0?dn:e}function CompressedTextureLoader(e){this.manager=e===void 0?dn:e,this._parser=null}function DataTextureLoader(e){this.manager=e===void 0?dn:e,this._parser=null}function ImageLoader(e){this.manager=e===void 0?dn:e}function CubeTextureLoader(e){this.manager=e===void 0?dn:e}function TextureLoader(e){this.manager=e===void 0?dn:e}function Light(e,t){Object3D.call(this),this.type='Light',this.color=new Color(e),this.intensity=t===void 0?1:t,this.receiveShadow=void 0}function HemisphereLight(e,t,n){Light.call(this,e,n),this.type='HemisphereLight',this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(t)}function LightShadow(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.matrix=new Matrix4}function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,0.5,500))}function SpotLight(e,t,n,a,r,o){Light.call(this,e,t),this.type='SpotLight',this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,'power',{get:function(){return this.intensity*S},set:function(e){this.intensity=e/S}}),this.distance=n===void 0?0:n,this.angle=a===void 0?S/3:a,this.penumbra=r===void 0?0:r,this.decay=o===void 0?1:o,this.shadow=new SpotLightShadow}function PointLight(e,t,n,a){Light.call(this,e,t),this.type='PointLight',Object.defineProperty(this,'power',{get:function(){return 4*this.intensity*S},set:function(e){this.intensity=e/(4*S)}}),this.distance=n===void 0?0:n,this.decay=a===void 0?1:a,this.shadow=new LightShadow(new PerspectiveCamera(90,1,0.5,500))}function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,0.5,500))}function DirectionalLight(e,t){Light.call(this,e,t),this.type='DirectionalLight',this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}function AmbientLight(e,t){Light.call(this,e,t),this.type='AmbientLight',this.castShadow=void 0}function RectAreaLight(e,t,n,a){Light.call(this,e,t),this.type='RectAreaLight',this.position.set(0,1,0),this.updateMatrix(),this.width=n===void 0?10:n,this.height=a===void 0?10:a}function Interpolant(e,t,n,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a===void 0?new t.constructor(n):a,this.sampleValues=t,this.valueSize=n}function CubicInterpolant(e,t,n,a){Interpolant.call(this,e,t,n,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function LinearInterpolant(e,t,n,a){Interpolant.call(this,e,t,n,a)}function DiscreteInterpolant(e,t,n,a){Interpolant.call(this,e,t,n,a)}function KeyframeTrackConstructor(e,t,n,a){if(e===void 0)throw new Error('track name is undefined');if(void 0===t||0===t.length)throw new Error('no keyframes in track named '+e);this.name=e,this.times=cn.convertArray(t,this.TimeBufferType),this.values=cn.convertArray(n,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation),this.validate(),this.optimize()}function VectorKeyframeTrack(e,t,n,a){KeyframeTrackConstructor.call(this,e,t,n,a)}function QuaternionLinearInterpolant(e,t,n,a){Interpolant.call(this,e,t,n,a)}function QuaternionKeyframeTrack(e,t,n,a){KeyframeTrackConstructor.call(this,e,t,n,a)}function NumberKeyframeTrack(e,t,n,a){KeyframeTrackConstructor.call(this,e,t,n,a)}function StringKeyframeTrack(e,t,n,a){KeyframeTrackConstructor.call(this,e,t,n,a)}function BooleanKeyframeTrack(e,t,n){KeyframeTrackConstructor.call(this,e,t,n)}function ColorKeyframeTrack(e,t,n,a){KeyframeTrackConstructor.call(this,e,t,n,a)}function KeyframeTrack(){KeyframeTrackConstructor.apply(this,arguments)}function AnimationClip(e,t,n){this.name=e,this.tracks=n,this.duration=t===void 0?-1:t,this.uuid=kt.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function MaterialLoader(e){this.manager=e===void 0?dn:e,this.textures={}}function BufferGeometryLoader(e){this.manager=e===void 0?dn:e}function Loader(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function JSONLoader(e){'boolean'==typeof e&&(console.warn('THREE.JSONLoader: showStatus parameter has been removed from constructor.'),e=void 0),this.manager=e===void 0?dn:e,this.withCredentials=!1}function ObjectLoader(e){this.manager=e===void 0?dn:e,this.texturePath=''}function CatmullRom(e,t,n,a,r){var o=0.5*(a-t),i=0.5*(r-n),s=e*e;return(2*n-2*a+o+i)*(e*s)+(-3*n+3*a-2*o-i)*s+o*e+n}function QuadraticBezierP0(e,t){var n=1-e;return n*n*t}function QuadraticBezierP1(e,t){return 2*(1-e)*e*t}function QuadraticBezierP2(e,t){return e*e*t}function QuadraticBezier(e,t,n,a){return QuadraticBezierP0(e,t)+QuadraticBezierP1(e,n)+QuadraticBezierP2(e,a)}function CubicBezierP0(e,t){var n=1-e;return n*n*n*t}function CubicBezierP1(e,t){var n=1-e;return 3*n*n*e*t}function CubicBezierP2(e,t){return 3*(1-e)*e*e*t}function CubicBezierP3(e,t){return e*e*e*t}function CubicBezier(e,t,n,a,r){return CubicBezierP0(e,t)+CubicBezierP1(e,n)+CubicBezierP2(e,a)+CubicBezierP3(e,r)}function Curve(){this.arcLengthDivisions=200}function LineCurve(e,t){Curve.call(this),this.v1=e,this.v2=t}function CurvePath(){Curve.call(this),this.curves=[],this.autoClose=!1}function EllipseCurve(e,t,n,a,r,o,i,s){Curve.call(this),this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=a,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=i,this.aRotation=s||0}function SplineCurve(e){Curve.call(this),this.points=e===void 0?[]:e}function CubicBezierCurve(e,t,n,a){Curve.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=a}function QuadraticBezierCurve(e,t,n){Curve.call(this),this.v0=e,this.v1=t,this.v2=n}function Path(e){CurvePath.call(this),this.currentPoint=new Vector2,e&&this.fromPoints(e)}function Shape(){Path.apply(this,arguments),this.holes=[]}function ShapePath(){this.subPaths=[],this.currentPath=null}function Font(e){this.data=e}function FontLoader(e){this.manager=e===void 0?dn:e}function AudioLoader(e){this.manager=e===void 0?dn:e}function StereoCamera(){this.type='StereoCamera',this.aspect=1,this.eyeSep=0.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function CubeCamera(e,t,n){Object3D.call(this),this.type='CubeCamera';var a=90,r=1,o=new PerspectiveCamera(a,r,e,t);o.up.set(0,-1,0),o.lookAt(new Vector3(1,0,0)),this.add(o);var i=new PerspectiveCamera(a,r,e,t);i.up.set(0,-1,0),i.lookAt(new Vector3(-1,0,0)),this.add(i);var s=new PerspectiveCamera(a,r,e,t);s.up.set(0,0,1),s.lookAt(new Vector3(0,1,0)),this.add(s);var l=new PerspectiveCamera(a,r,e,t);l.up.set(0,0,-1),l.lookAt(new Vector3(0,-1,0)),this.add(l);var d=new PerspectiveCamera(a,r,e,t);d.up.set(0,-1,0),d.lookAt(new Vector3(0,0,1)),this.add(d);var c=new PerspectiveCamera(a,r,e,t);c.up.set(0,-1,0),c.lookAt(new Vector3(0,0,-1)),this.add(c);this.renderTarget=new WebGLRenderTargetCube(n,n,{format:nt,magFilter:ke,minFilter:ke}),this.renderTarget.texture.name='CubeCamera',this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,a=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,o,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,s,n),n.activeCubeFace=3,e.render(t,l,n),n.activeCubeFace=4,e.render(t,d,n),n.texture.generateMipmaps=a,n.activeCubeFace=5,e.render(t,c,n),e.setRenderTarget(null)},this.clear=function(e,t,n,a){for(var r=this.renderTarget,o=0;6>o;o++)r.activeCubeFace=o,e.setRenderTarget(r),e.clear(t,n,a);e.setRenderTarget(null)}}function AudioListener(){Object3D.call(this),this.type='AudioListener',this.context=En.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Audio(e){Object3D.call(this),this.type='Audio',this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType='empty',this.filters=[]}function PositionalAudio(e){Audio.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function AudioAnalyser(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t===void 0?2048:t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function PropertyMixer(e,t,n){this.binding=e,this.valueSize=n;var a=Float64Array,r;'quaternion'===t?r=this._slerp:'string'===t||'bool'===t?(a=Array,r=this._select):r=this._lerp;this.buffer=new a(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Composite(e,t,n){var a=n||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}function PropertyBinding(e,t,n){this.path=t,this.parsedPath=n||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function AnimationObjectGroup(){this.uuid=kt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,a=arguments.length;t!==a;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function AnimationAction(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var a=t.tracks,r=a.length,o=Array(r),s={endingStart:vt,endingEnd:vt},l=0,i;l!==r;++l)i=a[l].createInterpolant(null),o[l]=i,i.settings=s;this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ct,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function AnimationMixer(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Uniform(e){'string'==typeof e&&(console.warn('THREE.Uniform: Type parameter is no longer needed.'),e=arguments[1]),this.value=e}function InstancedBufferGeometry(){BufferGeometry.call(this),this.type='InstancedBufferGeometry',this.maxInstancedCount=void 0}function InterleavedBufferAttribute(e,t,n,a){this.uuid=kt.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===a}function InterleavedBuffer(e,t){this.uuid=kt.generateUUID(),this.array=e,this.stride=t,this.count=e===void 0?0:e.length/t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function InstancedInterleavedBuffer(e,t,n){InterleavedBuffer.call(this,e,t),this.meshPerAttribute=n||1}function InstancedBufferAttribute(e,t,n){BufferAttribute.call(this,e,t),this.meshPerAttribute=n||1}function Raycaster(e,t,n,a){this.ray=new Ray(e,t),this.near=n||0,this.far=a||Infinity,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn('THREE.Raycaster: params.PointCloud has been renamed to params.Points.'),this.Points}}})}function ascSort(e,t){return e.distance-t.distance}function intersectObject(e,t,n,a){if(!1!==e.visible&&(e.raycast(t,n),!0===a))for(var r=e.children,o=0,i=r.length;o<i;o++)intersectObject(r[o],t,n,!0)}function Clock(e){this.autoStart=!(e!==void 0)||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Spherical(e,t,n){return this.radius=void 0===e?1:e,this.phi=void 0===t?0:t,this.theta=void 0===n?0:n,this}function Cylindrical(e,t,n){return this.radius=void 0===e?1:e,this.theta=void 0===t?0:t,this.y=void 0===n?0:n,this}function ImmediateRenderObject(e){Object3D.call(this),this.material=e,this.render=function(){}}function VertexNormalsHelper(e,t,n,a){this.object=e,this.size=t===void 0?1:t;var r=n===void 0?16711680:n,o=a===void 0?1:a,i=0,s=this.object.geometry;s&&s.isGeometry?i=3*s.faces.length:s&&s.isBufferGeometry&&(i=s.attributes.normal.count);var l=new BufferGeometry,d=new Float32BufferAttribute(3*(2*i),3);l.addAttribute('position',d),LineSegments.call(this,l,new LineBasicMaterial({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function SpotLightHelper(e,t){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new BufferGeometry,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1,i=32;r<i;r++,o++){var s=2*(r/i*S),l=2*(o/i*S);a.push(g(s),m(s),1,g(l),m(l),1)}n.addAttribute('position',new Float32BufferAttribute(a,3));var d=new LineBasicMaterial({fog:!1});this.cone=new LineSegments(n,d),this.add(this.cone),this.update()}function getBoneList(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,getBoneList(e.children[n]));return t}function SkeletonHelper(e){for(var t=getBoneList(e),n=new BufferGeometry,a=[],r=[],o=new Color(0,0,1),s=new Color(0,1,0),l=0,i;l<t.length;l++)i=t[l],i.parent&&i.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),r.push(o.r,o.g,o.b),r.push(s.r,s.g,s.b));n.addAttribute('position',new Float32BufferAttribute(a,3)),n.addAttribute('color',new Float32BufferAttribute(r,3));var d=new LineBasicMaterial({vertexColors:W,depthTest:!1,depthWrite:!1,transparent:!0});LineSegments.call(this,n,d),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function PointLightHelper(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var a=new SphereBufferGeometry(t,4,2),r=new MeshBasicMaterial({wireframe:!0,fog:!1});Mesh.call(this,a,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function RectAreaLightHelper(e,t){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new LineBasicMaterial({fog:!1}),a=new BufferGeometry;a.addAttribute('position',new BufferAttribute(new Float32Array(15),3)),this.line=new Line(a,n),this.add(this.line),this.update()}function HemisphereLightHelper(e,t,n){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var a=new OctahedronBufferGeometry(t);a.rotateY(0.5*S),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1}),this.color===void 0&&(this.material.vertexColors=W);var r=a.getAttribute('position'),o=new Float32Array(3*r.count);a.addAttribute('color',new BufferAttribute(o,3)),this.add(new Mesh(a,this.material)),this.update()}function GridHelper(e,t,n,a){e=e||10,t=t||10,n=new Color(n===void 0?4473924:n),a=new Color(a===void 0?8947848:a);for(var r=t/2,o=e/t,s=e/2,l=[],d=[],c=0,i=0,p=-s;c<=t;c++,p+=o){l.push(-s,0,p,s,0,p),l.push(p,0,-s,p,0,s);var u=c===r?n:a;u.toArray(d,i),i+=3,u.toArray(d,i),i+=3,u.toArray(d,i),i+=3,u.toArray(d,i),i+=3}var m=new BufferGeometry;m.addAttribute('position',new Float32BufferAttribute(l,3)),m.addAttribute('color',new Float32BufferAttribute(d,3));var g=new LineBasicMaterial({vertexColors:W});LineSegments.call(this,m,g)}function PolarGridHelper(e,t,n,a,o,s){e=e||10,t=t||16,n=n||8,a=a||64,o=new Color(o===void 0?4473924:o),s=new Color(s===void 0?8947848:s);var l=[],d=[],c,p,u,h,i,f,r;for(h=0;h<=t;h++)u=h/t*(2*S),c=m(u)*e,p=g(u)*e,l.push(0,0,0),l.push(c,0,p),r=1&h?o:s,d.push(r.r,r.g,r.b),d.push(r.r,r.g,r.b);for(h=0;h<=n;h++)for(r=1&h?o:s,f=e-e/n*h,i=0;i<a;i++)u=i/a*(2*S),c=m(u)*f,p=g(u)*f,l.push(c,0,p),d.push(r.r,r.g,r.b),u=(i+1)/a*(2*S),c=m(u)*f,p=g(u)*f,l.push(c,0,p),d.push(r.r,r.g,r.b);var E=new BufferGeometry;E.addAttribute('position',new Float32BufferAttribute(l,3)),E.addAttribute('color',new Float32BufferAttribute(d,3));var _=new LineBasicMaterial({vertexColors:W});LineSegments.call(this,E,_)}function FaceNormalsHelper(e,t,n,a){this.object=e,this.size=t===void 0?1:t;var r=n===void 0?16776960:n,o=a===void 0?1:a,i=0,s=this.object.geometry;s&&s.isGeometry?i=s.faces.length:console.warn('THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.');var l=new BufferGeometry,d=new Float32BufferAttribute(3*(2*i),3);l.addAttribute('position',d),LineSegments.call(this,l,new LineBasicMaterial({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function DirectionalLightHelper(e,t,n){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);var a=new BufferGeometry;a.addAttribute('position',new Float32BufferAttribute([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new LineBasicMaterial({fog:!1});this.lightPlane=new Line(a,r),this.add(this.lightPlane),a=new BufferGeometry,a.addAttribute('position',new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(a,r),this.add(this.targetLine),this.update()}function CameraHelper(e){function addLine(e,t,n){addPoint(e,n),addPoint(t,n)}function addPoint(e,t){a.push(0,0,0),r.push(t.r,t.g,t.b),o[e]===void 0&&(o[e]=[]),o[e].push(a.length/3-1)}var t=new BufferGeometry,n=new LineBasicMaterial({color:16777215,vertexColors:k}),a=[],r=[],o={},i=new Color(16755200),s=new Color(16711680),l=new Color(43775),d=new Color(16777215),c=new Color(3355443);addLine('n1','n2',i),addLine('n2','n4',i),addLine('n4','n3',i),addLine('n3','n1',i),addLine('f1','f2',i),addLine('f2','f4',i),addLine('f4','f3',i),addLine('f3','f1',i),addLine('n1','f1',i),addLine('n2','f2',i),addLine('n3','f3',i),addLine('n4','f4',i),addLine('p','n1',s),addLine('p','n2',s),addLine('p','n3',s),addLine('p','n4',s),addLine('u1','u2',l),addLine('u2','u3',l),addLine('u3','u1',l),addLine('c','t',d),addLine('p','c',c),addLine('cn1','cn2',c),addLine('cn3','cn4',c),addLine('cf1','cf2',c),addLine('cf3','cf4',c),t.addAttribute('position',new Float32BufferAttribute(a,3)),t.addAttribute('color',new Float32BufferAttribute(r,3)),LineSegments.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function BoxHelper(e,t){this.object=e,t===void 0&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),r=new BufferGeometry;r.setIndex(new BufferAttribute(n,1)),r.addAttribute('position',new BufferAttribute(a,3)),LineSegments.call(this,r,new LineBasicMaterial({color:t})),this.matrixAutoUpdate=!1,this.update()}function Box3Helper(e,t){this.type='Box3Helper',this.box=e;var n=t===void 0?16776960:t,a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new BufferGeometry;r.setIndex(new BufferAttribute(a,1)),r.addAttribute('position',new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),LineSegments.call(this,r,new LineBasicMaterial({color:n})),this.geometry.computeBoundingSphere(),this.onBeforeRender()}function PlaneHelper(e,t,n){this.type='PlaneHelper',this.plane=e,this.size=t===void 0?1:t;var a=n===void 0?16776960:n,r=new BufferGeometry;r.addAttribute('position',new Float32BufferAttribute([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Line.call(this,r,new LineBasicMaterial({color:a}));var o=new BufferGeometry;o.addAttribute('position',new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Mesh(o,new MeshBasicMaterial({color:a,opacity:0.2,transparent:!0,depthWrite:!1}))),this.onBeforeRender()}function ArrowHelper(e,t,n,a,r,o){Object3D.call(this),a===void 0&&(a=16776960),n===void 0&&(n=1),r===void 0&&(r=0.2*n),o===void 0&&(o=0.2*r),Cn==void 0&&(Cn=new BufferGeometry,Cn.addAttribute('position',new Float32BufferAttribute([0,0,0,0,1,0],3)),yn=new CylinderBufferGeometry(0,0.5,1,5,1),yn.translate(0,-0.5,0)),this.position.copy(t),this.line=new Line(Cn,new LineBasicMaterial({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(yn,new MeshBasicMaterial({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,o)}function AxisHelper(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new BufferGeometry;n.addAttribute('position',new Float32BufferAttribute(t,3)),n.addAttribute('color',new Float32BufferAttribute([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1],3));var a=new LineBasicMaterial({vertexColors:W});LineSegments.call(this,n,a)}function CubicPoly(){function init(t,o,i,s){e=t,n=i,a=-3*t+3*o-2*i-s,r=2*t-2*o+i+s}var e=0,n=0,a=0,r=0;return{initCatmullRom:function(e,t,n,a,r){init(t,n,r*(n-e),r*(a-t))},initNonuniformCatmullRom:function(e,t,n,a,r,o,i){var s=(t-e)/r-(n-e)/(r+o)+(n-t)/o,l=(n-t)/o-(a-t)/(o+i)+(a-n)/i;s*=o,l*=o,init(t,n,s,l)},calc:function(o){var t=o*o;return e+n*o+a*t+r*(t*o)}}}function CatmullRomCurve3(e){Curve.call(this),2>e.length&&console.warn('THREE.CatmullRomCurve3: Points array needs at least two entries.'),this.points=e||[],this.closed=!1}function CubicBezierCurve3(e,t,n,a){Curve.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=a}function QuadraticBezierCurve3(e,t,n){Curve.call(this),this.v0=e,this.v1=t,this.v2=n}function LineCurve3(e,t){Curve.call(this),this.v1=e,this.v2=t}function ArcCurve(e,t,n,a,r,o){EllipseCurve.call(this,e,t,n,n,a,r,o)}function Face4(e,t,n,a,r,o,i){return console.warn('THREE.Face4 has been removed. A THREE.Face3 will be created instead.'),new Face3(e,t,n,r,o,i)}function MeshFaceMaterial(e){return console.warn('THREE.MeshFaceMaterial has been removed. Use an Array instead.'),e}function MultiMaterial(e){return void 0===e&&(e=[]),console.warn('THREE.MultiMaterial has been removed. Use an Array instead.'),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function PointCloud(e,t){return console.warn('THREE.PointCloud has been renamed to THREE.Points.'),new Points(e,t)}function Particle(e){return console.warn('THREE.Particle has been renamed to THREE.Sprite.'),new Sprite(e)}function ParticleSystem(e,t){return console.warn('THREE.ParticleSystem has been renamed to THREE.Points.'),new Points(e,t)}function PointCloudMaterial(e){return console.warn('THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.'),new PointsMaterial(e)}function ParticleBasicMaterial(e){return console.warn('THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.'),new PointsMaterial(e)}function ParticleSystemMaterial(e){return console.warn('THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.'),new PointsMaterial(e)}function Vertex(e,t,n){return console.warn('THREE.Vertex has been removed. Use THREE.Vector3 instead.'),new Vector3(e,t,n)}function DynamicBufferAttribute(e,t){return console.warn('THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.'),new BufferAttribute(e,t).setDynamic(!0)}function Int8Attribute(e,t){return console.warn('THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.'),new Int8BufferAttribute(e,t)}function Uint8Attribute(e,t){return console.warn('THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.'),new Uint8BufferAttribute(e,t)}function Uint8ClampedAttribute(e,t){return console.warn('THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.'),new Uint8ClampedBufferAttribute(e,t)}function Int16Attribute(e,t){return console.warn('THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.'),new Int16BufferAttribute(e,t)}function Uint16Attribute(e,t){return console.warn('THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.'),new Uint16BufferAttribute(e,t)}function Int32Attribute(e,t){return console.warn('THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.'),new Int32BufferAttribute(e,t)}function Uint32Attribute(e,t){return console.warn('THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.'),new Uint32BufferAttribute(e,t)}function Float32Attribute(e,t){return console.warn('THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.'),new Float32BufferAttribute(e,t)}function Float64Attribute(e,t){return console.warn('THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.'),new Float64BufferAttribute(e,t)}function ClosedSplineCurve3(e){console.warn('THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.'),CatmullRomCurve3.call(this,e),this.type='catmullrom',this.closed=!0}function SplineCurve3(e){console.warn('THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.'),CatmullRomCurve3.call(this,e),this.type='catmullrom'}function Spline(e){console.warn('THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.'),CatmullRomCurve3.call(this,e),this.type='catmullrom'}function BoundingBoxHelper(e,t){return console.warn('THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.'),new BoxHelper(e,t)}function EdgesHelper(e,t){return console.warn('THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.'),new LineSegments(new EdgesGeometry(e.geometry),new LineBasicMaterial({color:void 0===t?16777215:t}))}function WireframeHelper(e,t){return console.warn('THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.'),new LineSegments(new WireframeGeometry(e.geometry),new LineBasicMaterial({color:void 0===t?16777215:t}))}function XHRLoader(e){return console.warn('THREE.XHRLoader has been renamed to THREE.FileLoader.'),new FileLoader(e)}function BinaryTextureLoader(e){return console.warn('THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.'),new DataTextureLoader(e)}function Projector(){console.error('THREE.Projector has been moved to /examples/js/renderers/Projector.js.'),this.projectVector=function(e,t){console.warn('THREE.Projector: .projectVector() is now vector.project().'),e.project(t)},this.unprojectVector=function(e,t){console.warn('THREE.Projector: .unprojectVector() is now vector.unproject().'),e.unproject(t)},this.pickingRay=function(){console.error('THREE.Projector: .pickingRay() is now raycaster.setFromCamera().')}}function CanvasRenderer(){console.error('THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js'),this.domElement=document.createElementNS('http://www.w3.org/1999/xhtml','canvas'),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}var a=Math.tan,r=Math.atan,o=Math.acos,m=Math.sin,g=Math.cos,i=Math.atan2,l=Math.sqrt,s=Math.ceil,d=Math.pow,c=Math.round,p=Math.LN2,u=Math.log,f=Math.min,h=Math.sign,E=Math.floor,_=Number.isInteger,C=Number.EPSILON,y=Math.max,A=Math.abs,S=Math.PI;Object.defineProperty(t,'__esModule',{value:!0}),n.d(t,'WebGLRenderTargetCube',function(){return WebGLRenderTargetCube}),n.d(t,'WebGLRenderTarget',function(){return WebGLRenderTarget}),n.d(t,'WebGLRenderer',function(){return WebGLRenderer}),n.d(t,'ShaderLib',function(){return Jt}),n.d(t,'UniformsLib',function(){return qt}),n.d(t,'UniformsUtils',function(){return Zt}),n.d(t,'ShaderChunk',function(){return Qt}),n.d(t,'FogExp2',function(){return FogExp2}),n.d(t,'Fog',function(){return Fog}),n.d(t,'Scene',function(){return Scene}),n.d(t,'LensFlare',function(){return LensFlare}),n.d(t,'Sprite',function(){return Sprite}),n.d(t,'LOD',function(){return LOD}),n.d(t,'SkinnedMesh',function(){return SkinnedMesh}),n.d(t,'Skeleton',function(){return Skeleton}),n.d(t,'Bone',function(){return Bone}),n.d(t,'Mesh',function(){return Mesh}),n.d(t,'LineSegments',function(){return LineSegments}),n.d(t,'LineLoop',function(){return LineLoop}),n.d(t,'Line',function(){return Line}),n.d(t,'Points',function(){return Points}),n.d(t,'Group',function(){return Group}),n.d(t,'VideoTexture',function(){return VideoTexture}),n.d(t,'DataTexture',function(){return DataTexture}),n.d(t,'CompressedTexture',function(){return CompressedTexture}),n.d(t,'CubeTexture',function(){return CubeTexture}),n.d(t,'CanvasTexture',function(){return CanvasTexture}),n.d(t,'DepthTexture',function(){return DepthTexture}),n.d(t,'Texture',function(){return Texture}),n.d(t,'CompressedTextureLoader',function(){return CompressedTextureLoader}),n.d(t,'DataTextureLoader',function(){return DataTextureLoader}),n.d(t,'CubeTextureLoader',function(){return CubeTextureLoader}),n.d(t,'TextureLoader',function(){return TextureLoader}),n.d(t,'ObjectLoader',function(){return ObjectLoader}),n.d(t,'MaterialLoader',function(){return MaterialLoader}),n.d(t,'BufferGeometryLoader',function(){return BufferGeometryLoader}),n.d(t,'DefaultLoadingManager',function(){return dn}),n.d(t,'LoadingManager',function(){return LoadingManager}),n.d(t,'JSONLoader',function(){return JSONLoader}),n.d(t,'ImageLoader',function(){return ImageLoader}),n.d(t,'FontLoader',function(){return FontLoader}),n.d(t,'FileLoader',function(){return FileLoader}),n.d(t,'Loader',function(){return Loader}),n.d(t,'Cache',function(){return ln}),n.d(t,'AudioLoader',function(){return AudioLoader}),n.d(t,'SpotLightShadow',function(){return SpotLightShadow}),n.d(t,'SpotLight',function(){return SpotLight}),n.d(t,'PointLight',function(){return PointLight}),n.d(t,'RectAreaLight',function(){return RectAreaLight}),n.d(t,'HemisphereLight',function(){return HemisphereLight}),n.d(t,'DirectionalLightShadow',function(){return DirectionalLightShadow}),n.d(t,'DirectionalLight',function(){return DirectionalLight}),n.d(t,'AmbientLight',function(){return AmbientLight}),n.d(t,'LightShadow',function(){return LightShadow}),n.d(t,'Light',function(){return Light}),n.d(t,'StereoCamera',function(){return StereoCamera}),n.d(t,'PerspectiveCamera',function(){return PerspectiveCamera}),n.d(t,'OrthographicCamera',function(){return OrthographicCamera}),n.d(t,'CubeCamera',function(){return CubeCamera}),n.d(t,'ArrayCamera',function(){return ArrayCamera}),n.d(t,'Camera',function(){return Camera}),n.d(t,'AudioListener',function(){return AudioListener}),n.d(t,'PositionalAudio',function(){return PositionalAudio}),n.d(t,'AudioContext',function(){return En}),n.d(t,'AudioAnalyser',function(){return AudioAnalyser}),n.d(t,'Audio',function(){return Audio}),n.d(t,'VectorKeyframeTrack',function(){return VectorKeyframeTrack}),n.d(t,'StringKeyframeTrack',function(){return StringKeyframeTrack}),n.d(t,'QuaternionKeyframeTrack',function(){return QuaternionKeyframeTrack}),n.d(t,'NumberKeyframeTrack',function(){return NumberKeyframeTrack}),n.d(t,'ColorKeyframeTrack',function(){return ColorKeyframeTrack}),n.d(t,'BooleanKeyframeTrack',function(){return BooleanKeyframeTrack}),n.d(t,'PropertyMixer',function(){return PropertyMixer}),n.d(t,'PropertyBinding',function(){return PropertyBinding}),n.d(t,'KeyframeTrack',function(){return KeyframeTrack}),n.d(t,'AnimationUtils',function(){return cn}),n.d(t,'AnimationObjectGroup',function(){return AnimationObjectGroup}),n.d(t,'AnimationMixer',function(){return AnimationMixer}),n.d(t,'AnimationClip',function(){return AnimationClip}),n.d(t,'Uniform',function(){return Uniform}),n.d(t,'InstancedBufferGeometry',function(){return InstancedBufferGeometry}),n.d(t,'BufferGeometry',function(){return BufferGeometry}),n.d(t,'GeometryIdCount',function(){return GeometryIdCount}),n.d(t,'Geometry',function(){return Geometry}),n.d(t,'InterleavedBufferAttribute',function(){return InterleavedBufferAttribute}),n.d(t,'InstancedInterleavedBuffer',function(){return InstancedInterleavedBuffer}),n.d(t,'InterleavedBuffer',function(){return InterleavedBuffer}),n.d(t,'InstancedBufferAttribute',function(){return InstancedBufferAttribute}),n.d(t,'Face3',function(){return Face3}),n.d(t,'Object3D',function(){return Object3D}),n.d(t,'Raycaster',function(){return Raycaster}),n.d(t,'Layers',function(){return Layers}),n.d(t,'EventDispatcher',function(){return EventDispatcher}),n.d(t,'Clock',function(){return Clock}),n.d(t,'QuaternionLinearInterpolant',function(){return QuaternionLinearInterpolant}),n.d(t,'LinearInterpolant',function(){return LinearInterpolant}),n.d(t,'DiscreteInterpolant',function(){return DiscreteInterpolant}),n.d(t,'CubicInterpolant',function(){return CubicInterpolant}),n.d(t,'Interpolant',function(){return Interpolant}),n.d(t,'Triangle',function(){return Triangle}),n.d(t,'Math',function(){return kt}),n.d(t,'Spherical',function(){return Spherical}),n.d(t,'Cylindrical',function(){return Cylindrical}),n.d(t,'Plane',function(){return Plane}),n.d(t,'Frustum',function(){return Frustum}),n.d(t,'Sphere',function(){return Sphere}),n.d(t,'Ray',function(){return Ray}),n.d(t,'Matrix4',function(){return Matrix4}),n.d(t,'Matrix3',function(){return Matrix3}),n.d(t,'Box3',function(){return Box3}),n.d(t,'Box2',function(){return Box2}),n.d(t,'Line3',function(){return Line3}),n.d(t,'Euler',function(){return Euler}),n.d(t,'Vector4',function(){return Vector4}),n.d(t,'Vector3',function(){return Vector3}),n.d(t,'Vector2',function(){return Vector2}),n.d(t,'Quaternion',function(){return Quaternion}),n.d(t,'Color',function(){return Color}),n.d(t,'ImmediateRenderObject',function(){return ImmediateRenderObject}),n.d(t,'VertexNormalsHelper',function(){return VertexNormalsHelper}),n.d(t,'SpotLightHelper',function(){return SpotLightHelper}),n.d(t,'SkeletonHelper',function(){return SkeletonHelper}),n.d(t,'PointLightHelper',function(){return PointLightHelper}),n.d(t,'RectAreaLightHelper',function(){return RectAreaLightHelper}),n.d(t,'HemisphereLightHelper',function(){return HemisphereLightHelper}),n.d(t,'GridHelper',function(){return GridHelper}),n.d(t,'PolarGridHelper',function(){return PolarGridHelper}),n.d(t,'FaceNormalsHelper',function(){return FaceNormalsHelper}),n.d(t,'DirectionalLightHelper',function(){return DirectionalLightHelper}),n.d(t,'CameraHelper',function(){return CameraHelper}),n.d(t,'BoxHelper',function(){return BoxHelper}),n.d(t,'Box3Helper',function(){return Box3Helper}),n.d(t,'PlaneHelper',function(){return PlaneHelper}),n.d(t,'ArrowHelper',function(){return ArrowHelper}),n.d(t,'AxisHelper',function(){return AxisHelper}),n.d(t,'CatmullRomCurve3',function(){return CatmullRomCurve3}),n.d(t,'CubicBezierCurve3',function(){return CubicBezierCurve3}),n.d(t,'QuadraticBezierCurve3',function(){return QuadraticBezierCurve3}),n.d(t,'LineCurve3',function(){return LineCurve3}),n.d(t,'ArcCurve',function(){return ArcCurve}),n.d(t,'EllipseCurve',function(){return EllipseCurve}),n.d(t,'SplineCurve',function(){return SplineCurve}),n.d(t,'CubicBezierCurve',function(){return CubicBezierCurve}),n.d(t,'QuadraticBezierCurve',function(){return QuadraticBezierCurve}),n.d(t,'LineCurve',function(){return LineCurve}),n.d(t,'Shape',function(){return Shape}),n.d(t,'Path',function(){return Path}),n.d(t,'ShapePath',function(){return ShapePath}),n.d(t,'Font',function(){return Font}),n.d(t,'CurvePath',function(){return CurvePath}),n.d(t,'Curve',function(){return Curve}),n.d(t,'ShapeUtils',function(){return rn}),n.d(t,'SceneUtils',function(){return Sn}),n.d(t,'WebGLUtils',function(){return WebGLUtils}),n.d(t,'WireframeGeometry',function(){return WireframeGeometry}),n.d(t,'ParametricGeometry',function(){return ParametricGeometry}),n.d(t,'ParametricBufferGeometry',function(){return ParametricBufferGeometry}),n.d(t,'TetrahedronGeometry',function(){return TetrahedronGeometry}),n.d(t,'TetrahedronBufferGeometry',function(){return TetrahedronBufferGeometry}),n.d(t,'OctahedronGeometry',function(){return OctahedronGeometry}),n.d(t,'OctahedronBufferGeometry',function(){return OctahedronBufferGeometry}),n.d(t,'IcosahedronGeometry',function(){return IcosahedronGeometry}),n.d(t,'IcosahedronBufferGeometry',function(){return IcosahedronBufferGeometry}),n.d(t,'DodecahedronGeometry',function(){return DodecahedronGeometry}),n.d(t,'DodecahedronBufferGeometry',function(){return DodecahedronBufferGeometry}),n.d(t,'PolyhedronGeometry',function(){return PolyhedronGeometry}),n.d(t,'PolyhedronBufferGeometry',function(){return PolyhedronBufferGeometry}),n.d(t,'TubeGeometry',function(){return TubeGeometry}),n.d(t,'TubeBufferGeometry',function(){return TubeBufferGeometry}),n.d(t,'TorusKnotGeometry',function(){return TorusKnotGeometry}),n.d(t,'TorusKnotBufferGeometry',function(){return TorusKnotBufferGeometry}),n.d(t,'TorusGeometry',function(){return TorusGeometry}),n.d(t,'TorusBufferGeometry',function(){return TorusBufferGeometry}),n.d(t,'TextGeometry',function(){return TextGeometry}),n.d(t,'TextBufferGeometry',function(){return TextBufferGeometry}),n.d(t,'SphereGeometry',function(){return SphereGeometry}),n.d(t,'SphereBufferGeometry',function(){return SphereBufferGeometry}),n.d(t,'RingGeometry',function(){return RingGeometry}),n.d(t,'RingBufferGeometry',function(){return RingBufferGeometry}),n.d(t,'PlaneGeometry',function(){return PlaneGeometry}),n.d(t,'PlaneBufferGeometry',function(){return PlaneBufferGeometry}),n.d(t,'LatheGeometry',function(){return LatheGeometry}),n.d(t,'LatheBufferGeometry',function(){return LatheBufferGeometry}),n.d(t,'ShapeGeometry',function(){return ShapeGeometry}),n.d(t,'ShapeBufferGeometry',function(){return ShapeBufferGeometry}),n.d(t,'ExtrudeGeometry',function(){return ExtrudeGeometry}),n.d(t,'ExtrudeBufferGeometry',function(){return ExtrudeBufferGeometry}),n.d(t,'EdgesGeometry',function(){return EdgesGeometry}),n.d(t,'ConeGeometry',function(){return ConeGeometry}),n.d(t,'ConeBufferGeometry',function(){return ConeBufferGeometry}),n.d(t,'CylinderGeometry',function(){return CylinderGeometry}),n.d(t,'CylinderBufferGeometry',function(){return CylinderBufferGeometry}),n.d(t,'CircleGeometry',function(){return CircleGeometry}),n.d(t,'CircleBufferGeometry',function(){return CircleBufferGeometry}),n.d(t,'BoxGeometry',function(){return BoxGeometry}),n.d(t,'BoxBufferGeometry',function(){return BoxBufferGeometry}),n.d(t,'ShadowMaterial',function(){return ShadowMaterial}),n.d(t,'SpriteMaterial',function(){return SpriteMaterial}),n.d(t,'RawShaderMaterial',function(){return RawShaderMaterial}),n.d(t,'ShaderMaterial',function(){return ShaderMaterial}),n.d(t,'PointsMaterial',function(){return PointsMaterial}),n.d(t,'MeshPhysicalMaterial',function(){return MeshPhysicalMaterial}),n.d(t,'MeshStandardMaterial',function(){return MeshStandardMaterial}),n.d(t,'MeshPhongMaterial',function(){return MeshPhongMaterial}),n.d(t,'MeshToonMaterial',function(){return MeshToonMaterial}),n.d(t,'MeshNormalMaterial',function(){return MeshNormalMaterial}),n.d(t,'MeshLambertMaterial',function(){return MeshLambertMaterial}),n.d(t,'MeshDepthMaterial',function(){return MeshDepthMaterial}),n.d(t,'MeshDistanceMaterial',function(){return MeshDistanceMaterial}),n.d(t,'MeshBasicMaterial',function(){return MeshBasicMaterial}),n.d(t,'LineDashedMaterial',function(){return LineDashedMaterial}),n.d(t,'LineBasicMaterial',function(){return LineBasicMaterial}),n.d(t,'Material',function(){return Material}),n.d(t,'Float64BufferAttribute',function(){return Float64BufferAttribute}),n.d(t,'Float32BufferAttribute',function(){return Float32BufferAttribute}),n.d(t,'Uint32BufferAttribute',function(){return Uint32BufferAttribute}),n.d(t,'Int32BufferAttribute',function(){return Int32BufferAttribute}),n.d(t,'Uint16BufferAttribute',function(){return Uint16BufferAttribute}),n.d(t,'Int16BufferAttribute',function(){return Int16BufferAttribute}),n.d(t,'Uint8ClampedBufferAttribute',function(){return Uint8ClampedBufferAttribute}),n.d(t,'Uint8BufferAttribute',function(){return Uint8BufferAttribute}),n.d(t,'Int8BufferAttribute',function(){return Int8BufferAttribute}),n.d(t,'BufferAttribute',function(){return BufferAttribute}),n.d(t,'REVISION',function(){return b}),n.d(t,'MOUSE',function(){return x}),n.d(t,'CullFaceNone',function(){return v}),n.d(t,'CullFaceBack',function(){return T}),n.d(t,'CullFaceFront',function(){return R}),n.d(t,'CullFaceFrontBack',function(){return F}),n.d(t,'FrontFaceDirectionCW',function(){return w}),n.d(t,'FrontFaceDirectionCCW',function(){return L}),n.d(t,'BasicShadowMap',function(){return M}),n.d(t,'PCFShadowMap',function(){return B}),n.d(t,'PCFSoftShadowMap',function(){return D}),n.d(t,'FrontSide',function(){return I}),n.d(t,'BackSide',function(){return N}),n.d(t,'DoubleSide',function(){return P}),n.d(t,'FlatShading',function(){return O}),n.d(t,'SmoothShading',function(){return U}),n.d(t,'NoColors',function(){return G}),n.d(t,'FaceColors',function(){return k}),n.d(t,'VertexColors',function(){return W}),n.d(t,'NoBlending',function(){return H}),n.d(t,'NormalBlending',function(){return V}),n.d(t,'AdditiveBlending',function(){return $}),n.d(t,'SubtractiveBlending',function(){return z}),n.d(t,'MultiplyBlending',function(){return X}),n.d(t,'CustomBlending',function(){return j}),n.d(t,'AddEquation',function(){return Y}),n.d(t,'SubtractEquation',function(){return K}),n.d(t,'ReverseSubtractEquation',function(){return q}),n.d(t,'MinEquation',function(){return Z}),n.d(t,'MaxEquation',function(){return Q}),n.d(t,'ZeroFactor',function(){return J}),n.d(t,'OneFactor',function(){return ee}),n.d(t,'SrcColorFactor',function(){return te}),n.d(t,'OneMinusSrcColorFactor',function(){return ne}),n.d(t,'SrcAlphaFactor',function(){return ae}),n.d(t,'OneMinusSrcAlphaFactor',function(){return re}),n.d(t,'DstAlphaFactor',function(){return oe}),n.d(t,'OneMinusDstAlphaFactor',function(){return ie}),n.d(t,'DstColorFactor',function(){return se}),n.d(t,'OneMinusDstColorFactor',function(){return le}),n.d(t,'SrcAlphaSaturateFactor',function(){return de}),n.d(t,'NeverDepth',function(){return ce}),n.d(t,'AlwaysDepth',function(){return pe}),n.d(t,'LessDepth',function(){return ue}),n.d(t,'LessEqualDepth',function(){return me}),n.d(t,'EqualDepth',function(){return ge}),n.d(t,'GreaterEqualDepth',function(){return he}),n.d(t,'GreaterDepth',function(){return fe}),n.d(t,'NotEqualDepth',function(){return Ee}),n.d(t,'MultiplyOperation',function(){return _e}),n.d(t,'MixOperation',function(){return Ce}),n.d(t,'AddOperation',function(){return ye}),n.d(t,'NoToneMapping',function(){return Ae}),n.d(t,'LinearToneMapping',function(){return be}),n.d(t,'ReinhardToneMapping',function(){return xe}),n.d(t,'Uncharted2ToneMapping',function(){return ve}),n.d(t,'CineonToneMapping',function(){return Se}),n.d(t,'UVMapping',function(){return Te}),n.d(t,'CubeReflectionMapping',function(){return Re}),n.d(t,'CubeRefractionMapping',function(){return Fe}),n.d(t,'EquirectangularReflectionMapping',function(){return we}),n.d(t,'EquirectangularRefractionMapping',function(){return Le}),n.d(t,'SphericalReflectionMapping',function(){return Me}),n.d(t,'CubeUVReflectionMapping',function(){return Be}),n.d(t,'CubeUVRefractionMapping',function(){return De}),n.d(t,'RepeatWrapping',function(){return Ie}),n.d(t,'ClampToEdgeWrapping',function(){return Ne}),n.d(t,'MirroredRepeatWrapping',function(){return Pe}),n.d(t,'NearestFilter',function(){return Oe}),n.d(t,'NearestMipMapNearestFilter',function(){return Ue}),n.d(t,'NearestMipMapLinearFilter',function(){return Ge}),n.d(t,'LinearFilter',function(){return ke}),n.d(t,'LinearMipMapNearestFilter',function(){return We}),n.d(t,'LinearMipMapLinearFilter',function(){return He}),n.d(t,'UnsignedByteType',function(){return Ve}),n.d(t,'ByteType',function(){return $e}),n.d(t,'ShortType',function(){return ze}),n.d(t,'UnsignedShortType',function(){return Xe}),n.d(t,'IntType',function(){return je}),n.d(t,'UnsignedIntType',function(){return Ye}),n.d(t,'FloatType',function(){return Ke}),n.d(t,'HalfFloatType',function(){return qe}),n.d(t,'UnsignedShort4444Type',function(){return Ze}),n.d(t,'UnsignedShort5551Type',function(){return Qe}),n.d(t,'UnsignedShort565Type',function(){return Je}),n.d(t,'UnsignedInt248Type',function(){return et}),n.d(t,'AlphaFormat',function(){return tt}),n.d(t,'RGBFormat',function(){return nt}),n.d(t,'RGBAFormat',function(){return at}),n.d(t,'LuminanceFormat',function(){return rt}),n.d(t,'LuminanceAlphaFormat',function(){return ot}),n.d(t,'RGBEFormat',function(){return it}),n.d(t,'DepthFormat',function(){return st}),n.d(t,'DepthStencilFormat',function(){return lt}),n.d(t,'RGB_S3TC_DXT1_Format',function(){return dt}),n.d(t,'RGBA_S3TC_DXT1_Format',function(){return ct}),n.d(t,'RGBA_S3TC_DXT3_Format',function(){return pt}),n.d(t,'RGBA_S3TC_DXT5_Format',function(){return ut}),n.d(t,'RGB_PVRTC_4BPPV1_Format',function(){return mt}),n.d(t,'RGB_PVRTC_2BPPV1_Format',function(){return gt}),n.d(t,'RGBA_PVRTC_4BPPV1_Format',function(){return ht}),n.d(t,'RGBA_PVRTC_2BPPV1_Format',function(){return ft}),n.d(t,'RGB_ETC1_Format',function(){return Et}),n.d(t,'LoopOnce',function(){return _t}),n.d(t,'LoopRepeat',function(){return Ct}),n.d(t,'LoopPingPong',function(){return yt}),n.d(t,'InterpolateDiscrete',function(){return At}),n.d(t,'InterpolateLinear',function(){return bt}),n.d(t,'InterpolateSmooth',function(){return xt}),n.d(t,'ZeroCurvatureEnding',function(){return vt}),n.d(t,'ZeroSlopeEnding',function(){return St}),n.d(t,'WrapAroundEnding',function(){return Tt}),n.d(t,'TrianglesDrawMode',function(){return Rt}),n.d(t,'TriangleStripDrawMode',function(){return Ft}),n.d(t,'TriangleFanDrawMode',function(){return wt}),n.d(t,'LinearEncoding',function(){return Lt}),n.d(t,'sRGBEncoding',function(){return Mt}),n.d(t,'GammaEncoding',function(){return Bt}),n.d(t,'RGBEEncoding',function(){return Dt}),n.d(t,'LogLuvEncoding',function(){return It}),n.d(t,'RGBM7Encoding',function(){return Nt}),n.d(t,'RGBM16Encoding',function(){return Pt}),n.d(t,'RGBDEncoding',function(){return Ot}),n.d(t,'BasicDepthPacking',function(){return Ut}),n.d(t,'RGBADepthPacking',function(){return Gt}),n.d(t,'CubeGeometry',function(){return BoxGeometry}),n.d(t,'Face4',function(){return Face4}),n.d(t,'LineStrip',function(){return Tn}),n.d(t,'LinePieces',function(){return Rn}),n.d(t,'MeshFaceMaterial',function(){return MeshFaceMaterial}),n.d(t,'MultiMaterial',function(){return MultiMaterial}),n.d(t,'PointCloud',function(){return PointCloud}),n.d(t,'Particle',function(){return Particle}),n.d(t,'ParticleSystem',function(){return ParticleSystem}),n.d(t,'PointCloudMaterial',function(){return PointCloudMaterial}),n.d(t,'ParticleBasicMaterial',function(){return ParticleBasicMaterial}),n.d(t,'ParticleSystemMaterial',function(){return ParticleSystemMaterial}),n.d(t,'Vertex',function(){return Vertex}),n.d(t,'DynamicBufferAttribute',function(){return DynamicBufferAttribute}),n.d(t,'Int8Attribute',function(){return Int8Attribute}),n.d(t,'Uint8Attribute',function(){return Uint8Attribute}),n.d(t,'Uint8ClampedAttribute',function(){return Uint8ClampedAttribute}),n.d(t,'Int16Attribute',function(){return Int16Attribute}),n.d(t,'Uint16Attribute',function(){return Uint16Attribute}),n.d(t,'Int32Attribute',function(){return Int32Attribute}),n.d(t,'Uint32Attribute',function(){return Uint32Attribute}),n.d(t,'Float32Attribute',function(){return Float32Attribute}),n.d(t,'Float64Attribute',function(){return Float64Attribute}),n.d(t,'ClosedSplineCurve3',function(){return ClosedSplineCurve3}),n.d(t,'SplineCurve3',function(){return SplineCurve3}),n.d(t,'Spline',function(){return Spline}),n.d(t,'BoundingBoxHelper',function(){return BoundingBoxHelper}),n.d(t,'EdgesHelper',function(){return EdgesHelper}),n.d(t,'WireframeHelper',function(){return WireframeHelper}),n.d(t,'XHRLoader',function(){return XHRLoader}),n.d(t,'BinaryTextureLoader',function(){return BinaryTextureLoader}),n.d(t,'GeometryUtils',function(){return Fn}),n.d(t,'ImageUtils',function(){return wn}),n.d(t,'Projector',function(){return Projector}),n.d(t,'CanvasRenderer',function(){return CanvasRenderer}),C===void 0&&(C=2.220446049250313e-16),_===void 0&&(_=function(e){return'number'==typeof e&&isFinite(e)&&E(e)===e}),h===void 0&&(h=function(e){return 0>e?-1:0<e?1:+e}),Function.prototype.name===void 0&&Object.defineProperty(Function.prototype,'name',{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),Object.assign===void 0&&function(){Object.assign=function(e){if(e===void 0||null===e)throw new TypeError('Cannot convert undefined or null to object');for(var t=Object(e),n=1,a;n<arguments.length;n++)if(a=arguments[n],void 0!==a&&null!==a)for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);return t}}(),Object.assign(EventDispatcher.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});var n=this._listeners;n[e]===void 0&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;var n=this._listeners;return n[e]!==void 0&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,a=n[e];if(void 0!==a){var r=a.indexOf(t);-1!==r&&a.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var a=n.slice(0),r=0,o=a.length;r<o;r++)a[r].call(this,e)}}}});var b='87',x={LEFT:0,MIDDLE:1,RIGHT:2},v=0,T=1,R=2,F=3,w=0,L=1,M=0,B=1,D=2,I=0,N=1,P=2,O=1,U=2,G=0,k=1,W=2,H=0,V=1,$=2,z=3,X=4,j=5,Y=100,K=101,q=102,Z=103,Q=104,J=200,ee=201,te=202,ne=203,ae=204,re=205,oe=206,ie=207,se=208,le=209,de=210,ce=0,pe=1,ue=2,me=3,ge=4,he=5,fe=6,Ee=7,_e=0,Ce=1,ye=2,Ae=0,be=1,xe=2,ve=3,Se=4,Te=300,Re=301,Fe=302,we=303,Le=304,Me=305,Be=306,De=307,Ie=1e3,Ne=1001,Pe=1002,Oe=1003,Ue=1004,Ge=1005,ke=1006,We=1007,He=1008,Ve=1009,$e=1010,ze=1011,Xe=1012,je=1013,Ye=1014,Ke=1015,qe=1016,Ze=1017,Qe=1018,Je=1019,et=1020,tt=1021,nt=1022,at=1023,rt=1024,ot=1025,it=at,st=1026,lt=1027,dt=2001,ct=2002,pt=2003,ut=2004,mt=2100,gt=2101,ht=2102,ft=2103,Et=2151,_t=2200,Ct=2201,yt=2202,At=2300,bt=2301,xt=2302,vt=2400,St=2401,Tt=2402,Rt=0,Ft=1,wt=2,Lt=3e3,Mt=3001,Bt=3007,Dt=3002,It=3003,Nt=3004,Pt=3005,Ot=3006,Ut=3200,Gt=3201,kt={DEG2RAD:S/180,RAD2DEG:180/S,generateUUID:function(){var e=['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'],t=Array(36),n=0,a;return function generateUUID(){for(var r=0;36>r;r++)8===r||13===r||18===r||23===r?t[r]='-':14===r?t[r]='4':(2>=n&&(n=0|33554432+16777216*Math.random()),a=15&n,n>>=4,t[r]=e[19===r?8|3&a:a]);return t.join('')}}(),clamp:function(e,t,n){return y(t,f(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,a,r){return a+(e-t)*(r-a)/(n-t)},lerp:function(e,n,a){return(1-a)*e+a*n},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},randInt:function(e,t){return e+E(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(0.5-Math.random())},degToRad:function(e){return e*kt.DEG2RAD},radToDeg:function(e){return e*kt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return d(2,c(u(e)/p))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}};Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Vector2.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error('index is out of range: '+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error('index is out of range: '+e);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this):(console.warn('THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.'),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this):(console.warn('THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.'),this.subVectors(e,t))},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=f(this.x,e.x),this.y=f(this.y,e.y),this},max:function(e){return this.x=y(this.x,e.x),this.y=y(this.y,e.y),this},clamp:function(e,t){return this.x=y(e.x,f(t.x,this.x)),this.y=y(e.y,f(t.y,this.y)),this},clampScalar:function(){var e=new Vector2,t=new Vector2;return function clampScalar(n,a){return e.set(n,n),t.set(a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(y(e,f(t,n)))},floor:function(){return this.x=E(this.x),this.y=E(this.y),this},ceil:function(){return this.x=s(this.x),this.y=s(this.y),this},round:function(){return this.x=c(this.x),this.y=c(this.y),this},roundToZero:function(){return this.x=0>this.x?s(this.x):E(this.x),this.y=0>this.y?s(this.y):E(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return l(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return A(this.x)+A(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=i(this.y,this.x);return 0>e&&(e+=2*S),e},distanceTo:function(e){return l(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return A(this.x-e.x)+A(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn('THREE.Vector2: offset has been removed from .fromBufferAttribute().'),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=g(t),a=m(t),r=this.x-e.x,o=this.y-e.y;return this.x=r*n-o*a+e.x,this.y=r*a+o*n+e.y,this}});var Wt=0;Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=Te,Object.defineProperty(Texture.prototype,'needsUpdate',{set:function(e){!0===e&&this.version++}}),Object.assign(Texture.prototype,EventDispatcher.prototype,{constructor:Texture,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){function getDataURL(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{t=document.createElementNS('http://www.w3.org/1999/xhtml','canvas'),t.width=e.width,t.height=e.height;var n=t.getContext('2d');e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return 2048<t.width||2048<t.height?t.toDataURL('image/jpeg',0.6):t.toDataURL('image/png')}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.5,type:'Texture',generator:'Texture.toJSON'},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=kt.generateUUID()),void 0===e.images[n.uuid]&&(e.images[n.uuid]={uuid:n.uuid,url:getDataURL(n)}),t.image=n.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:'dispose'})},transformUv:function(e){if(this.mapping===Te){if(e.multiply(this.repeat),e.add(this.offset),0>e.x||1<e.x)switch(this.wrapS){case Ie:e.x-=E(e.x);break;case Ne:e.x=0>e.x?0:1;break;case Pe:1===A(E(e.x)%2)?e.x=s(e.x)-e.x:e.x-=E(e.x);}if(0>e.y||1<e.y)switch(this.wrapT){case Ie:e.y-=E(e.y);break;case Ne:e.y=0>e.y?0:1;break;case Pe:1===A(E(e.y)%2)?e.y=s(e.y)-e.y:e.y-=E(e.y);}this.flipY&&(e.y=1-e.y)}}}),Object.assign(Vector4.prototype,{isVector4:!0,set:function(e,t,n,a){return this.x=e,this.y=t,this.z=n,this.w=a,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error('index is out of range: '+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error('index is out of range: '+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0===e.w?1:e.w,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this):(console.warn('THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.'),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this):(console.warn('THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.'),this.subVectors(e,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(t){var n=this.x,a=this.y,r=this.z,o=this.w,i=t.elements;return this.x=i[0]*n+i[4]*a+i[8]*r+i[12]*o,this.y=i[1]*n+i[5]*a+i[9]*r+i[13]*o,this.z=i[2]*n+i[6]*a+i[10]*r+i[14]*o,this.w=i[3]*n+i[7]*a+i[11]*r+i[15]*o,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*o(e.w);var t=l(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t=0.01,n=0.1,a=e.elements,r=a[0],i=a[4],d=a[8],c=a[1],p=a[5],u=a[9],m=a[2],g=a[6],h=a[10],f,E,_,C;if(A(i-c)<t&&A(d-m)<t&&A(u-g)<t){if(A(i+c)<n&&A(d+m)<n&&A(u+g)<n&&A(r+p+h-3)<n)return this.set(1,0,0,0),this;f=S;var y=(r+1)/2,b=(p+1)/2,x=(h+1)/2,v=(i+c)/4,T=(d+m)/4,R=(u+g)/4;return y>b&&y>x?y<t?(E=0,_=0.707106781,C=0.707106781):(E=l(y),_=v/E,C=T/E):b>x?b<t?(E=0.707106781,_=0,C=0.707106781):(_=l(b),E=v/_,C=R/_):x<t?(E=0.707106781,_=0.707106781,C=0):(C=l(x),E=T/C,_=R/C),this.set(E,_,C,f),this}var F=l((g-u)*(g-u)+(d-m)*(d-m)+(c-i)*(c-i));return 1e-3>A(F)&&(F=1),this.x=(g-u)/F,this.y=(d-m)/F,this.z=(c-i)/F,this.w=o((r+p+h-1)/2),this},min:function(e){return this.x=f(this.x,e.x),this.y=f(this.y,e.y),this.z=f(this.z,e.z),this.w=f(this.w,e.w),this},max:function(e){return this.x=y(this.x,e.x),this.y=y(this.y,e.y),this.z=y(this.z,e.z),this.w=y(this.w,e.w),this},clamp:function(e,t){return this.x=y(e.x,f(t.x,this.x)),this.y=y(e.y,f(t.y,this.y)),this.z=y(e.z,f(t.z,this.z)),this.w=y(e.w,f(t.w,this.w)),this},clampScalar:function(){var e,t;return function clampScalar(n,a){return void 0==e&&(e=new Vector4,t=new Vector4),e.set(n,n,n,n),t.set(a,a,a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(y(e,f(t,n)))},floor:function(){return this.x=E(this.x),this.y=E(this.y),this.z=E(this.z),this.w=E(this.w),this},ceil:function(){return this.x=s(this.x),this.y=s(this.y),this.z=s(this.z),this.w=s(this.w),this},round:function(){return this.x=c(this.x),this.y=c(this.y),this.z=c(this.z),this.w=c(this.w),this},roundToZero:function(){return this.x=0>this.x?s(this.x):E(this.x),this.y=0>this.y?s(this.y):E(this.y),this.z=0>this.z?s(this.z):E(this.z),this.w=0>this.w?s(this.w):E(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return l(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return A(this.x)+A(this.y)+A(this.z)+A(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn('THREE.Vector4: offset has been removed from .fromBufferAttribute().'),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Object.assign(WebGLRenderTarget.prototype,EventDispatcher.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:'dispose'})}}),WebGLRenderTargetCube.prototype=Object.create(WebGLRenderTarget.prototype),WebGLRenderTargetCube.prototype.constructor=WebGLRenderTargetCube,WebGLRenderTargetCube.prototype.isWebGLRenderTargetCube=!0,Object.assign(Quaternion,{slerp:function(e,n,a,r){return a.copy(e).slerp(n,r)},slerpFlat:function(e,n,a,r,o,d,c){var t=a[r+0],p=a[r+1],u=a[r+2],g=a[r+3],h=o[d+0],E=o[d+1],_=o[d+2],y=o[d+3];if(g!==y||t!==h||p!==E||u!==_){var A=1-c,s=t*h+p*E+u*_+g*y,b=0<=s?1:-1,x=1-s*s;if(x>C){var v=l(x),S=i(v,s*b);A=m(A*S)/v,c=m(c*S)/v}var T=c*b;if(t=t*A+h*T,p=p*A+E*T,u=u*A+_*T,g=g*A+y*T,A==1-c){var R=1/l(t*t+p*p+u*u+g*g);t*=R,p*=R,u*=R,g*=R}}e[n]=t,e[n+1]=p,e[n+2]=u,e[n+3]=g}}),Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Quaternion.prototype,{set:function(e,t,n,a){return this._x=e,this._y=t,this._z=n,this._w=a,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!(e&&e.isEuler))throw new Error('THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.');var n=e._x,a=e._y,r=e._z,o=e.order,i=g,s=m,l=i(n/2),d=i(a/2),c=i(r/2),p=s(n/2),u=s(a/2),h=s(r/2);return'XYZ'===o?(this._x=p*d*c+l*u*h,this._y=l*u*c-p*d*h,this._z=l*d*h+p*u*c,this._w=l*d*c-p*u*h):'YXZ'===o?(this._x=p*d*c+l*u*h,this._y=l*u*c-p*d*h,this._z=l*d*h-p*u*c,this._w=l*d*c+p*u*h):'ZXY'===o?(this._x=p*d*c-l*u*h,this._y=l*u*c+p*d*h,this._z=l*d*h+p*u*c,this._w=l*d*c-p*u*h):'ZYX'===o?(this._x=p*d*c-l*u*h,this._y=l*u*c+p*d*h,this._z=l*d*h-p*u*c,this._w=l*d*c+p*u*h):'YZX'===o?(this._x=p*d*c+l*u*h,this._y=l*u*c+p*d*h,this._z=l*d*h-p*u*c,this._w=l*d*c-p*u*h):'XZY'===o&&(this._x=p*d*c-l*u*h,this._y=l*u*c-p*d*h,this._z=l*d*h+p*u*c,this._w=l*d*c+p*u*h),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,a=m(n);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=g(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],a=t[4],r=t[8],o=t[1],i=t[5],d=t[9],c=t[2],p=t[6],u=t[10],m=n+i+u,g;return 0<m?(g=0.5/l(m+1),this._w=0.25/g,this._x=(p-d)*g,this._y=(r-c)*g,this._z=(o-a)*g):n>i&&n>u?(g=2*l(1+n-i-u),this._w=(p-d)/g,this._x=0.25*g,this._y=(a+o)/g,this._z=(r+c)/g):i>u?(g=2*l(1+i-n-u),this._w=(r-c)/g,this._x=(a+o)/g,this._y=0.25*g,this._z=(d+p)/g):(g=2*l(1+u-n-i),this._w=(o-a)/g,this._x=(r+c)/g,this._y=(d+p)/g,this._z=0.25*g),this.onChangeCallback(),this},setFromUnitVectors:function(){var e=new Vector3,t;return function setFromUnitVectors(n,a){return void 0===e&&(e=new Vector3),t=n.dot(a)+1,t<1e-6?(t=0,A(n.x)>A(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,a),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return l(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0===t?this.multiplyQuaternions(this,e):(console.warn('THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.'),this.multiplyQuaternions(e,t))},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,a=e._y,r=e._z,o=e._w,i=t._x,s=t._y,l=t._z,d=t._w;return this._x=n*d+o*i+a*l-r*s,this._y=a*d+o*s+r*i-n*l,this._z=r*d+o*l+n*s-a*i,this._w=o*d-n*i-a*s-r*l,this.onChangeCallback(),this},slerp:function(e,n){if(0===n)return this;if(1===n)return this.copy(e);var t=this._x,a=this._y,r=this._z,o=this._w,s=o*e._w+t*e._x+a*e._y+r*e._z;if(0>s?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s)return this._w=o,this._x=t,this._y=a,this._z=r,this;var d=l(1-s*s);if(1e-3>A(d))return this._w=0.5*(o+this._w),this._x=0.5*(t+this._x),this._y=0.5*(a+this._y),this._z=0.5*(r+this._z),this;var c=i(d,s),p=m((1-n)*c)/d,u=m(n*c)/d;return this._w=o*p+this._w*u,this._x=t*p+this._x*u,this._y=a*p+this._y*u,this._z=r*p+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Vector3.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error('index is out of range: '+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error('index is out of range: '+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this):(console.warn('THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.'),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this):(console.warn('THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.'),this.subVectors(e,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0===t?(this.x*=e.x,this.y*=e.y,this.z*=e.z,this):(console.warn('THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.'),this.multiplyVectors(e,t))},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new Quaternion;return function applyEuler(t){return t&&t.isEuler||console.error('THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.'),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new Quaternion;return function applyAxisAngle(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(t){var n=this.x,a=this.y,r=this.z,o=t.elements;return this.x=o[0]*n+o[3]*a+o[6]*r,this.y=o[1]*n+o[4]*a+o[7]*r,this.z=o[2]*n+o[5]*a+o[8]*r,this},applyMatrix4:function(t){var n=this.x,a=this.y,r=this.z,o=t.elements,e=1/(o[3]*n+o[7]*a+o[11]*r+o[15]);return this.x=(o[0]*n+o[4]*a+o[8]*r+o[12])*e,this.y=(o[1]*n+o[5]*a+o[9]*r+o[13])*e,this.z=(o[2]*n+o[6]*a+o[10]*r+o[14])*e,this},applyQuaternion:function(e){var t=this.x,n=this.y,a=this.z,r=e.x,o=e.y,i=e.z,s=e.w,l=s*t+o*a-i*n,d=s*n+i*t-r*a,c=s*a+r*n-o*t,p=-r*t-o*n-i*a;return this.x=l*s+p*-r+d*-i-c*-o,this.y=d*s+p*-o+c*-r-l*-i,this.z=c*s+p*-i+l*-o-d*-r,this},project:function(){var e=new Matrix4;return function project(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new Matrix4;return function unproject(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(t){var n=this.x,a=this.y,r=this.z,o=t.elements;return this.x=o[0]*n+o[4]*a+o[8]*r,this.y=o[1]*n+o[5]*a+o[9]*r,this.z=o[2]*n+o[6]*a+o[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=f(this.x,e.x),this.y=f(this.y,e.y),this.z=f(this.z,e.z),this},max:function(e){return this.x=y(this.x,e.x),this.y=y(this.y,e.y),this.z=y(this.z,e.z),this},clamp:function(e,t){return this.x=y(e.x,f(t.x,this.x)),this.y=y(e.y,f(t.y,this.y)),this.z=y(e.z,f(t.z,this.z)),this},clampScalar:function(){var e=new Vector3,t=new Vector3;return function clampScalar(n,a){return e.set(n,n,n),t.set(a,a,a),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(y(e,f(t,n)))},floor:function(){return this.x=E(this.x),this.y=E(this.y),this.z=E(this.z),this},ceil:function(){return this.x=s(this.x),this.y=s(this.y),this.z=s(this.z),this},round:function(){return this.x=c(this.x),this.y=c(this.y),this.z=c(this.z),this},roundToZero:function(){return this.x=0>this.x?s(this.x):E(this.x),this.y=0>this.y?s(this.y):E(this.y),this.z=0>this.z?s(this.z):E(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return l(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return A(this.x)+A(this.y)+A(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn('THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.'),this.crossVectors(e,t);var n=this.x,a=this.y,r=this.z;return this.x=a*e.z-r*e.y,this.y=r*e.x-n*e.z,this.z=n*e.y-a*e.x,this},crossVectors:function(e,t){var n=e.x,a=e.y,r=e.z,o=t.x,i=t.y,s=t.z;return this.x=a*s-r*i,this.y=r*o-n*s,this.z=n*i-a*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Vector3;return function projectOnPlane(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Vector3;return function reflect(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/l(this.lengthSq()*e.lengthSq());return o(kt.clamp(t,-1,1))},distanceTo:function(e){return l(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,a=this.z-e.z;return t*t+n*n+a*a},distanceToManhattan:function(e){return A(this.x-e.x)+A(this.y-e.y)+A(this.z-e.z)},setFromSpherical:function(e){var t=m(e.phi)*e.radius;return this.x=t*m(e.theta),this.y=g(e.phi)*e.radius,this.z=t*g(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*m(e.theta),this.y=e.y,this.z=e.radius*g(e.theta),this},setFromMatrixPosition:function(t){var n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=a,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn('THREE.Vector3: offset has been removed from .fromBufferAttribute().'),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(e,t,n,a,r,o,i,s,l,d,c,p,u,m,g,h){var f=this.elements;return f[0]=e,f[4]=t,f[8]=n,f[12]=a,f[1]=r,f[5]=o,f[9]=i,f[13]=s,f[2]=l,f[6]=d,f[10]=c,f[14]=p,f[3]=u,f[7]=m,f[11]=g,f[15]=h,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new Vector3;return function extractRotation(t){var n=this.elements,a=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),i=1/e.setFromMatrixColumn(t,2).length();return n[0]=a[0]*r,n[1]=a[1]*r,n[2]=a[2]*r,n[4]=a[4]*o,n[5]=a[5]*o,n[6]=a[6]*o,n[8]=a[8]*i,n[9]=a[9]*i,n[10]=a[10]*i,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error('THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.');var n=this.elements,r=t.x,o=t.y,i=t.z,s=g(r),l=m(r),p=g(o),u=m(o),h=g(i),e=m(i);if('XYZ'===t.order){var E=s*h,_=s*e,C=l*h,y=l*e;n[0]=p*h,n[4]=-p*e,n[8]=u,n[1]=_+C*u,n[5]=E-y*u,n[9]=-l*p,n[2]=y-E*u,n[6]=C+_*u,n[10]=s*p}else if('YXZ'===t.order){var A=p*h,x=p*e,v=u*h,S=u*e;n[0]=A+S*l,n[4]=v*l-x,n[8]=s*u,n[1]=s*e,n[5]=s*h,n[9]=-l,n[2]=x*l-v,n[6]=S+A*l,n[10]=s*p}else if('ZXY'===t.order){var A=p*h,x=p*e,v=u*h,S=u*e;n[0]=A-S*l,n[4]=-s*e,n[8]=v+x*l,n[1]=x+v*l,n[5]=s*h,n[9]=S-A*l,n[2]=-s*u,n[6]=l,n[10]=s*p}else if('ZYX'===t.order){var E=s*h,_=s*e,C=l*h,y=l*e;n[0]=p*h,n[4]=C*u-_,n[8]=E*u+y,n[1]=p*e,n[5]=y*u+E,n[9]=_*u-C,n[2]=-u,n[6]=l*p,n[10]=s*p}else if('YZX'===t.order){var T=s*p,R=s*u,F=l*p,w=l*u;n[0]=p*h,n[4]=w-T*e,n[8]=F*e+R,n[1]=e,n[5]=s*h,n[9]=-l*h,n[2]=-u*h,n[6]=R*e+F,n[10]=T-w*e}else if('XZY'===t.order){var T=s*p,R=s*u,F=l*p,w=l*u;n[0]=p*h,n[4]=-e,n[8]=u*h,n[1]=T*e+w,n[5]=s*h,n[9]=R*e-F,n[2]=F*e-R,n[6]=l*h,n[10]=w*e+T}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,a=e._y,r=e._z,o=e._w,i=n+n,s=a+a,l=r+r,d=n*i,c=n*s,p=n*l,u=a*s,m=a*l,g=r*l,h=o*i,f=o*s,E=o*l;return t[0]=1-(u+g),t[4]=c-E,t[8]=p+f,t[1]=c+E,t[5]=1-(d+g),t[9]=m-h,t[2]=p-f,t[6]=m+h,t[10]=1-(d+u),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function lookAt(a,r,o){var i=this.elements;return n.subVectors(a,r),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===A(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),i[0]=e.x,i[4]=t.x,i[8]=n.x,i[1]=e.y,i[5]=t.y,i[9]=n.y,i[2]=e.z,i[6]=t.z,i[10]=n.z,this}}(),multiply:function(e,t){return void 0===t?this.multiplyMatrices(this,e):(console.warn('THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.'),this.multiplyMatrices(e,t))},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,a=t.elements,r=this.elements,o=n[0],i=n[4],s=n[8],l=n[12],d=n[1],c=n[5],p=n[9],u=n[13],m=n[2],g=n[6],h=n[10],f=n[14],E=n[3],_=n[7],C=n[11],y=n[15],A=a[0],b=a[4],x=a[8],v=a[12],S=a[1],T=a[5],R=a[9],F=a[13],w=a[2],L=a[6],M=a[10],B=a[14],D=a[3],I=a[7],N=a[11],P=a[15];return r[0]=o*A+i*S+s*w+l*D,r[4]=o*b+i*T+s*L+l*I,r[8]=o*x+i*R+s*M+l*N,r[12]=o*v+i*F+s*B+l*P,r[1]=d*A+c*S+p*w+u*D,r[5]=d*b+c*T+p*L+u*I,r[9]=d*x+c*R+p*M+u*N,r[13]=d*v+c*F+p*B+u*P,r[2]=m*A+g*S+h*w+f*D,r[6]=m*b+g*T+h*L+f*I,r[10]=m*x+g*R+h*M+f*N,r[14]=m*v+g*F+h*B+f*P,r[3]=E*A+_*S+C*w+y*D,r[7]=E*b+_*T+C*L+y*I,r[11]=E*x+_*R+C*M+y*N,r[15]=E*v+_*F+C*B+y*P,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Vector3;return function applyToBufferAttribute(t){for(var n=0,a=t.count;n<a;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],a=e[8],r=e[12],o=e[1],i=e[5],s=e[9],l=e[13],d=e[2],c=e[6],p=e[10],u=e[14],m=e[3],g=e[7],h=e[11],f=e[15];return m*(+r*s*c-a*l*c-r*i*p+n*l*p+a*i*u-n*s*u)+g*(+t*s*u-t*l*p+r*o*p-a*o*u+a*l*d-r*s*d)+h*(+t*l*c-t*i*u-r*o*c+n*o*u+r*i*d-n*l*d)+f*(-a*i*d-t*s*c+t*i*p+a*o*c-n*o*p+n*s*d)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,a=e.elements,r=a[0],o=a[1],i=a[2],s=a[3],l=a[4],d=a[5],c=a[6],p=a[7],u=a[8],m=a[9],g=a[10],h=a[11],f=a[12],E=a[13],_=a[14],C=a[15],y=m*_*p-E*g*p+E*c*h-d*_*h-m*c*C+d*g*C,A=f*g*p-u*_*p-f*c*h+l*_*h+u*c*C-l*g*C,b=u*E*p-f*m*p+f*d*h-l*E*h-u*d*C+l*m*C,x=f*m*c-u*E*c-f*d*g+l*E*g+u*d*_-l*m*_,v=r*y+o*A+i*b+s*x;if(0==v){var S='THREE.Matrix4: .getInverse() can\'t invert matrix, determinant is 0';if(!0===t)throw new Error(S);else console.warn(S);return this.identity()}var T=1/v;return n[0]=y*T,n[1]=(E*g*s-m*_*s-E*i*h+o*_*h+m*i*C-o*g*C)*T,n[2]=(d*_*s-E*c*s+E*i*p-o*_*p-d*i*C+o*c*C)*T,n[3]=(m*c*s-d*g*s-m*i*p+o*g*p+d*i*h-o*c*h)*T,n[4]=A*T,n[5]=(u*_*s-f*g*s+f*i*h-r*_*h-u*i*C+r*g*C)*T,n[6]=(f*c*s-l*_*s-f*i*p+r*_*p+l*i*C-r*c*C)*T,n[7]=(l*g*s-u*c*s+u*i*p-r*g*p-l*i*h+r*c*h)*T,n[8]=b*T,n[9]=(f*m*s-u*E*s-f*o*h+r*E*h+u*o*C-r*m*C)*T,n[10]=(l*E*s-f*d*s+f*o*p-r*E*p-l*o*C+r*d*C)*T,n[11]=(u*d*s-l*m*s-u*o*p+r*m*p+l*o*h-r*d*h)*T,n[12]=x*T,n[13]=(u*E*i-f*m*i+f*o*g-r*E*g-u*o*_+r*m*_)*T,n[14]=(f*d*i-l*E*i-f*o*c+r*E*c+l*o*_-r*d*_)*T,n[15]=(l*m*i-u*d*i+u*o*c-r*m*c-l*o*g+r*d*g)*T,this},scale:function(e){var t=this.elements,n=e.x,a=e.y,r=e.z;return t[0]*=n,t[4]*=a,t[8]*=r,t[1]*=n,t[5]*=a,t[9]*=r,t[2]*=n,t[6]*=a,t[10]*=r,t[3]*=n,t[7]*=a,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return l(y(t,n,a))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=g(e),n=m(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=g(e),n=m(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=g(e),n=m(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,n){var a=g(n),r=m(n),o=1-a,t=e.x,i=e.y,s=e.z,l=o*t,d=o*i;return this.set(l*t+a,l*i-r*s,l*s+r*i,0,l*i+r*s,d*i+a,d*s-r*t,0,l*s-r*i,d*s+r*t,o*s*s+a,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new Vector3,t=new Matrix4;return function decompose(n,a,r){var o=this.elements,i=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length(),d=this.determinant();0>d&&(i=-i),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var c=1/i,p=1/s,u=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=p,t.elements[5]*=p,t.elements[6]*=p,t.elements[8]*=u,t.elements[9]*=u,t.elements[10]*=u,a.setFromRotationMatrix(t),r.x=i,r.y=s,r.z=l,this}}(),makePerspective:function(e,t,n,a,r,o){void 0===o&&console.warn('THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.');var i=this.elements;return i[0]=2*r/(t-e),i[4]=0,i[8]=(t+e)/(t-e),i[12]=0,i[1]=0,i[5]=2*r/(n-a),i[9]=(n+a)/(n-a),i[13]=0,i[2]=0,i[6]=0,i[10]=-(o+r)/(o-r),i[14]=-2*o*r/(o-r),i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this},makeOrthographic:function(e,t,n,a,r,o){var i=this.elements,s=1/(t-e),l=1/(n-a),d=1/(o-r);return i[0]=2*s,i[4]=0,i[8]=0,i[12]=-((t+e)*s),i[1]=0,i[5]=2*l,i[9]=0,i[13]=-((n+a)*l),i[2]=0,i[6]=0,i[10]=-2*d,i[14]=-((o+r)*d),i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,a=0;16>a;a++)if(t[a]!==n[a])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;16>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),DataTexture.prototype=Object.create(Texture.prototype),DataTexture.prototype.constructor=DataTexture,DataTexture.prototype.isDataTexture=!0,CubeTexture.prototype=Object.create(Texture.prototype),CubeTexture.prototype.constructor=CubeTexture,CubeTexture.prototype.isCubeTexture=!0,Object.defineProperty(CubeTexture.prototype,'images',{get:function(){return this.image},set:function(e){this.image=e}});var Ht=new Texture,Vt=new CubeTexture,$t=[],zt=[],Xt=new Float32Array(16),jt=new Float32Array(9);StructuredUniform.prototype.setValue=function(e,t){for(var a=this.seq,r=0,o=a.length,n;r!==o;++r)n=a[r],n.setValue(e,t[n.id])};var Yt=/([\w\d_]+)(\])?(\[|\.)?/g;WebGLUniforms.prototype.setValue=function(e,t,n){var a=this.map[t];a!==void 0&&a.setValue(e,n,this.renderer)},WebGLUniforms.prototype.setOptional=function(e,t,n){var a=t[n];a!==void 0&&this.setValue(e,n,a)},WebGLUniforms.upload=function(e,t,a,r){for(var o=0,i=t.length;o!==i;++o){var n=t[o],s=a[n.id];!1!==s.needsUpdate&&n.setValue(e,s.value,r)}},WebGLUniforms.seqWithValue=function(e,t){for(var a=[],r=0,o=e.length,n;r!==o;++r)n=e[r],n.id in t&&a.push(n);return a};var Kt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):'number'==typeof e?this.setHex(e):'string'==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=E(e),this.r=(255&e>>16)/255,this.g=(255&e>>8)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function hue2rgb(e,n,a){return 0>a&&(a+=1),1<a&&(a-=1),a<1/6?e+6*(n-e)*a:a<1/2?n:a<2/3?e+6*(n-e)*(2/3-a):e}return function setHSL(e,t,n){if(e=kt.euclideanModulo(e,1),t=kt.clamp(t,0,1),n=kt.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var a=0.5>=n?n*(1+t):n+t-n*t,r=2*n-a;this.r=hue2rgb(r,a,e+1/3),this.g=hue2rgb(r,a,e),this.b=hue2rgb(r,a,e-1/3)}return this}}(),setStyle:function(e){function handleAlpha(t){void 0===t||1>parseFloat(t)&&console.warn('THREE.Color: Alpha component of '+e+' will be ignored.')}var t;if(t=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n=t[1],a=t[2],r;switch(n){case'rgb':case'rgba':if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=f(255,parseInt(r[1],10))/255,this.g=f(255,parseInt(r[2],10))/255,this.b=f(255,parseInt(r[3],10))/255,handleAlpha(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=f(100,parseInt(r[1],10))/100,this.g=f(100,parseInt(r[2],10))/100,this.b=f(100,parseInt(r[3],10))/100,handleAlpha(r[5]),this;break;case'hsl':case'hsla':if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,i=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100;return handleAlpha(r[5]),this.setHSL(o,i,s)}}}else if(t=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=t[1],d=l.length;if(3===d)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&0<e.length){var l=Kt[e];void 0===l?console.warn('THREE.Color: Unknown color '+e):this.setHex(l)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=d(e.r,t),this.g=d(e.g,t),this.b=d(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=0<t?1/t:1;return this.r=d(e.r,n),this.g=d(e.g,n),this.b=d(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=l(this.r),this.g=l(this.g),this.b=l(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return('000000'+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0},n=this.r,a=this.g,r=this.b,o=y(n,a,r),i=f(n,a,r),s=(i+o)/2,l,d;if(i===o)l=0,d=0;else{var c=o-i;d=0.5>=s?c/(o+i):c/(2-o-i),o===n?l=(a-r)/c+(a<r?6:0):o===a?l=(r-n)/c+2:o===r?l=(n-a)/c+4:void 0,l/=6}return t.h=l,t.s=d,t.l=s,t},getStyle:function(){return'rgb('+(0|255*this.r)+','+(0|255*this.g)+','+(0|255*this.b)+')'},offsetHSL:function(e,t,n){var a=this.getHSL();return a.h+=e,a.s+=t,a.l+=n,this.setHSL(a.h,a.s,a.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=y(0,this.r-e.r),this.g=y(0,this.g-e.g),this.b=y(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var qt={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Vector4(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:0.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:2.5e-4},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Vector4(0,0,1,1)}}},Zt={merge:function(e){for(var t={},n=0,a;n<e.length;n++)for(var r in a=this.clone(e[n]),a)t[r]=a[r];return t},clone:function(e){var t={};for(var n in e)for(var a in t[n]={},e[n]){var r=e[n][a];t[n][a]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?r.clone():Array.isArray(r)?r.slice():r}return t}},Qt={alphamap_fragment:'#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n',alphamap_pars_fragment:'#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n',alphatest_fragment:'#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n',aomap_fragment:'#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n',aomap_pars_fragment:'#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif',begin_vertex:'\nvec3 transformed = vec3( position );\n',beginnormal_vertex:'\nvec3 objectNormal = vec3( normal );\n',bsdfs:'float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n',bumpmap_pars_fragment:'#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n',clipping_planes_fragment:'#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n',clipping_planes_pars_fragment:'#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n',clipping_planes_pars_vertex:'#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n',clipping_planes_vertex:'#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n',color_fragment:'#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif',color_pars_fragment:'#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n',color_pars_vertex:'#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif',color_vertex:'#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif',common:'#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n',cube_uv_reflection_fragment:'#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n',defaultnormal_vertex:'vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n',displacementmap_pars_vertex:'#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n',displacementmap_vertex:'#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n',emissivemap_fragment:'#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n',emissivemap_pars_fragment:'#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n',encodings_fragment:'  gl_FragColor = linearToOutputTexel( gl_FragColor );\n',encodings_pars_fragment:'\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n',envmap_fragment:'#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n',envmap_pars_fragment:'#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n',envmap_pars_vertex:'#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n',envmap_vertex:'#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n',fog_vertex:'\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif',fog_pars_vertex:'#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n',fog_fragment:'#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n',fog_pars_fragment:'#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n',gradientmap_pars_fragment:'#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n',lightmap_fragment:'#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n',lightmap_pars_fragment:'#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif',lights_lambert_vertex:'vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n',lights_pars:'uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n',lights_phong_fragment:'BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n',lights_phong_pars_fragment:'varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n',lights_physical_fragment:'PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n',lights_physical_pars_fragment:'struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n',lights_template:'\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n',logdepthbuf_fragment:'#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif',logdepthbuf_pars_fragment:'#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n',logdepthbuf_pars_vertex:'#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif',logdepthbuf_vertex:'#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n',map_fragment:'#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n',map_pars_fragment:'#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n',map_particle_fragment:'#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n',map_particle_pars_fragment:'#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n',metalnessmap_fragment:'float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n',metalnessmap_pars_fragment:'#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif',morphnormal_vertex:'#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n',morphtarget_pars_vertex:'#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif',morphtarget_vertex:'#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n',normal_fragment:'#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n',normalmap_pars_fragment:'#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n',packing:'vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n',premultiplied_alpha_fragment:'#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n',project_vertex:'vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n',dithering_fragment:'#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n',dithering_pars_fragment:'#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n',roughnessmap_fragment:'float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n',roughnessmap_pars_fragment:'#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif',shadowmap_pars_fragment:'#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n',shadowmap_pars_vertex:'#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n',shadowmap_vertex:'#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n',shadowmask_pars_fragment:'float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n',skinbase_vertex:'#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif',skinning_pars_vertex:'#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n',skinning_vertex:'#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n',skinnormal_vertex:'#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n',specularmap_fragment:'float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif',specularmap_pars_fragment:'#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif',tonemapping_fragment:'#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n',tonemapping_pars_fragment:'#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n',uv_pars_fragment:'#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif',uv_pars_vertex:'#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n',uv_vertex:'#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif',uv2_pars_fragment:'#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif',uv2_pars_vertex:'#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif',uv2_vertex:'#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif',worldpos_vertex:'#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n',cube_frag:'uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n',cube_vert:'varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n',depth_frag:'#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n',depth_vert:'#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n',distanceRGBA_frag:'#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n',distanceRGBA_vert:'#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n',equirect_frag:'uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n',equirect_vert:'varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n',linedashed_frag:'uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',linedashed_vert:'uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n',meshbasic_frag:'uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',meshbasic_vert:'#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n',meshlambert_frag:'uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n',meshlambert_vert:'#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',meshphong_frag:'#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n',meshphong_vert:'#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',meshphysical_frag:'#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n',meshphysical_vert:'#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',normal_frag:'#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n',normal_vert:'#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n',points_frag:'uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',points_vert:'uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',shadow_frag:'uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n}\n',shadow_vert:'#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n'},Jt={basic:{uniforms:Zt.merge([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.fog]),vertexShader:Qt.meshbasic_vert,fragmentShader:Qt.meshbasic_frag},lambert:{uniforms:Zt.merge([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.fog,qt.lights,{emissive:{value:new Color(0)}}]),vertexShader:Qt.meshlambert_vert,fragmentShader:Qt.meshlambert_frag},phong:{uniforms:Zt.merge([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.gradientmap,qt.fog,qt.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:Qt.meshphong_vert,fragmentShader:Qt.meshphong_frag},standard:{uniforms:Zt.merge([qt.common,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.roughnessmap,qt.metalnessmap,qt.fog,qt.lights,{emissive:{value:new Color(0)},roughness:{value:0.5},metalness:{value:0.5},envMapIntensity:{value:1}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag},points:{uniforms:Zt.merge([qt.points,qt.fog]),vertexShader:Qt.points_vert,fragmentShader:Qt.points_frag},dashed:{uniforms:Zt.merge([qt.common,qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qt.linedashed_vert,fragmentShader:Qt.linedashed_frag},depth:{uniforms:Zt.merge([qt.common,qt.displacementmap]),vertexShader:Qt.depth_vert,fragmentShader:Qt.depth_frag},normal:{uniforms:Zt.merge([qt.common,qt.bumpmap,qt.normalmap,qt.displacementmap,{opacity:{value:1}}]),vertexShader:Qt.normal_vert,fragmentShader:Qt.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qt.cube_vert,fragmentShader:Qt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qt.equirect_vert,fragmentShader:Qt.equirect_frag},distanceRGBA:{uniforms:Zt.merge([qt.common,qt.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qt.distanceRGBA_vert,fragmentShader:Qt.distanceRGBA_frag},shadow:{uniforms:Zt.merge([qt.lights,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:Qt.shadow_vert,fragmentShader:Qt.shadow_frag}};Jt.physical={uniforms:Zt.merge([Jt.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag},Object.assign(Box2.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Vector2;return function setFromCenterAndSize(t,n){var a=e.copy(n).multiplyScalar(0.5);return this.min.copy(t).sub(a),this.max.copy(t).add(a),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=+Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new Vector2;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(e){var t=e||new Vector2;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var n=t||new Vector2;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var n=t||new Vector2;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Vector2;return function distanceToPoint(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),CanvasTexture.prototype=Object.create(Texture.prototype),CanvasTexture.prototype.constructor=CanvasTexture;var en=0;Object.assign(Material.prototype,EventDispatcher.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0===n){console.warn('THREE.Material: \''+t+'\' parameter is undefined.');continue}if('shading'==t){console.warn('THREE.'+this.type+': .shading has been removed. Use the boolean .flatShading instead.'),this.flatShading=n===O;continue}var a=this[t];if(void 0===a){console.warn('THREE.'+this.type+': \''+t+'\' is not a property of this material.');continue}a&&a.isColor?a.set(n):a&&a.isVector3&&n&&n.isVector3?a.copy(n):'overdraw'==t?this[t]=+n:this[t]=n}},toJSON:function(e){function extractFromCache(e){var t=[];for(var n in e){var a=e[n];delete a.metadata,t.push(a)}return t}var t=void 0===e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:'Material',generator:'Material.toJSON'}};if(n.uuid=this.uuid,n.type=this.type,''!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==V&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==I&&(n.side=this.side),this.vertexColors!==G&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),'round'!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),'round'!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),'{}'!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var a=extractFromCache(e.textures),r=extractFromCache(e.images);0<a.length&&(n.textures=a),0<r.length&&(n.images=r)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,a=null;if(null!==t){var r=t.length;a=Array(r);for(var n=0;n!==r;++n)a[n]=t[n].clone()}return this.clippingPlanes=a,this},dispose:function(){this.dispatchEvent({type:'dispose'})}}),ShaderMaterial.prototype=Object.create(Material.prototype),ShaderMaterial.prototype.constructor=ShaderMaterial,ShaderMaterial.prototype.isShaderMaterial=!0,ShaderMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zt.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},ShaderMaterial.prototype.toJSON=function(e){var t=Material.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},MeshDepthMaterial.prototype=Object.create(Material.prototype),MeshDepthMaterial.prototype.constructor=MeshDepthMaterial,MeshDepthMaterial.prototype.isMeshDepthMaterial=!0,MeshDepthMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},MeshDistanceMaterial.prototype=Object.create(Material.prototype),MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial,MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0,MeshDistanceMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Object.assign(Box3.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=+Infinity,n=+Infinity,a=+Infinity,r=-Infinity,o=-Infinity,s=-Infinity,d=0,i=e.length;d<i;d+=3){var l=e[d],c=e[d+1],p=e[d+2];l<t&&(t=l),c<n&&(n=c),p<a&&(a=p),l>r&&(r=l),c>o&&(o=c),p>s&&(s=p)}return this.min.set(t,n,a),this.max.set(r,o,s),this},setFromBufferAttribute:function(e){for(var t=+Infinity,n=+Infinity,a=+Infinity,r=-Infinity,o=-Infinity,s=-Infinity,d=0,i=e.count;d<i;d++){var l=e.getX(d),c=e.getY(d),p=e.getZ(d);l<t&&(t=l),c<n&&(n=c),p<a&&(a=p),l>r&&(r=l),c>o&&(o=c),p>s&&(s=p)}return this.min.set(t,n,a),this.max.set(r,o,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Vector3;return function setFromCenterAndSize(t,n){var a=e.copy(n).multiplyScalar(0.5);return this.min.copy(t).sub(a),this.max.copy(t).add(a),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new Vector3;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(0.5)},getSize:function(e){var t=e||new Vector3;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new Vector3;return function expandByObject(t){var n=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var a=t.geometry,r,o;if(void 0!==a)if(a.isGeometry){var i=a.vertices;for(r=0,o=i.length;r<o;r++)e.copy(i[r]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(r=0,o=s.count;r<o;r++)e.fromBufferAttribute(s,r).applyMatrix4(t.matrixWorld),n.expandByPoint(e)}}),this}}(),containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new Vector3;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},intersectsSphere:function(){var e=new Vector3;return function intersectsSphere(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return 0<e.normal.x?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new Vector3;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Vector3;return function distanceToPoint(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new Vector3;return function getBoundingSphere(t){var n=t||new Sphere;return this.getCenter(n.center),n.radius=0.5*this.getSize(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3];return function applyMatrix4(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Sphere.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Box3;return function setFromPoints(t,n){var a=this.center;void 0===n?e.setFromPoints(t).getCenter(a):a.copy(n);for(var r=0,o=0,i=t.length;o<i;o++)r=y(r,a.distanceToSquared(t[o]));return this.radius=l(r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return A(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),a=t||new Vector3;return a.copy(e),n>this.radius*this.radius&&(a.sub(this.center).normalize(),a.multiplyScalar(this.radius).add(this.center)),a},getBoundingBox:function(e){var t=e||new Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(e,t,n,a,r,o,i,s,l){var d=this.elements;return d[0]=e,d[1]=a,d[2]=i,d[3]=t,d[4]=r,d[5]=s,d[6]=n,d[7]=o,d[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Vector3;return function applyToBufferAttribute(t){for(var n=0,a=t.count;n<a;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,a=t.elements,r=this.elements,o=n[0],i=n[3],s=n[6],l=n[1],d=n[4],c=n[7],p=n[2],u=n[5],m=n[8],g=a[0],h=a[3],f=a[6],E=a[1],_=a[4],C=a[7],y=a[2],A=a[5],b=a[8];return r[0]=o*g+i*E+s*y,r[3]=o*h+i*_+s*A,r[6]=o*f+i*C+s*b,r[1]=l*g+d*E+c*y,r[4]=l*h+d*_+c*A,r[7]=l*f+d*C+c*b,r[2]=p*g+u*E+m*y,r[5]=p*h+u*_+m*A,r[8]=p*f+u*C+m*b,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var t=this.elements,n=t[0],a=t[1],r=t[2],o=t[3],s=t[4],e=t[5],l=t[6],d=t[7],c=t[8];return n*s*c-n*e*d-a*o*c+a*e*l+r*o*d-r*s*l},getInverse:function(e,t){e&&e.isMatrix4&&console.error('THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.');var n=e.elements,a=this.elements,r=n[0],o=n[1],i=n[2],s=n[3],l=n[4],d=n[5],c=n[6],p=n[7],u=n[8],m=u*l-d*p,g=d*c-u*s,h=p*s-l*c,f=r*m+o*g+i*h;if(0==f){var E='THREE.Matrix3: .getInverse() can\'t invert matrix, determinant is 0';if(!0===t)throw new Error(E);else console.warn(E);return this.identity()}var _=1/f;return a[0]=m*_,a[1]=(i*p-u*o)*_,a[2]=(d*o-i*l)*_,a[3]=g*_,a[4]=(u*r-i*c)*_,a[5]=(i*s-d*r)*_,a[6]=h*_,a[7]=(o*c-p*r)*_,a[8]=(l*r-o*s)*_,this},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},equals:function(e){for(var t=this.elements,n=e.elements,a=0;9>a;a++)if(t[a]!==n[a])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(var n=0;9>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}),Object.assign(Plane.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,a){return this.normal.set(e,t,n),this.constant=a,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Vector3,t=new Vector3;return function setFromCoplanarPoints(n,a,r){var o=e.subVectors(r,a).cross(t.subVectors(n,a)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){var n=t||new Vector3;return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Vector3;return function intersectLine(n,a){var r=a||new Vector3,o=n.delta(e),i=this.normal.dot(o);if(0===i)return 0===this.distanceToPoint(n.start)?r.copy(n.start):void 0;var s=-(n.start.dot(this.normal)+this.constant)/i;return 0>s||1<s?void 0:r.copy(o).multiplyScalar(s).add(n.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return 0>t&&0<n||0>n&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Vector3,t=new Matrix3;return function applyMatrix4(n,a){var r=a||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),i=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(i),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Frustum.prototype,{set:function(e,t,n,a,r,o){var i=this.planes;return i[0].copy(e),i[1].copy(t),i[2].copy(n),i[3].copy(a),i[4].copy(r),i[5].copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,a=n[0],r=n[1],o=n[2],i=n[3],s=n[4],l=n[5],d=n[6],c=n[7],p=n[8],u=n[9],m=n[10],g=n[11],h=n[12],f=n[13],E=n[14],_=n[15];return t[0].setComponents(i-a,c-s,g-p,_-h).normalize(),t[1].setComponents(i+a,c+s,g+p,_+h).normalize(),t[2].setComponents(i+r,c+l,g+u,_+f).normalize(),t[3].setComponents(i-r,c-l,g-u,_-f).normalize(),t[4].setComponents(i-o,c-d,g-m,_-E).normalize(),t[5].setComponents(i+o,c+d,g+m,_+E).normalize(),this},intersectsObject:function(){var e=new Sphere;return function intersectsObject(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Sphere;return function intersectsSprite(t){return e.center.set(0,0,0),e.radius=0.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,a=-e.radius,r=0,o;6>r;r++)if(o=t[r].distanceToPoint(n),o<a)return!1;return!0},intersectsBox:function(){var e=new Vector3,t=new Vector3;return function intersectsBox(n){for(var a=this.planes,r=0,o;6>r;r++){o=a[r],e.x=0<o.normal.x?n.min.x:n.max.x,t.x=0<o.normal.x?n.max.x:n.min.x,e.y=0<o.normal.y?n.min.y:n.max.y,t.y=0<o.normal.y?n.max.y:n.min.y,e.z=0<o.normal.z?n.min.z:n.max.z,t.z=0<o.normal.z?n.max.z:n.min.z;var i=o.distanceToPoint(e),s=o.distanceToPoint(t);if(0>i&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}}),Euler.RotationOrders=['XYZ','YZX','ZXY','XZY','YXZ','ZYX'],Euler.DefaultOrder='XYZ',Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Euler.prototype,{isEuler:!0,set:function(e,t,n,a){return this._x=e,this._y=t,this._z=n,this._order=a||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var a=Math.asin,r=kt.clamp,o=e.elements,s=o[0],l=o[4],d=o[8],c=o[1],p=o[5],u=o[9],m=o[2],g=o[6],h=o[10];return t=t||this._order,'XYZ'===t?(this._y=a(r(d,-1,1)),0.99999>A(d)?(this._x=i(-u,h),this._z=i(-l,s)):(this._x=i(g,p),this._z=0)):'YXZ'===t?(this._x=a(-r(u,-1,1)),0.99999>A(u)?(this._y=i(d,h),this._z=i(c,p)):(this._y=i(-m,s),this._z=0)):'ZXY'===t?(this._x=a(r(g,-1,1)),0.99999>A(g)?(this._y=i(-m,h),this._z=i(-l,p)):(this._y=0,this._z=i(c,s))):'ZYX'===t?(this._y=a(-r(m,-1,1)),0.99999>A(m)?(this._x=i(g,h),this._z=i(c,s)):(this._x=0,this._z=i(-l,p))):'YZX'===t?(this._z=a(r(c,-1,1)),0.99999>A(c)?(this._x=i(-u,p),this._y=i(-m,s)):(this._x=0,this._y=i(d,h))):'XZY'===t?(this._z=a(-r(l,-1,1)),0.99999>A(l)?(this._x=i(g,p),this._y=i(d,s)):(this._x=i(-u,h),this._y=0)):console.warn('THREE.Euler: .setFromRotationMatrix() given unsupported order: '+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Matrix4;return function setFromQuaternion(t,n,a){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,a)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Quaternion;return function reorder(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Layers.prototype,{set:function(e){this.mask=0|1<<e},enable:function(e){this.mask|=0|1<<e},toggle:function(e){this.mask^=0|1<<e},disable:function(e){this.mask&=~(0|1<<e)},test:function(e){return 0!=(this.mask&e.mask)}});var tn=0;Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object.assign(Object3D.prototype,EventDispatcher.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Quaternion;return function rotateOnAxis(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new Vector3(1,0,0);return function rotateX(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Vector3(0,1,0);return function rotateY(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Vector3(0,0,1);return function rotateZ(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Vector3;return function translateOnAxis(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Vector3(1,0,0);return function translateX(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Vector3(0,1,0);return function translateY(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Vector3(0,0,1);return function translateZ(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Matrix4;return function worldToLocal(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new Matrix4;return function lookAt(t){this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error('THREE.Object3D.add: object can\'t be added as a child of itself.',e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:'added'}),this.children.push(e)):console.error('THREE.Object3D.add: object not an instance of THREE.Object3D.',e),this)},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:'removed'}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty('id',e)},getObjectByName:function(e){return this.getObjectByProperty('name',e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,a=this.children.length;n<a;n++){var r=this.children[n],o=r.getObjectByProperty(e,t);if(o!==void 0)return o}},getWorldPosition:function(e){var t=e||new Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Vector3,t=new Vector3;return function getWorldQuaternion(n){var a=n||new Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,a,t),a}}(),getWorldRotation:function(){var e=new Quaternion;return function getWorldRotation(t){var n=t||new Euler;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new Vector3,t=new Quaternion;return function getWorldScale(n){var a=n||new Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,a),a}}(),getWorldDirection:function(){var e=new Quaternion;return function getWorldDirection(t){var n=t||new Vector3;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,a=t.length;n<a;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,a=t.length;n<a;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,a=t.length;n<a;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){function serialize(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function extractFromCache(e){var t=[];for(var n in e){var a=e[n];delete a.metadata,t.push(a)}return t}var t=void 0===e||''===e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.5,type:'Object',generator:'Object3D.toJSON'});var a={};if(a.uuid=this.uuid,a.type=this.type,''!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),'{}'!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.matrix=this.matrix.toArray(),void 0!==this.geometry&&(a.geometry=serialize(e.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var r=[],o=0,i=this.material.length;o<i;o++)r.push(serialize(e.materials,this.material[o]));a.material=r}else a.material=serialize(e.materials,this.material);if(0<this.children.length){a.children=[];for(var o=0;o<this.children.length;o++)a.children.push(this.children[o].toJSON(e).object)}if(t){var s=extractFromCache(e.geometries),l=extractFromCache(e.materials),d=extractFromCache(e.textures),c=extractFromCache(e.images);0<s.length&&(n.geometries=s),0<l.length&&(n.materials=l),0<d.length&&(n.textures=d),0<c.length&&(n.images=c)}return n.object=a,n},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0,a;n<e.children.length;n++)a=e.children[n],this.add(a.clone());return this}}),Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(e,t){return Object3D.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Quaternion;return function getWorldDirection(t){var n=t||new Vector3;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){Object3D.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(e,t){return Camera.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,a,r,o){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:a,width:r,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,a=(this.top+this.bottom)/2,r=n-e,o=n+e,i=a+t,s=a-t;if(null!==this.view){var l=this.zoom/(this.view.width/this.view.fullWidth),d=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,p=(this.top-this.bottom)/this.view.height;r+=c*(this.view.offsetX/l),o=r+c*(this.view.width/l),i-=p*(this.view.offsetY/d),s=i-p*(this.view.height/d)}this.projectionMatrix.makeOrthographic(r,o,i,s,this.near,this.far)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(e,t){return Camera.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=0.5*this.getFilmHeight()/e;this.fov=2*kt.RAD2DEG*r(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=a(0.5*kt.DEG2RAD*this.fov);return 0.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*kt.RAD2DEG*r(a(0.5*kt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*f(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/y(this.aspect,1)},setViewOffset:function(e,t,n,a,r,o){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:a,width:r,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*a(0.5*kt.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,o=-0.5*r,i=this.view;if(null!==i){var s=i.fullWidth,l=i.fullHeight;o+=i.offsetX*r/s,t-=i.offsetY*n/l,r*=i.width/s,n*=i.height/l}var d=this.filmOffset;0!==d&&(o+=e*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,t,t-n,e,this.far)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var nn=0;Object.assign(Geometry.prototype,EventDispatcher.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=new Matrix3().getNormalMatrix(e),n=0,a=this.vertices.length,r;n<a;n++)r=this.vertices[n],r.applyMatrix4(e);for(var n=0,a=this.faces.length,o;n<a;n++){o=this.faces[n],o.normal.applyMatrix3(t).normalize();for(var i=0,s=o.vertexNormals.length;i<s;i++)o.vertexNormals[i].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Matrix4;return function rotateX(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Matrix4;return function rotateY(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Matrix4;return function rotateZ(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Matrix4;return function translate(t,n,a){return e.makeTranslation(t,n,a),this.applyMatrix(e),this}}(),scale:function(){var e=new Matrix4;return function scale(t,n,a){return e.makeScale(t,n,a),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Object3D;return function lookAt(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function addFace(e,n,a,r){var i=void 0===o?[]:[p[e].clone(),p[n].clone(),p[a].clone()],c=void 0===s?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[a].clone()],g=new Face3(e,n,a,i,c,r);t.faces.push(g),void 0!==l&&t.faceVertexUvs[0].push([u[e].clone(),u[n].clone(),u[a].clone()]),void 0!==d&&t.faceVertexUvs[1].push([m[e].clone(),m[n].clone(),m[a].clone()])}var t=this,n=null===e.index?void 0:e.index.array,a=e.attributes,r=a.position.array,o=void 0===a.normal?void 0:a.normal.array,s=void 0===a.color?void 0:a.color.array,l=void 0===a.uv?void 0:a.uv.array,d=void 0===a.uv2?void 0:a.uv2.array;void 0!==d&&(this.faceVertexUvs[1]=[]);for(var p=[],u=[],m=[],c=0,i=0;c<r.length;c+=3,i+=2)t.vertices.push(new Vector3(r[c],r[c+1],r[c+2])),void 0!==o&&p.push(new Vector3(o[c],o[c+1],o[c+2])),void 0!==s&&t.colors.push(new Color(s[c],s[c+1],s[c+2])),void 0!==l&&u.push(new Vector2(l[i],l[i+1])),void 0!==d&&m.push(new Vector2(d[i],d[i+1]));var g=e.groups;if(0<g.length)for(var c=0;c<g.length;c++)for(var h=g[c],f=h.start,E=h.count,i=f;i<f+E;i+=3)void 0===n?addFace(i,i+1,i+2,h.materialIndex):addFace(n[i],n[i+1],n[i+2],h.materialIndex);else if(void 0!==n)for(var c=0;c<n.length;c+=3)addFace(n[c],n[c+1],n[c+2]);else for(var c=0;c<r.length/3;c+=3)addFace(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,a=new Matrix4;return a.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(a),this},computeFaceNormals:function(){for(var e=new Vector3,t=new Vector3,n=0,a=this.faces.length;n<a;n++){var r=this.faces[n],o=this.vertices[r.a],i=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,i),t.subVectors(o,i),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);var t,n,a,r,o,i;for(i=Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)i[t]=new Vector3;if(e){var s=new Vector3,l=new Vector3,d,c,p;for(a=0,r=this.faces.length;a<r;a++)o=this.faces[a],d=this.vertices[o.a],c=this.vertices[o.b],p=this.vertices[o.c],s.subVectors(p,c),l.subVectors(d,c),s.cross(l),i[o.a].add(s),i[o.b].add(s),i[o.c].add(s)}else for(this.computeFaceNormals(),a=0,r=this.faces.length;a<r;a++)o=this.faces[a],i[o.a].add(o.normal),i[o.b].add(o.normal),i[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)i[t].normalize();for(a=0,r=this.faces.length;a<r;a++){o=this.faces[a];var u=o.vertexNormals;3===u.length?(u[0].copy(i[o.a]),u[1].copy(i[o.b]),u[2].copy(i[o.c])):(u[0]=i[o.a].clone(),u[1]=i[o.b].clone(),u[2]=i[o.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var a=n.vertexNormals;3===a.length?(a[0].copy(n.normal),a[1].copy(n.normal),a[2].copy(n.normal)):(a[0]=n.normal.clone(),a[1]=n.normal.clone(),a[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,a,r;for(n=0,a=this.faces.length;n<a;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),(e=0,t=r.vertexNormals.length);e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var o=new Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var i=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals,l,d;for(n=0,a=this.faces.length;n<a;n++)l=new Vector3,d={a:new Vector3,b:new Vector3,c:new Vector3},i.push(l),s.push(d)}var c=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var l,d;for(n=0,a=this.faces.length;n<a;n++)r=this.faces[n],l=c.faceNormals[n],d=c.vertexNormals[n],l.copy(r.normal),d.a.copy(r.vertexNormals[0]),d.b.copy(r.vertexNormals[1]),d.c.copy(r.vertexNormals[2])}for(n=0,a=this.faces.length;n<a;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,a=t.length;n<a;n++)0<n&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry))return void console.error('THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.',e);var a=this.vertices.length,r=this.vertices,o=e.vertices,s=this.faces,l=e.faces,d=this.faceVertexUvs[0],c=e.faceVertexUvs[0],p=this.colors,u=e.colors,m;n===void 0&&(n=0),t!==void 0&&(m=new Matrix3().getNormalMatrix(t));for(var g=0,i=o.length;g<i;g++){var h=o[g],f=h.clone();t!==void 0&&f.applyMatrix4(t),r.push(f)}for(var g=0,i=u.length;g<i;g++)p.push(u[g].clone());for(g=0,i=l.length;g<i;g++){var E=l[g],_=E.vertexNormals,C=E.vertexColors,y,A,b;y=new Face3(E.a+a,E.b+a,E.c+a),y.normal.copy(E.normal),m!==void 0&&y.normal.applyMatrix3(m).normalize();for(var x=0,v=_.length;x<v;x++)A=_[x].clone(),void 0!==m&&A.applyMatrix3(m).normalize(),y.vertexNormals.push(A);y.color.copy(E.color);for(var x=0,v=C.length;x<v;x++)b=C[x],y.vertexColors.push(b.clone());y.materialIndex=E.materialIndex+n,s.push(y)}for(g=0,i=c.length;g<i;g++){var S=c[g],T=[];if(void 0!==S){for(var x=0,v=S.length;x<v;x++)T.push(S[x].clone());d.push(T)}}},mergeMesh:function(e){return e&&e.isMesh?void(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):void console.error('THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.',e)},mergeVertices:function(){var e={},t=[],a=[],r=10000,o,s,l,i,d,p,u,m;for(l=0,i=this.vertices.length;l<i;l++)o=this.vertices[l],s=c(o.x*r)+'_'+c(o.y*r)+'_'+c(o.z*r),void 0===e[s]?(e[s]=l,t.push(this.vertices[l]),a[l]=t.length-1):a[l]=a[e[s]];var g=[];for(l=0,i=this.faces.length;l<i;l++){d=this.faces[l],d.a=a[d.a],d.b=a[d.b],d.c=a[d.c],p=[d.a,d.b,d.c];for(var h=0;3>h;h++)if(p[h]===p[(h+1)%3]){g.push(l);break}}for(l=g.length-1;0<=l;l--){var n=g[l];for(this.faces.splice(n,1),u=0,m=this.faceVertexUvs.length;u<m;u++)this.faceVertexUvs[u].splice(n,1)}var f=this.vertices.length-t.length;return this.vertices=t,f},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function materialIndexSort(e,t){return e.materialIndex-t.materialIndex});var a=this.faceVertexUvs[0],r=this.faceVertexUvs[1],o,i;a&&a.length===t&&(o=[]),r&&r.length===t&&(i=[]);for(var n=0,s;n<t;n++)s=e[n]._id,o&&o.push(a[s]),i&&i.push(r[s]);o&&(this.faceVertexUvs[0]=o),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){function setBit(e,t,n){return n?e|1<<t:e&~(1<<t)}function getNormalIndex(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0===l[t]?(l[t]=s.length/3,s.push(e.x,e.y,e.z),l[t]):l[t]}function getColorIndex(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0===c[t]?(c[t]=d.length,d.push(e.getHex()),c[t]):c[t]}function getUvIndex(e){var t=e.x.toString()+e.y.toString();return void 0===u[t]?(u[t]=p.length/2,p.push(e.x,e.y),u[t]):u[t]}var e={metadata:{version:4.5,type:'Geometry',generator:'Geometry.toJSON'}};if(e.uuid=this.uuid,e.type=this.type,''!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var a=[],r=0,o;r<this.vertices.length;r++)o=this.vertices[r],a.push(o.x,o.y,o.z);for(var i=[],s=[],l={},d=[],c={},p=[],u={},r=0;r<this.faces.length;r++){var m=this.faces[r],g=void 0!==this.faceVertexUvs[0][r],h=0<m.normal.length(),f=0<m.vertexNormals.length,E=1!==m.color.r||1!==m.color.g||1!==m.color.b,_=0<m.vertexColors.length,C=0;if(C=setBit(C,0,0),C=setBit(C,1,!0),C=setBit(C,2,!1),C=setBit(C,3,g),C=setBit(C,4,h),C=setBit(C,5,f),C=setBit(C,6,E),C=setBit(C,7,_),i.push(C),i.push(m.a,m.b,m.c),i.push(m.materialIndex),g){var y=this.faceVertexUvs[0][r];i.push(getUvIndex(y[0]),getUvIndex(y[1]),getUvIndex(y[2]))}if(h&&i.push(getNormalIndex(m.normal)),f){var A=m.vertexNormals;i.push(getNormalIndex(A[0]),getNormalIndex(A[1]),getNormalIndex(A[2]))}if(E&&i.push(getColorIndex(m.color)),_){var b=m.vertexColors;i.push(getColorIndex(b[0]),getColorIndex(b[1]),getColorIndex(b[2]))}}return e.data={},e.data.vertices=a,e.data.normals=s,0<d.length&&(e.data.colors=d),0<p.length&&(e.data.uvs=[p]),e.data.faces=i,e},clone:function(){return new Geometry().copy(this)},copy:function(e){var t,n,a,r,o,i;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var d=e.faces;for(t=0,n=d.length;t<n;t++)this.faces.push(d[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),a=0,r=c.length;a<r;a++){var p=c[a],u=[];for(o=0,i=p.length;o<i;o++){var m=p[o];u.push(m.clone())}this.faceVertexUvs[t].push(u)}}var g=e.morphTargets;for(t=0,n=g.length;t<n;t++){var h={name:g[t].name};if(void 0!==g[t].vertices)for(h.vertices=[],a=0,r=g[t].vertices.length;a<r;a++)h.vertices.push(g[t].vertices[a].clone());if(void 0!==g[t].normals)for(h.normals=[],a=0,r=g[t].normals.length;a<r;a++)h.normals.push(g[t].normals[a].clone());this.morphTargets.push(h)}var f=e.morphNormals;for(t=0,n=f.length;t<n;t++){var E={};if(void 0!==f[t].vertexNormals)for(E.vertexNormals=[],a=0,r=f[t].vertexNormals.length;a<r;a++){var _=f[t].vertexNormals[a],C={};C.a=_.a.clone(),C.b=_.b.clone(),C.c=_.c.clone(),E.vertexNormals.push(C)}if(void 0!==f[t].faceNormals)for(E.faceNormals=[],a=0,r=f[t].faceNormals.length;a<r;a++)E.faceNormals.push(f[t].faceNormals[a].clone());this.morphNormals.push(E)}var y=e.skinWeights;for(t=0,n=y.length;t<n;t++)this.skinWeights.push(y[t].clone());var A=e.skinIndices;for(t=0,n=A.length;t<n;t++)this.skinIndices.push(A[t].clone());var b=e.lineDistances;for(t=0,n=b.length;t<n;t++)this.lineDistances.push(b[t]);var x=e.boundingBox;null!==x&&(this.boundingBox=x.clone());var v=e.boundingSphere;return null!==v&&(this.boundingSphere=v.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:'dispose'})}}),Object.defineProperty(BufferAttribute.prototype,'needsUpdate',{set:function(e){!0===e&&this.version++}}),Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError('THREE.BufferAttribute: array should be a Typed Array.');this.count=e===void 0?0:e.length/this.itemSize,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var a=0,r=this.itemSize;a<r;a++)this.array[e+a]=t.array[n+a];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,a=0,r=e.length,o;a<r;a++)o=e[a],void 0===o&&(console.warn('THREE.BufferAttribute.copyColorsArray(): color is undefined',a),o=new Color),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b;return this},copyIndicesArray:function(e){for(var t=this.array,n=0,a=0,r=e.length,o;a<r;a++)o=e[a],t[n++]=o.a,t[n++]=o.b,t[n++]=o.c;return this},copyVector2sArray:function(e){for(var t=this.array,n=0,a=0,r=e.length,o;a<r;a++)o=e[a],void 0===o&&(console.warn('THREE.BufferAttribute.copyVector2sArray(): vector is undefined',a),o=new Vector2),t[n++]=o.x,t[n++]=o.y;return this},copyVector3sArray:function(e){for(var t=this.array,n=0,a=0,r=e.length,o;a<r;a++)o=e[a],void 0===o&&(console.warn('THREE.BufferAttribute.copyVector3sArray(): vector is undefined',a),o=new Vector3),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z;return this},copyVector4sArray:function(e){for(var t=this.array,n=0,a=0,r=e.length,o;a<r;a++)o=e[a],void 0===o&&(console.warn('THREE.BufferAttribute.copyVector4sArray(): vector is undefined',a),o=new Vector4),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w;return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this},setXYZW:function(e,t,n,a,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=a,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int8BufferAttribute.prototype.constructor=Int8BufferAttribute,Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute,Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute,Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int16BufferAttribute.prototype.constructor=Int16BufferAttribute,Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute,Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int32BufferAttribute.prototype.constructor=Int32BufferAttribute,Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute,Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float32BufferAttribute.prototype.constructor=Float32BufferAttribute,Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float64BufferAttribute.prototype.constructor=Float64BufferAttribute,Object.assign(DirectGeometry.prototype,{computeGroups:function(e){for(var t=[],n=void 0,a=e.faces,r=0,o,i;r<a.length;r++)i=a[r],i.materialIndex!==n&&(n=i.materialIndex,void 0!=o&&(o.count=3*r-o.start,t.push(o)),o={start:3*r,materialIndex:n});o!==void 0&&(o.count=3*r-o.start,t.push(o)),this.groups=t},fromGeometry:function(e){var t=e.faces,n=e.vertices,a=e.faceVertexUvs,r=a[0]&&0<a[0].length,o=a[1]&&0<a[1].length,s=e.morphTargets,l=s.length,d;if(0<l){d=[];for(var c=0;c<l;c++)d[c]=[];this.morphTargets.position=d}var i=e.morphNormals,p=i.length,u;if(0<p){u=[];for(var c=0;c<p;c++)u[c]=[];this.morphTargets.normal=u}for(var m=e.skinIndices,g=e.skinWeights,h=m.length===n.length,f=g.length===n.length,c=0,E;c<t.length;c++){E=t[c],this.vertices.push(n[E.a],n[E.b],n[E.c]);var _=E.vertexNormals;if(3===_.length)this.normals.push(_[0],_[1],_[2]);else{var C=E.normal;this.normals.push(C,C,C)}var y=E.vertexColors;if(3===y.length)this.colors.push(y[0],y[1],y[2]);else{var A=E.color;this.colors.push(A,A,A)}if(!0===r){var b=a[0][c];void 0===b?(console.warn('THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ',c),this.uvs.push(new Vector2,new Vector2,new Vector2)):this.uvs.push(b[0],b[1],b[2])}if(!0===o){var b=a[1][c];void 0===b?(console.warn('THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ',c),this.uvs2.push(new Vector2,new Vector2,new Vector2)):this.uvs2.push(b[0],b[1],b[2])}for(var x=0,v;x<l;x++)v=s[x].vertices,d[x].push(v[E.a],v[E.b],v[E.c]);for(var x=0,S;x<p;x++)S=i[x].vertexNormals[c],u[x].push(S.a,S.b,S.c);h&&this.skinIndices.push(m[E.a],m[E.b],m[E.c]),f&&this.skinWeights.push(g[E.a],g[E.b],g[E.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}}),BufferGeometry.MaxIndex=65535,Object.assign(BufferGeometry.prototype,EventDispatcher.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=Array.isArray(e)?new(65535<arrayMax(e)?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?'index'===e?(console.warn('THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.'),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn('THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).'),void this.addAttribute(e,new BufferAttribute(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n===void 0?0:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var a=new Matrix3().getNormalMatrix(e);a.applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Matrix4;return function rotateX(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Matrix4;return function rotateY(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Matrix4;return function rotateZ(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Matrix4;return function translate(t,n,a){return e.makeTranslation(t,n,a),this.applyMatrix(e),this}}(),scale:function(){var e=new Matrix4;return function scale(t,n,a){return e.makeScale(t,n,a),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Object3D;return function lookAt(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Float32BufferAttribute(3*t.vertices.length,3),a=new Float32BufferAttribute(3*t.colors.length,3);if(this.addAttribute('position',n.copyVector3sArray(t.vertices)),this.addAttribute('color',a.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new Float32BufferAttribute(t.lineDistances.length,1);this.addAttribute('lineDistance',r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var a;return!0===t.verticesNeedUpdate&&(a=this.attributes.position,void 0!==a&&(a.copyVector3sArray(t.vertices),a.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(a=this.attributes.normal,void 0!==a&&(a.copyVector3sArray(t.normals),a.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(a=this.attributes.color,void 0!==a&&(a.copyColorsArray(t.colors),a.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(a=this.attributes.uv,void 0!==a&&(a.copyVector2sArray(t.uvs),a.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(a=this.attributes.lineDistance,void 0!==a&&(a.copyArray(t.lineDistances),a.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new DirectGeometry().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute('position',new BufferAttribute(t,3).copyVector3sArray(e.vertices)),0<e.normals.length){var n=new Float32Array(3*e.normals.length);this.addAttribute('normal',new BufferAttribute(n,3).copyVector3sArray(e.normals))}if(0<e.colors.length){var a=new Float32Array(3*e.colors.length);this.addAttribute('color',new BufferAttribute(a,3).copyColorsArray(e.colors))}if(0<e.uvs.length){var r=new Float32Array(2*e.uvs.length);this.addAttribute('uv',new BufferAttribute(r,2).copyVector2sArray(e.uvs))}if(0<e.uvs2.length){var o=new Float32Array(2*e.uvs2.length);this.addAttribute('uv2',new BufferAttribute(o,2).copyVector2sArray(e.uvs2))}if(0<e.indices.length){var s=65535<arrayMax(e.indices)?Uint32Array:Uint16Array,d=new s(3*e.indices.length);this.setIndex(new BufferAttribute(d,1).copyIndicesArray(e.indices))}for(var c in this.groups=e.groups,e.morphTargets){for(var p=[],u=e.morphTargets[c],m=0,i=u.length;m<i;m++){var l=u[m],g=new Float32BufferAttribute(3*l.length,3);p.push(g.copyVector3sArray(l))}this.morphAttributes[c]=p}if(0<e.skinIndices.length){var h=new Float32BufferAttribute(4*e.skinIndices.length,4);this.addAttribute('skinIndex',h.copyVector4sArray(e.skinIndices))}if(0<e.skinWeights.length){var f=new Float32BufferAttribute(4*e.skinWeights.length,4);this.addAttribute('skinWeight',f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Box3);var e=this.attributes.position;e===void 0?this.boundingBox.makeEmpty():this.boundingBox.setFromBufferAttribute(e),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Box3,t=new Vector3;return function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);var n=this.attributes.position;if(n){var a=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(a);for(var r=0,o=0,i=n.count;o<i;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),r=y(r,a.distanceToSquared(t));this.boundingSphere.radius=l(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var a=t.position.array;if(t.normal===void 0)this.addAttribute('normal',new BufferAttribute(new Float32Array(a.length),3));else for(var r=t.normal.array,o=0,i=r.length;o<i;o++)r[o]=0;var s=t.normal.array,l=new Vector3,d=new Vector3,c=new Vector3,p=new Vector3,u=new Vector3,m,g,h;if(e){var f=e.array;0===n.length&&this.addGroup(0,f.length);for(var E=0,_=n.length;E<_;++E)for(var C=n[E],y=C.start,A=C.count,o=y,i=y+A;o<i;o+=3)m=3*f[o+0],g=3*f[o+1],h=3*f[o+2],l.fromArray(a,m),d.fromArray(a,g),c.fromArray(a,h),p.subVectors(c,d),u.subVectors(l,d),p.cross(u),s[m]+=p.x,s[m+1]+=p.y,s[m+2]+=p.z,s[g]+=p.x,s[g+1]+=p.y,s[g+2]+=p.z,s[h]+=p.x,s[h+1]+=p.y,s[h+2]+=p.z}else for(var o=0,i=a.length;o<i;o+=9)l.fromArray(a,o),d.fromArray(a,o+3),c.fromArray(a,o+6),p.subVectors(c,d),u.subVectors(l,d),p.cross(u),s[o]=p.x,s[o+1]=p.y,s[o+2]=p.z,s[o+3]=p.x,s[o+4]=p.y,s[o+5]=p.z,s[o+6]=p.x,s[o+7]=p.y,s[o+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry))return void console.error('THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.',e);t===void 0&&(t=0);var n=this.attributes;for(var a in n)if(e.attributes[a]!==void 0)for(var r=n[a],o=r.array,s=e.attributes[a],l=s.array,d=s.itemSize,c=0,i=d*t;c<l.length;c++,i++)o[i]=l[c];return this},normalizeNormals:function(){var e=new Vector3;return function normalizeNormals(){for(var t=this.attributes.normal,n=0,a=t.count;n<a;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn('THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.'),this;var e=new BufferGeometry,t=this.index.array,n=this.attributes;for(var a in n){for(var r=n[a],o=r.array,s=r.itemSize,d=new o.constructor(t.length*s),c=0,p=0,u=0,i=t.length;u<i;u++){c=t[u]*s;for(var l=0;l<s;l++)d[p++]=o[c++]}e.addAttribute(a,new BufferAttribute(d,s))}return e},toJSON:function(){var e={metadata:{version:4.5,type:'BufferGeometry',generator:'BufferGeometry.toJSON'}};if(e.uuid=this.uuid,e.type=this.type,''!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var a=this.index;if(null!==a){var r=Array.prototype.slice.call(a.array);e.data.index={type:a.array.constructor.name,array:r}}var o=this.attributes;for(var n in o){var i=o[n],r=Array.prototype.slice.call(i.array);e.data.attributes[n]={itemSize:i.itemSize,type:i.array.constructor.name,array:r,normalized:i.normalized}}var s=this.groups;0<s.length&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return new BufferGeometry().copy(this)},copy:function(e){var t,n,a;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var o=e.attributes;for(t in o){var i=o[t];this.addAttribute(t,i.clone())}var s=e.morphAttributes;for(t in s){var l=[],d=s[t];for(n=0,a=d.length;n<a;n++)l.push(d[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,a=c.length;n<a;n++){var p=c[n];this.addGroup(p.start,p.count,p.materialIndex)}var u=e.boundingBox;null!==u&&(this.boundingBox=u.clone());var m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:'dispose'})}}),BoxGeometry.prototype=Object.create(Geometry.prototype),BoxGeometry.prototype.constructor=BoxGeometry,BoxBufferGeometry.prototype=Object.create(BufferGeometry.prototype),BoxBufferGeometry.prototype.constructor=BoxBufferGeometry,PlaneGeometry.prototype=Object.create(Geometry.prototype),PlaneGeometry.prototype.constructor=PlaneGeometry,PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry,MeshBasicMaterial.prototype=Object.create(Material.prototype),MeshBasicMaterial.prototype.constructor=MeshBasicMaterial,MeshBasicMaterial.prototype.isMeshBasicMaterial=!0,MeshBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.assign(Ray.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new Vector3;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Vector3;return function recast(n){return this.origin.copy(this.at(n,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new Vector3;n.subVectors(e,this.origin);var a=n.dot(this.direction);return 0>a?n.copy(this.origin):n.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(e){return l(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Vector3;return function distanceSqToPoint(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function distanceSqToSegment(a,r,o,i){e.copy(a).add(r).multiplyScalar(0.5),t.copy(r).sub(a).normalize(),n.copy(this.origin).sub(e);var s=0.5*a.distanceTo(r),l=-this.direction.dot(t),d=n.dot(this.direction),p=-n.dot(t),u=n.lengthSq(),c=A(1-l*l),m,g,h,E;if(!(0<c))g=0<l?-s:s,m=y(0,-(l*g+d)),h=-m*m+g*(g+2*p)+u;else if(m=l*p-d,g=l*d-p,E=s*c,!(0<=m))g<=-E?(m=y(0,-(-l*s+d)),g=0<m?-s:f(y(-s,-p),s),h=-m*m+g*(g+2*p)+u):g<=E?(m=0,g=f(y(-s,-p),s),h=g*(g+2*p)+u):(m=y(0,-(l*s+d)),g=0<m?s:f(y(-s,-p),s),h=-m*m+g*(g+2*p)+u);else if(!(g>=-E))g=-s,m=y(0,-(l*g+d)),h=-m*m+g*(g+2*p)+u;else if(g<=E){var _=1/c;m*=_,g*=_,h=m*(m+l*g+2*d)+g*(l*m+g+2*p)+u}else g=s,m=y(0,-(l*g+d)),h=-m*m+g*(g+2*p)+u;return o&&o.copy(this.direction).multiplyScalar(m).add(this.origin),i&&i.copy(t).multiplyScalar(g).add(e),h}}(),intersectSphere:function(){var e=new Vector3;return function intersectSphere(t,n){e.subVectors(t.center,this.origin);var a=e.dot(this.direction),r=e.dot(e)-a*a,o=t.radius*t.radius;if(r>o)return null;var i=l(o-r),s=a-i,d=a+i;return 0>s&&0>d?null:0>s?this.at(d,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var n=e.normal.dot(this.direction);if(0===n)return 0===e.distanceToPoint(this.origin)?0:null;var a=-(this.origin.dot(e.normal)+e.constant)/n;return 0<=a?a:null},intersectPlane:function(e,n){var a=this.distanceToPlane(e);return null===a?null:this.at(a,n)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return!!(0>n*t)},intersectBox:function(e,t){var n=1/this.direction.x,a=1/this.direction.y,r=1/this.direction.z,o=this.origin,i,s,l,d,c,p;return(0<=n?(i=(e.min.x-o.x)*n,s=(e.max.x-o.x)*n):(i=(e.max.x-o.x)*n,s=(e.min.x-o.x)*n),0<=a?(l=(e.min.y-o.y)*a,d=(e.max.y-o.y)*a):(l=(e.max.y-o.y)*a,d=(e.min.y-o.y)*a),i>d||l>s)?null:((l>i||i!==i)&&(i=l),(d<s||s!==s)&&(s=d),0<=r?(c=(e.min.z-o.z)*r,p=(e.max.z-o.z)*r):(c=(e.max.z-o.z)*r,p=(e.min.z-o.z)*r),i>p||c>s)?null:((c>i||i!==i)&&(i=c),(p<s||s!==s)&&(s=p),0>s?null:this.at(0<=i?i:s,t))},intersectsBox:function(){var e=new Vector3;return function intersectsBox(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new Vector3,t=new Vector3,n=new Vector3,r=new Vector3;return function intersectTriangle(o,a,i,s,l){t.subVectors(a,o),n.subVectors(i,o),r.crossVectors(t,n);var d=this.direction.dot(r),c;if(0<d){if(s)return null;c=1}else if(0>d)c=-1,d=-d;else return null;e.subVectors(this.origin,o);var p=c*this.direction.dot(n.crossVectors(e,n));if(0>p)return null;var u=c*this.direction.dot(t.cross(e));if(0>u)return null;if(p+u>d)return null;var m=-c*e.dot(r);return 0>m?null:this.at(m/d,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Line3.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new Vector3;return t.addVectors(this.start,this.end).multiplyScalar(0.5)},delta:function(e){var t=e||new Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Vector3,n=new Vector3;return function closestPointToPointParameter(a,r){e.subVectors(a,this.start),n.subVectors(this.end,this.start);var o=n.dot(n),i=n.dot(e),s=i/o;return r&&(s=kt.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,n,a){var r=this.closestPointToPointParameter(e,n),t=a||new Vector3;return this.delta(t).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(Triangle,{normal:function(){var e=new Vector3;return function normal(t,n,a,r){var o=r||new Vector3;o.subVectors(a,n),e.subVectors(t,n),o.cross(e);var i=o.lengthSq();return 0<i?o.multiplyScalar(1/l(i)):o.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function barycoordFromPoint(r,o,a,i,s){e.subVectors(i,o),t.subVectors(a,o),n.subVectors(r,o);var l=e.dot(e),d=e.dot(t),c=e.dot(n),p=t.dot(t),m=t.dot(n),g=l*p-d*d,h=s||new Vector3;if(0==g)return h.set(-2,-1,-1);var f=1/g,E=(p*c-d*m)*f,u=(l*m-d*c)*f;return h.set(1-E-u,u,E)}}(),containsPoint:function(){var e=new Vector3;return function containsPoint(t,n,a,r){var o=Triangle.barycoordFromPoint(t,n,a,r,e);return 0<=o.x&&0<=o.y&&1>=o.x+o.y}}()}),Object.assign(Triangle.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,a){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[a]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new Vector3,t=new Vector3;return function area(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),0.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Triangle.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new Plane,t=[new Line3,new Line3,new Line3],n=new Vector3,a=new Vector3;return function closestPointToPoint(r,o){var s=o||new Vector3,l=Infinity;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(r,n),!0===this.containsPoint(n))s.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var d=0;d<t.length;d++){t[d].closestPointToPoint(n,!0,a);var i=n.distanceToSquared(a);i<l&&(l=i,s.copy(a))}}return s}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Object3D.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry,t,n,a;if(e.isBufferGeometry){var r=e.morphAttributes,o=Object.keys(r);if(0<o.length){var i=r[o[0]];if(i!==void 0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},(t=0,n=i.length);t<n;t++)a=i[t].name||t+'',this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=t}}else{var s=e.morphTargets;if(s!==void 0&&0<s.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},(t=0,n=s.length);t<n;t++)a=s[t].name||t+'',this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=t}},raycast:function(){function uvIntersection(e,t,n,a,r,o,i){return Triangle.barycoordFromPoint(e,t,n,a,c),r.multiplyScalar(c.x),o.multiplyScalar(c.y),i.multiplyScalar(c.z),r.add(o).add(i),r.clone()}function checkIntersection(e,t,n,a,r,o,i,s){var l;if(l=t.side===N?a.intersectTriangle(i,o,r,!0,s):a.intersectTriangle(r,o,i,t.side!==P,s),null===l)return null;g.copy(s),g.applyMatrix4(e.matrixWorld);var d=n.ray.origin.distanceTo(g);return d<n.near||d>n.far?null:{distance:d,point:g.clone(),object:e}}function checkBufferGeometryIntersection(e,n,r,l,d,g,a,h){o.fromBufferAttribute(l,g),i.fromBufferAttribute(l,a),s.fromBufferAttribute(l,h);var c=checkIntersection(e,e.material,n,r,o,i,s,m);return c&&(d&&(t.fromBufferAttribute(d,g),p.fromBufferAttribute(d,a),u.fromBufferAttribute(d,h),c.uv=uvIntersection(m,o,i,s,t,p,u)),c.face=new Face3(g,a,h,Triangle.normal(o,i,s)),c.faceIndex=g),c}var e=new Matrix4,n=new Ray,r=new Sphere,o=new Vector3,i=new Vector3,s=new Vector3,a=new Vector3,l=new Vector3,d=new Vector3,t=new Vector2,p=new Vector2,u=new Vector2,c=new Vector3,m=new Vector3,g=new Vector3;return function raycast(g,h){var _=this.geometry,C=this.material,y=this.matrixWorld;if(void 0!==C&&(null===_.boundingSphere&&_.computeBoundingSphere(),r.copy(_.boundingSphere),r.applyMatrix4(y),!1!==g.ray.intersectsSphere(r))&&(e.getInverse(y),n.copy(g.ray).applyMatrix4(e),null===_.boundingBox||!1!==n.intersectsBox(_.boundingBox))){var A;if(_.isBufferGeometry){var x=_.index,v=_.attributes.position,S=_.attributes.uv,T,R,b,c,F;if(null!==x)for(c=0,F=x.count;c<F;c+=3)T=x.getX(c),R=x.getX(c+1),b=x.getX(c+2),A=checkBufferGeometryIntersection(this,g,n,v,S,T,R,b),A&&(A.faceIndex=E(c/3),h.push(A));else for(c=0,F=v.count;c<F;c+=3)T=c,R=c+1,b=c+2,A=checkBufferGeometryIntersection(this,g,n,v,S,T,R,b),A&&(A.index=T,h.push(A))}else if(_.isGeometry){var w=Array.isArray(C),L=_.vertices,M=_.faces,B=_.faceVertexUvs[0],D,I,N,P;0<B.length&&(P=B);for(var O=0,f=M.length;O<f;O++){var U=M[O],G=w?C[U.materialIndex]:C;if(void 0!==G){if(D=L[U.a],I=L[U.b],N=L[U.c],!0===G.morphTargets){var k=_.morphTargets,W=this.morphTargetInfluences;o.set(0,0,0),i.set(0,0,0),s.set(0,0,0);for(var H=0,V=k.length,$;H<V;H++)if($=W[H],0!==$){var z=k[H].vertices;o.addScaledVector(a.subVectors(z[U.a],D),$),i.addScaledVector(l.subVectors(z[U.b],I),$),s.addScaledVector(d.subVectors(z[U.c],N),$)}o.add(D),i.add(I),s.add(N),D=o,I=i,N=s}if(A=checkIntersection(this,G,g,n,D,I,N,m),A){if(P&&P[O]){var X=P[O];t.copy(X[0]),p.copy(X[1]),u.copy(X[2]),A.uv=uvIntersection(m,D,I,N,t,p,u)}A.face=U,A.faceIndex=O,h.push(A)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var an=0;ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0}),FogExp2.prototype.isFogExp2=!0,FogExp2.prototype.clone=function(){return new FogExp2(this.color.getHex(),this.density)},FogExp2.prototype.toJSON=function(){return{type:'FogExp2',color:this.color.getHex(),density:this.density}},Fog.prototype.isFog=!0,Fog.prototype.clone=function(){return new Fog(this.color.getHex(),this.near,this.far)},Fog.prototype.toJSON=function(){return{type:'Fog',color:this.color.getHex(),near:this.near,far:this.far}},Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,copy:function(e,t){return Object3D.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),LensFlare.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LensFlare,isLensFlare:!0,copy:function(e){Object3D.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,a,r,o){t===void 0&&(t=-1),n===void 0&&(n=0),o===void 0&&(o=1),r===void 0&&(r=new Color(16777215)),a===void 0&&(a=V),n=f(n,y(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:r,blending:a})},updateLensFlares:function(){var e=this.lensFlares.length,t=2*-this.positionScreen.x,n=2*-this.positionScreen.y,a,r;for(a=0;a<e;a++)r=this.lensFlares[a],r.x=this.positionScreen.x+t*r.distance,r.y=this.positionScreen.y+n*r.distance,r.wantedRotation=0.25*(r.x*S),r.rotation+=0.25*(r.wantedRotation-r.rotation)}}),SpriteMaterial.prototype=Object.create(Material.prototype),SpriteMaterial.prototype.constructor=SpriteMaterial,SpriteMaterial.prototype.isSpriteMaterial=!0,SpriteMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function raycast(a,r){t.setFromMatrixPosition(this.matrixWorld),a.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(t.distanceToSquared(e)>o)){var i=a.ray.origin.distanceTo(e);i<a.near||i>a.far||r.push({distance:i,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,copy:function(e){Object3D.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,a=t.length,r;n<a;n++)r=t[n],this.addLevel(r.object.clone(),r.distance);return this},addLevel:function(e,t){t===void 0&&(t=0),t=A(t);for(var n=this.levels,a=0;a<n.length&&!(t<n[a].distance);a++);n.splice(a,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,a=t.length;n<a&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new Vector3;return function raycast(t,n){e.setFromMatrixPosition(this.matrixWorld);var a=t.ray.origin.distanceTo(e);this.getObjectForDistance(a).raycast(t,n)}}(),update:function(){var e=new Vector3,t=new Vector3;return function update(n){var a=this.levels;if(1<a.length){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);a[0].object.visible=!0;for(var o=1,i=a.length;o<i&&r>=a[o].distance;o++)a[o-1].object.visible=!1,a[o].object.visible=!0;for(;o<i;o++)a[o].object.visible=!1}}}(),toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,a=0,r=n.length,o;a<r;a++)o=n[a],t.object.levels.push({object:o.object.uuid,distance:o.distance});return t}}),Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length,n;e<t;e++)n=new Matrix4,this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new Matrix4,t=new Matrix4;return function update(){for(var n=this.bones,a=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,s=0,i=n.length,l;s<i;s++)l=n[s]?n[s].matrixWorld:t,e.multiplyMatrices(l,a[s]),e.toArray(r,16*s);o!==void 0&&(o.needsUpdate=!0)}}(),clone:function(){return new Skeleton(this.bones,this.boneInverses)}}),Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0}),SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,initBones:function(){var e=[],t,n,a,r;if(this.geometry&&void 0!==this.geometry.bones){for(a=0,r=this.geometry.bones.length;a<r;a++)n=this.geometry.bones[a],t=new Bone,e.push(t),t.name=n.name,t.position.fromArray(n.pos),t.quaternion.fromArray(n.rotq),void 0!==n.scl&&t.scale.fromArray(n.scl);for(a=0,r=this.geometry.bones.length;a<r;a++)n=this.geometry.bones[a],-1!==n.parent&&null!==n.parent&&void 0!==e[n.parent]?e[n.parent].add(e[a]):this.add(e[a])}return this.updateMatrixWorld(!0),e},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.lengthManhattan(),e===Infinity?n.set(1,0,0,0):n.multiplyScalar(e)}else if(this.geometry&&this.geometry.isBufferGeometry){var a=new Vector4,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)a.x=r.getX(t),a.y=r.getY(t),a.z=r.getZ(t),a.w=r.getW(t),e=1/a.lengthManhattan(),e===Infinity?a.set(1,0,0,0):a.multiplyScalar(e),r.setXYZW(t,a.x,a.y,a.z,a.w)}},updateMatrixWorld:function(e){Mesh.prototype.updateMatrixWorld.call(this,e),'attached'===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):'detached'===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn('THREE.SkinnedMesh: Unrecognized bindMode: '+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),LineBasicMaterial.prototype=Object.create(Material.prototype),LineBasicMaterial.prototype.constructor=LineBasicMaterial,LineBasicMaterial.prototype.isLineBasicMaterial=!0,LineBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,raycast:function(){var e=new Matrix4,t=new Ray,n=new Sphere;return function raycast(r,o){var s=r.linePrecision,d=s*s,c=this.geometry,p=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(p),!1!==r.ray.intersectsSphere(n)){e.getInverse(p),t.copy(r.ray).applyMatrix4(e);var u=new Vector3,m=new Vector3,g=new Vector3,h=new Vector3,f=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var E=c.index,_=c.attributes,C=_.position.array;if(null!==E)for(var y=E.array,A=0,x=y.length-1;A<x;A+=f){var l=y[A],a=y[A+1];u.fromArray(C,3*l),m.fromArray(C,3*a);var b=t.distanceSqToSegment(u,m,h,g);if(!(b>d)){h.applyMatrix4(this.matrixWorld);var v=r.ray.origin.distanceTo(h);v<r.near||v>r.far||o.push({distance:v,point:g.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else for(var A=0,x=C.length/3-1;A<x;A+=f){u.fromArray(C,3*A),m.fromArray(C,3*A+3);var b=t.distanceSqToSegment(u,m,h,g);if(!(b>d)){h.applyMatrix4(this.matrixWorld);var v=r.ray.origin.distanceTo(h);v<r.near||v>r.far||o.push({distance:v,point:g.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var S=c.vertices,T=S.length,A=0,b;A<T-1;A+=f)if(b=t.distanceSqToSegment(S[A],S[A+1],h,g),!(b>d)){h.applyMatrix4(this.matrixWorld);var v=r.ray.origin.distanceTo(h);v<r.near||v>r.far||o.push({distance:v,point:g.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0}),LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0}),PointsMaterial.prototype=Object.create(Material.prototype),PointsMaterial.prototype.constructor=PointsMaterial,PointsMaterial.prototype.isPointsMaterial=!0,PointsMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(){var e=new Matrix4,t=new Ray,n=new Sphere;return function raycast(r,o){function testPoint(e,n){var a=t.distanceSqToPoint(e);if(a<m){var i=t.closestPointToPoint(e);i.applyMatrix4(c);var d=r.ray.origin.distanceTo(i);if(d<r.near||d>r.far)return;o.push({distance:d,distanceToRay:l(a),point:i.clone(),index:n,face:null,object:s})}}var s=this,d=this.geometry,c=this.matrixWorld,p=r.params.Points.threshold;if(null===d.boundingSphere&&d.computeBoundingSphere(),n.copy(d.boundingSphere),n.applyMatrix4(c),n.radius+=p,!1!==r.ray.intersectsSphere(n)){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var u=p/((this.scale.x+this.scale.y+this.scale.z)/3),m=u*u,g=new Vector3;if(d.isBufferGeometry){var h=d.index,f=d.attributes,E=f.position.array;if(null!==h)for(var _=h.array,C=0,i=_.length,y;C<i;C++)y=_[C],g.fromArray(E,3*y),testPoint(g,y);else for(var C=0,a=E.length/3;C<a;C++)g.fromArray(E,3*C),testPoint(g,C)}else for(var A=d.vertices,C=0,a=A.length;C<a;C++)testPoint(A[C],C)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Group.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group}),VideoTexture.prototype=Object.create(Texture.prototype),VideoTexture.prototype.constructor=VideoTexture,CompressedTexture.prototype=Object.create(Texture.prototype),CompressedTexture.prototype.constructor=CompressedTexture,CompressedTexture.prototype.isCompressedTexture=!0,DepthTexture.prototype=Object.create(Texture.prototype),DepthTexture.prototype.constructor=DepthTexture,DepthTexture.prototype.isDepthTexture=!0,WireframeGeometry.prototype=Object.create(BufferGeometry.prototype),WireframeGeometry.prototype.constructor=WireframeGeometry,ParametricGeometry.prototype=Object.create(Geometry.prototype),ParametricGeometry.prototype.constructor=ParametricGeometry,ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry,PolyhedronGeometry.prototype=Object.create(Geometry.prototype),PolyhedronGeometry.prototype.constructor=PolyhedronGeometry,PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry,TetrahedronGeometry.prototype=Object.create(Geometry.prototype),TetrahedronGeometry.prototype.constructor=TetrahedronGeometry,TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry,OctahedronGeometry.prototype=Object.create(Geometry.prototype),OctahedronGeometry.prototype.constructor=OctahedronGeometry,OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry,IcosahedronGeometry.prototype=Object.create(Geometry.prototype),IcosahedronGeometry.prototype.constructor=IcosahedronGeometry,IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry,DodecahedronGeometry.prototype=Object.create(Geometry.prototype),DodecahedronGeometry.prototype.constructor=DodecahedronGeometry,DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry,TubeGeometry.prototype=Object.create(Geometry.prototype),TubeGeometry.prototype.constructor=TubeGeometry,TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TubeBufferGeometry.prototype.constructor=TubeBufferGeometry,TorusKnotGeometry.prototype=Object.create(Geometry.prototype),TorusKnotGeometry.prototype.constructor=TorusKnotGeometry,TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry,TorusGeometry.prototype=Object.create(Geometry.prototype),TorusGeometry.prototype.constructor=TorusGeometry,TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var rn={area:function(e){for(var t=e.length,n=0,a=t-1,r=0;r<t;a=r++)n+=e[a].x*e[r].y-e[r].x*e[a].y;return 0.5*n},triangulate:function(){function snip(e,t,a,r,o,n){var i,s,l,d,c,p,u,m,g;if(s=e[n[t]].x,l=e[n[t]].y,d=e[n[a]].x,c=e[n[a]].y,p=e[n[r]].x,u=e[n[r]].y,0>=(d-s)*(u-l)-(c-l)*(p-s))return!1;var h,f,E,_,y,A,b,x,v,S,T,R,F,w,L;for(h=p-d,f=u-c,E=s-p,_=l-u,y=d-s,A=c-l,i=0;i<o;i++)if(m=e[n[i]].x,g=e[n[i]].y,(m!==s||g!==l)&&(m!==d||g!==c)&&(m!==p||g!==u)&&(b=m-s,x=g-l,v=m-d,S=g-c,T=m-p,R=g-u,L=h*S-f*v,F=y*x-A*b,w=E*R-_*T,L>=-C&&w>=-C&&F>=-C))return!1;return!0}return function triangulate(e,r){var o=e.length;if(3>o)return null;var n=[],i=[],l=[],d,p,u;if(0<rn.area(e))for(p=0;p<o;p++)i[p]=p;else for(p=0;p<o;p++)i[p]=o-1-p;var m=o,g=2*m;for(p=m-1;2<m;){if(0>=g--)return console.warn('THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()'),r?l:n;if(d=p,m<=d&&(d=0),p=d+1,m<=p&&(p=0),u=p+1,m<=u&&(u=0),snip(e,d,p,u,m,i)){var h,a,f,c,s;for(h=i[d],a=i[p],f=i[u],n.push([e[h],e[a],e[f]]),l.push([i[d],i[p],i[u]]),(c=p,s=p+1);s<m;c++,s++)i[c]=i[s];m--,g=2*m}}return r?l:n}}(),triangulateShape:function(e,t){function removeDupEndPts(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function point_in_segment_2D_colin(e,t,n){return e.x===t.x?e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y:e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x}function intersect_segments_2D(e,t,n,a,r){var o=t.x-e.x,i=t.y-e.y,s=a.x-n.x,l=a.y-n.y,d=e.x-n.x,c=e.y-n.y,p=i*s-o*l,u=i*d-o*c;if(A(p)>C){var m;if(0<p){if(0>u||u>p)return[];if(m=l*d-s*c,0>m||m>p)return[]}else{if(0<u||u<p)return[];if(m=l*d-s*c,0<m||m<p)return[]}if(0===m)return r&&(0==u||u==p)?[]:[e];if(m===p)return r&&(0==u||u==p)?[]:[t];if(0==u)return[n];if(u==p)return[a];var g=m/p;return[{x:e.x+g*o,y:e.y+g*i}]}if(0!=u||l*d!=s*c)return[];var h=0==o&&0==i,f=0==s&&0==l;if(h&&f)return e.x!==n.x||e.y!==n.y?[]:[e];if(h)return point_in_segment_2D_colin(n,a,e)?[e]:[];if(f)return point_in_segment_2D_colin(e,t,n)?[n]:[];var E,_,y,b,x,v,S,T;return 0==o?(e.y<t.y?(E=e,y=e.y,_=t,b=t.y):(E=t,y=t.y,_=e,b=e.y),n.y<a.y?(x=n,S=n.y,v=a,T=a.y):(x=a,S=a.y,v=n,T=n.y)):(e.x<t.x?(E=e,y=e.x,_=t,b=t.x):(E=t,y=t.x,_=e,b=e.x),n.x<a.x?(x=n,S=n.x,v=a,T=a.x):(x=a,S=a.x,v=n,T=n.x)),y<=S?b<S?[]:b===S?r?[]:[x]:b<=T?[x,_]:[x,v]:y>T?[]:y===T?r?[]:[E]:b<=T?[E,_]:[E,v]}function isPointInsideAngle(e,t,n,a){var r=t.x-e.x,o=t.y-e.y,i=n.x-e.x,s=n.y-e.y,l=a.x-e.x,d=a.y-e.y,c=r*s-o*i,p=r*d-o*l;if(A(c)>C){var u=l*s-d*i;return 0<c?0<=p&&0<=u:0<=p||0<=u}return 0<p}removeDupEndPts(e),t.forEach(removeDupEndPts);for(var n={},a=e.concat(),r=0,o=t.length,s,i,l,d,c,p;r<o;r++)Array.prototype.push.apply(a,t[r]);for(s=0,i=a.length;s<i;s++)c=a[s].x+':'+a[s].y,void 0!==n[c]&&console.warn('THREE.ShapeUtils: Duplicate point',c,s),n[c]=s;var u=function removeHoles(e,t){function isCutLineInsideAngles(e,t){var a=n.length-1,r=e-1;0>r&&(r=a);var o=e+1;o>a&&(o=0);var i=isPointInsideAngle(n[e],n[r],n[o],s[t]);if(!i)return!1;var l=s.length-1,d=t-1;0>d&&(d=l);var c=t+1;return c>l&&(c=0),i=isPointInsideAngle(s[t],s[d],s[c],n[e]),!!i}function intersectsShapeEdge(e,t){var a,r,o;for(a=0;a<n.length;a++)if(r=a+1,r%=n.length,o=intersect_segments_2D(e,t,n[a],n[r],!0),0<o.length)return!0;return!1}function intersectsHoleEdge(e,n){var r,o,i,s,l;for(r=0;r<a.length;r++)for(o=t[a[r]],i=0;i<o.length;i++)if(s=i+1,s%=o.length,l=intersect_segments_2D(e,n,o[i],o[s],!0),0<l.length)return!0;return!1}for(var n=e.concat(),a=[],r=[],o=0,i=t.length,s,l,d,c,p,u,m,g,h,f,E;o<i;o++)a.push(o);for(var _=0,C=2*a.length;0<a.length;){if(C--,0>C){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:" + indepHoles.length + ", Probably Hole outside Shape!');break}for(d=_;d<n.length;d++){c=n[d],l=-1;for(var o=0;o<a.length;o++)if(u=a[o],m=c.x+':'+c.y+':'+u,void 0===r[m]){s=t[u];for(var y=0;y<s.length;y++)if(p=s[y],isCutLineInsideAngles(d,y)&&!intersectsShapeEdge(c,p)&&!intersectsHoleEdge(c,p)){l=y,a.splice(o,1),g=n.slice(0,d+1),h=n.slice(d),f=s.slice(l),E=s.slice(0,l+1),n=g.concat(f).concat(E).concat(h),_=d;break}if(0<=l)break;r[m]=!0}if(0<=l)break}}return n}(e,t),m=rn.triangulate(u,!1);for(s=0,i=m.length;s<i;s++)for(d=m[s],l=0;3>l;l++)c=d[l].x+':'+d[l].y,p=n[c],void 0!==p&&(d[l]=p);return m.concat()},isClockWise:function(e){return 0>rn.area(e)}};ExtrudeGeometry.prototype=Object.create(Geometry.prototype),ExtrudeGeometry.prototype.constructor=ExtrudeGeometry,ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry,ExtrudeBufferGeometry.prototype.getArrays=function(){var e=this.getAttribute('position'),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute('uv'),a=n?Array.prototype.slice.call(n.array):[],r=this.index,o=r?Array.prototype.slice.call(r.array):[];return{position:t,uv:a,index:o}},ExtrudeBufferGeometry.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var a=0,r;a<n;a++)r=e[a],this.addShape(r,t);this.setIndex(t.arrays.index),this.addAttribute('position',new Float32BufferAttribute(t.arrays.position,3)),this.addAttribute('uv',new Float32BufferAttribute(t.arrays.uv,2))},ExtrudeBufferGeometry.prototype.addShape=function(e,n){function scalePt2(e,t,n){return t||console.error('THREE.ExtrudeGeometry: vec does not exist'),t.clone().multiplyScalar(n).add(e)}function getBevelVec(e,t,n){var a=e.x-t.x,r=e.y-t.y,o=n.x-e.x,i=n.y-e.y,s=a*a+r*r,d,c,p;if(A(a*i-r*o)>C){var u=l(s),m=l(o*o+i*i),g=t.x-r/u,f=t.y+a/u,E=n.x-i/m,_=n.y+o/m,y=((E-g)*i-(_-f)*o)/(a*i-r*o);d=g+a*y-e.x,c=f+r*y-e.y;var b=d*d+c*c;if(2>=b)return new Vector2(d,c);p=l(b/2)}else{var x=!1;a>C?o>C&&(x=!0):a<-C?o<-C&&(x=!0):h(r)===h(i)&&(x=!0),x?(d=-r,c=a,p=l(s)):(d=a,c=r,p=l(s/2))}return new Vector2(d/p,c/p)}function sidewalls(e,t){var n,r;for(q=e.length;0<=--q;){n=q,r=q-1,0>r&&(r=e.length-1);var o=0,i=x+2*E;for(o=0;o<i;o++){var s=X*o,l=X*(o+1),p=t+n+s,a=t+r+s,u=t+r+l,c=t+n+l;f4(p,a,u,c,e,o,i,n,r)}}}function v(e,t,n){c.push(e),c.push(t),c.push(n)}function f3(e,t,n){addVertex(e),addVertex(t),addVertex(n);var a=r.length/3,o=F.generateTopUV(I,r,a-3,a-2,a-1);addUV(o[0]),addUV(o[1]),addUV(o[2])}function f4(e,t,n,a){addVertex(e),addVertex(t),addVertex(a),addVertex(t),addVertex(n),addVertex(a);var o=r.length/3,i=F.generateSideWallUV(I,r,o-6,o-3,o-2,o-1);addUV(i[0]),addUV(i[1]),addUV(i[3]),addUV(i[1]),addUV(i[2]),addUV(i[3])}function addVertex(e){o.push(r.length/3),r.push(c[3*e+0]),r.push(c[3*e+1]),r.push(c[3*e+2])}function addUV(e){d.push(e.x),d.push(e.y)}var a=n.arrays?n.arrays:this.getArrays(),r=a.position,o=a.index,d=a.uv,c=[],p=n.amount===void 0?100:n.amount,u=n.bevelThickness===void 0?6:n.bevelThickness,f=n.bevelSize===void 0?u-2:n.bevelSize,E=n.bevelSegments===void 0?3:n.bevelSegments,_=!(n.bevelEnabled!==void 0)||n.bevelEnabled,y=n.curveSegments===void 0?12:n.curveSegments,x=n.steps===void 0?1:n.steps,T=n.extrudePath,R=!1,F=n.UVGenerator===void 0?ExtrudeGeometry.WorldUVGenerator:n.UVGenerator,w,L,M,B,D;T&&(w=T.getSpacedPoints(x),R=!0,_=!1,L=n.frames===void 0?T.computeFrenetFrames(x,!1):n.frames,M=new Vector3,B=new Vector3,D=new Vector3),_||(E=0,u=0,f=0);var I=this,N=e.extractPoints(y),P=N.shape,O=N.holes,U=!rn.isClockWise(P),G,W,H;if(U)for(P=P.reverse(),W=0,H=O.length;W<H;W++)G=O[W],rn.isClockWise(G)&&(O[W]=G.reverse());var V=rn.triangulateShape(P,O),$=P;for(W=0,H=O.length;W<H;W++)G=O[W],P=P.concat(G);for(var X=P.length,Y=V.length,K=[],q=0,i=$.length,Z=i-1,j=q+1,k,b,Q,t,J,ee;q<i;q++,Z++,j++)Z===i&&(Z=0),j===i&&(j=0),K[q]=getBevelVec($[q],$[Z],$[j]);var te=[],ne=K.concat(),ae;for(W=0,H=O.length;W<H;W++){for(G=O[W],ae=[],(q=0,i=G.length,Z=i-1,j=q+1);q<i;q++,Z++,j++)Z===i&&(Z=0),j===i&&(j=0),ae[q]=getBevelVec(G[q],G[Z],G[j]);te.push(ae),ne=ne.concat(ae)}for(k=0;k<E;k++){for(Q=k/E,t=u*g(Q*S/2),b=f*m(Q*S/2),(q=0,i=$.length);q<i;q++)J=scalePt2($[q],K[q],b),v(J.x,J.y,-t);for(W=0,H=O.length;W<H;W++)for(G=O[W],ae=te[W],(q=0,i=G.length);q<i;q++)J=scalePt2(G[q],ae[q],b),v(J.x,J.y,-t)}for(b=f,q=0;q<X;q++)J=_?scalePt2(P[q],ne[q],b):P[q],R?(B.copy(L.normals[0]).multiplyScalar(J.x),M.copy(L.binormals[0]).multiplyScalar(J.y),D.copy(w[0]).add(B).add(M),v(D.x,D.y,D.z)):v(J.x,J.y,0);var re;for(re=1;re<=x;re++)for(q=0;q<X;q++)J=_?scalePt2(P[q],ne[q],b):P[q],R?(B.copy(L.normals[re]).multiplyScalar(J.x),M.copy(L.binormals[re]).multiplyScalar(J.y),D.copy(w[re]).add(B).add(M),v(D.x,D.y,D.z)):v(J.x,J.y,p/x*re);for(k=E-1;0<=k;k--){for(Q=k/E,t=u*g(Q*S/2),b=f*m(Q*S/2),(q=0,i=$.length);q<i;q++)J=scalePt2($[q],K[q],b),v(J.x,J.y,p+t);for(W=0,H=O.length;W<H;W++)for(G=O[W],ae=te[W],(q=0,i=G.length);q<i;q++)J=scalePt2(G[q],ae[q],b),R?v(J.x,J.y+w[x-1].y,w[x-1].x+t):v(J.x,J.y,p+t)}(function buildLidFaces(){var e=r.length/3;if(_){var t=0,a=X*t;for(q=0;q<Y;q++)ee=V[q],f3(ee[2]+a,ee[1]+a,ee[0]+a);for(t=x+2*E,a=X*t,q=0;q<Y;q++)ee=V[q],f3(ee[0]+a,ee[1]+a,ee[2]+a)}else{for(q=0;q<Y;q++)ee=V[q],f3(ee[2],ee[1],ee[0]);for(q=0;q<Y;q++)ee=V[q],f3(ee[0]+X*x,ee[1]+X*x,ee[2]+X*x)}I.addGroup(e,r.length/3-e,n.material===void 0?0:n.material)})(),function buildSideFaces(){var e=r.length/3,t=0;for(sidewalls($,t),t+=$.length,(W=0,H=O.length);W<H;W++)G=O[W],sidewalls(G,t),t+=G.length;I.addGroup(e,r.length/3-e,n.extrudeMaterial===void 0?1:n.extrudeMaterial)}(),n.arrays||(this.setIndex(o),this.addAttribute('position',new Float32BufferAttribute(r,3)),this.addAttribute('uv',new Float32BufferAttribute(n.arrays.uv,2)))},ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,a,r){var o=t[3*n],i=t[3*n+1],s=t[3*a],l=t[3*a+1],d=t[3*r],c=t[3*r+1];return[new Vector2(o,i),new Vector2(s,l),new Vector2(d,c)]},generateSideWallUV:function(e,t,n,a,r,o){var i=t[3*n],s=t[3*n+1],l=t[3*n+2],d=t[3*a],c=t[3*a+1],p=t[3*a+2],u=t[3*r],m=t[3*r+1],g=t[3*r+2],h=t[3*o],f=t[3*o+1],E=t[3*o+2];return 0.01>A(s-c)?[new Vector2(i,1-l),new Vector2(d,1-p),new Vector2(u,1-g),new Vector2(h,1-E)]:[new Vector2(s,1-l),new Vector2(c,1-p),new Vector2(m,1-g),new Vector2(f,1-E)]}},TextGeometry.prototype=Object.create(Geometry.prototype),TextGeometry.prototype.constructor=TextGeometry,TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype),TextBufferGeometry.prototype.constructor=TextBufferGeometry,SphereGeometry.prototype=Object.create(Geometry.prototype),SphereGeometry.prototype.constructor=SphereGeometry,SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype),SphereBufferGeometry.prototype.constructor=SphereBufferGeometry,RingGeometry.prototype=Object.create(Geometry.prototype),RingGeometry.prototype.constructor=RingGeometry,RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype),RingBufferGeometry.prototype.constructor=RingBufferGeometry,LatheGeometry.prototype=Object.create(Geometry.prototype),LatheGeometry.prototype.constructor=LatheGeometry,LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype),LatheBufferGeometry.prototype.constructor=LatheBufferGeometry,ShapeGeometry.prototype=Object.create(Geometry.prototype),ShapeGeometry.prototype.constructor=ShapeGeometry,ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry,EdgesGeometry.prototype=Object.create(BufferGeometry.prototype),EdgesGeometry.prototype.constructor=EdgesGeometry,CylinderGeometry.prototype=Object.create(Geometry.prototype),CylinderGeometry.prototype.constructor=CylinderGeometry,CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry,ConeGeometry.prototype=Object.create(CylinderGeometry.prototype),ConeGeometry.prototype.constructor=ConeGeometry,ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype),ConeBufferGeometry.prototype.constructor=ConeBufferGeometry,CircleGeometry.prototype=Object.create(Geometry.prototype),CircleGeometry.prototype.constructor=CircleGeometry,CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var on=Object.freeze({WireframeGeometry:WireframeGeometry,ParametricGeometry:ParametricGeometry,ParametricBufferGeometry:ParametricBufferGeometry,TetrahedronGeometry:TetrahedronGeometry,TetrahedronBufferGeometry:TetrahedronBufferGeometry,OctahedronGeometry:OctahedronGeometry,OctahedronBufferGeometry:OctahedronBufferGeometry,IcosahedronGeometry:IcosahedronGeometry,IcosahedronBufferGeometry:IcosahedronBufferGeometry,DodecahedronGeometry:DodecahedronGeometry,DodecahedronBufferGeometry:DodecahedronBufferGeometry,PolyhedronGeometry:PolyhedronGeometry,PolyhedronBufferGeometry:PolyhedronBufferGeometry,TubeGeometry:TubeGeometry,TubeBufferGeometry:TubeBufferGeometry,TorusKnotGeometry:TorusKnotGeometry,TorusKnotBufferGeometry:TorusKnotBufferGeometry,TorusGeometry:TorusGeometry,TorusBufferGeometry:TorusBufferGeometry,TextGeometry:TextGeometry,TextBufferGeometry:TextBufferGeometry,SphereGeometry:SphereGeometry,SphereBufferGeometry:SphereBufferGeometry,RingGeometry:RingGeometry,RingBufferGeometry:RingBufferGeometry,PlaneGeometry:PlaneGeometry,PlaneBufferGeometry:PlaneBufferGeometry,LatheGeometry:LatheGeometry,LatheBufferGeometry:LatheBufferGeometry,ShapeGeometry:ShapeGeometry,ShapeBufferGeometry:ShapeBufferGeometry,ExtrudeGeometry:ExtrudeGeometry,ExtrudeBufferGeometry:ExtrudeBufferGeometry,EdgesGeometry:EdgesGeometry,ConeGeometry:ConeGeometry,ConeBufferGeometry:ConeBufferGeometry,CylinderGeometry:CylinderGeometry,CylinderBufferGeometry:CylinderBufferGeometry,CircleGeometry:CircleGeometry,CircleBufferGeometry:CircleBufferGeometry,BoxGeometry:BoxGeometry,BoxBufferGeometry:BoxBufferGeometry});ShadowMaterial.prototype=Object.create(Material.prototype),ShadowMaterial.prototype.constructor=ShadowMaterial,ShadowMaterial.prototype.isShadowMaterial=!0,RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype),RawShaderMaterial.prototype.constructor=RawShaderMaterial,RawShaderMaterial.prototype.isRawShaderMaterial=!0,MeshStandardMaterial.prototype=Object.create(Material.prototype),MeshStandardMaterial.prototype.constructor=MeshStandardMaterial,MeshStandardMaterial.prototype.isMeshStandardMaterial=!0,MeshStandardMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.defines={STANDARD:''},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype),MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial,MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0,MeshPhysicalMaterial.prototype.copy=function(e){return MeshStandardMaterial.prototype.copy.call(this,e),this.defines={PHYSICAL:''},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},MeshPhongMaterial.prototype=Object.create(Material.prototype),MeshPhongMaterial.prototype.constructor=MeshPhongMaterial,MeshPhongMaterial.prototype.isMeshPhongMaterial=!0,MeshPhongMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshToonMaterial.prototype=Object.create(MeshPhongMaterial.prototype),MeshToonMaterial.prototype.constructor=MeshToonMaterial,MeshToonMaterial.prototype.isMeshToonMaterial=!0,MeshToonMaterial.prototype.copy=function(e){return MeshPhongMaterial.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},MeshNormalMaterial.prototype=Object.create(Material.prototype),MeshNormalMaterial.prototype.constructor=MeshNormalMaterial,MeshNormalMaterial.prototype.isMeshNormalMaterial=!0,MeshNormalMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshLambertMaterial.prototype=Object.create(Material.prototype),MeshLambertMaterial.prototype.constructor=MeshLambertMaterial,MeshLambertMaterial.prototype.isMeshLambertMaterial=!0,MeshLambertMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype),LineDashedMaterial.prototype.constructor=LineDashedMaterial,LineDashedMaterial.prototype.isLineDashedMaterial=!0,LineDashedMaterial.prototype.copy=function(e){return LineBasicMaterial.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var sn=Object.freeze({ShadowMaterial:ShadowMaterial,SpriteMaterial:SpriteMaterial,RawShaderMaterial:RawShaderMaterial,ShaderMaterial:ShaderMaterial,PointsMaterial:PointsMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshToonMaterial:MeshToonMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshDistanceMaterial:MeshDistanceMaterial,MeshBasicMaterial:MeshBasicMaterial,LineDashedMaterial:LineDashedMaterial,LineBasicMaterial:LineBasicMaterial,Material:Material}),ln={enabled:!1,files:{},add:function(e,t){!1===this.enabled||(this.files[e]=t)},get:function(e){return!1===this.enabled?void 0:this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},dn=new LoadingManager;Object.assign(FileLoader.prototype,{load:function(e,t,n,a){void 0===e&&(e=''),void 0!==this.path&&(e=this.path+e);var r=this,o=ln.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;var s=/^data:(.*?)(;base64)?,(.*)$/,l=e.match(s);if(l){var d=l[1],c=!!l[2],p=l[3];p=window.decodeURIComponent(p),c&&(p=window.atob(p));try{var u=(this.responseType||'').toLowerCase(),m;switch(u){case'arraybuffer':case'blob':m=new ArrayBuffer(p.length);for(var g=new Uint8Array(m),h=0;h<p.length;h++)g[h]=p.charCodeAt(h);'blob'===u&&(m=new Blob([m],{type:d}));break;case'document':var i=new DOMParser;m=i.parseFromString(p,d);break;case'json':m=JSON.parse(p);break;default:m=p;}window.setTimeout(function(){t&&t(m),r.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){a&&a(t),r.manager.itemEnd(e),r.manager.itemError(e)},0)}}else{var f=new XMLHttpRequest;for(var E in f.open('GET',e,!0),f.addEventListener('load',function(n){var o=n.target.response;ln.add(e,o),200===this.status?(t&&t(o),r.manager.itemEnd(e)):0===this.status?(console.warn('THREE.FileLoader: HTTP Status 0 received.'),t&&t(o),r.manager.itemEnd(e)):(a&&a(n),r.manager.itemEnd(e),r.manager.itemError(e))},!1),void 0!==n&&f.addEventListener('progress',function(e){n(e)},!1),f.addEventListener('error',function(t){a&&a(t),r.manager.itemEnd(e),r.manager.itemError(e)},!1),void 0!==this.responseType&&(f.responseType=this.responseType),void 0!==this.withCredentials&&(f.withCredentials=this.withCredentials),f.overrideMimeType&&f.overrideMimeType(void 0===this.mimeType?'text/plain':this.mimeType),this.requestHeader)f.setRequestHeader(E,this.requestHeader[E]);f.send(null)}return r.manager.itemStart(e),f},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(CompressedTextureLoader.prototype,{load:function(e,t,n,a){function loadTexture(c){l.load(e[c],function(e){var n=r._parser(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},d+=1,6==d&&(1===n.mipmapCount&&(s.minFilter=ke),s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,a)}var r=this,o=[],s=new CompressedTexture;s.image=o;var l=new FileLoader(this.manager);if(l.setPath(this.path),l.setResponseType('arraybuffer'),Array.isArray(e))for(var d=0,c=0,i=e.length;c<i;++c)loadTexture(c);else l.load(e,function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var a=n.mipmaps.length/n.mipmapCount,l=0;l<a;l++){o[l]={mipmaps:[]};for(var d=0;d<n.mipmapCount;d++)o[l].mipmaps.push(n.mipmaps[l*n.mipmapCount+d]),o[l].format=n.format,o[l].width=n.width,o[l].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=ke),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,a);return s},setPath:function(e){return this.path=e,this}}),Object.assign(DataTextureLoader.prototype,{load:function(e,t,n,a){var r=this,o=new DataTexture,i=new FileLoader(this.manager);return i.setResponseType('arraybuffer'),i.load(e,function(e){var n=r._parser(e);n&&(void 0===n.image?void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data):o.image=n.image,o.wrapS=void 0===n.wrapS?Ne:n.wrapS,o.wrapT=void 0===n.wrapT?Ne:n.wrapT,o.magFilter=void 0===n.magFilter?ke:n.magFilter,o.minFilter=void 0===n.minFilter?He:n.minFilter,o.anisotropy=void 0===n.anisotropy?1:n.anisotropy,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=ke),o.needsUpdate=!0,t&&t(o,n))},n,a),o}}),Object.assign(ImageLoader.prototype,{crossOrigin:'Anonymous',load:function(e,t,n,a){void 0===e&&(e=''),void 0!==this.path&&(e=this.path+e);var r=this,o=ln.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;var i=document.createElementNS('http://www.w3.org/1999/xhtml','img');return i.addEventListener('load',function(){ln.add(e,this),t&&t(this),r.manager.itemEnd(e)},!1),i.addEventListener('error',function(t){a&&a(t),r.manager.itemEnd(e),r.manager.itemError(e)},!1),'data:'!==e.substr(0,5)&&void 0!==this.crossOrigin&&(i.crossOrigin=this.crossOrigin),r.manager.itemStart(e),i.src=e,i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(CubeTextureLoader.prototype,{crossOrigin:'Anonymous',load:function(e,t,n,a){function loadTexture(n){o.load(e[n],function(e){r.images[n]=e,s++,6==s&&(r.needsUpdate=!0,t&&t(r))},void 0,a)}var r=new CubeTexture,o=new ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,l=0;l<e.length;++l)loadTexture(l);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(TextureLoader.prototype,{crossOrigin:'Anonymous',load:function(e,t,n,a){var r=new ImageLoader(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);var o=new Texture;return o.image=r.load(e,function(){var n=0<e.search(/\.(jpg|jpeg)$/)||0===e.search(/^data\:image\/jpeg/);o.format=n?nt:at,o.needsUpdate=!0,void 0!==t&&t(o)},n,a),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(LightShadow.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*kt.RAD2DEG*e.angle,a=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||a!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=a,t.far=r,t.updateProjectionMatrix())}}),SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow}),DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0}),RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Light.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var cn={arraySlice:function(e,t,n){return cn.isTypedArray(e)?new e.constructor(e.subarray(t,void 0===n?e.length:n)):e.slice(t,n)},convertArray:function(e,t,n){return e&&(n||e.constructor!==t)?'number'==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=Array(t),a=0;a!==t;++a)n[a]=a;return n.sort(function compareTime(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var a=e.length,r=new e.constructor(a),o=0,i=0,s;i!==a;++o){s=n[o]*t;for(var l=0;l!==t;++l)r[i++]=e[s+l]}return r},flattenJSON:function(e,t,n,a){for(var r=1,o=e[0];o!==void 0&&o[a]===void 0;)o=e[r++];if(void 0!==o){var i=o[a];if(void 0!==i)if(Array.isArray(i))do i=o[a],void 0!==i&&(t.push(o.time),n.push.apply(n,i)),o=e[r++];while(void 0!==o);else if(void 0!==i.toArray)do i=o[a],void 0!==i&&(t.push(o.time),i.toArray(n,n.length)),o=e[r++];while(void 0!==o);else do i=o[a],void 0!==i&&(t.push(o.time),n.push(i)),o=e[r++];while(void 0!==o)}}};Object.assign(Interpolant.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,a=t[n],r=t[n-1];validate_interval:{seek:{var o;linear_scan:{forward_scan:if(!(e<a)){for(var i=n+2;;){if(void 0===a){if(e<r)break forward_scan;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===i)break;if(r=a,a=t[++n],e<a)break seek}o=t.length;break linear_scan}if(!(e>=r)){var s=t[1];e<s&&(n=2,r=s);for(var i=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,a);if(n===i)break;if(a=r,r=t[--n-1],e>=r)break seek}o=n,n=0;break linear_scan}break validate_interval}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(a=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,a);if(void 0===a)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,a)}return this.interpolate_(n,r,e,a)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,a=this.valueSize,r=0;r!==a;++r)t[r]=n[e*a+r];return t},interpolate_:function(){throw new Error('call to abstract method')},intervalChanged_:function(){}}),Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_}),CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:vt,endingEnd:vt},intervalChanged_:function(e,t,n){var a=this.parameterPositions,r=e-2,o=e+1,i=a[r],s=a[o];if(i===void 0)switch(this.getSettings_().endingStart){case St:r=e,i=2*t-n;break;case Tt:r=a.length-2,i=t+a[r]-a[r+1];break;default:r=e,i=n;}if(void 0===s)switch(this.getSettings_().endingEnd){case St:o=e,s=2*n-t;break;case Tt:o=1,s=n+a[1]-a[0];break;default:o=e-1,s=t;}var l=0.5*(n-t),d=this.valueSize;this._weightPrev=l/(t-i),this._weightNext=l/(s-n),this._offsetPrev=r*d,this._offsetNext=o*d},interpolate_:function(e,n,a,t){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,d=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,m=this._weightNext,g=(a-n)/(t-n),p=g*g,h=p*g,f=0;f!==s;++f)r[f]=(-u*h+2*u*p-u*g)*o[d+f]+((1+u)*h+(-1.5-2*u)*p+(-0.5+u)*g+1)*o[l-s+f]+((-1-m)*h+(1.5+m)*p+0.5*g)*o[l+f]+(m*h-m*p)*o[c+f];return r}}),LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(e,n,a,t){for(var r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,d=(a-n)/(t-n),c=0;c!==s;++c)r[c]=o[l-s+c]*(1-d)+o[l+c]*d;return r}}),DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(e){return this.copySampleValue_(e-1)}});var pn;pn={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:bt,InterpolantFactoryMethodDiscrete:function(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;if(e===At?t=this.InterpolantFactoryMethodDiscrete:e===bt?t=this.InterpolantFactoryMethodLinear:e===xt?t=this.InterpolantFactoryMethodSmooth:void 0,void 0===t){var n='unsupported interpolation for '+this.ValueTypeName+' keyframe track named '+this.name;if(void 0===this.createInterpolant)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return void console.warn('THREE.KeyframeTrackPrototype:',n)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return At;case this.InterpolantFactoryMethodLinear:return bt;case this.InterpolantFactoryMethodSmooth:return xt;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,a=0,r=t.length;a!==r;++a)t[a]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,a=0,r=t.length;a!==r;++a)t[a]*=e;return this},trim:function(e,t){for(var n=this.times,a=n.length,r=0,o=a-1;r!==a&&n[r]<e;)++r;for(;-1!=o&&n[o]>t;)--o;if(++o,0!=r||o!==a){r>=o&&(o=y(o,1),r=o-1);var i=this.getValueSize();this.times=cn.arraySlice(n,r,o),this.values=cn.arraySlice(this.values,r*i,o*i)}return this},validate:function(){var e=!0,t=this.getValueSize();0!=t-E(t)&&(console.error('THREE.KeyframeTrackPrototype: Invalid value size in track.',this),e=!1);var a=this.times,r=this.values,o=a.length;0===o&&(console.error('THREE.KeyframeTrackPrototype: Track is empty.',this),e=!1);for(var s=null,l=0,i;l!==o;l++){if(i=a[l],'number'==typeof i&&isNaN(i)){console.error('THREE.KeyframeTrackPrototype: Time is not a valid number.',this,l,i),e=!1;break}if(null!=s&&s>i){console.error('THREE.KeyframeTrackPrototype: Out of order keys.',this,l,i,s),e=!1;break}s=i}if(r!==void 0&&cn.isTypedArray(r))for(var l=0,d=r.length,n;l!==d;++l)if(n=r[l],isNaN(n)){console.error('THREE.KeyframeTrackPrototype: Value is not a valid number.',this,l,n),e=!1;break}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),a=this.getInterpolation()===xt,r=1,o=e.length-1,s=1;s<o;++s){var i=!1,l=e[s],d=e[s+1];if(l!==d&&(1!==s||l!==l[0]))if(!a){for(var c=s*n,p=0,u;p!==n;++p)if(u=t[c+p],u!==t[c-n+p]||u!==t[c+n+p]){i=!0;break}}else i=!0;if(i){if(s!==r){e[r]=e[s];for(var m=s*n,g=r*n,p=0;p!==n;++p)t[g+p]=t[m+p]}++r}}if(0<o){e[r]=e[o];for(var m=o*n,g=r*n,p=0;p!==n;++p)t[g+p]=t[m+p];++r}return r!==e.length&&(this.times=cn.arraySlice(e,0,r),this.values=cn.arraySlice(t,0,r*n)),this}},VectorKeyframeTrack.prototype=Object.assign(Object.create(pn),{constructor:VectorKeyframeTrack,ValueTypeName:'vector'}),QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(e,n,a,t){for(var r=this.resultBuffer,o=this.sampleValues,i=this.valueSize,s=e*i,l=s+i;s!==l;s+=4)Quaternion.slerpFlat(r,0,o,s-i,o,s,(a-n)/(t-n));return r}}),QuaternionKeyframeTrack.prototype=Object.assign(Object.create(pn),{constructor:QuaternionKeyframeTrack,ValueTypeName:'quaternion',DefaultInterpolation:bt,InterpolantFactoryMethodLinear:function(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),NumberKeyframeTrack.prototype=Object.assign(Object.create(pn),{constructor:NumberKeyframeTrack,ValueTypeName:'number'}),StringKeyframeTrack.prototype=Object.assign(Object.create(pn),{constructor:StringKeyframeTrack,ValueTypeName:'string',ValueBufferType:Array,DefaultInterpolation:At,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),BooleanKeyframeTrack.prototype=Object.assign(Object.create(pn),{constructor:BooleanKeyframeTrack,ValueTypeName:'bool',ValueBufferType:Array,DefaultInterpolation:At,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ColorKeyframeTrack.prototype=Object.assign(Object.create(pn),{constructor:ColorKeyframeTrack,ValueTypeName:'color'}),KeyframeTrack.prototype=pn,pn.constructor=KeyframeTrack,Object.assign(KeyframeTrack,{parse:function(e){if(e.type===void 0)throw new Error('track type undefined, can not parse');var t=KeyframeTrack._getTrackTypeForValueTypeName(e.type);if(e.times===void 0){var n=[],a=[];cn.flattenJSON(e.keys,n,a,'value'),e.times=n,e.values=a}return void 0===t.parse?new t(e.name,e.times,e.values,e.interpolation):t.parse(e)},toJSON:function(e){var t=e.constructor,n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:cn.convertArray(e.times,Array),values:cn.convertArray(e.values,Array)};var a=e.getInterpolation();a!==e.DefaultInterpolation&&(n.interpolation=a)}return n.type=e.ValueTypeName,n},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case'scalar':case'double':case'float':case'number':case'integer':return NumberKeyframeTrack;case'vector':case'vector2':case'vector3':case'vector4':return VectorKeyframeTrack;case'color':return ColorKeyframeTrack;case'quaternion':return QuaternionKeyframeTrack;case'bool':case'boolean':return BooleanKeyframeTrack;case'string':return StringKeyframeTrack;}throw new Error('Unsupported typeName: '+e)}}),Object.assign(AnimationClip,{parse:function(e){for(var t=[],a=e.tracks,r=1/(e.fps||1),o=0,i=a.length;o!==i;++o)t.push(KeyframeTrack.parse(a[o]).scale(r));return new AnimationClip(e.name,e.duration,t)},toJSON:function(e){for(var t=[],a=e.tracks,r={name:e.name,duration:e.duration,tracks:t},o=0,i=a.length;o!==i;++o)t.push(KeyframeTrack.toJSON(a[o]));return r},CreateFromMorphTargetSequence:function(e,t,n,a){for(var r=t.length,o=[],s=0;s<r;s++){var i=[],l=[];i.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);var d=cn.getKeyframeOrder(i);i=cn.sortedArray(i,1,d),l=cn.sortedArray(l,1,d),a||0!==i[0]||(i.push(r),l.push(l[0])),o.push(new NumberKeyframeTrack('.morphTargetInfluences['+t[s].name+']',i,l).scale(1/n))}return new AnimationClip(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var a=e;n=a.geometry&&a.geometry.animations||a.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var a={},r=/^([\w-]*?)([\d]+)$/,o=0,i=e.length;o<i;o++){var s=e[o],l=s.name.match(r);if(l&&1<l.length){var d=l[1],c=a[d];c||(a[d]=c=[]),c.push(s)}}var p=[];for(var d in a)p.push(AnimationClip.CreateFromMorphTargetSequence(d,a[d],t,n));return p},parseAnimation:function(e,t){if(!e)return console.error('THREE.AnimationClip: No animation in JSONLoader data.'),null;for(var n=function(e,t,n,a,r){if(0!==n.length){var o=[],i=[];cn.flattenJSON(n,o,i,a),0!==o.length&&r.push(new e(t,o,i))}},a=[],r=e.name||'default',o=e.length||-1,i=e.fps||30,s=e.hierarchy||[],l=0,d;l<s.length;l++)if(d=s[l].keys,d&&0!==d.length)if(d[0].morphTargets){for(var c={},p=0;p<d.length;p++)if(d[p].morphTargets)for(var u=0;u<d[p].morphTargets.length;u++)c[d[p].morphTargets[u]]=-1;for(var m in c){for(var g=[],h=[],u=0,f;u!==d[p].morphTargets.length;++u)f=d[p],g.push(f.time),h.push(f.morphTarget===m?1:0);a.push(new NumberKeyframeTrack('.morphTargetInfluence['+m+']',g,h))}o=c.length*(i||1)}else{var E='.bones['+t[l].name+']';n(VectorKeyframeTrack,E+'.position',d,'pos',a),n(QuaternionKeyframeTrack,E+'.quaternion',d,'rot',a),n(VectorKeyframeTrack,E+'.scale',d,'scl',a)}if(0===a.length)return null;var _=new AnimationClip(r,o,a);return _}}),Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,a=0,r=e.length,n;a!==r;++a)n=this.tracks[a],t=y(t,n.times[n.times.length-1]);this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(MaterialLoader.prototype,{load:function(e,t,n,a){var r=this,o=new FileLoader(r.manager);o.load(e,function(e){t(r.parse(JSON.parse(e)))},n,a)},setTextures:function(e){this.textures=e},parse:function(e){function getTexture(e){return void 0===t[e]&&console.warn('THREE.MaterialLoader: Undefined texture',e),t[e]}var t=this.textures,n=new sn[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(n.uniforms=e.uniforms),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=getTexture(e.map)),void 0!==e.alphaMap&&(n.alphaMap=getTexture(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=getTexture(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=getTexture(e.normalMap)),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),n.normalScale=new Vector2().fromArray(a)}return void 0!==e.displacementMap&&(n.displacementMap=getTexture(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=getTexture(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=getTexture(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=getTexture(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=getTexture(e.specularMap)),void 0!==e.envMap&&(n.envMap=getTexture(e.envMap)),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=getTexture(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=getTexture(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=getTexture(e.gradientMap)),n}}),Object.assign(BufferGeometryLoader.prototype,{load:function(e,t,n,a){var r=this,o=new FileLoader(r.manager);o.load(e,function(e){t(r.parse(JSON.parse(e)))},n,a)},parse:function(e){var t=new BufferGeometry,a=e.data.index;if(a!==void 0){var r=new un[a.type](a.array);t.setIndex(new BufferAttribute(r,1))}var o=e.data.attributes;for(var s in o){var l=o[s],r=new un[l.type](l.array);t.addAttribute(s,new BufferAttribute(r,l.itemSize,l.normalized))}var d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(var c=0,i=d.length,n;c!==i;++c)n=d[c],t.addGroup(n.start,n.count,n.materialIndex);var p=e.data.boundingSphere;if(p!==void 0){var u=new Vector3;p.center!==void 0&&u.fromArray(p.center),t.boundingSphere=new Sphere(u,p.radius)}return t}});var un={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:'undefined'==typeof Uint8ClampedArray?Uint8Array:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,a=t.length;n<a;n+=2){var r=t[n],o=t[n+1];if(r.test(e))return o}return null}},Object.assign(Loader.prototype,{crossOrigin:void 0,extractUrlBase:function(e){var t=e.split('/');return 1===t.length?'./':(t.pop(),t.join('/')+'/')},initMaterials:function(e,t,n){for(var a=[],r=0;r<e.length;++r)a[r]=this.createMaterial(e[r],t,n);return a},createMaterial:function(){var e={NoBlending:H,NormalBlending:V,AdditiveBlending:$,SubtractiveBlending:z,MultiplyBlending:X,CustomBlending:j},t=new Color,n=new TextureLoader,a=new MaterialLoader;return function createMaterial(r,o,i){function loadTexture(e,t,a,r,l){var d=o+e,c=Loader.Handlers.get(d),p;null===c?(n.setCrossOrigin(i),p=n.load(d)):p=c.load(d),void 0!==t&&(p.repeat.fromArray(t),1!==t[0]&&(p.wrapS=Ie),1!==t[1]&&(p.wrapT=Ie)),void 0!==a&&p.offset.fromArray(a),void 0!==r&&('repeat'===r[0]&&(p.wrapS=Ie),'mirror'===r[0]&&(p.wrapS=Pe),'repeat'===r[1]&&(p.wrapT=Ie),'mirror'===r[1]&&(p.wrapT=Pe)),void 0!==l&&(p.anisotropy=l);var u=kt.generateUUID();return s[u]=p,u}var s={},l={uuid:kt.generateUUID(),type:'MeshLambertMaterial'};for(var d in r){var c=r[d];switch(d){case'DbgColor':case'DbgIndex':case'opticalDensity':case'illumination':break;case'DbgName':l.name=c;break;case'blending':l.blending=e[c];break;case'colorAmbient':case'mapAmbient':console.warn('THREE.Loader.createMaterial:',d,'is no longer supported.');break;case'colorDiffuse':l.color=t.fromArray(c).getHex();break;case'colorSpecular':l.specular=t.fromArray(c).getHex();break;case'colorEmissive':l.emissive=t.fromArray(c).getHex();break;case'specularCoef':l.shininess=c;break;case'shading':'basic'===c.toLowerCase()&&(l.type='MeshBasicMaterial'),'phong'===c.toLowerCase()&&(l.type='MeshPhongMaterial'),'standard'===c.toLowerCase()&&(l.type='MeshStandardMaterial');break;case'mapDiffuse':l.map=loadTexture(c,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case'mapDiffuseRepeat':case'mapDiffuseOffset':case'mapDiffuseWrap':case'mapDiffuseAnisotropy':break;case'mapEmissive':l.emissiveMap=loadTexture(c,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case'mapEmissiveRepeat':case'mapEmissiveOffset':case'mapEmissiveWrap':case'mapEmissiveAnisotropy':break;case'mapLight':l.lightMap=loadTexture(c,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case'mapLightRepeat':case'mapLightOffset':case'mapLightWrap':case'mapLightAnisotropy':break;case'mapAO':l.aoMap=loadTexture(c,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case'mapAORepeat':case'mapAOOffset':case'mapAOWrap':case'mapAOAnisotropy':break;case'mapBump':l.bumpMap=loadTexture(c,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case'mapBumpScale':l.bumpScale=c;break;case'mapBumpRepeat':case'mapBumpOffset':case'mapBumpWrap':case'mapBumpAnisotropy':break;case'mapNormal':l.normalMap=loadTexture(c,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case'mapNormalFactor':l.normalScale=[c,c];break;case'mapNormalRepeat':case'mapNormalOffset':case'mapNormalWrap':case'mapNormalAnisotropy':break;case'mapSpecular':l.specularMap=loadTexture(c,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case'mapSpecularRepeat':case'mapSpecularOffset':case'mapSpecularWrap':case'mapSpecularAnisotropy':break;case'mapMetalness':l.metalnessMap=loadTexture(c,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case'mapMetalnessRepeat':case'mapMetalnessOffset':case'mapMetalnessWrap':case'mapMetalnessAnisotropy':break;case'mapRoughness':l.roughnessMap=loadTexture(c,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case'mapRoughnessRepeat':case'mapRoughnessOffset':case'mapRoughnessWrap':case'mapRoughnessAnisotropy':break;case'mapAlpha':l.alphaMap=loadTexture(c,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case'mapAlphaRepeat':case'mapAlphaOffset':case'mapAlphaWrap':case'mapAlphaAnisotropy':break;case'flipSided':l.side=N;break;case'doubleSided':l.side=P;break;case'transparency':console.warn('THREE.Loader.createMaterial: transparency has been renamed to opacity'),l.opacity=c;break;case'depthTest':case'depthWrite':case'colorWrite':case'opacity':case'reflectivity':case'transparent':case'visible':case'wireframe':l[d]=c;break;case'vertexColors':!0===c&&(l.vertexColors=W),'face'===c&&(l.vertexColors=k);break;default:console.error('THREE.Loader.createMaterial: Unsupported',d,c);}}return'MeshBasicMaterial'===l.type&&delete l.emissive,'MeshPhongMaterial'!==l.type&&delete l.specular,1>l.opacity&&(l.transparent=!0),a.setTextures(s),a.parse(l)}}()}),Object.assign(JSONLoader.prototype,{load:function(e,t,n,a){var r=this,o=this.texturePath&&'string'==typeof this.texturePath?this.texturePath:Loader.prototype.extractUrlBase(e),i=new FileLoader(this.manager);i.setWithCredentials(this.withCredentials),i.load(e,function(n){var a=JSON.parse(n),i=a.metadata;if(i!==void 0){var s=i.type;if(s!==void 0){if('object'===s.toLowerCase())return void console.error('THREE.JSONLoader: '+e+' should be loaded with THREE.ObjectLoader instead.');if('scene'===s.toLowerCase())return void console.error('THREE.JSONLoader: '+e+' should be loaded with THREE.SceneLoader instead.')}}var l=r.parse(a,o);t(l.geometry,l.materials)},n,a)},setTexturePath:function(e){this.texturePath=e},parse:function(){function parseModel(e,t){function isBitSet(e,t){return e&1<<t}var n=e.faces,a=e.vertices,r=e.normals,o=e.colors,s=e.scale,l=0,d,i,c,p,m,g,h,f,E,_,C,y,A,b,x,S,T,R,F,w,L,M,B,D,I,N,u;if(e.uvs!==void 0){for(d=0;d<e.uvs.length;d++)e.uvs[d].length&&l++;for(d=0;d<l;d++)t.faceVertexUvs[d]=[]}for(p=0,m=a.length;p<m;)R=new Vector3,R.x=a[p++]*s,R.y=a[p++]*s,R.z=a[p++]*s,t.vertices.push(R);for(p=0,m=n.length;p<m;)if(_=n[p++],C=isBitSet(_,0),y=isBitSet(_,1),A=isBitSet(_,3),b=isBitSet(_,4),x=isBitSet(_,5),S=isBitSet(_,6),T=isBitSet(_,7),C){if(w=new Face3,w.a=n[p],w.b=n[p+1],w.c=n[p+3],L=new Face3,L.a=n[p+1],L.b=n[p+2],L.c=n[p+3],p+=4,y&&(E=n[p++],w.materialIndex=E,L.materialIndex=E),c=t.faces.length,A)for(d=0;d<l;d++)for(D=e.uvs[d],t.faceVertexUvs[d][c]=[],t.faceVertexUvs[d][c+1]=[],i=0;4>i;i++)f=n[p++],N=D[2*f],u=D[2*f+1],I=new Vector2(N,u),2!==i&&t.faceVertexUvs[d][c].push(I),0!==i&&t.faceVertexUvs[d][c+1].push(I);if(b&&(h=3*n[p++],w.normal.set(r[h++],r[h++],r[h]),L.normal.copy(w.normal)),x)for(d=0;4>d;d++)h=3*n[p++],B=new Vector3(r[h++],r[h++],r[h]),2!==d&&w.vertexNormals.push(B),0!==d&&L.vertexNormals.push(B);if(S&&(g=n[p++],M=o[g],w.color.setHex(M),L.color.setHex(M)),T)for(d=0;4>d;d++)g=n[p++],M=o[g],2!==d&&w.vertexColors.push(new Color(M)),0!==d&&L.vertexColors.push(new Color(M));t.faces.push(w),t.faces.push(L)}else{if(F=new Face3,F.a=n[p++],F.b=n[p++],F.c=n[p++],y&&(E=n[p++],F.materialIndex=E),c=t.faces.length,A)for(d=0;d<l;d++)for(D=e.uvs[d],t.faceVertexUvs[d][c]=[],i=0;3>i;i++)f=n[p++],N=D[2*f],u=D[2*f+1],I=new Vector2(N,u),t.faceVertexUvs[d][c].push(I);if(b&&(h=3*n[p++],F.normal.set(r[h++],r[h++],r[h])),x)for(d=0;3>d;d++)h=3*n[p++],B=new Vector3(r[h++],r[h++],r[h]),F.vertexNormals.push(B);if(S&&(g=n[p++],F.color.setHex(o[g])),T)for(d=0;3>d;d++)g=n[p++],F.vertexColors.push(new Color(o[g]));t.faces.push(F)}}function parseSkin(e,t){var n=e.influencesPerVertex===void 0?2:e.influencesPerVertex;if(e.skinWeights)for(var r=0,o=e.skinWeights.length;r<o;r+=n){var i=e.skinWeights[r],s=1<n?e.skinWeights[r+1]:0,l=2<n?e.skinWeights[r+2]:0,p=3<n?e.skinWeights[r+3]:0;t.skinWeights.push(new Vector4(i,s,l,p))}if(e.skinIndices)for(var r=0,o=e.skinIndices.length;r<o;r+=n){var u=e.skinIndices[r],a=1<n?e.skinIndices[r+1]:0,m=2<n?e.skinIndices[r+2]:0,c=3<n?e.skinIndices[r+3]:0;t.skinIndices.push(new Vector4(u,a,m,c))}t.bones=e.bones,t.bones&&0<t.bones.length&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn('When skinning, number of vertices ('+t.vertices.length+'), skinIndices ('+t.skinIndices.length+'), and skinWeights ('+t.skinWeights.length+') should match.')}function parseMorphing(e,t){var n=e.scale;if(e.morphTargets!==void 0)for(var a=0,r=e.morphTargets.length;a<r;a++){t.morphTargets[a]={},t.morphTargets[a].name=e.morphTargets[a].name,t.morphTargets[a].vertices=[];for(var o=t.morphTargets[a].vertices,i=e.morphTargets[a].vertices,s=0,l=i.length,d;s<l;s+=3)d=new Vector3,d.x=i[s]*n,d.y=i[s+1]*n,d.z=i[s+2]*n,o.push(d)}if(void 0!==e.morphColors&&0<e.morphColors.length){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var c=t.faces,p=e.morphColors[0].colors,a=0,r=c.length;a<r;a++)c[a].color.fromArray(p,3*a)}}function parseAnimations(e,t){var n=[],a=[];e.animation!==void 0&&a.push(e.animation),e.animations!==void 0&&(e.animations.length?a=a.concat(e.animations):a.push(e.animations));for(var r=0,o;r<a.length;r++)o=AnimationClip.parseAnimation(a[r],t.bones),o&&n.push(o);if(t.morphTargets){var i=AnimationClip.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(i)}0<n.length&&(t.animations=n)}return function(e,t){void 0!==e.data&&(e=e.data),e.scale=void 0===e.scale?1:1/e.scale;var n=new Geometry;if(parseModel(e,n),parseSkin(e,n),parseMorphing(e,n),parseAnimations(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:n};var a=Loader.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:n,materials:a}}}()}),Object.assign(ObjectLoader.prototype,{load:function(e,t,n,a){''===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf('/')+1));var r=this,o=new FileLoader(r.manager);o.load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==a&&a(t),void console.error('THREE:ObjectLoader: Can\'t parse '+e+'.',t.message)}var i=o.metadata;return void 0===i||void 0===i.type||'geometry'===i.type.toLowerCase()?void console.error('THREE.ObjectLoader: Can\'t load '+e+'. Use THREE.JSONLoader instead.'):void r.parse(o,t)},n,a)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),a=this.parseImages(e.images,function(){void 0!==t&&t(i)}),r=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,r),i=this.parseObject(e.object,n,o);return e.animations&&(i.animations=this.parseAnimations(e.animations)),(void 0===e.images||0===e.images.length)&&void 0!==t&&t(i),i},parseGeometries:function(e){var t={};if(e!==void 0)for(var n=new JSONLoader,a=new BufferGeometryLoader,r=0,o=e.length;r<o;r++){var i=e[r],s;switch(i.type){case'PlaneGeometry':case'PlaneBufferGeometry':s=new on[i.type](i.width,i.height,i.widthSegments,i.heightSegments);break;case'BoxGeometry':case'BoxBufferGeometry':case'CubeGeometry':s=new on[i.type](i.width,i.height,i.depth,i.widthSegments,i.heightSegments,i.depthSegments);break;case'CircleGeometry':case'CircleBufferGeometry':s=new on[i.type](i.radius,i.segments,i.thetaStart,i.thetaLength);break;case'CylinderGeometry':case'CylinderBufferGeometry':s=new on[i.type](i.radiusTop,i.radiusBottom,i.height,i.radialSegments,i.heightSegments,i.openEnded,i.thetaStart,i.thetaLength);break;case'ConeGeometry':case'ConeBufferGeometry':s=new on[i.type](i.radius,i.height,i.radialSegments,i.heightSegments,i.openEnded,i.thetaStart,i.thetaLength);break;case'SphereGeometry':case'SphereBufferGeometry':s=new on[i.type](i.radius,i.widthSegments,i.heightSegments,i.phiStart,i.phiLength,i.thetaStart,i.thetaLength);break;case'DodecahedronGeometry':case'IcosahedronGeometry':case'OctahedronGeometry':case'TetrahedronGeometry':s=new on[i.type](i.radius,i.detail);break;case'RingGeometry':case'RingBufferGeometry':s=new on[i.type](i.innerRadius,i.outerRadius,i.thetaSegments,i.phiSegments,i.thetaStart,i.thetaLength);break;case'TorusGeometry':case'TorusBufferGeometry':s=new on[i.type](i.radius,i.tube,i.radialSegments,i.tubularSegments,i.arc);break;case'TorusKnotGeometry':case'TorusKnotBufferGeometry':s=new on[i.type](i.radius,i.tube,i.tubularSegments,i.radialSegments,i.p,i.q);break;case'LatheGeometry':case'LatheBufferGeometry':s=new on[i.type](i.points,i.segments,i.phiStart,i.phiLength);break;case'BufferGeometry':s=a.parse(i);break;case'Geometry':s=n.parse(i,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+i.type+'"');continue;}s.uuid=i.uuid,void 0!==i.name&&(s.name=i.name),t[i.uuid]=s}return t},parseMaterials:function(e,t){var n={};if(e!==void 0){var a=new MaterialLoader;a.setTextures(t);for(var r=0,o=e.length,i;r<o;r++)if(i=e[r],'MultiMaterial'===i.type){for(var s=[],l=0;l<i.materials.length;l++)s.push(a.parse(i.materials[l]));n[i.uuid]=s}else n[i.uuid]=a.parse(i)}return n},parseAnimations:function(e){for(var t=[],n=0,a;n<e.length;n++)a=AnimationClip.parse(e[n]),t.push(a);return t},parseImages:function(e,t){function loadImage(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}var n=this,a={};if(e!==void 0&&0<e.length){var r=new LoadingManager(t),o=new ImageLoader(r);o.setCrossOrigin(this.crossOrigin);for(var s=0,i=e.length;s<i;s++){var l=e[s],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;a[l.uuid]=loadImage(d)}}return a},parseTextures:function(e,t){function parseConstant(e,t){return'number'==typeof e?e:(console.warn('THREE.ObjectLoader.parseTexture: Constant should be in numeric form.',e),t[e])}var n={};if(e!==void 0)for(var a=0,r=e.length,o;a<r;a++){o=e[a],void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn('THREE.ObjectLoader: Undefined image',o.image);var i=new Texture(t[o.image]);i.needsUpdate=!0,i.uuid=o.uuid,void 0!==o.name&&(i.name=o.name),void 0!==o.mapping&&(i.mapping=parseConstant(o.mapping,mn)),void 0!==o.offset&&i.offset.fromArray(o.offset),void 0!==o.repeat&&i.repeat.fromArray(o.repeat),void 0!==o.wrap&&(i.wrapS=parseConstant(o.wrap[0],gn),i.wrapT=parseConstant(o.wrap[1],gn)),void 0!==o.minFilter&&(i.minFilter=parseConstant(o.minFilter,hn)),void 0!==o.magFilter&&(i.magFilter=parseConstant(o.magFilter,hn)),void 0!==o.anisotropy&&(i.anisotropy=o.anisotropy),void 0!==o.flipY&&(i.flipY=o.flipY),n[o.uuid]=i}return n},parseObject:function(){var e=new Matrix4;return function parseObject(t,n,a){function getGeometry(e){return void 0===n[e]&&console.warn('THREE.ObjectLoader: Undefined geometry',e),n[e]}function getMaterial(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,r=e.length,o;n<r;n++)o=e[n],void 0===a[o]&&console.warn('THREE.ObjectLoader: Undefined material',o),t.push(a[o]);return t}return void 0===a[e]&&console.warn('THREE.ObjectLoader: Undefined material',e),a[e]}}var r;switch(t.type){case'Scene':r=new Scene,void 0!==t.background&&_(t.background)&&(r.background=new Color(t.background)),void 0!==t.fog&&('Fog'===t.fog.type?r.fog=new Fog(t.fog.color,t.fog.near,t.fog.far):'FogExp2'===t.fog.type&&(r.fog=new FogExp2(t.fog.color,t.fog.density)));break;case'PerspectiveCamera':r=new PerspectiveCamera(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case'OrthographicCamera':r=new OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case'AmbientLight':r=new AmbientLight(t.color,t.intensity);break;case'DirectionalLight':r=new DirectionalLight(t.color,t.intensity);break;case'PointLight':r=new PointLight(t.color,t.intensity,t.distance,t.decay);break;case'RectAreaLight':r=new RectAreaLight(t.color,t.intensity,t.width,t.height);break;case'SpotLight':r=new SpotLight(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case'HemisphereLight':r=new HemisphereLight(t.color,t.groundColor,t.intensity);break;case'SkinnedMesh':console.warn('THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.');case'Mesh':var o=getGeometry(t.geometry),s=getMaterial(t.material);r=o.bones&&0<o.bones.length?new SkinnedMesh(o,s):new Mesh(o,s);break;case'LOD':r=new LOD;break;case'Line':r=new Line(getGeometry(t.geometry),getMaterial(t.material),t.mode);break;case'LineLoop':r=new LineLoop(getGeometry(t.geometry),getMaterial(t.material));break;case'LineSegments':r=new LineSegments(getGeometry(t.geometry),getMaterial(t.material));break;case'PointCloud':case'Points':r=new Points(getGeometry(t.geometry),getMaterial(t.material));break;case'Sprite':r=new Sprite(getMaterial(t.material));break;case'Group':r=new Group;break;default:r=new Object3D;}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0===t.matrix?(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)):(e.fromArray(t.matrix),e.decompose(r.position,r.quaternion,r.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.children)for(var d=t.children,c=0;c<d.length;c++)r.add(this.parseObject(d[c],n,a));if('LOD'===t.type)for(var i=t.levels,p=0;p<i.length;p++){var l=i[p],u=r.getObjectByProperty('uuid',l.object);void 0!==u&&r.addLevel(u,l.distance)}return r}}()});var mn={UVMapping:Te,CubeReflectionMapping:Re,CubeRefractionMapping:Fe,EquirectangularReflectionMapping:we,EquirectangularRefractionMapping:Le,SphericalReflectionMapping:Me,CubeUVReflectionMapping:Be,CubeUVRefractionMapping:De},gn={RepeatWrapping:Ie,ClampToEdgeWrapping:Ne,MirroredRepeatWrapping:Pe},hn={NearestFilter:Oe,NearestMipMapNearestFilter:Ue,NearestMipMapLinearFilter:Ge,LinearFilter:ke,LinearMipMapNearestFilter:We,LinearMipMapLinearFilter:He};Object.assign(Curve.prototype,{getPoint:function(){return console.warn('THREE.Curve: .getPoint() not implemented.'),null},getPointAt:function(e){var n=this.getUtoTmapping(e);return this.getPoint(n)},getPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n=this.getPoint(0),a=0,r,o;for(t.push(0),o=1;o<=e;o++)r=this.getPoint(o/e),a+=r.distanceTo(n),t.push(a),n=r;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,n){var a=this.getLengths(),r=0,o=a.length,i;i=n?n:e*a[o-1];for(var s=0,l=o-1,d;s<=l;)if(r=E(s+(l-s)/2),d=a[r]-i,0>d)s=r+1;else if(0<d)l=r-1;else{l=r;break}if(r=l,a[r]===i)return r/(o-1);var c=a[r],p=a[r+1],u=(i-c)/(p-c),m=(r+u)/(o-1);return m},getTangent:function(e){var t=1e-4,n=e-t,a=e+t;0>n&&(n=0),1<a&&(a=1);var r=this.getPoint(n),o=this.getPoint(a),i=o.clone().sub(r);return i.normalize()},getTangentAt:function(e){var n=this.getUtoTmapping(e);return this.getTangent(n)},computeFrenetFrames:function(e,t){var n=new Vector3,a=[],r=[],s=[],l=new Vector3,d=new Matrix4,c,i,p;for(c=0;c<=e;c++)i=c/e,a[c]=this.getTangentAt(i),a[c].normalize();r[0]=new Vector3,s[0]=new Vector3;var u=Number.MAX_VALUE,m=A(a[0].x),g=A(a[0].y),h=A(a[0].z);for(m<=u&&(u=m,n.set(1,0,0)),g<=u&&(u=g,n.set(0,1,0)),h<=u&&n.set(0,0,1),l.crossVectors(a[0],n).normalize(),r[0].crossVectors(a[0],l),s[0].crossVectors(a[0],r[0]),c=1;c<=e;c++)r[c]=r[c-1].clone(),s[c]=s[c-1].clone(),l.crossVectors(a[c-1],a[c]),l.length()>C&&(l.normalize(),p=o(kt.clamp(a[c-1].dot(a[c]),-1,1)),r[c].applyMatrix4(d.makeRotationAxis(l,p))),s[c].crossVectors(a[c],r[c]);if(!0===t)for(p=o(kt.clamp(r[0].dot(r[e]),-1,1)),p/=e,0<a[0].dot(l.crossVectors(r[0],r[e]))&&(p=-p),c=1;c<=e;c++)r[c].applyMatrix4(d.makeRotationAxis(a[c],p*c)),s[c].crossVectors(a[c],r[c]);return{tangents:a,normals:r,binormals:s}}}),LineCurve.prototype=Object.create(Curve.prototype),LineCurve.prototype.constructor=LineCurve,LineCurve.prototype.isLineCurve=!0,LineCurve.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},LineCurve.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new LineCurve(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),a=0;a<n.length;){if(n[a]>=t){var r=n[a]-t,o=this.curves[a],i=o.getLength(),s=0===i?0:1-r/i;return o.getPointAt(s)}a++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,a=this.curves.length;n<a;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t=[],n=0,a=this.curves,r;n<a.length;n++)for(var o=a[n],i=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(i),l=0,d;l<s.length;l++)d=s[l],r&&r.equals(d)||(t.push(d),r=d);return this.autoClose&&1<t.length&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Geometry,n=0,a=e.length,r;n<a;n++)r=e[n],t.vertices.push(new Vector3(r.x,r.y,r.z||0));return t}}),EllipseCurve.prototype=Object.create(Curve.prototype),EllipseCurve.prototype.constructor=EllipseCurve,EllipseCurve.prototype.isEllipseCurve=!0,EllipseCurve.prototype.getPoint=function(e){for(var t=2*S,n=this.aEndAngle-this.aStartAngle,a=A(n)<C;0>n;)n+=t;for(;n>t;)n-=t;n<C&&(a?n=0:n=t),!0!==this.aClockwise||a||(n==t?n=-t:n-=t);var r=this.aStartAngle+e*n,o=this.aX+this.xRadius*g(r),i=this.aY+this.yRadius*m(r);if(0!==this.aRotation){var s=g(this.aRotation),l=m(this.aRotation),d=o-this.aX,c=i-this.aY;o=d*s-c*l+this.aX,i=d*l+c*s+this.aY}return new Vector2(o,i)},SplineCurve.prototype=Object.create(Curve.prototype),SplineCurve.prototype.constructor=SplineCurve,SplineCurve.prototype.isSplineCurve=!0,SplineCurve.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,a=E(n),r=n-a,o=t[0===a?a:a-1],i=t[a],s=t[a>t.length-2?t.length-1:a+1],l=t[a>t.length-3?t.length-1:a+2];return new Vector2(CatmullRom(r,o.x,i.x,s.x,l.x),CatmullRom(r,o.y,i.y,s.y,l.y))},CubicBezierCurve.prototype=Object.create(Curve.prototype),CubicBezierCurve.prototype.constructor=CubicBezierCurve,CubicBezierCurve.prototype.getPoint=function(e){var t=this.v0,n=this.v1,a=this.v2,r=this.v3;return new Vector2(CubicBezier(e,t.x,n.x,a.x,r.x),CubicBezier(e,t.y,n.y,a.y,r.y))},QuadraticBezierCurve.prototype=Object.create(Curve.prototype),QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve,QuadraticBezierCurve.prototype.getPoint=function(e){var t=this.v0,n=this.v1,a=this.v2;return new Vector2(QuadraticBezier(e,t.x,n.x,a.x),QuadraticBezier(e,t.y,n.y,a.y))};var fn=Object.assign(Object.create(CurvePath.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new LineCurve(this.currentPoint.clone(),new Vector2(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,a){var r=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(n,a));this.curves.push(r),this.currentPoint.set(n,a)},bezierCurveTo:function(e,t,n,a,r,o){var i=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(n,a),new Vector2(r,o));this.curves.push(i),this.currentPoint.set(r,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new SplineCurve(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,a,r,o){var i=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+i,t+s,n,a,r,o)},absarc:function(e,t,n,a,r,o){this.absellipse(e,t,n,n,a,r,o)},ellipse:function(e,t,n,a,r,o,i,s){var l=this.currentPoint.x,d=this.currentPoint.y;this.absellipse(e+l,t+d,n,a,r,o,i,s)},absellipse:function(e,t,n,a,r,o,i,s){var l=new EllipseCurve(e,t,n,a,r,o,i,s);if(0<this.curves.length){var d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});Path.prototype=fn,fn.constructor=Path,Shape.prototype=Object.assign(Object.create(fn),{constructor:Shape,getPointsHoles:function(e){for(var t=[],n=0,a=this.holes.length;n<a;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),Object.assign(ShapePath.prototype,{moveTo:function(e,t){this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,a){this.currentPath.quadraticCurveTo(e,t,n,a)},bezierCurveTo:function(e,t,n,a,r,o){this.currentPath.bezierCurveTo(e,t,n,a,r,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function toShapesNoHoles(e){for(var t=[],n=0,a=e.length;n<a;n++){var r=e[n],o=new Shape;o.curves=r.curves,t.push(o)}return t}function isPointInsidePolygon(e,t){for(var n=t.length,a=!1,r=n-1,o=0;o<n;r=o++){var i=t[r],s=t[o],l=s.x-i.x,d=s.y-i.y;if(A(d)>C){if(0>d&&(i=t[o],l=-l,s=t[r],d=-d),e.y<i.y||e.y>s.y)continue;if(e.y!==i.y){var c=d*(e.x-i.x)-l*(e.y-i.y);if(0==c)return!0;if(0>c)continue;a=!a}else if(e.x===i.x)return!0}else{if(e.y!==i.y)continue;if(s.x<=e.x&&e.x<=i.x||i.x<=e.x&&e.x<=s.x)return!0}}return a}var n=rn.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return toShapesNoHoles(a);var r=[],o,s,d;if(1===a.length)return s=a[0],d=new Shape,d.curves=s.curves,r.push(d),r;var c=!n(a[0].getPoints());c=e?!c:c;var p=[],u=[],m=[],g=0,h;u[g]=void 0,m[g]=[];for(var f=0,i=a.length;f<i;f++)s=a[f],h=s.getPoints(),o=n(h),o=e?!o:o,o?(!c&&u[g]&&g++,u[g]={s:new Shape,p:h},u[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!u[0])return toShapesNoHoles(a);if(1<u.length){for(var l=!1,E=[],_=0,y=u.length;_<y;_++)p[_]=[];for(var _=0,y=u.length,b;_<y;_++){b=m[_];for(var x=0;x<b.length;x++){for(var v=b[x],S=!0,T=0;T<u.length;T++)isPointInsidePolygon(v.p,u[T].p)&&(_!==T&&E.push({froms:_,tos:T,hole:x}),S?(S=!1,p[T].push(v)):l=!0);S&&p[_].push(v)}}0<E.length&&!l&&(m=p)}for(var f=0,R=u.length,F;f<R;f++){d=u[f].s,r.push(d),F=m[f];for(var w=0,L=F.length;w<L;w++)d.holes.push(F[w].h)}return r}}),Object.assign(Font.prototype,{isFont:!0,generateShapes:function(e,t,n){function createPaths(e){for(var n=(e+'').split(''),r=t/a.resolution,o=(a.boundingBox.yMax-a.boundingBox.yMin+a.underlineThickness)*r,s=0,l=0,d=[],c=0,i;c<n.length;c++)if(i=n[c],'\n'===i)s=0,l-=o;else{var p=createPath(i,r,s,l);s+=p.offsetX,d.push(p.path)}return d}function createPath(e,r,o,s){var d=a.glyphs[e]||a.glyphs['?'];if(d){var c=new ShapePath,p=[],u,m,g,h,f,E,_,C,y,A,b;if(d.o)for(var x=d._cachedOutline||(d._cachedOutline=d.o.split(' ')),v=0,i=x.length,l;v<i;)switch(l=x[v++],l){case'm':u=x[v++]*r+o,m=x[v++]*r+s,c.moveTo(u,m);break;case'l':u=x[v++]*r+o,m=x[v++]*r+s,c.lineTo(u,m);break;case'q':if(g=x[v++]*r+o,h=x[v++]*r+s,_=x[v++]*r+o,C=x[v++]*r+s,c.quadraticCurveTo(_,C,g,h),b=p[p.length-1],b){f=b.x,E=b.y;for(var S=1,T;S<=n;S++)T=S/n,QuadraticBezier(T,f,_,g),QuadraticBezier(T,E,C,h)}break;case'b':if(g=x[v++]*r+o,h=x[v++]*r+s,_=x[v++]*r+o,C=x[v++]*r+s,y=x[v++]*r+o,A=x[v++]*r+s,c.bezierCurveTo(_,C,y,A,g,h),b=p[p.length-1],b){f=b.x,E=b.y;for(var S=1,T;S<=n;S++)T=S/n,CubicBezier(T,f,_,y,g),CubicBezier(T,E,C,A,h)}}return{offsetX:d.ha*r,path:c}}}t===void 0&&(t=100),n===void 0&&(n=4);for(var a=this.data,r=createPaths(e),o=[],i=0,s=r.length;i<s;i++)Array.prototype.push.apply(o,r[i].toShapes());return o}}),Object.assign(FontLoader.prototype,{load:function(e,t,n,a){var r=this,o=new FileLoader(this.manager);o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn('THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.'),n=JSON.parse(e.substring(65,e.length-2))}var a=r.parse(n);t&&t(a)},n,a)},parse:function(e){return new Font(e)}});var En={getContext:function(){return void 0==_n&&(_n=new(window.AudioContext||window.webkitAudioContext)),_n},setContext:function(e){_n=e}},_n;Object.assign(AudioLoader.prototype,{load:function(e,t,n,a){var r=new FileLoader(this.manager);r.setResponseType('arraybuffer'),r.load(e,function(e){var n=En.getContext();n.decodeAudioData(e,function(e){t(e)})},n,a)}}),Object.assign(StereoCamera.prototype,{update:function(){var e=new Matrix4,t=new Matrix4,n,r,o,i,s,l,d,c;return function update(p){var u=n!==this||r!==p.focus||o!==p.fov||i!==p.aspect*this.aspect||s!==p.near||l!==p.far||d!==p.zoom||c!==this.eyeSep;if(u){n=this,r=p.focus,o=p.fov,i=p.aspect*this.aspect,s=p.near,l=p.far,d=p.zoom;var m=p.projectionMatrix.clone();c=this.eyeSep/2;var g=c*s/r,h=s*a(0.5*(kt.DEG2RAD*o))/d,f,E;t.elements[12]=-c,e.elements[12]=c,f=-h*i+g,E=h*i+g,m.elements[0]=2*s/(E-f),m.elements[8]=(E+f)/(E-f),this.cameraL.projectionMatrix.copy(m),f=-h*i-g,E=h*i-g,m.elements[0]=2*s/(E-f),m.elements[8]=(E+f)/(E-f),this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(p.matrixWorld).multiply(t),this.cameraR.matrixWorld.copy(p.matrixWorld).multiply(e)}}()}),CubeCamera.prototype=Object.create(Object3D.prototype),CubeCamera.prototype.constructor=CubeCamera,AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null===this.filter?this.gain.disconnect(this.context.destination):(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new Vector3,t=new Quaternion,n=new Vector3,a=new Vector3;return function updateMatrixWorld(r){Object3D.prototype.updateMatrixWorld.call(this,r);var o=this.context.listener,i=this.up;this.matrixWorld.decompose(e,t,n),a.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(a.x,this.context.currentTime),o.forwardY.setValueAtTime(a.y,this.context.currentTime),o.forwardZ.setValueAtTime(a.z,this.context.currentTime),o.upX.setValueAtTime(i.x,this.context.currentTime),o.upY.setValueAtTime(i.y,this.context.currentTime),o.upZ.setValueAtTime(i.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(a.x,a.y,a.z,i.x,i.y,i.z))}}()}),Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType='audioNode',this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType='buffer',this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn('THREE.Audio: Audio is already playing.');if(!1===this.hasPlaybackControl)return void console.warn('THREE.Audio: this Audio has no playback control.');var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn('THREE.Audio: this Audio has no playback control.'):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn('THREE.Audio: this Audio has no playback control.'):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn('THREE.Audio: this Audio has no playback control.'):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn('THREE.Audio: this Audio has no playback control.'),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn('THREE.Audio: this Audio has no playback control.'):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Vector3;return function updateMatrixWorld(t){Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(PropertyMixer.prototype,{accumulate:function(e,t){var n=this.buffer,a=this.valueSize,r=e*a+a,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==a;++s)n[r+s]=n[s];o=t}else{o+=t;var i=t/o;this._mixBufferRegion(n,r,0,i,a)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,a=e*t+t,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,1>r){this._mixBufferRegion(n,a,3*t,1-r,t)}for(var s=t;s!==t+t;++s)if(n[s]!==n[s+t]){o.setValue(n,a);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,a=3*n;e.getValue(t,a);for(var r=n;r!==a;++r)t[r]=t[a+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,n,a,r,t){if(0.5<=r)for(var o=0;o!==t;++o)e[n+o]=e[a+o]},_slerp:function(e,n,a,r){Quaternion.slerpFlat(e,n,e,n,e,a,r)},_lerp:function(e,n,a,r,t){for(var o=0,i;o!==t;++o)i=n+o,e[i]=e[i]*(1-r)+e[a+o]*r}}),Object.assign(Composite.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,a=this._bindings[n];a!==void 0&&a.getValue(e,t)},setValue:function(e,t){for(var a=this._bindings,r=this._targetGroup.nCachedObjects_,o=a.length;r!==o;++r)a[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,a=e.length;t!==a;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,a=e.length;t!==a;++t)e[t].unbind()}}),Object.assign(PropertyBinding,{Composite:Composite,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,n):new PropertyBinding(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,'_').replace(/[^\w-]/g,'')},parseTrackName:function(){var e=/((?:[\w-]+[\/:])*)/,t=/([\w-\.]+)?/,n=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,a=/\.([\w-]+)(?:\[(.+)\])?/,r=new RegExp('^'+e.source+t.source+n.source+a.source+'$'),o=['material','materials','bones'];return function(e){var t=r.exec(e);if(!t)throw new Error('PropertyBinding: Cannot parse trackName: '+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=n.nodeName&&n.nodeName.lastIndexOf('.');if(a!==void 0&&-1!==a){var i=n.nodeName.substring(a+1);-1!==o.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,a),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error('PropertyBinding: can not parse propertyName from trackName: '+e);return n}}(),findNode:function(e,t){if(!t||''===t||'root'===t||'.'===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(e){for(var n=0,a;n<e.bones.length;n++)if(a=e.bones[n],a.name===t)return a;return null},a=n(e.skeleton);if(a)return a}if(e.children){var r=function(e){for(var n=0,a;n<e.length;n++){if(a=e[n],a.name===t||a.uuid===t)return a;var o=r(a.children);if(o)return o}return null},o=r(e.children);if(o)return o}return null}}),Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function getValue_direct(e,t){e[t]=this.node[this.propertyName]},function getValue_array(e,t){for(var a=this.resolvedProperty,r=0,o=a.length;r!==o;++r)e[t++]=a[r]},function getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function setValue_direct(e,t){this.node[this.propertyName]=e[t]},function setValue_direct_setNeedsUpdate(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_array(e,t){for(var a=this.resolvedProperty,r=0,o=a.length;r!==o;++r)a[r]=e[t++]},function setValue_array_setNeedsUpdate(e,t){for(var a=this.resolvedProperty,r=0,o=a.length;r!==o;++r)a[r]=e[t++];this.targetObject.needsUpdate=!0},function setValue_array_setMatrixWorldNeedsUpdate(e,t){for(var a=this.resolvedProperty,r=0,o=a.length;r!==o;++r)a[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)},function setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function getValue_unbound(e,t){this.bind(),this.getValue(e,t)},setValue:function getValue_unbound(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,a=t.propertyName,r=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error('THREE.PropertyBinding: Trying to update node for track: '+this.path+' but it wasn\'t found.');if(n){var o=t.objectIndex;switch(n){case'materials':if(!e.material)return void console.error('THREE.PropertyBinding: Can not bind to material as node does not have a material.',this);if(!e.material.materials)return void console.error('THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.',this);e=e.material.materials;break;case'bones':if(!e.skeleton)return void console.error('THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.',this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===o){o=s;break}break;default:if(void 0===e[n])return void console.error('THREE.PropertyBinding: Can not bind to objectName of node undefined.',this);e=e[n];}if(void 0!==o){if(void 0===e[o])return void console.error('THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.',this,e);e=e[o]}}var i=e[a];if(void 0===i){var l=t.nodeName;return void console.error('THREE.PropertyBinding: Trying to update property for track: '+l+'.'+a+' but it wasn\'t found.',e)}var d=this.Versioning.None;void 0===e.needsUpdate?void 0!==e.matrixWorldNeedsUpdate&&(d=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e):(d=this.Versioning.NeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==r){if('morphTargetInfluences'===a){if(!e.geometry)return void console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.',this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.',this);for(var s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===r){r=s;break}}else{if(!e.geometry.morphTargets)return void console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.',this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===r){r=s;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=i,this.propertyIndex=r}else void 0!==i.fromArray&&void 0!==i.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=i):Array.isArray(i)?(c=this.BindingType.EntireArray,this.resolvedProperty=i):this.propertyName=a;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][d]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue}),Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,a=this.nCachedObjects_,r=this._indicesByUUID,o=this._paths,s=this._parsedPaths,l=this._bindings,d=l.length,c=0,i=arguments.length;c!==i;++c){var n=arguments[c],p=n.uuid,u=r[p],g=void 0;if(u===void 0){u=t++,r[p]=u,e.push(n);for(var h=0,f=d;h!==f;++h)l[h].push(new PropertyBinding(n,o[h],s[h]))}else if(u<a){g=e[u];var m=--a,E=e[m];r[E.uuid]=u,e[u]=E,r[p]=m,e[m]=n;for(var h=0,f=d;h!==f;++h){var _=l[h],C=_[m],y=_[u];_[u]=C,y===void 0&&(y=new PropertyBinding(n,o[h],s[h])),_[m]=y}}else e[u]!==g&&console.error('THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.')}this.nCachedObjects_=a},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,a=this._indicesByUUID,r=this._bindings,o=r.length,s=0,i=arguments.length;s!==i;++s){var n=arguments[s],l=n.uuid,d=a[l];if(d!==void 0&&d>=t){var c=t++,p=e[c];a[p.uuid]=d,e[d]=p,a[l]=c,e[c]=n;for(var u=0;u!==o;++u){var m=r[u],g=m[c],h=m[d];m[d]=g,m[c]=h}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,a=this.nCachedObjects_,r=this._indicesByUUID,o=this._bindings,s=o.length,l=0,i=arguments.length;l!==i;++l){var n=arguments[l],d=n.uuid,c=r[d];if(void 0!==c)if(delete r[d],c<a){var p=--a,u=e[p],g=--t,h=e[g];r[u.uuid]=c,e[c]=u,r[h.uuid]=p,e[p]=h,e.pop();for(var f=0,E=s;f!==E;++f){var m=o[f],_=m[p],C=m[g];m[c]=_,m[p]=C,m.pop()}}else{var g=--t,h=e[g];r[h.uuid]=c,e[c]=h,e.pop();for(var f=0,E=s,m;f!==E;++f)m=o[f],m[c]=m[g],m.pop()}}this.nCachedObjects_=a},subscribe_:function(e,t){var a=this._bindingsIndicesByPath,r=a[e],o=this._bindings;if(r!==void 0)return o[r];var s=this._paths,l=this._parsedPaths,d=this._objects,c=d.length,p=this.nCachedObjects_,u=Array(c);r=o.length,a[e]=r,s.push(e),l.push(t),o.push(u);for(var m=p,i=d.length,n;m!==i;++m)n=d[m],u[m]=new PropertyBinding(n,e,t);return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){var a=this._paths,r=this._parsedPaths,o=this._bindings,i=o.length-1,s=o[i],l=e[i];t[l]=n,o[n]=s,o.pop(),r[n]=r[i],r.pop(),a[n]=a[i],a.pop()}}}),Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var a=this._clip.duration,r=e._clip.duration;e.warp(1,r/a,t),this.warp(a/r,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var a=this._mixer,r=a.time,o=this._timeScaleInterpolant,i=this.timeScale;null===o&&(o=a._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=e/i,l[1]=t/i,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,a){if(!this.enabled)return void this._updateWeight(e);var r=this._startTime;if(null!==r){var o=(e-r)*n;if(0>o||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var i=this._updateTime(t),s=this._updateWeight(e);if(0<s)for(var l=this._interpolants,d=this._propertyBindings,c=0,p=l.length;c!==p;++c)l[c].evaluate(i),d[c].accumulate(a,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopFading(),0===a&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var a=n.evaluate(e)[0];t*=a,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,a=this.loop,r=this._loopCount;if(a===_t){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));handle_stop:{if(t>=n)t=n;else if(0>t)t=0;else break handle_stop;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:'finished',action:this,direction:0>e?-1:1})}}else{var o=a===yt;if(-1===r&&(0<=e?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||0>t){var i=E(t/n);t-=n*i,r+=A(i);var s=this.repetitions-r;if(0>s)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<e?n:0,this._mixer.dispatchEvent({type:'finished',action:this,direction:0<e?1:-1});else{if(0==s){var l=0>e;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this._mixer.dispatchEvent({type:'loop',action:this,loopDelta:i})}}if(o&&1==(1&r))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var a=this._interpolantSettings;n?(a.endingStart=St,a.endingEnd=St):(a.endingStart=e?this.zeroSlopeAtStart?St:vt:Tt,a.endingEnd=t?this.zeroSlopeAtEnd?St:vt:Tt)},_scheduleFading:function(e,t,n){var a=this._mixer,r=a.time,o=this._weightInterpolant;null===o&&(o=a._lendControlInterpolant(),this._weightInterpolant=o);var i=o.parameterPositions,s=o.sampleValues;return i[0]=r,s[0]=t,i[1]=r+e,s[1]=n,this}}),Object.assign(AnimationMixer.prototype,EventDispatcher.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,a=e._clip.tracks,r=a.length,o=e._propertyBindings,s=e._interpolants,l=n.uuid,d=this._bindingsByRootAndName,c=d[l];c===void 0&&(c={},d[l]=c);for(var p=0;p!==r;++p){var i=a[p],u=i.name,m=c[u];if(void 0!==m)o[p]=m;else{if(m=o[p],void 0!==m){null===m._cacheIndex&&(++m.referenceCount,this._addInactiveBinding(m,l,u));continue}var g=t&&t._propertyBindings[p].binding.parsedPath;m=new PropertyMixer(PropertyBinding.create(n,u,g),i.ValueTypeName,i.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,u),o[p]=m}s[p].resultBuffer=m.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,a=e._clip.uuid,r=this._actionsByClip[a];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,a,t)}for(var o=e._propertyBindings,s=0,i=o.length,n;s!==i;++s)n=o[s],0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState());this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,a=0,r=t.length,n;a!==r;++a)n=t[a],0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n));this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var a=this._actions,r=this._actionsByClip,o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{var i=o.knownActions;e._byClipCacheIndex=i.length,i.push(e)}e._cacheIndex=a.length,a.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],a=e._cacheIndex;n._cacheIndex=a,t[a]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,o=this._actionsByClip,i=o[r],s=i.knownActions,l=s[s.length-1],d=e._byClipCacheIndex;l._byClipCacheIndex=d,s[d]=l,s.pop(),e._byClipCacheIndex=null;var c=i.actionByRoot,p=(e._localRoot||this._root).uuid;delete c[p],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,a=0,r=t.length,n;a!==r;++a)n=t[a],0==--n.referenceCount&&this._removeInactiveBinding(n)},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,a=this._nActiveActions++,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,a=--this._nActiveActions,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var a=this._bindingsByRootAndName,r=a[t],o=this._bindings;r===void 0&&(r={},a[t]=r),r[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,a=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,i=o[a],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete i[r];remove_empty_map:{for(var d in i)break remove_empty_map;delete o[a]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,a=this._nActiveBindings++,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,a=--this._nActiveBindings,r=t[a];e._cacheIndex=a,t[a]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,a=--this._nActiveControlInterpolants,r=t[a];e.__cacheIndex=a,t[a]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,a=n.uuid,r='string'==typeof e?AnimationClip.findByName(n,e):e,o=null===r?e:r.uuid,i=this._actionsByClip[o],s=null;if(void 0!==i){var l=i.actionByRoot[a];if(void 0!==l)return l;s=i.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var d=new AnimationAction(this,r,t);return this._bindAction(d,s),this._addInactiveAction(d,o,a),d},existingAction:function(e,t){var n=t||this._root,a=n.uuid,r='string'==typeof e?AnimationClip.findByName(n,e):e,o=r?r.uuid:e,i=this._actionsByClip[o];return void 0===i?null:i.actionByRoot[a]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,a=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(var r=0;r!==a;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,a=this.time+=e,r=h(e),o=this._accuIndex^=1,s=0,i;s!==n;++s)i=t[s],i._update(a,e,r,o);for(var l=this._bindings,d=this._nActiveBindings,s=0;s!==d;++s)l[s].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,a=e.uuid,r=this._actionsByClip,o=r[a];if(o!==void 0){for(var s=o.knownActions,l=0,i=s.length,n;l!==i;++l){n=s[l],this._deactivateAction(n);var d=n._cacheIndex,c=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,c._cacheIndex=d,t[d]=c,t.pop(),this._removeInactiveBindingsForAction(n)}delete r[a]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var a in n){var r=n[a].actionByRoot,o=r[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}var i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(var l in s){var d=s[l];d.restoreOriginalState(),this._removeInactiveBinding(d)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Uniform.prototype.clone=function(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())},InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var a in n){var r=n[a];this.addAttribute(a,r.clone())}for(var o=e.groups,s=0,i=o.length,l;s<i;s++)l=o[s],this.addGroup(l.start,l.count,l.materialIndex);return this}}),Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this},setXYZW:function(e,t,n,a,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=a,this.data.array[e+3]=r,this}}),Object.defineProperty(InterleavedBuffer.prototype,'needsUpdate',{set:function(e){!0===e&&this.version++}}),Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError('THREE.BufferAttribute: array should be a Typed Array.');this.count=e===void 0?0:e.length/this.stride,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var a=0,r=this.stride;a<r;a++)this.array[e+a]=t.array[n+a];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(e){return InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(e){return BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Raycaster.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,0.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error('THREE.Raycaster: Unsupported camera type.')},intersectObject:function(e,t){var n=[];return intersectObject(e,this,n,t),n.sort(ascSort),n},intersectObjects:function(e,t){var n=[];if(!1===Array.isArray(e))return console.warn('THREE.Raycaster.intersectObjects: objects is not an Array.'),n;for(var a=0,r=e.length;a<r;a++)intersectObject(e[a],this,n,t);return n.sort(ascSort),n}}),Object.assign(Clock.prototype,{start:function(){this.startTime=('undefined'==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=('undefined'==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Spherical.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=y(e,f(S-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=i(e.x,e.z),this.phi=o(kt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Cylindrical.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=l(e.x*e.x+e.z*e.z),this.theta=i(e.x,e.z),this.y=e.y,this}}),ImmediateRenderObject.prototype=Object.create(Object3D.prototype),ImmediateRenderObject.prototype.constructor=ImmediateRenderObject,ImmediateRenderObject.prototype.isImmediateRenderObject=!0,VertexNormalsHelper.prototype=Object.create(LineSegments.prototype),VertexNormalsHelper.prototype.constructor=VertexNormalsHelper,VertexNormalsHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,n=new Matrix3;return function update(){var a=['a','b','c'];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var d=s.vertices,c=s.faces,p=0,u=0,i=c.length,l;u<i;u++){l=c[u];for(var m=0,g=l.vertexNormals.length;m<g;m++){var h=d[l[a[m]]],f=l.vertexNormals[m];e.copy(h).applyMatrix4(r),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(p,e.x,e.y,e.z),++p,o.setXYZ(p,t.x,t.y,t.z),++p}}else if(s&&s.isBufferGeometry)for(var E=s.attributes.position,_=s.attributes.normal,p=0,m=0,g=E.count;m<g;m++)e.set(E.getX(m),E.getY(m),E.getZ(m)).applyMatrix4(r),t.set(_.getX(m),_.getY(m),_.getZ(m)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(p,e.x,e.y,e.z),++p,o.setXYZ(p,t.x,t.y,t.z),++p;o.needsUpdate=!0}}(),SpotLightHelper.prototype=Object.create(Object3D.prototype),SpotLightHelper.prototype.constructor=SpotLightHelper,SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},SpotLightHelper.prototype.update=function(){var e=new Vector3,t=new Vector3;return function update(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*a(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.color===void 0?this.cone.material.color.copy(this.light.color):this.cone.material.color.set(this.color)}}(),SkeletonHelper.prototype=Object.create(LineSegments.prototype),SkeletonHelper.prototype.constructor=SkeletonHelper,SkeletonHelper.prototype.onBeforeRender=function(){var e=new Vector3,t=new Matrix4,n=new Matrix4;return function onBeforeRender(){var a=this.bones,r=this.geometry,o=r.getAttribute('position');n.getInverse(this.root.matrixWorld);for(var s=0,i=0,l;s<a.length;s++)l=a[s],l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(i,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(i+1,e.x,e.y,e.z),i+=2);r.getAttribute('position').needsUpdate=!0}}(),PointLightHelper.prototype=Object.create(Mesh.prototype),PointLightHelper.prototype.constructor=PointLightHelper,PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},PointLightHelper.prototype.update=function(){this.color===void 0?this.material.color.copy(this.light.color):this.material.color.set(this.color)},RectAreaLightHelper.prototype=Object.create(Object3D.prototype),RectAreaLightHelper.prototype.constructor=RectAreaLightHelper,RectAreaLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},RectAreaLightHelper.prototype.update=function(){var e=0.5*this.light.width,t=0.5*this.light.height,n=this.line.geometry.attributes.position,a=n.array;a[0]=e,a[1]=-t,a[2]=0,a[3]=e,a[4]=t,a[5]=0,a[6]=-e,a[7]=t,a[8]=0,a[9]=-e,a[10]=-t,a[11]=0,a[12]=e,a[13]=-t,a[14]=0,n.needsUpdate=!0,this.color===void 0?this.line.material.color.copy(this.light.color):this.line.material.color.set(this.color)},HemisphereLightHelper.prototype=Object.create(Object3D.prototype),HemisphereLightHelper.prototype.constructor=HemisphereLightHelper,HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},HemisphereLightHelper.prototype.update=function(){var e=new Vector3,t=new Color,n=new Color;return function update(){var a=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{var r=a.geometry.getAttribute('color');t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,i=r.count,s;o<i;o++)s=o<i/2?t:n,r.setXYZ(o,s.r,s.g,s.b);r.needsUpdate=!0}a.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),GridHelper.prototype=Object.create(LineSegments.prototype),GridHelper.prototype.constructor=GridHelper,PolarGridHelper.prototype=Object.create(LineSegments.prototype),PolarGridHelper.prototype.constructor=PolarGridHelper,FaceNormalsHelper.prototype=Object.create(LineSegments.prototype),FaceNormalsHelper.prototype.constructor=FaceNormalsHelper,FaceNormalsHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,n=new Matrix3;return function update(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var a=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,d=o.faces,c=0,p=0,i=d.length;p<i;p++){var l=d[p],u=l.normal;e.copy(s[l.a]).add(s[l.b]).add(s[l.c]).divideScalar(3).applyMatrix4(a),t.copy(u).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(c,e.x,e.y,e.z),++c,r.setXYZ(c,t.x,t.y,t.z),++c}r.needsUpdate=!0}}(),DirectionalLightHelper.prototype=Object.create(Object3D.prototype),DirectionalLightHelper.prototype.constructor=DirectionalLightHelper,DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},DirectionalLightHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function update(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),this.color===void 0?(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)):(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),CameraHelper.prototype=Object.create(LineSegments.prototype),CameraHelper.prototype.constructor=CameraHelper,CameraHelper.prototype.update=function(){function setPoint(r,o,s,d){e.set(o,s,d).unproject(t);var c=a[r];if(c!==void 0)for(var p=n.getAttribute('position'),u=0,i=c.length;u<i;u++)p.setXYZ(c[u],e.x,e.y,e.z)}var e=new Vector3,t=new Camera,n,a;return function update(){n=this.geometry,a=this.pointMap;var e=1,r=1;t.projectionMatrix.copy(this.camera.projectionMatrix),setPoint('c',0,0,-1),setPoint('t',0,0,1),setPoint('n1',-e,-r,-1),setPoint('n2',e,-r,-1),setPoint('n3',-e,r,-1),setPoint('n4',e,r,-1),setPoint('f1',-e,-r,1),setPoint('f2',e,-r,1),setPoint('f3',-e,r,1),setPoint('f4',e,r,1),setPoint('u1',0.7*e,1.1*r,-1),setPoint('u2',0.7*-e,1.1*r,-1),setPoint('u3',0,2*r,-1),setPoint('cf1',-e,0,1),setPoint('cf2',e,0,1),setPoint('cf3',0,-r,1),setPoint('cf4',0,r,1),setPoint('cn1',-e,0,-1),setPoint('cn2',e,0,-1),setPoint('cn3',0,-r,-1),setPoint('cn4',0,r,-1),n.getAttribute('position').needsUpdate=!0}}(),BoxHelper.prototype=Object.create(LineSegments.prototype),BoxHelper.prototype.constructor=BoxHelper,BoxHelper.prototype.update=function(){var e=new Box3;return function update(t){if(void 0!==t&&console.warn('THREE.BoxHelper: .update() has no longer arguments.'),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,a=e.max,r=this.geometry.attributes.position,o=r.array;o[0]=a.x,o[1]=a.y,o[2]=a.z,o[3]=n.x,o[4]=a.y,o[5]=a.z,o[6]=n.x,o[7]=n.y,o[8]=a.z,o[9]=a.x,o[10]=n.y,o[11]=a.z,o[12]=a.x,o[13]=a.y,o[14]=n.z,o[15]=n.x,o[16]=a.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=a.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),BoxHelper.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Box3Helper.prototype=Object.create(LineSegments.prototype),Box3Helper.prototype.constructor=Box3Helper,Box3Helper.prototype.onBeforeRender=function(){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(0.5))},PlaneHelper.prototype=Object.create(Line.prototype),PlaneHelper.prototype.constructor=PlaneHelper,PlaneHelper.prototype.onBeforeRender=function(){var e=-this.plane.constant;1e-8>A(e)&&(e=1e-8),this.scale.set(0.5*this.size,0.5*this.size,e),this.lookAt(this.plane.normal),this.updateMatrixWorld()};var Cn,yn;ArrowHelper.prototype=Object.create(Object3D.prototype),ArrowHelper.prototype.constructor=ArrowHelper,ArrowHelper.prototype.setDirection=function(){var e=new Vector3,t;return function setDirection(n){0.99999<n.y?this.quaternion.set(0,0,0,1):-0.99999>n.y?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=o(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),ArrowHelper.prototype.setLength=function(e,t,n){t===void 0&&(t=0.2*e),n===void 0&&(n=0.2*t),this.line.scale.set(1,y(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},ArrowHelper.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},AxisHelper.prototype=Object.create(LineSegments.prototype),AxisHelper.prototype.constructor=AxisHelper;var An=new Vector3,bn=new CubicPoly,xn=new CubicPoly,vn=new CubicPoly;CatmullRomCurve3.prototype=Object.create(Curve.prototype),CatmullRomCurve3.prototype.constructor=CatmullRomCurve3,CatmullRomCurve3.prototype.getPoint=function(e){var t=this.points,n=t.length,a=(n-(this.closed?0:1))*e,r=E(a),o=a-r;this.closed?r+=0<r?0:(E(A(r)/t.length)+1)*t.length:0==o&&r===n-1&&(r=n-2,o=1);var i,s,l,c;if(this.closed||0<r?i=t[(r-1)%n]:(An.subVectors(t[0],t[1]).add(t[0]),i=An),s=t[r%n],l=t[(r+1)%n],this.closed||r+2<n?c=t[(r+2)%n]:(An.subVectors(t[n-1],t[n-2]).add(t[n-1]),c=An),void 0===this.type||'centripetal'===this.type||'chordal'===this.type){var p='chordal'===this.type?0.5:0.25,u=d(i.distanceToSquared(s),p),m=d(s.distanceToSquared(l),p),g=d(l.distanceToSquared(c),p);1e-4>m&&(m=1),1e-4>u&&(u=m),1e-4>g&&(g=m),bn.initNonuniformCatmullRom(i.x,s.x,l.x,c.x,u,m,g),xn.initNonuniformCatmullRom(i.y,s.y,l.y,c.y,u,m,g),vn.initNonuniformCatmullRom(i.z,s.z,l.z,c.z,u,m,g)}else if('catmullrom'===this.type){var h=void 0===this.tension?0.5:this.tension;bn.initCatmullRom(i.x,s.x,l.x,c.x,h),xn.initCatmullRom(i.y,s.y,l.y,c.y,h),vn.initCatmullRom(i.z,s.z,l.z,c.z,h)}return new Vector3(bn.calc(o),xn.calc(o),vn.calc(o))},CubicBezierCurve3.prototype=Object.create(Curve.prototype),CubicBezierCurve3.prototype.constructor=CubicBezierCurve3,CubicBezierCurve3.prototype.getPoint=function(e){var t=this.v0,n=this.v1,a=this.v2,r=this.v3;return new Vector3(CubicBezier(e,t.x,n.x,a.x,r.x),CubicBezier(e,t.y,n.y,a.y,r.y),CubicBezier(e,t.z,n.z,a.z,r.z))},QuadraticBezierCurve3.prototype=Object.create(Curve.prototype),QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3,QuadraticBezierCurve3.prototype.getPoint=function(e){var t=this.v0,n=this.v1,a=this.v2;return new Vector3(QuadraticBezier(e,t.x,n.x,a.x),QuadraticBezier(e,t.y,n.y,a.y),QuadraticBezier(e,t.z,n.z,a.z))},LineCurve3.prototype=Object.create(Curve.prototype),LineCurve3.prototype.constructor=LineCurve3,LineCurve3.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t},ArcCurve.prototype=Object.create(EllipseCurve.prototype),ArcCurve.prototype.constructor=ArcCurve;var Sn={createMultiMaterialObject:function(e,t){for(var n=new Group,a=0,r=t.length;a<r;a++)n.add(new Mesh(e,t[a]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){e.applyMatrix(new Matrix4().getInverse(n.matrixWorld)),t.remove(e),n.add(e)}},Tn=0,Rn=1;Curve.create=function(e,t){return console.log('THREE.Curve.create() has been deprecated'),e.prototype=Object.create(Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype),SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype),Spline.prototype=Object.create(CatmullRomCurve3.prototype),Object.assign(Spline.prototype,{initFromArray:function(){console.error('THREE.Spline: .initFromArray() has been removed.')},getControlPointsArray:function(){console.error('THREE.Spline: .getControlPointsArray() has been removed.')},reparametrizeByArcLength:function(){console.error('THREE.Spline: .reparametrizeByArcLength() has been removed.')}}),GridHelper.prototype.setColors=function(){console.error('THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.')},SkeletonHelper.prototype.update=function(){console.error('THREE.SkeletonHelper: update() no longer needs to be called.')},Object.assign(Box2.prototype,{center:function(e){return console.warn('THREE.Box2: .center() has been renamed to .getCenter().'),this.getCenter(e)},empty:function(){return console.warn('THREE.Box2: .empty() has been renamed to .isEmpty().'),this.isEmpty()},isIntersectionBox:function(e){return console.warn('THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().'),this.intersectsBox(e)},size:function(e){return console.warn('THREE.Box2: .size() has been renamed to .getSize().'),this.getSize(e)}}),Object.assign(Box3.prototype,{center:function(e){return console.warn('THREE.Box3: .center() has been renamed to .getCenter().'),this.getCenter(e)},empty:function(){return console.warn('THREE.Box3: .empty() has been renamed to .isEmpty().'),this.isEmpty()},isIntersectionBox:function(e){return console.warn('THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().'),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn('THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().'),this.intersectsSphere(e)},size:function(e){return console.warn('THREE.Box3: .size() has been renamed to .getSize().'),this.getSize(e)}}),Line3.prototype.center=function(e){return console.warn('THREE.Line3: .center() has been renamed to .getCenter().'),this.getCenter(e)},kt.random16=function(){return console.warn('THREE.Math.random16() has been deprecated. Use Math.random() instead.'),Math.random()},Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(e,t){return console.warn('THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.'),this.toArray(e,t)},multiplyVector3:function(e){return console.warn('THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.'),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error('THREE.Matrix3: .multiplyVector3Array() has been removed.')},applyToBuffer:function(e){return console.warn('THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.'),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error('THREE.Matrix3: .applyToVector3Array() has been removed.')}}),Object.assign(Matrix4.prototype,{extractPosition:function(e){return console.warn('THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().'),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn('THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.'),this.toArray(e,t)},getPosition:function(){var e;return function getPosition(){return void 0==e&&(e=new Vector3),console.warn('THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.'),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn('THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().'),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn('THREE.Matrix4: .multiplyToArray() has been removed.')},multiplyVector3:function(e){return console.warn('THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.'),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn('THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.'),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error('THREE.Matrix4: .multiplyVector3Array() has been removed.')},rotateAxis:function(e){console.warn('THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.'),e.transformDirection(this)},crossVector:function(e){return console.warn('THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.'),e.applyMatrix4(this)},translate:function(){console.error('THREE.Matrix4: .translate() has been removed.')},rotateX:function(){console.error('THREE.Matrix4: .rotateX() has been removed.')},rotateY:function(){console.error('THREE.Matrix4: .rotateY() has been removed.')},rotateZ:function(){console.error('THREE.Matrix4: .rotateZ() has been removed.')},rotateByAxis:function(){console.error('THREE.Matrix4: .rotateByAxis() has been removed.')},applyToBuffer:function(e){return console.warn('THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.'),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error('THREE.Matrix4: .applyToVector3Array() has been removed.')},makeFrustum:function(e,t,n,a,r,o){return console.warn('THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.'),this.makePerspective(e,t,a,n,r,o)}}),Plane.prototype.isIntersectionLine=function(e){return console.warn('THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().'),this.intersectsLine(e)},Quaternion.prototype.multiplyVector3=function(e){return console.warn('THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.'),e.applyQuaternion(this)},Object.assign(Ray.prototype,{isIntersectionBox:function(e){return console.warn('THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().'),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn('THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().'),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn('THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().'),this.intersectsSphere(e)}}),Object.assign(Shape.prototype,{extrude:function(e){return console.warn('THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.'),new ExtrudeGeometry(this,e)},makeGeometry:function(e){return console.warn('THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.'),new ShapeGeometry(this,e)}}),Object.assign(Vector2.prototype,{fromAttribute:function(e,t,n){return console.error('THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().'),this.fromBufferAttribute(e,t,n)}}),Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error('THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.')},setEulerFromQuaternion:function(){console.error('THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.')},getPositionFromMatrix:function(e){return console.warn('THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().'),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn('THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().'),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn('THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().'),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn('THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.'),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.error('THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().'),this.fromBufferAttribute(e,t,n)}}),Object.assign(Vector4.prototype,{fromAttribute:function(e,t,n){return console.error('THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().'),this.fromBufferAttribute(e,t,n)}}),Geometry.prototype.computeTangents=function(){console.warn('THREE.Geometry: .computeTangents() has been removed.')},Object.assign(Object3D.prototype,{getChildByName:function(e){return console.warn('THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().'),this.getObjectByName(e)},renderDepth:function(){console.warn('THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.')},translate:function(e,t){return console.warn('THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.'),this.translateOnAxis(t,e)}}),Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.'),this.rotation.order},set:function(e){console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.'),this.rotation.order=e}},useQuaternion:{get:function(){console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.')},set:function(){console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.')}}}),Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn('THREE.LOD: .objects has been renamed to .levels.'),this.levels}}}),Object.defineProperty(Skeleton.prototype,'useVertexTexture',{get:function(){console.warn('THREE.Skeleton: useVertexTexture has been removed.')},set:function(){console.warn('THREE.Skeleton: useVertexTexture has been removed.')}}),Object.defineProperty(Curve.prototype,'__arcLengthDivisions',{get:function(){return console.warn('THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.'),this.arcLengthDivisions},set:function(e){console.warn('THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.'),this.arcLengthDivisions=e}}),PerspectiveCamera.prototype.setLens=function(e,t){console.warn('THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.'),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn('THREE.Light: .onlyShadow has been removed.')}},shadowCameraFov:{set:function(e){console.warn('THREE.Light: .shadowCameraFov is now .shadow.camera.fov.'),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn('THREE.Light: .shadowCameraLeft is now .shadow.camera.left.'),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn('THREE.Light: .shadowCameraRight is now .shadow.camera.right.'),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn('THREE.Light: .shadowCameraTop is now .shadow.camera.top.'),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn('THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.'),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn('THREE.Light: .shadowCameraNear is now .shadow.camera.near.'),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn('THREE.Light: .shadowCameraFar is now .shadow.camera.far.'),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn('THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.')}},shadowBias:{set:function(e){console.warn('THREE.Light: .shadowBias is now .shadow.bias.'),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn('THREE.Light: .shadowDarkness has been removed.')}},shadowMapWidth:{set:function(e){console.warn('THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.'),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn('THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.'),this.shadow.mapSize.height=e}}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn('THREE.BufferAttribute: .length has been deprecated. Use .count instead.'),this.array.length}}}),Object.assign(BufferGeometry.prototype,{addIndex:function(e){console.warn('THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().'),this.setIndex(e)},addDrawCall:function(e,t,n){n!==void 0&&console.warn('THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.'),console.warn('THREE.BufferGeometry: .addDrawCall() is now .addGroup().'),this.addGroup(e,t)},clearDrawCalls:function(){console.warn('THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().'),this.clearGroups()},computeTangents:function(){console.warn('THREE.BufferGeometry: .computeTangents() has been removed.')},computeOffsets:function(){console.warn('THREE.BufferGeometry: .computeOffsets() has been removed.')}}),Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error('THREE.BufferGeometry: .drawcalls has been renamed to .groups.'),this.groups}},offsets:{get:function(){return console.warn('THREE.BufferGeometry: .offsets has been renamed to .groups.'),this.groups}}}),Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn('THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.')}},onUpdate:{value:function(){return console.warn('THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.'),this}}}),Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn('THREE.Material: .wrapAround has been removed.')},set:function(){console.warn('THREE.Material: .wrapAround has been removed.')}},wrapRGB:{get:function(){return console.warn('THREE.Material: .wrapRGB has been removed.'),new Color}},shading:{get:function(){console.error('THREE.'+this.type+': .shading has been removed. Use the boolean .flatShading instead.')},set:function(e){console.warn('THREE.'+this.type+': .shading has been removed. Use the boolean .flatShading instead.'),this.flatShading=e===O}}}),Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn('THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.'),!1},set:function(){console.warn('THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead')}}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn('THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.'),this.extensions.derivatives},set:function(e){console.warn('THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.'),this.extensions.derivatives=e}}}),Object.assign(WebGLRenderer.prototype,{getCurrentRenderTarget:function(){return console.warn('THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().'),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn('THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().'),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn('THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.'),this.capabilities.precision},supportsFloatTextures:function(){return console.warn('THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \'OES_texture_float\' ).'),this.extensions.get('OES_texture_float')},supportsHalfFloatTextures:function(){return console.warn('THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \'OES_texture_half_float\' ).'),this.extensions.get('OES_texture_half_float')},supportsStandardDerivatives:function(){return console.warn('THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \'OES_standard_derivatives\' ).'),this.extensions.get('OES_standard_derivatives')},supportsCompressedTextureS3TC:function(){return console.warn('THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \'WEBGL_compressed_texture_s3tc\' ).'),this.extensions.get('WEBGL_compressed_texture_s3tc')},supportsCompressedTexturePVRTC:function(){return console.warn('THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \'WEBGL_compressed_texture_pvrtc\' ).'),this.extensions.get('WEBGL_compressed_texture_pvrtc')},supportsBlendMinMax:function(){return console.warn('THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \'EXT_blend_minmax\' ).'),this.extensions.get('EXT_blend_minmax')},supportsVertexTextures:function(){return console.warn('THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.'),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn('THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \'ANGLE_instanced_arrays\' ).'),this.extensions.get('ANGLE_instanced_arrays')},enableScissorTest:function(e){console.warn('THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().'),this.setScissorTest(e)},initMaterial:function(){console.warn('THREE.WebGLRenderer: .initMaterial() has been removed.')},addPrePlugin:function(){console.warn('THREE.WebGLRenderer: .addPrePlugin() has been removed.')},addPostPlugin:function(){console.warn('THREE.WebGLRenderer: .addPostPlugin() has been removed.')},updateShadowMap:function(){console.warn('THREE.WebGLRenderer: .updateShadowMap() has been removed.')}}),Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn('THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.'),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn('THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.'),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn('THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.'),this.shadowMap.cullFace=e}}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?R:T},set:function(e){var t=e!==T;console.warn('WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to '+t+'.'),this.renderReverseSided=t}}}),Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.'),this.texture.wrapS},set:function(e){console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.'),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.'),this.texture.wrapT},set:function(e){console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.'),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.'),this.texture.magFilter},set:function(e){console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.'),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.'),this.texture.minFilter},set:function(e){console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.'),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.'),this.texture.anisotropy},set:function(e){console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.'),this.texture.anisotropy=e}},offset:{get:function(){return console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.'),this.texture.offset},set:function(e){console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.'),this.texture.offset=e}},repeat:{get:function(){return console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.'),this.texture.repeat},set:function(e){console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.'),this.texture.repeat=e}},format:{get:function(){return console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.'),this.texture.format},set:function(e){console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.'),this.texture.format=e}},type:{get:function(){return console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.'),this.texture.type},set:function(e){console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.'),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.'),this.texture.generateMipmaps},set:function(e){console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.'),this.texture.generateMipmaps=e}}}),Audio.prototype.load=function(e){console.warn('THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.');var t=this,n=new AudioLoader;return n.load(e,function(e){t.setBuffer(e)}),this},AudioAnalyser.prototype.getData=function(){return console.warn('THREE.AudioAnalyser: .getData() is now .getFrequencyData().'),this.getFrequencyData()},CubeCamera.prototype.updateCubeMap=function(e,t){return console.warn('THREE.CubeCamera: .updateCubeMap() is now .update().'),this.update(e,t)};var Fn={merge:function(e,t,n){console.warn('THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.');var a;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),a=t.matrix,t=t.geometry),e.merge(t,a,n)},center:function(e){return console.warn('THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.'),e.center()}},wn={crossOrigin:void 0,loadTexture:function(e,t,n,a){console.warn('THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.');var r=new TextureLoader;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,a);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,a){console.warn('THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.');var r=new CubeTextureLoader;r.setCrossOrigin(this.crossOrigin);var o=r.load(e,n,void 0,a);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error('THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.')},loadCompressedTextureCube:function(){console.error('THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.')}}},function(e,t,n){'use strict';var a=Math.sin,r=Math.cos,o=Math.pow,i=Math.max,s=Math.abs;t.a=function create(){let e=new l.a(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e};var l=n(0)},function(e,t,n){'use strict';function create(){let e=new m.a(3);return e[0]=0,e[1]=0,e[2]=0,e}var a=Math.sin,r=Math.cos,o=Math.sqrt,i=Math.ceil,s=Math.round,d=Math.min,l=Math.floor,c=Math.max,p=Math.abs,u=Math.PI;t.a=create,t.d=function fromValues(e,t,n){let a=new m.a(3);return a[0]=e,a[1]=t,a[2]=n,a},t.f=function normalize(e,t){let n=t[0],a=t[1],r=t[2],i=n*n+a*a+r*r;return 0<i&&(i=1/o(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e},t.c=function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},t.b=function cross(e,t,n){let a=t[0],r=t[1],o=t[2],i=n[0],s=n[1],l=n[2];return e[0]=r*l-o*s,e[1]=o*i-a*l,e[2]=a*s-r*i,e};var m=n(0);t.e=function length(e){let t=e[0],n=e[1],a=e[2];return o(t*t+n*n+a*a)};(function(){let e=create();return function(t,n,a,r,o,s){let c,i;for(n||(n=3),a||(a=0),i=r?d(r*n+a,t.length):t.length,c=a;c<i;c+=n)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],o(e,e,s),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2];return t}})()},function(e,t,n){'use strict';function create(){let e=new c.a(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function length(e){let t=e[0],n=e[1],a=e[2],o=e[3];return r(t*t+n*n+a*a+o*o)}function squaredLength(e){let t=e[0],n=e[1],a=e[2],r=e[3];return t*t+n*n+a*a+r*r}var r=Math.sqrt,a=Math.ceil,o=Math.round,s=Math.min,i=Math.floor,l=Math.max,d=Math.abs;t.b=function clone(e){let t=new c.a(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},t.g=function fromValues(e,t,n,a){let r=new c.a(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=a,r},t.c=function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},t.l=function set(e,t,n,a,r){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e},t.a=function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},t.k=function scale(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},t.h=length,t.m=squaredLength,t.j=function normalize(e,t){let n=t[0],a=t[1],o=t[2],i=t[3],s=n*n+a*a+o*o+i*i;return 0<s&&(s=1/r(s),e[0]=n*s,e[1]=a*s,e[2]=o*s,e[3]=i*s),e},t.d=function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},t.i=function lerp(e,n,a,r){let t=n[0],o=n[1],i=n[2],s=n[3];return e[0]=t+r*(a[0]-t),e[1]=o+r*(a[1]-o),e[2]=i+r*(a[2]-i),e[3]=s+r*(a[3]-s),e},t.f=function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},t.e=function equals(e,t){let n=e[0],a=e[1],r=e[2],o=e[3],i=t[0],s=t[1],p=t[2],u=t[3];return d(n-i)<=c.b*l(1,d(n),d(i))&&d(a-s)<=c.b*l(1,d(a),d(s))&&d(r-p)<=c.b*l(1,d(r),d(p))&&d(o-u)<=c.b*l(1,d(o),d(u))};var c=n(0);(function(){let e=create();return function(t,n,a,r,o,d){let c,i;for(n||(n=4),a||(a=0),i=r?s(r*n+a,t.length):t.length,c=a;c<i;c+=n)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],e[3]=t[c+3],o(e,e,d),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2],t[c+3]=e[3];return t}})()},function(e,t,n){e.exports=n(7),e.exports.color=n(8)},function(e){var t=Math.pow,n=Math.round,a=Math.floor,r=e.exports=r||{};r.gui=r.gui||{},r.utils=r.utils||{},r.controllers=r.controllers||{},r.dom=r.dom||{},r.color=r.color||{},r.utils.css=function(){return{load:function(e,t){t=t||document;var n=t.createElement('link');n.type='text/css',n.rel='stylesheet',n.href=e,t.getElementsByTagName('head')[0].appendChild(n)},inject:function(e,t){t=t||document;var n=document.createElement('style');n.type='text/css',n.innerHTML=e,t.getElementsByTagName('head')[0].appendChild(n)}}}(),r.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),a=e.length-1;0<=a;a--)n=[e[a].apply(this,n)];return n[0]}},each:function(t,n,a){if(e&&t.forEach===e)t.forEach(n,a);else if(t.length===t.length+0){for(var r=0,o=t.length;r<o;r++)if(r in t&&n.call(a,t[r],r)===this.BREAK)return;}else for(var r in t)if(n.call(a,t[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+''},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return'[object Function]'===Object.prototype.toString.call(e)}}}(),r.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement('div'),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0};return e.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(r.utils.common),r.dom.dom=function(e){function cssValueToPixels(t){if('0'===t||e.isUndefined(t))return 0;var a=t.match(n);return e.isNull(a)?0:parseFloat(a[1])}var t={};e.each({HTMLEvents:['change'],MouseEvents:['click','mousemove','mousedown','mouseup','mouseover'],KeyboardEvents:['keydown']},function(n,a){e.each(n,function(n){t[n]=a})});var n=/(\d+(\.\d+)?)px/,a={makeSelectable:function(e,t){void 0===e||void 0===e.style||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?'auto':'none',e.style.KhtmlUserSelect=t?'auto':'none',e.unselectable=t?'on':'off')},makeFullscreen:function(t,n,a){e.isUndefined(n)&&(n=!0),e.isUndefined(a)&&(a=!0),t.style.position='absolute',n&&(t.style.left=0,t.style.right=0),a&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(n,a,r,o){r=r||{};var i=t[a];if(!i)throw new Error('Event type '+a+' not supported.');var s=document.createEvent(i);switch(i){case'MouseEvents':var l=r.x||r.clientX||0,d=r.y||r.clientY||0;s.initMouseEvent(a,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,l,d,!1,!1,!1,!1,0,null);break;case'KeyboardEvents':var c=s.initKeyboardEvent||s.initKeyEvent;e.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(a,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(a,r.bubbles||!1,r.cancelable||!0);}e.defaults(s,o),n.dispatchEvent(s)},bind:function(e,t,n,r){return r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent('on'+t,n),a},unbind:function(e,t,n,r){return r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent('on'+t,n),a},addClass:function(e,t){if(e.className===void 0)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1==n.indexOf(t)&&(n.push(t),e.className=n.join(' ').replace(/^\s+/,'').replace(/\s+$/,''))}return a},removeClass:function(e,t){if(!t)e.className=void 0;else if(void 0===e.className);else if(e.className===t)e.removeAttribute('class');else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!=r&&(n.splice(r,1),e.className=n.join(' '))}return a},hasClass:function(e,t){return new RegExp('(?:^|\\s+)'+t+'(?:\\s+|$)').test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return cssValueToPixels(t['border-left-width'])+cssValueToPixels(t['border-right-width'])+cssValueToPixels(t['padding-left'])+cssValueToPixels(t['padding-right'])+cssValueToPixels(t.width)},getHeight:function(e){var t=getComputedStyle(e);return cssValueToPixels(t['border-top-width'])+cssValueToPixels(t['border-bottom-width'])+cssValueToPixels(t['padding-top'])+cssValueToPixels(t['padding-bottom'])+cssValueToPixels(t.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return a}(r.utils.common),r.controllers.OptionController=function(e,t,n){var a=function(e,r,o){a.superclass.call(this,e,r);var i=this;if(this.__select=document.createElement('select'),n.isArray(o)){var s={};n.each(o,function(e){s[e]=e}),o=s}n.each(o,function(e,t){var n=document.createElement('option');n.innerHTML=t,n.setAttribute('value',e),i.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,'change',function(){var e=this.options[this.selectedIndex].value;i.setValue(e)}),this.domElement.appendChild(this.__select)};return a.superclass=e,n.extend(a.prototype,e.prototype,{setValue:function(e){var t=a.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),a.superclass.prototype.updateDisplay.call(this)}}),a}(r.controllers.Controller,r.dom.dom,r.utils.common),r.controllers.NumberController=function(e,r){function numDecimals(e){return e=e.toString(),-1<e.indexOf('.')?e.length-e.indexOf('.')-1:0}var o=function(e,n,i){o.superclass.call(this,e,n),i=i||{},this.__min=i.min,this.__max=i.max,this.__step=i.step,this.__impliedStep=r.isUndefined(this.__step)?0==this.initialValue?1:t(10,a(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=numDecimals(this.__impliedStep)};return o.superclass=e,r.extend(o.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&0!=e%this.__step&&(e=n(e/this.__step)*this.__step),o.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),o}(r.controllers.Controller,r.utils.common),r.controllers.NumberControllerBox=function(e,a,r){function roundToDecimal(e,a){var r=t(10,a);return n(e*r)/r}var o=function(e,t,n){function onChange(){var e=parseFloat(i.__input.value);r.isNaN(e)||i.setValue(e)}function onMouseDrag(t){var e=s-t.clientY;i.setValue(i.getValue()+e*i.__impliedStep),s=t.clientY}function onMouseUp(){a.unbind(window,'mousemove',onMouseDrag),a.unbind(window,'mouseup',onMouseUp)}this.__truncationSuspended=!1,o.superclass.call(this,e,t,n);var i=this,s;this.__input=document.createElement('input'),this.__input.setAttribute('type','text'),a.bind(this.__input,'change',onChange),a.bind(this.__input,'blur',function onBlur(){onChange(),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),a.bind(this.__input,'mousedown',function onMouseDown(t){a.bind(window,'mousemove',onMouseDrag),a.bind(window,'mouseup',onMouseUp),s=t.clientY}),a.bind(this.__input,'keydown',function(t){13===t.keyCode&&(i.__truncationSuspended=!0,this.blur(),i.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return o.superclass=e,r.extend(o.prototype,e.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():roundToDecimal(this.getValue(),this.__precision),o.superclass.prototype.updateDisplay.call(this)}}),o}(r.controllers.NumberController,r.dom.dom,r.utils.common),r.controllers.NumberControllerSlider=function(e,t,n,a,r){function map(e,t,n,a,r){return a+(r-a)*((e-t)/(n-t))}var o=function(e,n,a,r,i){function onMouseDrag(n){n.preventDefault();var e=t.getOffset(s.__background),a=t.getWidth(s.__background);return s.setValue(map(n.clientX,e.left,e.left+a,s.__min,s.__max)),!1}function onMouseUp(){t.unbind(window,'mousemove',onMouseDrag),t.unbind(window,'mouseup',onMouseUp),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}o.superclass.call(this,e,n,{min:a,max:r,step:i});var s=this;this.__background=document.createElement('div'),this.__foreground=document.createElement('div'),t.bind(this.__background,'mousedown',function onMouseDown(n){t.bind(window,'mousemove',onMouseDrag),t.bind(window,'mouseup',onMouseUp),onMouseDrag(n)}),t.addClass(this.__background,'slider'),t.addClass(this.__foreground,'slider-fg'),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return o.superclass=e,o.useDefaultStyles=function(){n.inject(r)},a.extend(o.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+'%',o.superclass.prototype.updateDisplay.call(this)}}),o}(r.controllers.NumberController,r.dom.dom,r.utils.css,r.utils.common,'.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: \'\';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}'),r.controllers.FunctionController=function(e,t,n){var a=function(e,n,r){a.superclass.call(this,e,n);var o=this;this.__button=document.createElement('div'),this.__button.innerHTML=void 0===r?'Fire':r,t.bind(this.__button,'click',function(t){return t.preventDefault(),o.fire(),!1}),t.addClass(this.__button,'button'),this.domElement.appendChild(this.__button)};return a.superclass=e,n.extend(a.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),a}(r.controllers.Controller,r.dom.dom,r.utils.common),r.controllers.BooleanController=function(e,t,n){var a=function(e,n){a.superclass.call(this,e,n);var r=this;this.__prev=this.getValue(),this.__checkbox=document.createElement('input'),this.__checkbox.setAttribute('type','checkbox'),t.bind(this.__checkbox,'change',function onChange(){r.setValue(!r.__prev)},!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return a.superclass=e,n.extend(a.prototype,e.prototype,{setValue:function(e){var t=a.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return!0===this.getValue()?(this.__checkbox.setAttribute('checked','checked'),this.__checkbox.checked=!0):this.__checkbox.checked=!1,a.superclass.prototype.updateDisplay.call(this)}}),a}(r.controllers.Controller,r.dom.dom,r.utils.common),r.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(var a=t.hex.toString(16);6>a.length;)a='0'+a;return'#'+a}return'rgba('+n(t.r)+','+n(t.g)+','+n(t.b)+','+t.a+')'}}(r.utils.common),r.color.interpret=function(e,t){var n=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:'HEX',hex:parseInt('0x'+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:'HEX',hex:parseInt('0x'+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:'RGB',r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:'RGB',r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:'HEX',hex:e,conversionName:'HEX'}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return!(3!=e.length)&&{space:'RGB',r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return!(4!=e.length)&&{space:'RGB',r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a)&&{space:'RGB',r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&{space:'RGB',r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a)&&{space:'HSV',h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&{space:'HSV',h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],a,r;return function(){r=!1;var e=1<arguments.length?t.toArray(arguments):arguments[0];return t.each(n,function(n){if(n.litmus(e))return t.each(n.conversions,function(n,o){if(a=n.read(e),!1===r&&!1!==a)return r=a,a.conversionName=o,a.conversion=n,t.BREAK}),t.BREAK}),r}}(r.color.toString,r.utils.common),r.GUI=r.gui.GUI=function(e,t,n,a,r,o,i,s,l,d,c,p,u,m,g){function add(e,t,n,o){if(void 0===t[n])throw new Error('Object '+t+' has no property "'+n+'"');var i;if(o.color)i=new c(t,n);else{var s=[t,n].concat(o.factoryArgs);i=a.apply(e,s)}o.before instanceof r&&(o.before=o.before.__li),recallSavedValue(e,i),m.addClass(i.domElement,'c');var l=document.createElement('span');m.addClass(l,'property-name'),l.innerHTML=i.property;var d=document.createElement('div');d.appendChild(l),d.appendChild(i.domElement);var p=addRow(e,d,o.before);return m.addClass(p,x.CLASS_CONTROLLER_ROW),m.addClass(p,typeof i.getValue()),augmentController(e,p,i),e.__controllers.push(i),i}function addRow(e,t,n){var a=document.createElement('li');return t&&a.appendChild(t),n?e.__ul.insertBefore(a,params.before):e.__ul.appendChild(a),e.onResize(),a}function augmentController(e,t,n){if(n.__li=t,n.__gui=e,g.extend(n,{options:function(t){return 1<arguments.length?(n.remove(),add(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[g.toArray(arguments)]})):g.isArray(t)||g.isObject(t)?(n.remove(),add(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof l){var a=new s(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});g.each(['updateDisplay','onChange','onFinishChange'],function(e){var t=n[e],r=a[e];n[e]=a[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),r.apply(a,e)}}),m.addClass(t,'has-slider'),n.domElement.insertBefore(a.domElement,n.domElement.firstElementChild)}else if(n instanceof s){var d=function(t){return g.isNumber(n.__min)&&g.isNumber(n.__max)?(n.remove(),add(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=g.compose(d,n.min),n.max=g.compose(d,n.max)}else n instanceof o?(m.bind(t,'click',function(){m.fakeEvent(n.__checkbox,'click')}),m.bind(n.__checkbox,'click',function(t){t.stopPropagation()})):n instanceof i?(m.bind(t,'click',function(){m.fakeEvent(n.__button,'click')}),m.bind(t,'mouseover',function(){m.addClass(n.__button,'hover')}),m.bind(t,'mouseout',function(){m.removeClass(n.__button,'hover')})):n instanceof c&&(m.addClass(t,'color'),n.updateDisplay=g.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=g.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&markPresetModified(e.getRoot(),!0),t},n.setValue)}function recallSavedValue(e,t){var n=e.getRoot(),a=n.__rememberedObjects.indexOf(t.object);if(-1!=a){var r=n.__rememberedObjectIndecesToControllers[a];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[a]=r),r[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,i;if(o[e.preset])i=o[e.preset];else if(o[_])i=o[_];else return;if(i[a]&&void 0!==i[a][t.property]){var s=i[a][t.property];t.initialValue=s,t.setValue(s)}}}}function getLocalStorageHash(e,t){return document.location.href+'.'+t}function addSaveMenu(e){var t=e.__save_row=document.createElement('li');m.addClass(e.domElement,'has-save'),e.__ul.insertBefore(t,e.__ul.firstChild),m.addClass(t,'save-row');var n=document.createElement('span');n.innerHTML='&nbsp;',m.addClass(n,'button gears');var a=document.createElement('span');a.innerHTML='Save',m.addClass(a,'button'),m.addClass(a,'save');var r=document.createElement('span');r.innerHTML='New',m.addClass(r,'button'),m.addClass(r,'save-as');var o=document.createElement('span');o.innerHTML='Revert',m.addClass(o,'button'),m.addClass(o,'revert');var i=e.__preset_select=document.createElement('select');if(e.load&&e.load.remembered?g.each(e.load.remembered,function(t,n){addPresetOption(e,n,n==e.preset)}):addPresetOption(e,_,!1),m.bind(i,'change',function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(i),t.appendChild(n),t.appendChild(a),t.appendChild(r),t.appendChild(o),C){function showHideExplain(){l.style.display=e.useLocalStorage?'block':'none'}var s=document.getElementById('dg-save-locally'),l=document.getElementById('dg-local-explain');s.style.display='block';var d=document.getElementById('dg-local-storage');'true'===localStorage.getItem(getLocalStorageHash(e,'isLocal'))&&d.setAttribute('checked','checked'),showHideExplain(),m.bind(d,'change',function(){e.useLocalStorage=!e.useLocalStorage,showHideExplain()})}var c=document.getElementById('dg-new-constructor');m.bind(c,'keydown',function(t){t.metaKey&&(67===t.which||67==t.keyCode)&&v.hide()}),m.bind(n,'click',function(){c.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),v.show(),c.focus(),c.select()}),m.bind(a,'click',function(){e.save()}),m.bind(r,'click',function(){var t=prompt('Enter a new preset name.');t&&e.saveAs(t)}),m.bind(o,'click',function(){e.revert()})}function addResizeHandle(t){function dragStart(a){return a.preventDefault(),n=a.clientX,m.addClass(t.__closeButton,x.CLASS_DRAG),m.bind(window,'mousemove',drag),m.bind(window,'mouseup',dragStop),!1}function drag(a){return a.preventDefault(),t.width+=n-a.clientX,t.onResize(),n=a.clientX,!1}function dragStop(){m.removeClass(t.__closeButton,x.CLASS_DRAG),m.unbind(window,'mousemove',drag),m.unbind(window,'mouseup',dragStop)}t.__resize_handle=document.createElement('div'),g.extend(t.__resize_handle.style,{width:'6px',marginLeft:'-3px',height:'200px',cursor:'ew-resize',position:'absolute'});var n;m.bind(t.__resize_handle,'mousedown',dragStart),m.bind(t.__closeButton,'mousedown',dragStart),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function setWidth(e,t){e.domElement.style.width=t+'px',e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+'px'),e.__closeButton&&(e.__closeButton.style.width=t+'px')}function getCurrentPreset(e,t){var n={};return g.each(e.__rememberedObjects,function(a,r){var o={},i=e.__rememberedObjectIndecesToControllers[r];g.each(i,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[r]=o}),n}function addPresetOption(e,t,n){var a=document.createElement('option');a.innerHTML=t,a.value=t,e.__preset_select.appendChild(a),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function setPresetSelectIndex(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value==e.preset&&(e.__preset_select.selectedIndex=t)}function markPresetModified(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+'*':n.value}function updateDisplays(e){0!=e.length&&p(function(){updateDisplays(e)}),g.each(e,function(e){e.updateDisplay()})}e.inject(n);var h='dg',f=72,E=20,_='Default',C=function(){try{return'localStorage'in window&&null!==window.localStorage}catch(t){return!1}}(),y=!0,A=!1,b=[],x=function(e){function saveToLocalStorage(){localStorage.setItem(getLocalStorageHash(t,'gui'),JSON.stringify(t.getSaveObject()))}var t=this;this.domElement=document.createElement('div'),this.__ul=document.createElement('ul'),this.domElement.appendChild(this.__ul),m.addClass(this.domElement,h),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=e||{},e=g.defaults(e,{autoPlace:!0,width:x.DEFAULT_WIDTH}),e=g.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),g.isUndefined(e.load)?e.load={preset:_}:e.preset&&(e.load.preset=e.preset),g.isUndefined(e.parent)&&e.hideable&&b.push(this),e.resizable=g.isUndefined(e.parent)&&e.resizable,e.autoPlace&&g.isUndefined(e.scrollable)&&(e.scrollable=!0);var n=C&&'true'===localStorage.getItem(getLocalStorageHash(this,'isLocal'));if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return t.parent?t.getRoot().preset:e.load.preset},set:function(n){t.parent?t.getRoot().preset=n:e.load.preset=n,setPresetSelectIndex(this),t.revert()}},width:{get:function(){return e.width},set:function(n){e.width=n,setWidth(t,n)}},name:{get:function(){return e.name},set:function(t){e.name=t,r&&(r.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(n){e.closed=n,e.closed?m.addClass(t.__ul,x.CLASS_CLOSED):m.removeClass(t.__ul,x.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=n?x.TEXT_OPEN:x.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return n},set:function(e){C&&(n=e,e?m.bind(window,'unload',saveToLocalStorage):m.unbind(window,'unload',saveToLocalStorage),localStorage.setItem(getLocalStorageHash(t,'isLocal'),e))}}}),g.isUndefined(e.parent)){if(e.closed=!1,m.addClass(this.domElement,x.CLASS_MAIN),m.makeSelectable(this.domElement,!1),C&&n){t.useLocalStorage=!0;var a=localStorage.getItem(getLocalStorageHash(this,'gui'));a&&(e.load=JSON.parse(a))}this.__closeButton=document.createElement('div'),this.__closeButton.innerHTML=x.TEXT_CLOSED,m.addClass(this.__closeButton,x.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),m.bind(this.__closeButton,'click',function(){t.closed=!t.closed})}else{void 0===e.closed&&(e.closed=!0);var r=document.createTextNode(e.name);m.addClass(r,'controller-name');var o=addRow(t,r),i=function(n){return n.preventDefault(),t.closed=!t.closed,!1};m.addClass(this.__ul,x.CLASS_CLOSED),m.addClass(o,'title'),m.bind(o,'click',i),e.closed||(this.closed=!1)}e.autoPlace&&(g.isUndefined(e.parent)&&(y&&(S=document.createElement('div'),m.addClass(S,h),m.addClass(S,x.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(S),y=!1),S.appendChild(this.domElement),m.addClass(this.domElement,x.CLASS_AUTO_PLACE)),!this.parent&&setWidth(t,e.width)),m.bind(window,'resize',function(){t.onResize()}),m.bind(this.__ul,'webkitTransitionEnd',function(){t.onResize()}),m.bind(this.__ul,'transitionend',function(){t.onResize()}),m.bind(this.__ul,'oTransitionEnd',function(){t.onResize()}),this.onResize(),e.resizable&&addResizeHandle(this);t.getRoot();e.parent||function resetWidth(){var e=t.getRoot();e.width+=1,g.defer(function(){e.width-=1})}()},v,S;return x.toggleHide=function(){A=!A,g.each(b,function(e){e.domElement.style.zIndex=A?-999:999,e.domElement.style.opacity=A?0:1})},x.CLASS_AUTO_PLACE='a',x.CLASS_AUTO_PLACE_CONTAINER='ac',x.CLASS_MAIN='main',x.CLASS_CONTROLLER_ROW='cr',x.CLASS_TOO_TALL='taller-than-window',x.CLASS_CLOSED='closed',x.CLASS_CLOSE_BUTTON='close-button',x.CLASS_DRAG='drag',x.DEFAULT_WIDTH=245,x.TEXT_CLOSED='Close Controls',x.TEXT_OPEN='Open Controls',m.bind(window,'keydown',function(t){'text'!==document.activeElement.type&&(t.which===f||t.keyCode==f)&&x.toggleHide()},!1),g.extend(x.prototype,{add:function(e,t){return add(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return add(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;g.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&S.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new x(t);this.__folders[e]=n;var a=addRow(this,n.domElement);return m.addClass(a,'folder'),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=m.getOffset(e.__ul).top,n=0;g.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=m.getHeight(t))}),window.innerHeight-t-E<n?(m.addClass(e.domElement,x.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-E+'px'):(m.removeClass(e.domElement,x.CLASS_TOO_TALL),e.__ul.style.height='auto')}e.__resize_handle&&g.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+'px'}),e.__closeButton&&(e.__closeButton.style.width=e.width+'px')},remember:function(){if(g.isUndefined(v)&&(v=new u,v.domElement.innerHTML=t),this.parent)throw new Error('You can only call remember on a top level GUI.');var e=this;g.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&addSaveMenu(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&setWidth(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,0<this.__rememberedObjects.length&&(e.preset=this.preset,!e.remembered&&(e.remembered={}),e.remembered[this.preset]=getCurrentPreset(this)),e.folders={},g.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=getCurrentPreset(this),markPresetModified(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[_]=getCurrentPreset(this,!0)),this.load.remembered[e]=getCurrentPreset(this),this.preset=e,addPresetOption(this,e,!0)},revert:function(e){g.each(this.__controllers,function(t){this.getRoot().load.remembered?recallSavedValue(e||this.getRoot(),t):t.setValue(t.initialValue)},this),g.each(this.__folders,function(e){e.revert(e)}),e||markPresetModified(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&updateDisplays(this.__listening)}}),x}(r.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>','.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px \'Lucida Grande\', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n',r.controllers.factory=function(e,t,n,a,r,o,i){return function(s,l){var d=s[l];return i.isArray(arguments[2])||i.isObject(arguments[2])?new e(s,l,arguments[2]):i.isNumber(d)?i.isNumber(arguments[2])&&i.isNumber(arguments[3])?new n(s,l,arguments[2],arguments[3]):new t(s,l,{min:arguments[2],max:arguments[3]}):i.isString(d)?new a(s,l):i.isFunction(d)?new r(s,l,''):i.isBoolean(d)?new o(s,l):void 0}}(r.controllers.OptionController,r.controllers.NumberControllerBox,r.controllers.NumberControllerSlider,r.controllers.StringController=function(e,t,n){var a=function(e,n){function onChange(){r.setValue(r.__input.value)}a.superclass.call(this,e,n);var r=this;this.__input=document.createElement('input'),this.__input.setAttribute('type','text'),t.bind(this.__input,'keyup',onChange),t.bind(this.__input,'change',onChange),t.bind(this.__input,'blur',function onBlur(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),t.bind(this.__input,'keydown',function(t){13===t.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return a.superclass=e,n.extend(a.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),a.superclass.prototype.updateDisplay.call(this)}}),a}(r.controllers.Controller,r.dom.dom,r.utils.common),r.controllers.FunctionController,r.controllers.BooleanController,r.utils.common),r.controllers.Controller,r.controllers.BooleanController,r.controllers.FunctionController,r.controllers.NumberControllerBox,r.controllers.NumberControllerSlider,r.controllers.OptionController,r.controllers.ColorController=function(e,t,n,a,r){function linearGradient(e,t,n,a){e.style.background='',r.each(i,function(r){e.style.cssText+='background: '+r+'linear-gradient('+t+', '+n+' 0%, '+a+' 100%); '})}function hueGradient(e){e.style.background='',e.style.cssText+='background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);',e.style.cssText+='background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);',e.style.cssText+='background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);',e.style.cssText+='background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);',e.style.cssText+='background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'}var o=function(e,i){function fieldDown(n){setSV(n),t.bind(window,'mousemove',setSV),t.bind(window,'mouseup',unbindSV)}function unbindSV(){t.unbind(window,'mousemove',setSV),t.unbind(window,'mouseup',unbindSV)}function onBlur(){var e=a(this.value);!1===e?this.value=l.__color.toString():(l.__color.__state=e,l.setValue(l.__color.toOriginal()))}function unbindH(){t.unbind(window,'mousemove',setH),t.unbind(window,'mouseup',unbindH)}function setSV(n){n.preventDefault();var e=t.getWidth(l.__saturation_field),a=t.getOffset(l.__saturation_field),r=(n.clientX-a.left+document.body.scrollLeft)/e,o=1-(n.clientY-a.top+document.body.scrollTop)/e;return 1<o?o=1:0>o&&(o=0),1<r?r=1:0>r&&(r=0),l.__color.v=o,l.__color.s=r,l.setValue(l.__color.toOriginal()),!1}function setH(n){n.preventDefault();var e=t.getHeight(l.__hue_field),a=t.getOffset(l.__hue_field),r=1-(n.clientY-a.top+document.body.scrollTop)/e;return 1<r?r=1:0>r&&(r=0),l.__color.h=360*r,l.setValue(l.__color.toOriginal()),!1}o.superclass.call(this,e,i),this.__color=new n(this.getValue()),this.__temp=new n(0);var l=this;this.domElement=document.createElement('div'),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement('div'),this.__selector.className='selector',this.__saturation_field=document.createElement('div'),this.__saturation_field.className='saturation-field',this.__field_knob=document.createElement('div'),this.__field_knob.className='field-knob',this.__field_knob_border='2px solid ',this.__hue_knob=document.createElement('div'),this.__hue_knob.className='hue-knob',this.__hue_field=document.createElement('div'),this.__hue_field.className='hue-field',this.__input=document.createElement('input'),this.__input.type='text',this.__input_textShadow='0 1px 1px ',t.bind(this.__input,'keydown',function(t){13===t.keyCode&&onBlur.call(this)}),t.bind(this.__input,'blur',onBlur),t.bind(this.__selector,'mousedown',function(){t.addClass(this,'drag').bind(window,'mouseup',function(){t.removeClass(l.__selector,'drag')})});var s=document.createElement('div');r.extend(this.__selector.style,{width:'122px',height:'102px',padding:'3px',backgroundColor:'#222',boxShadow:'0px 1px 3px rgba(0,0,0,0.3)'}),r.extend(this.__field_knob.style,{position:'absolute',width:'12px',height:'12px',border:this.__field_knob_border+(.5>this.__color.v?'#fff':'#000'),boxShadow:'0px 1px 3px rgba(0,0,0,0.5)',borderRadius:'12px',zIndex:1}),r.extend(this.__hue_knob.style,{position:'absolute',width:'15px',height:'2px',borderRight:'4px solid #fff',zIndex:1}),r.extend(this.__saturation_field.style,{width:'100px',height:'100px',border:'1px solid #555',marginRight:'3px',display:'inline-block',cursor:'pointer'}),r.extend(s.style,{width:'100%',height:'100%',background:'none'}),linearGradient(s,'top','rgba(0,0,0,0)','#000'),r.extend(this.__hue_field.style,{width:'15px',height:'100px',display:'inline-block',border:'1px solid #555',cursor:'ns-resize'}),hueGradient(this.__hue_field),r.extend(this.__input.style,{outline:'none',textAlign:'center',color:'#fff',border:0,fontWeight:'bold',textShadow:this.__input_textShadow+'rgba(0,0,0,0.7)'}),t.bind(this.__saturation_field,'mousedown',fieldDown),t.bind(this.__field_knob,'mousedown',fieldDown),t.bind(this.__hue_field,'mousedown',function(n){setH(n),t.bind(window,'mousemove',setH),t.bind(window,'mouseup',unbindH)}),this.__saturation_field.appendChild(s),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};o.superclass=e,r.extend(o.prototype,e.prototype,{updateDisplay:function(){var e=a(this.getValue());if(!1!==e){var t=!1;r.each(n.COMPONENTS,function(n){if(!r.isUndefined(e[n])&&!r.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&r.extend(this.__color.__state,e)}r.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var o=.5>this.__color.v||.5<this.__color.s?255:0,i=255-o;r.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+'px',marginTop:100*(1-this.__color.v)-7+'px',backgroundColor:this.__temp.toString(),border:this.__field_knob_border+'rgb('+o+','+o+','+o+')'}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+'px',this.__temp.s=1,this.__temp.v=1,linearGradient(this.__saturation_field,'left','#fff',this.__temp.toString()),r.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:'rgb('+o+','+o+','+o+')',textShadow:this.__input_textShadow+'rgba('+i+','+i+','+i+',.7)'})}});var i=['-moz-','-o-','-webkit-','-ms-',''];return o}(r.controllers.Controller,r.dom.dom,r.color.Color=function(e,t,n,a){function defineRGBComponent(e,t,n){Object.defineProperty(e,t,{get:function(){return'RGB'===this.__state.space?this.__state[t]:(recalculateRGB(this,t,n),this.__state[t])},set:function(e){'RGB'!==this.__state.space&&(recalculateRGB(this,t,n),this.__state.space='RGB'),this.__state[t]=e}})}function defineHSVComponent(e,t){Object.defineProperty(e,t,{get:function(){return'HSV'===this.__state.space?this.__state[t]:(recalculateHSV(this),this.__state[t])},set:function(e){'HSV'!==this.__state.space&&(recalculateHSV(this),this.__state.space='HSV'),this.__state[t]=e}})}function recalculateRGB(e,n,r){if('HEX'===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,r);else if('HSV'===e.__state.space)a.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v));else throw'Corrupted color state'}function recalculateHSV(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);a.extend(e.__state,{s:n.s,v:n.v}),a.isNaN(n.h)?a.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var r=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw'Failed to interpret color arguments';this.__state.a=this.__state.a||1};return r.COMPONENTS=['r','g','b','h','s','v','hex','a'],a.extend(r.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),defineRGBComponent(r.prototype,'r',2),defineRGBComponent(r.prototype,'g',1),defineRGBComponent(r.prototype,'b',0),defineHSVComponent(r.prototype,'h'),defineHSVComponent(r.prototype,'s'),defineHSVComponent(r.prototype,'v'),Object.defineProperty(r.prototype,'a',{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(r.prototype,'hex',{get:function(){return'HEX'!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space='HEX',this.__state.hex=e}}),r}(r.color.interpret,r.color.math=function(){var e;return{hsv_to_rgb:function(e,n,r){var o=a(e/60)%6,i=e/60-a(e/60),s=r*(1-n),l=r*(1-i*n),d=r*(1-(1-i)*n),t=[[r,d,s],[l,r,s],[s,r,d],[s,l,r],[d,s,r],[r,s,l]][o];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(e,t,n){var a=Math.min(e,t,n),r=Math.max(e,t,n),o=r-a,i,l;if(0!=r)l=o/r;else return{h:NaN,s:0,v:0};return i=e==r?(t-n)/o:t==r?2+(n-e)/o:4+(e-t)/o,i/=6,0>i&&(i+=1),{h:360*i,s:l,v:r/255}},rgb_to_hex:function(e,t,n){var a=this.hex_with_component(0,2,e);return a=this.hex_with_component(a,1,t),a=this.hex_with_component(a,0,n),a},component_from_hex:function(e,t){return 255&e>>8*t},hex_with_component:function(t,n,a){return a<<(e=8*n)|t&~(255<<e)}}}(),r.color.toString,r.utils.common),r.color.interpret,r.utils.common),r.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),r.dom.CenteredDiv=function(e,t){var n=function(){this.backgroundElement=document.createElement('div'),t.extend(this.backgroundElement.style,{backgroundColor:'rgba(0,0,0,0.8)',top:0,left:0,display:'none',zIndex:'1000',opacity:0,WebkitTransition:'opacity 0.2s linear'}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position='fixed',this.domElement=document.createElement('div'),t.extend(this.domElement.style,{position:'fixed',display:'none',zIndex:'1001',opacity:0,WebkitTransition:'-webkit-transform 0.2s ease-out, opacity 0.2s linear'}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,'click',function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display='block',this.domElement.style.display='block',this.domElement.style.opacity=0,this.domElement.style.webkitTransform='scale(1.1)',this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform='scale(1)'})},n.prototype.hide=function(){var t=this,n=function(){t.domElement.style.display='none',t.backgroundElement.style.display='none',e.unbind(t.domElement,'webkitTransitionEnd',n),e.unbind(t.domElement,'transitionend',n),e.unbind(t.domElement,'oTransitionEnd',n)};e.bind(this.domElement,'webkitTransitionEnd',n),e.bind(this.domElement,'transitionend',n),e.bind(this.domElement,'oTransitionEnd',n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform='scale(1.1)'},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+'px',this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+'px'},n}(r.dom.dom,r.utils.common),r.dom.dom,r.utils.common)},function(e){var t=Math.round,n=Math.floor,a=e.exports=a||{};a.color=a.color||{},a.utils=a.utils||{},a.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),a=e.length-1;0<=a;a--)n=[e[a].apply(this,n)];return n[0]}},each:function(t,n,a){if(e&&t.forEach===e)t.forEach(n,a);else if(t.length===t.length+0){for(var r=0,o=t.length;r<o;r++)if(r in t&&n.call(a,t[r],r)===this.BREAK)return;}else for(var r in t)if(n.call(a,t[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return e===void 0},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+''},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return'[object Function]'===Object.prototype.toString.call(e)}}}(),a.color.toString=function(e){return function(n){if(1==n.a||e.isUndefined(n.a)){for(var a=n.hex.toString(16);6>a.length;)a='0'+a;return'#'+a}return'rgba('+t(n.r)+','+t(n.g)+','+t(n.b)+','+n.a+')'}}(a.utils.common),a.Color=a.color.Color=function(e,t,n,a){function defineRGBComponent(e,t,n){Object.defineProperty(e,t,{get:function(){return'RGB'===this.__state.space?this.__state[t]:(recalculateRGB(this,t,n),this.__state[t])},set:function(e){'RGB'!==this.__state.space&&(recalculateRGB(this,t,n),this.__state.space='RGB'),this.__state[t]=e}})}function defineHSVComponent(e,t){Object.defineProperty(e,t,{get:function(){return'HSV'===this.__state.space?this.__state[t]:(recalculateHSV(this),this.__state[t])},set:function(e){'HSV'!==this.__state.space&&(recalculateHSV(this),this.__state.space='HSV'),this.__state[t]=e}})}function recalculateRGB(e,n,r){if('HEX'===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,r);else if('HSV'===e.__state.space)a.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v));else throw'Corrupted color state'}function recalculateHSV(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);a.extend(e.__state,{s:n.s,v:n.v}),a.isNaN(n.h)?a.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var r=function(){if(this.__state=e.apply(this,arguments),!1===this.__state)throw'Failed to interpret color arguments';this.__state.a=this.__state.a||1};return r.COMPONENTS=['r','g','b','h','s','v','hex','a'],a.extend(r.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),defineRGBComponent(r.prototype,'r',2),defineRGBComponent(r.prototype,'g',1),defineRGBComponent(r.prototype,'b',0),defineHSVComponent(r.prototype,'h'),defineHSVComponent(r.prototype,'s'),defineHSVComponent(r.prototype,'v'),Object.defineProperty(r.prototype,'a',{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(r.prototype,'hex',{get:function(){return'HEX'!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space='HEX',this.__state.hex=e}}),r}(a.color.interpret=function(e,t){var n=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:'HEX',hex:parseInt('0x'+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:'HEX',hex:parseInt('0x'+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:'RGB',r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null!==t&&{space:'RGB',r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:'HEX',hex:e,conversionName:'HEX'}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return!(3!=e.length)&&{space:'RGB',r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return!(4!=e.length)&&{space:'RGB',r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a)&&{space:'RGB',r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&{space:'RGB',r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a)&&{space:'HSV',h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&{space:'HSV',h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],a,r;return function(){r=!1;var e=1<arguments.length?t.toArray(arguments):arguments[0];return t.each(n,function(n){if(n.litmus(e))return t.each(n.conversions,function(n,o){if(a=n.read(e),!1===r&&!1!==a)return r=a,a.conversionName=o,a.conversion=n,t.BREAK}),t.BREAK}),r}}(a.color.toString,a.utils.common),a.color.math=function(){var e;return{hsv_to_rgb:function(e,a,r){var o=n(e/60)%6,i=e/60-n(e/60),s=r*(1-a),l=r*(1-i*a),d=r*(1-(1-i)*a),t=[[r,d,s],[l,r,s],[s,r,d],[s,l,r],[d,s,r],[r,s,l]][o];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function(e,t,n){var a=Math.min(e,t,n),r=Math.max(e,t,n),o=r-a,i,l;if(0!=r)l=o/r;else return{h:NaN,s:0,v:0};return i=e==r?(t-n)/o:t==r?2+(n-e)/o:4+(e-t)/o,i/=6,0>i&&(i+=1),{h:360*i,s:l,v:r/255}},rgb_to_hex:function(e,t,n){var a=this.hex_with_component(0,2,e);return a=this.hex_with_component(a,1,t),a=this.hex_with_component(a,0,n),a},component_from_hex:function(e,t){return 255&e>>8*t},hex_with_component:function(t,n,a){return a<<(e=8*n)|t&~(255<<e)}}}(),a.color.toString,a.utils.common)},function(e,t,n){(function(t){WebGLDebugUtils=function(){function init(e){if(null==r)for(var t in r={},o={},e)'number'==typeof e[t]&&(r[e[t]]=t,o[t]=e[t])}function checkInit(){if(null==r)throw'WebGLDebugUtils.init(ctx) not called'}function glEnumToString(e){checkInit();var t=r[e];return t===void 0?'/*UNKNOWN WebGL ENUM*/ 0x'+e.toString(16)+'':'gl.'+t}function glFunctionArgToString(e,t,n,r){var s=a[e];if(s!==void 0){var s=s[t];if(s!==void 0&&s[n]){if('object'==typeof s[n]&&void 0!==s[n].enumBitwiseOr){for(var l=s[n].enumBitwiseOr,d=0,c=[],p=0,i;p<l.length;++p)i=o[l[p]],0!=(r&i)&&(d|=i,c.push(glEnumToString(i)));return d===r?c.join(' | '):glEnumToString(r)}return glEnumToString(r)}}return null===r?'null':void 0===r?'undefined':r.toString()}function makePropertyWrapper(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function makeDebugContext(e,t,a,r){function makeErrorWrapper(e,n){return function(){a&&a(n,arguments);var i=e[n].apply(e,arguments),s=r.getError();return 0!=s&&(o[s]=!0,t(s,n,arguments)),i}}r=r||e,init(e),t=t||function(e,t,a){for(var r='',o=a.length,i=0;i<o;++i)r+=(0==i?'':', ')+glFunctionArgToString(t,o,i,a[i]);n('WebGL error '+glEnumToString(e)+' in '+t+'('+r+')')};var o={},i={};for(var s in e)if('function'!=typeof e[s])makePropertyWrapper(i,e,s);else if('getExtension'!=s)i[s]=makeErrorWrapper(e,s);else{var l=makeErrorWrapper(e,s);i[s]=function(){var n=l.apply(e,arguments);return makeDebugContext(n,t,a,r)}}return i.getError=function(){for(var t in o)if(o.hasOwnProperty(t)&&o[t])return o[t]=!1,t;return e.NO_ERROR},i}function resetToInitialState(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var a=0;a<t;++a)e.disableVertexAttribArray(a),e.vertexAttribPointer(a,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(a,0);e.deleteBuffer(n);for(var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),a=0;a<r;++a)e.activeTexture(e.TEXTURE0+a),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}'undefined'==typeof window&&(window=t);var e=function(e){window.console&&window.console.log&&window.console.log(e)},n=function(t){window.console&&window.console.error?window.console.error(t):e(t)},a={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{6:{0:!0,2:!0,3:!0,4:!0},9:{0:!0,2:!0,6:!0,7:!0}},texSubImage2D:{7:{0:!0,4:!0,5:!0},9:{0:!0,6:!0,7:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:['COLOR_BUFFER_BIT','DEPTH_BUFFER_BIT','STENCIL_BUFFER_BIT']}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},r=null,o=null;return{init:init,mightBeEnum:function mightBeEnum(e){return checkInit(),void 0!==r[e]},glEnumToString:glEnumToString,glFunctionArgToString:glFunctionArgToString,glFunctionArgsToString:function glFunctionArgsToString(e,t){for(var n='',a=t.length,r=0;r<a;++r)n+=(0==r?'':', ')+glFunctionArgToString(e,a,r,t[r]);return n},makeDebugContext:makeDebugContext,makeLostContextSimulatingCanvas:function makeLostContextSimulatingCanvas(e){function wrapEvent(e){return'function'==typeof e?e:function(t){e.handleEvent(t)}}function clearErrors(){for(var e=Object.keys(p),t=0;t<e.length;++t)delete p[e]}function loseContextIfTime(){++l,o||s!=l||e.loseContext()}function makeLostContextFunctionWrapper(e,t){var n=e[t];return function(){if(loseContextIfTime(),!o){var t=n.apply(e,arguments);return t}}}function freeResources(){for(var e=0,t;e<i.length;++e)t=i[e],t instanceof WebGLBuffer?u.deleteBuffer(t):t instanceof WebGLFramebuffer?u.deleteFramebuffer(t):t instanceof WebGLProgram?u.deleteProgram(t):t instanceof WebGLRenderbuffer?u.deleteRenderbuffer(t):t instanceof WebGLShader?u.deleteShader(t):t instanceof WebGLTexture&&u.deleteTexture(t)}function makeWebGLContextEvent(e){return{statusMessage:e,preventDefault:function(){d=!0}}}function makeLostContextSimulatingContext(e){for(var t in e)'function'==typeof e[t]?a[t]=makeLostContextFunctionWrapper(e,t):makePropertyWrapper(a,e,t);a.getError=function(){if(loseContextIfTime(),!o)for(var e;e=u.getError();)p[e]=!0;for(var e in p)if(p[e])return delete p[e],e;return a.NO_ERROR};for(var n=['createBuffer','createFramebuffer','createProgram','createRenderbuffer','createShader','createTexture'],s=0,l;s<n.length;++s)l=n[s],a[l]=function(t){return function(){if(loseContextIfTime(),o)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=r,i.push(n),n}}(e[l]);for(var d=['getActiveAttrib','getActiveUniform','getBufferParameter','getContextAttributes','getAttachedShaders','getFramebufferAttachmentParameter','getParameter','getProgramParameter','getProgramInfoLog','getRenderbufferParameter','getShaderParameter','getShaderInfoLog','getShaderSource','getTexParameter','getUniform','getUniformLocation','getVertexAttrib'],s=0,l;s<d.length;++s)l=d[s],a[l]=function(t){return function(){return loseContextIfTime(),o?null:t.apply(e,arguments)}}(a[l]);for(var c=['isBuffer','isEnabled','isFramebuffer','isProgram','isRenderbuffer','isShader','isTexture'],s=0,l;s<c.length;++s)l=c[s],a[l]=function(t){return function(){return loseContextIfTime(),!o&&t.apply(e,arguments)}}(a[l]);return a.checkFramebufferStatus=function(t){return function(){return loseContextIfTime(),o?a.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(a.checkFramebufferStatus),a.getAttribLocation=function(t){return function(){return loseContextIfTime(),o?-1:t.apply(e,arguments)}}(a.getAttribLocation),a.getVertexAttribOffset=function(t){return function(){return loseContextIfTime(),o?0:t.apply(e,arguments)}}(a.getVertexAttribOffset),a.isContextLost=function(){return o},a}var t=[],n=[],a={},r=1,o=!1,i=[],s=0,l=0,d=!1,c=0,p={},u,a;e.getContext=function(t){return function(){var n=t.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=u){if(u)throw'got different context';u=n,a=makeLostContextSimulatingContext(u)}return a}return n}}(e.getContext);var m=function(e){t.push(wrapEvent(e))},g=function(e){n.push(wrapEvent(e))};return function wrapAddEventListener(e){var t=e.addEventListener;e.addEventListener=function(n,a){'webglcontextlost'===n?m(a):'webglcontextrestored'===n?g(a):t.apply(e,arguments)}}(e),e.loseContext=function(){if(!o){for(o=!0,s=0,++r;u.getError(););clearErrors(),p[u.CONTEXT_LOST_WEBGL]=!0;var n=makeWebGLContextEvent('context lost'),a=t.slice();setTimeout(function(){for(var t=0;t<a.length;++t)a[t](n);0<=c&&setTimeout(function(){e.restoreContext()},c)},0)}},e.restoreContext=function(){o&&n.length&&setTimeout(function(){if(!d)throw'can not restore. webglcontestlost listener did not call event.preventDefault';freeResources(),resetToInitialState(u),o=!1,l=0,d=!1;for(var e=n.slice(),t=makeWebGLContextEvent('context restored'),a=0;a<e.length;++a)e[a](t)},0)},e.loseContextInNCalls=function(e){if(o)throw'You can not ask a lost contet to be lost';s=l+e},e.getNumCalls=function(){return l},e.setRestoreTimeout=function(e){c=e},e},resetToInitialState:resetToInitialState}}(),e.exports=WebGLDebugUtils}).call(t,n(10))},function(e){var t=function(){return this}();try{t=t||Function('return this')()||(1,eval)('this')}catch(n){'object'==typeof window&&(t=window)}e.exports=t},function(e){var t=Math.min,s=Math.max;'object'==typeof e&&(e.exports=function(){var u=Date.now(),l=u,m=0,g=Infinity,n=0,o=0,h=Infinity,p=0,E=0,r=0,_=document.createElement('div');_.id='stats',_.addEventListener('mousedown',function(t){t.preventDefault(),e(++r%2)},!1),_.style.cssText='width:80px;opacity:0.9;cursor:pointer';var C=document.createElement('div');C.id='fps',C.style.cssText='padding:0 0 3px 3px;text-align:left;background-color:#002',_.appendChild(C);var y=document.createElement('div');y.id='fpsText',y.style.cssText='color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px',y.innerHTML='FPS',C.appendChild(y);var i=document.createElement('div');for(i.id='fpsGraph',i.style.cssText='position:relative;width:74px;height:30px;background-color:#0ff',C.appendChild(i);74>i.children.length;){var a=document.createElement('span');a.style.cssText='width:1px;height:30px;float:left;background-color:#113',i.appendChild(a)}var c=document.createElement('div');c.id='ms',c.style.cssText='padding:0 0 3px 3px;text-align:left;background-color:#020;display:none',_.appendChild(c);var d=document.createElement('div');d.id='msText',d.style.cssText='color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px',d.innerHTML='MS',c.appendChild(d);var A=document.createElement('div');for(A.id='msGraph',A.style.cssText='position:relative;width:74px;height:30px;background-color:#0f0',c.appendChild(A);74>A.children.length;)a=document.createElement('span'),a.style.cssText='width:1px;height:30px;float:left;background-color:#131',A.appendChild(a);var e=function(e){r=e;0==r?(C.style.display='block',c.style.display='none'):1==r?(C.style.display='none',c.style.display='block'):void 0};return{REVISION:12,domElement:_,setMode:e,begin:function(){u=Date.now()},end:function(){var e=Date.now();m=e-u,g=t(g,m),n=s(n,m),d.textContent=m+' MS ('+g+'-'+n+')';var r=t(30,30-30*(m/200));return A.appendChild(A.firstChild).style.height=r+'px',E++,e>l+1E3&&(o=Math.round(1E3*E/(e-l)),h=t(h,o),p=s(p,o),y.textContent=o+' FPS ('+h+'-'+p+')',r=t(30,30-30*(o/100)),i.appendChild(i.firstChild).style.height=r+'px',l=e,E=0),e},update:function(){u=this.end()}}})},function(e,t,n){function OrbitControls(e,t){function getAutoRotationAngle(){return 2*i/60/60*n.autoRotateSpeed}function getZoomScale(){return Math.pow(0.95,n.zoomSpeed)}function rotateLeft(e){h.theta-=e}function rotateUp(e){h.phi-=e}function dollyIn(e){n.object instanceof s.PerspectiveCamera?f/=e:n.object instanceof s.OrthographicCamera?(n.object.zoom=o(n.minZoom,r(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),_=!0):(console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'),n.enableZoom=!1)}function dollyOut(e){n.object instanceof s.PerspectiveCamera?f*=e:n.object instanceof s.OrthographicCamera?(n.object.zoom=o(n.minZoom,r(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),_=!0):(console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'),n.enableZoom=!1)}function handleMouseDownRotate(e){C.set(e.clientX,e.clientY)}function handleMouseDownDolly(e){S.set(e.clientX,e.clientY)}function handleMouseDownPan(e){b.set(e.clientX,e.clientY)}function handleMouseMoveRotate(e){y.set(e.clientX,e.clientY),A.subVectors(y,C);var t=n.domElement===document?n.domElement.body:n.domElement;rotateLeft(2*i*A.x/t.clientWidth*n.rotateSpeed),rotateUp(2*i*A.y/t.clientHeight*n.rotateSpeed),C.copy(y),n.update()}function handleMouseMoveDolly(e){T.set(e.clientX,e.clientY),R.subVectors(T,S),0<R.y?dollyIn(getZoomScale()):0>R.y&&dollyOut(getZoomScale()),S.copy(T),n.update()}function handleMouseMovePan(e){x.set(e.clientX,e.clientY),v.subVectors(x,b),L(v.x,v.y),b.copy(x),n.update()}function handleMouseUp(){}function handleMouseWheel(e){0>e.deltaY?dollyOut(getZoomScale()):0<e.deltaY&&dollyIn(getZoomScale()),n.update()}function handleKeyDown(e){switch(e.keyCode){case n.keys.UP:L(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:L(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:L(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:L(-n.keyPanSpeed,0),n.update();}}function handleTouchStartRotate(e){C.set(e.touches[0].pageX,e.touches[0].pageY)}function handleTouchStartDolly(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=a(t*t+n*n);S.set(0,r)}function handleTouchStartPan(e){b.set(e.touches[0].pageX,e.touches[0].pageY)}function handleTouchMoveRotate(e){y.set(e.touches[0].pageX,e.touches[0].pageY),A.subVectors(y,C);var t=n.domElement===document?n.domElement.body:n.domElement;rotateLeft(2*i*A.x/t.clientWidth*n.rotateSpeed),rotateUp(2*i*A.y/t.clientHeight*n.rotateSpeed),C.copy(y),n.update()}function handleTouchMoveDolly(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,o=a(t*t+r*r);T.set(0,o),R.subVectors(T,S),0<R.y?dollyOut(getZoomScale()):0>R.y&&dollyIn(getZoomScale()),S.copy(T),n.update()}function handleTouchMovePan(e){x.set(e.touches[0].pageX,e.touches[0].pageY),v.subVectors(x,b),L(v.x,v.y),b.copy(x),n.update()}function handleTouchEnd(){}function onMouseDown(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.ORBIT:if(!1===n.enableRotate)return;handleMouseDownRotate(e),u=p.ROTATE;break;case n.mouseButtons.ZOOM:if(!1===n.enableZoom)return;handleMouseDownDolly(e),u=p.DOLLY;break;case n.mouseButtons.PAN:if(!1===n.enablePan)return;handleMouseDownPan(e),u=p.PAN;}u!==p.NONE&&(document.addEventListener('mousemove',onMouseMove,!1),document.addEventListener('mouseup',onMouseUp,!1),n.dispatchEvent(d))}}function onMouseMove(e){if(!1!==n.enabled)switch(e.preventDefault(),u){case p.ROTATE:if(!1===n.enableRotate)return;handleMouseMoveRotate(e);break;case p.DOLLY:if(!1===n.enableZoom)return;handleMouseMoveDolly(e);break;case p.PAN:if(!1===n.enablePan)return;handleMouseMovePan(e);}}function onMouseUp(e){!1===n.enabled||(handleMouseUp(e),document.removeEventListener('mousemove',onMouseMove,!1),document.removeEventListener('mouseup',onMouseUp,!1),n.dispatchEvent(c),u=p.NONE)}function onMouseWheel(e){!1===n.enabled||!1===n.enableZoom||u!==p.NONE&&u!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),handleMouseWheel(e),n.dispatchEvent(d),n.dispatchEvent(c))}function onKeyDown(e){!1===n.enabled||!1===n.enableKeys||!1===n.enablePan||handleKeyDown(e)}function onTouchStart(e){if(!1!==n.enabled){switch(e.touches.length){case 1:if(!1===n.enableRotate)return;handleTouchStartRotate(e),u=p.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom)return;handleTouchStartDolly(e),u=p.TOUCH_DOLLY;break;case 3:if(!1===n.enablePan)return;handleTouchStartPan(e),u=p.TOUCH_PAN;break;default:u=p.NONE;}u!==p.NONE&&n.dispatchEvent(d)}}function onTouchMove(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enableRotate)return;if(u!==p.TOUCH_ROTATE)return;handleTouchMoveRotate(e);break;case 2:if(!1===n.enableZoom)return;if(u!==p.TOUCH_DOLLY)return;handleTouchMoveDolly(e);break;case 3:if(!1===n.enablePan)return;if(u!==p.TOUCH_PAN)return;handleTouchMovePan(e);break;default:u=p.NONE;}}function onTouchEnd(e){!1===n.enabled||(handleTouchEnd(e),n.dispatchEvent(c),u=p.NONE)}function onContextMenu(e){!1===n.enabled||e.preventDefault()}this.object=e,this.domElement=t===void 0?document:t,this.enabled=!0,this.target=new s.Vector3,this.minDistance=0,this.maxDistance=Infinity,this.minZoom=0,this.maxZoom=Infinity,this.minPolarAngle=0,this.maxPolarAngle=i,this.minAzimuthAngle=-Infinity,this.maxAzimuthAngle=Infinity,this.enableDamping=!1,this.dampingFactor=0.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:s.MOUSE.LEFT,ZOOM:s.MOUSE.MIDDLE,PAN:s.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(l),n.update(),u=p.NONE},this.update=function(){var t=new s.Vector3,a=new s.Quaternion().setFromUnitVectors(e.up,new s.Vector3(0,1,0)),i=a.clone().inverse(),d=new s.Vector3,c=new s.Quaternion;return function update(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(a),g.setFromVector3(t),n.autoRotate&&u===p.NONE&&rotateLeft(getAutoRotationAngle()),g.theta+=h.theta,g.phi+=h.phi,g.theta=o(n.minAzimuthAngle,r(n.maxAzimuthAngle,g.theta)),g.phi=o(n.minPolarAngle,r(n.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=f,g.radius=o(n.minDistance,r(n.maxDistance,g.radius)),n.target.add(E),t.setFromSpherical(g),t.applyQuaternion(i),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor):h.set(0,0,0),f=1,E.set(0,0,0),(_||d.distanceToSquared(n.object.position)>m||8*(1-c.dot(n.object.quaternion))>m)&&(n.dispatchEvent(l),d.copy(n.object.position),c.copy(n.object.quaternion),_=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener('contextmenu',onContextMenu,!1),n.domElement.removeEventListener('mousedown',onMouseDown,!1),n.domElement.removeEventListener('wheel',onMouseWheel,!1),n.domElement.removeEventListener('touchstart',onTouchStart,!1),n.domElement.removeEventListener('touchend',onTouchEnd,!1),n.domElement.removeEventListener('touchmove',onTouchMove,!1),document.removeEventListener('mousemove',onMouseMove,!1),document.removeEventListener('mouseup',onMouseUp,!1),window.removeEventListener('keydown',onKeyDown,!1)};var n=this,l={type:'change'},d={type:'start'},c={type:'end'},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},u=p.NONE,m=1e-6,g=new s.Spherical,h=new s.Spherical,f=1,E=new s.Vector3,_=!1,C=new s.Vector2,y=new s.Vector2,A=new s.Vector2,b=new s.Vector2,x=new s.Vector2,v=new s.Vector2,S=new s.Vector2,T=new s.Vector2,R=new s.Vector2,F=function(){var e=new s.Vector3;return function panLeft(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),E.add(e)}}(),w=function(){var e=new s.Vector3;return function panUp(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),E.add(e)}}(),L=function(){var e=new s.Vector3;return function pan(t,a){var r=n.domElement===document?n.domElement.body:n.domElement;if(n.object instanceof s.PerspectiveCamera){var o=n.object.position;e.copy(o).sub(n.target);var l=e.length();l*=Math.tan(n.object.fov/2*i/180),F(2*t*l/r.clientHeight,n.object.matrix),w(2*a*l/r.clientHeight,n.object.matrix)}else n.object instanceof s.OrthographicCamera?(F(t*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),w(a*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.'),n.enablePan=!1)}}();n.domElement.addEventListener('contextmenu',onContextMenu,!1),n.domElement.addEventListener('mousedown',onMouseDown,!1),n.domElement.addEventListener('wheel',onMouseWheel,!1),n.domElement.addEventListener('touchstart',onTouchStart,!1),n.domElement.addEventListener('touchend',onTouchEnd,!1),n.domElement.addEventListener('touchmove',onTouchMove,!1),window.addEventListener('keydown',onKeyDown,!1),this.update()}var a=Math.sqrt,r=Math.min,o=Math.max,i=Math.PI,s=n(2);OrbitControls.prototype=Object.create(s.EventDispatcher.prototype),OrbitControls.prototype.constructor=OrbitControls,Object.defineProperties(OrbitControls.prototype,{center:{get:function(){return console.warn('THREE.OrbitControls: .center has been renamed to .target'),this.target}},noZoom:{get:function(){return console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.'),!this.enableZoom},set:function(e){console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.'),this.enableZoom=!e}},noRotate:{get:function(){return console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'),!this.enableRotate},set:function(e){console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'),this.enableRotate=!e}},noPan:{get:function(){return console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.'),!this.enablePan},set:function(e){console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.'),this.enablePan=!e}},noKeys:{get:function(){return console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.'),!this.enableKeys},set:function(e){console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.'),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'),!this.enableDamping},set:function(e){console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'),this.dampingFactor},set:function(e){console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'),this.dampingFactor=e}}}),e.exports=OrbitControls},function(n,e){var d=Number.MAX_VALUE,a=Math.sqrt,y=Math.ceil,r=Math.pow,b=Math.round,x=Math.min,S=Math.floor,T=Math.max,g=Math.abs;!function(a,e){n.exports=e()}(this,function(){return function(a){function t(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return a[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=a,t.c=e,t.i=function(t){return t},t.d=function(a,e,n){t.o(a,e)||Object.defineProperty(a,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(e,'a',e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p='',t(t.s=12)}([function(t){function n(a,e){var t=a[1]||'',s=a[3];if(!s)return t;if(e&&'function'==typeof btoa){var l=i(s);return[t].concat(s.sources.map(function(t){return'/*# sourceURL='+s.sourceRoot+t+' */'})).concat([l]).join('\n')}return[t].join('\n')}function i(t){return'/*# sourceMappingURL=data:application/json;charset=utf-8;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+' */'}t.exports=function(a){var o=[];return o.toString=function(){return this.map(function(e){var t=n(e,a);return e[2]?'@media '+e[2]+'{'+t+'}':t}).join('')},o.i=function(t,a){'string'==typeof t&&(t=[[null,t,'']]);for(var n={},i=0,r;i<this.length;i++)r=this[i][0],'number'==typeof r&&(n[r]=!0);for(i=0;i<t.length;i++){var l=t[i];'number'==typeof l[0]&&n[l[0]]||(a&&!l[2]?l[2]=a:a&&(l[2]='('+l[2]+') and ('+a+')'),o.push(l))}},o}},function(y,e,t){function i(a,e){for(var t=0;t<a.length;t++){var n=a[t],l=b[n.id];if(l){l.refs++;for(var r=0;r<l.parts.length;r++)l.parts[r](n.parts[r]);for(;r<n.parts.length;r++)l.parts.push(u(n.parts[r],e))}else{for(var o=[],r=0;r<n.parts.length;r++)o.push(u(n.parts[r],e));b[n.id]={id:n.id,refs:1,parts:o}}}}function r(d){for(var e=[],t={},n=0;n<d.length;n++){var i=d[n],p=i[0],u=i[1],m=i[2],g=i[3],h={css:u,media:m,sourceMap:g};t[p]?t[p].parts.push(h):e.push(t[p]={id:p,parts:[h]})}return e}function o(a,e){var t=f(a.insertInto);if(!t)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.');var r=E[E.length-1];if('top'===a.insertAt)r?r.nextSibling?t.insertBefore(e,r.nextSibling):t.appendChild(e):t.insertBefore(e,t.firstChild),E.push(e);else{if('bottom'!==a.insertAt)throw new Error('Invalid value for parameter \'insertAt\'. Must be \'top\' or \'bottom\'.');t.appendChild(e)}}function s(n){n.parentNode.removeChild(n);var e=E.indexOf(n);0<=e&&E.splice(e,1)}function a(n){var e=document.createElement('style');return n.attrs.type='text/css',c(e,n.attrs),o(n,e),e}function l(n){var e=document.createElement('link');return n.attrs.type='text/css',n.attrs.rel='stylesheet',c(e,n.attrs),o(n,e),e}function c(a,e){Object.keys(e).forEach(function(t){a.setAttribute(t,e[t])})}function u(c,e){var t,n,i;if(e.singleton){var r=C++;t=g||(g=a(e)),n=h.bind(null,t,r,!1),i=h.bind(null,t,r,!0)}else c.sourceMap&&'function'==typeof URL&&'function'==typeof URL.createObjectURL&&'function'==typeof URL.revokeObjectURL&&'function'==typeof Blob&&'function'==typeof btoa?(t=l(e),n=m.bind(null,t,e),i=function(){s(t),t.href&&URL.revokeObjectURL(t.href)}):(t=a(e),n=d.bind(null,t),i=function(){s(t)});return n(c),function(e){if(e){if(e.css===c.css&&e.media===c.media&&e.sourceMap===c.sourceMap)return;n(c=e)}else i()}}function h(a,e,t,n){var i=t?'':n.css;if(a.styleSheet)a.styleSheet.cssText=x(e,i);else{var r=document.createTextNode(i),o=a.childNodes;o[e]&&a.removeChild(o[e]),o.length?a.insertBefore(r,o[e]):a.appendChild(r)}}function d(a,e){var t=e.css,n=e.media;if(n&&a.setAttribute('media',n),a.styleSheet)a.styleSheet.cssText=t;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(t))}}function m(l,e,t){var n=t.css,i=t.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(n=A(n)),i&&(n+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+' */');var o=new Blob([n],{type:'text/css'}),s=l.href;l.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var b={},p=function(n){var e;return function(){return void 0==e&&(e=n.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),f=function(a){var e={};return function(t){return void 0===e[t]&&(e[t]=a.call(this,t)),e[t]}}(function(t){return document.querySelector(t)}),g=null,C=0,E=[],A=t(10);y.exports=function(a,d){if('undefined'!=typeof DEBUG&&DEBUG&&'object'!=typeof document)throw new Error('The style-loader cannot be used in a non-browser environment');d=d||{},d.attrs='object'==typeof d.attrs?d.attrs:{},void 0===d.singleton&&(d.singleton=p()),void 0===d.insertInto&&(d.insertInto='head'),void 0===d.insertAt&&(d.insertAt='bottom');var e=r(a);return i(e,d),function(t){for(var n=[],o=0;o<e.length;o++){var s=e[o],a=b[s.id];a.refs--,n.push(a)}t&&i(r(t),d);for(var o=0,a;o<n.length;o++)if(a=n[o],0===a.refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete b[a.id]}}};var x=function(){var a=[];return function(e,t){return a[e]=t,a.filter(Boolean).join('\n')}}()},function(t){t.exports=function(){throw new Error('define cannot be used indirect')}},function(a,e,t){(function(e){var d='undefined'==typeof window?'undefined'!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{}:window,t=function(){var n=/\blang(?:uage)?-(\w+)\b/i,a=0,x=d.Prism={manual:d.Prism&&d.Prism.manual,util:{encode:function(t){return t instanceof i?new i(t.type,x.util.encode(t.content),t.alias):'Array'===x.util.type(t)?t.map(x.util.encode):t.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/\u00a0/g,' ')},type:function(t){return Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1]},objId:function(t){return t.__id||Object.defineProperty(t,'__id',{value:++a}),t.__id},clone:function(a){switch(x.util.type(a)){case'Object':var e={};for(var t in a)a.hasOwnProperty(t)&&(e[t]=x.util.clone(a[t]));return e;case'Array':return a.map&&a.map(function(t){return x.util.clone(t)});}return a}},languages:{extend:function(a,e){var t=x.util.clone(x.languages[a]);for(var n in e)t[n]=e[n];return t},insertBefore:function(i,e,t,d){d=d||x.languages;var n=d[i];if(2==arguments.length){for(var r in t=arguments[1],t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}var o={};for(var a in n)if(n.hasOwnProperty(a)){if(a==e)for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);o[a]=n[a]}return x.languages.DFS(x.languages,function(e,t){t===d[i]&&e!=i&&(this[e]=o)}),d[i]=o},DFS:function(a,e,t,n){for(var r in n=n||{},a)a.hasOwnProperty(r)&&(e.call(a,r,a[r],t||r),'Object'!==x.util.type(a[r])||n[x.util.objId(a[r])]?'Array'!==x.util.type(a[r])||n[x.util.objId(a[r])]||(n[x.util.objId(a[r])]=!0,x.languages.DFS(a[r],e,r,n)):(n[x.util.objId(a[r])]=!0,x.languages.DFS(a[r],e,null,n)))}},plugins:{},highlightAll:function(a,e){var i={callback:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};x.hooks.run('before-highlightall',i);for(var n=i.elements||document.querySelectorAll(i.selector),o=0,s;s=n[o++];)x.highlightElement(s,!0===a,i.callback)},highlightElement:function(e,i,r){for(var o=e,l,p;o&&!n.test(o.className);)o=o.parentNode;o&&(l=(o.className.match(n)||[,''])[1].toLowerCase(),p=x.languages[l]),e.className=e.className.replace(n,'').replace(/\s+/g,' ')+' language-'+l,o=e.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(n,'').replace(/\s+/g,' ')+' language-'+l);var m=e.textContent,g={element:e,language:l,grammar:p,code:m};if(x.hooks.run('before-sanity-check',g),!g.code||!g.grammar)return g.code&&(g.element.textContent=g.code),void x.hooks.run('complete',g);if(x.hooks.run('before-highlight',g),i&&d.Worker){var u=new Worker(x.filename);u.onmessage=function(t){g.highlightedCode=t.data,x.hooks.run('before-insert',g),g.element.innerHTML=g.highlightedCode,r&&r.call(g.element),x.hooks.run('after-highlight',g),x.hooks.run('complete',g)},u.postMessage(JSON.stringify({language:g.language,code:g.code,immediateClose:!0}))}else g.highlightedCode=x.highlight(g.code,g.grammar,g.language),x.hooks.run('before-insert',g),g.element.innerHTML=g.highlightedCode,r&&r.call(e),x.hooks.run('after-highlight',g),x.hooks.run('complete',g)},highlight:function(a,e,t){var n=x.tokenize(a,e);return i.stringify(x.util.encode(n),t)},tokenize:function(i,e){var t=x.Token,n=[i],r=e.rest;if(r){for(var o in r)e[o]=r[o];delete e.rest}e:for(var o in e)if(e.hasOwnProperty(o)&&e[o]){var s=e[o];s='Array'===x.util.type(s)?s:[s];for(var a=0;a<s.length;++a){var l=s[a],c=l.inside,u=!!l.lookbehind,h=!!l.greedy,d=0,m=l.alias;if(h&&!l.pattern.global){var p=l.pattern.toString().match(/[imuy]*$/)[0];l.pattern=RegExp(l.pattern.source,p+'g')}l=l.pattern||l;for(var f=0,g=0,C;f<n.length;g+=n[f].length,++f){if(C=n[f],n.length>i.length)break e;if(!(C instanceof t)){l.lastIndex=0;var E=l.exec(C),L=1;if(!E&&h&&f!=n.length-1){if(l.lastIndex=g,!(E=l.exec(i)))break;for(var v=E.index+(u?E[1].length:0),_=E.index+E[0].length,F=f,b=g,S=n.length;S>F&&_>b;++F)b+=n[F].length,v>=b&&(++f,g=b);if(n[f]instanceof t||n[F-1].greedy)continue;L=F-f,C=i.slice(g,b),E.index-=g}if(E){u&&(d=E[1].length);var v=E.index+d,E=E[0].slice(d),_=v+E.length,R=C.slice(0,v),T=C.slice(_),y=[f,L];R&&y.push(R);var w=new t(o,c?x.tokenize(E,c):E,m,E,h);y.push(w),T&&y.push(T),Array.prototype.splice.apply(n,y)}}}}}return n},hooks:{all:{},add:function(a,e){var t=x.hooks.all;t[a]=t[a]||[],t[a].push(e)},run:function(a,e){var t=x.hooks.all[a];if(t&&t.length)for(var n=0,o;o=t[n++];)o(e)}}},i=x.Token=function(a,e,t,n,o){this.type=a,this.content=e,this.alias=t,this.length=0|(n||'').length,this.greedy=!!o};if(i.stringify=function(r,l,d){if('string'==typeof r)return r;if('Array'===x.util.type(r))return r.map(function(e){return i.stringify(e,l,r)}).join('');var c={type:r.type,content:i.stringify(r.content,l,d),tag:'span',classes:['token',r.type],attributes:{},language:l,parent:d};if('comment'==c.type&&(c.attributes.spellcheck='true'),r.alias){var o='Array'===x.util.type(r.alias)?r.alias:[r.alias];Array.prototype.push.apply(c.classes,o)}x.hooks.run('wrap',c);var s=Object.keys(c.attributes).map(function(t){return t+'="'+(c.attributes[t]||'').replace(/"/g,'&quot;')+'"'}).join(' ');return'<'+c.tag+' class="'+c.classes.join(' ')+'"'+(s?' '+s:'')+'>'+c.content+'</'+c.tag+'>'},!d.document)return d.addEventListener?(d.addEventListener('message',function(n){var e=JSON.parse(n.data),t=e.language,a=e.code,r=e.immediateClose;d.postMessage(x.highlight(a,x.languages[t],t)),r&&d.close()},!1),d.Prism):d.Prism;var e=document.currentScript||[].slice.call(document.getElementsByTagName('script')).pop();return e&&(x.filename=e.src,!document.addEventListener||x.manual||e.hasAttribute('data-manual')||('loading'===document.readyState?document.addEventListener('DOMContentLoaded',x.highlightAll):window.requestAnimationFrame?window.requestAnimationFrame(x.highlightAll):window.setTimeout(x.highlightAll,16))),d.Prism}();void 0!==a&&a.exports&&(a.exports=t),void 0!==e&&(e.Prism=t),t.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/i,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},t.hooks.add('wrap',function(t){'entity'===t.type&&(t.attributes.title=t.content.replace(/&amp;/,'&'))}),t.languages.xml=t.languages.markup,t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:{pattern:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},t.languages.css.atrule.inside.rest=t.util.clone(t.languages.css),t.languages.markup&&(t.languages.insertBefore('markup','tag',{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:t.languages.css,alias:'language-css'}}),t.languages.insertBefore('inside','attr-value',{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:t.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:t.languages.css}},alias:'language-css'}},t.languages.markup.tag)),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend('clike',{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/}),t.languages.insertBefore('javascript','keyword',{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),t.languages.insertBefore('javascript','string',{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:'punctuation'},rest:t.languages.javascript}},string:/[\s\S]+/}}}),t.languages.markup&&t.languages.insertBefore('markup','tag',{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:t.languages.javascript,alias:'language-javascript'}}),t.languages.js=t.languages.javascript,t.languages.glsl=t.languages.extend('clike',{comment:[/\/\*[\w\W]*?\*\//,/\/\/(?:\\(?:\r\n|[\s\S])|.)*/],number:/\b(?:0x[\da-f]+|(?:\.\d+|\d+\.?\d*)(?:e[+-]?\d+)?)[ulf]*\b/i,keyword:/\b(?:attribute|const|uniform|varying|buffer|shared|coherent|volatile|restrict|readonly|writeonly|atomic_uint|layout|centroid|flat|smooth|noperspective|patch|sample|break|continue|do|for|while|switch|case|default|if|else|subroutine|in|out|inout|float|double|int|void|bool|true|false|invariant|precise|discard|return|d?mat[234](?:x[234])?|[ibdu]?vec[234]|uint|lowp|mediump|highp|precision|[iu]?sampler[123]D|[iu]?samplerCube|sampler[12]DShadow|samplerCubeShadow|[iu]?sampler[12]DArray|sampler[12]DArrayShadow|[iu]?sampler2DRect|sampler2DRectShadow|[iu]?samplerBuffer|[iu]?sampler2DMS(?:Array)?|[iu]?samplerCubeArray|samplerCubeArrayShadow|[iu]?image[123]D|[iu]?image2DRect|[iu]?imageCube|[iu]?imageBuffer|[iu]?image[12]DArray|[iu]?imageCubeArray|[iu]?image2DMS(?:Array)?|struct|common|partition|active|asm|class|union|enum|typedef|template|this|resource|goto|inline|noinline|public|static|extern|external|interface|long|short|half|fixed|unsigned|superp|input|output|hvec[234]|fvec[234]|sampler3DRect|filter|sizeof|cast|namespace|using)\b/}),t.languages.insertBefore('glsl','comment',{preprocessor:{pattern:/(^[ \t]*)#(?:(?:define|undef|if|ifdef|ifndef|else|elif|endif|error|pragma|extension|version|line)\b)?/m,lookbehind:!0,alias:'builtin'}}),a.exports=t}).call(e,t(11))},function(t){var e;!function(t){!function(n){var e=function(){function e(){this.callbacks=[],this.counter=-1}return e.prototype.add=function(n,e){return this.counter++,e&&(n=n.bind(e)),this.callbacks[this.counter]=n,this.counter},e.prototype.remove=function(t){delete this.callbacks[t]},e.prototype.clear=function(){this.callbacks={}},e.prototype.trigger=function(n){for(var e in this.callbacks)this.callbacks.hasOwnProperty(e)&&this.callbacks[e](n)},e}();n.Event=e}(t.Utils||(t.Utils={}))}(e||(e={}));var e;!function(t){!function(t){t[t.noLog=0]='noLog',t[t.error=1]='error',t[t.warning=2]='warning',t[t.info=3]='info'}(t.LogLevel||(t.LogLevel={}))}(e||(e={})),function(n){!function(e){var t=function(){function t(e){void 0===e&&(e=n.LogLevel.warning),this.level=e}return t.prototype.setLevel=function(t){this.level=t},t.prototype.error=function(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];0<this.level&&console.error(a,e)},t.prototype.warn=function(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];1<this.level&&console.warn(a,e)},t.prototype.info=function(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];2<this.level&&console.log(a,e)},t}();e.ConsoleLogger=t}(n.Utils||(n.Utils={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(){function e(){}return e.prototype.getStackTrace=function(a,e){void 0===a&&(a=0),void 0===e&&(e=0);var t=[];try{throw new Error('Errorator.')}catch(a){if(a.stack)for(var n=a.stack.split('\n'),i=0,r=n.length;i<r;i++)n[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)?t.push(n[i]):0===n[i].indexOf('    at ')?(n[i]=n[i].replace('    at ',''),t.push(n[i])):-1===n[i].indexOf('/<@http')?-1!==n[i].indexOf('@http')&&(n[i]=n[i].replace('@http',' (http'),n[i]+=')',t.push(n[i])):(n[i]=n[i].substring(n[i].indexOf('/<@http')+3),t.push(n[i]));else if(a.message)for(var n=a.message.split('\n'),i=0,r=n.length;i<r;i++)if(n[i].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var o=n[i];n[i+1]&&(o+=' at '+n[i+1],i++),t.push(o)}}t.shift();for(var i=0;i<a&&0<t.length;i++)t.shift();for(var i=0;i<e&&0<t.length;i++)t.pop();return t},e}();n.StackTrace=e}(t.Utils||(t.Utils={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(){function e(){if(window.performance&&window.performance.now)this.nowFunction=this.dateBasedPerformanceNow.bind(this);else{var t=new Date;this.nowFunction=t.getTime.bind(t)}}return e.prototype.dateBasedPerformanceNow=function(){return performance.timing.navigationStart+performance.now()},Object.defineProperty(e.prototype,'now',{get:function(){return this.nowFunction()},enumerable:!0,configurable:!0}),e}();n.Time=e}(t.Utils||(t.Utils={}))}(e||(e={}));var e;!function(n){function t(a,e){var r={};for(var n in a)a.hasOwnProperty(n)&&(r[n]=a[n]);for(var n in e)r.hasOwnProperty(n)||(r[n]=e[n]);return r}n.merge=t}(e||(e={}));var e;!function(t){!function(t){t[t.Equal=0]='Equal',t[t.Different=1]='Different',t[t.OnlyInA=2]='OnlyInA',t[t.OnlyInB=3]='OnlyInB'}(t.CaptureComparisonStatus||(t.CaptureComparisonStatus={}))}(e||(e={}));var e;!function(a){var e=function(){function t(){}return t.isWebGlConstant=function(e){return null!==a.WebGlConstantsByValue[e]&&void 0!==a.WebGlConstantsByValue[e]},t.stringifyWebGlConstant=function(e,t){if(0===e){var n=this.zeroMeaningByCommand[t];return n||'0'}if(1===e){var n=this.oneMeaningByCommand[t];return n||'1'}var o=a.WebGlConstantsByValue[e];return o?o.name:e+''},t.DEPTH_BUFFER_BIT={name:'DEPTH_BUFFER_BIT',value:256,description:'Passed to clear to clear the current depth buffer.'},t.STENCIL_BUFFER_BIT={name:'STENCIL_BUFFER_BIT',value:1024,description:'Passed to clear to clear the current stencil buffer.'},t.COLOR_BUFFER_BIT={name:'COLOR_BUFFER_BIT',value:16384,description:'Passed to clear to clear the current color buffer.'},t.POINTS={name:'POINTS',value:0,description:'Passed to drawElements or drawArrays to draw single points.'},t.LINES={name:'LINES',value:1,description:'Passed to drawElements or drawArrays to draw lines. Each vertex connects to the one after it.'},t.LINE_LOOP={name:'LINE_LOOP',value:2,description:'Passed to drawElements or drawArrays to draw lines. Each set of two vertices is treated as a separate line segment.'},t.LINE_STRIP={name:'LINE_STRIP',value:3,description:'Passed to drawElements or drawArrays to draw a connected group of line segments from the first vertex to the last.'},t.TRIANGLES={name:'TRIANGLES',value:4,description:'Passed to drawElements or drawArrays to draw triangles. Each set of three vertices creates a separate triangle.'},t.TRIANGLE_STRIP={name:'TRIANGLE_STRIP',value:5,description:'Passed to drawElements or drawArrays to draw a connected group of triangles.'},t.TRIANGLE_FAN={name:'TRIANGLE_FAN',value:6,description:'Passed to drawElements or drawArrays to draw a connected group of triangles. Each vertex connects to the previous and the first vertex in the fan.'},t.ZERO={name:'ZERO',value:0,description:'Passed to blendFunc or blendFuncSeparate to turn off a component.'},t.ONE={name:'ONE',value:1,description:'Passed to blendFunc or blendFuncSeparate to turn on a component.'},t.SRC_COLOR={name:'SRC_COLOR',value:768,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the source elements color.'},t.ONE_MINUS_SRC_COLOR={name:'ONE_MINUS_SRC_COLOR',value:769,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source elements color.'},t.SRC_ALPHA={name:'SRC_ALPHA',value:770,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the source\'s alpha.'},t.ONE_MINUS_SRC_ALPHA={name:'ONE_MINUS_SRC_ALPHA',value:771,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source\'s alpha.'},t.DST_ALPHA={name:'DST_ALPHA',value:772,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the destination\'s alpha.'},t.ONE_MINUS_DST_ALPHA={name:'ONE_MINUS_DST_ALPHA',value:773,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination\'s alpha.'},t.DST_COLOR={name:'DST_COLOR',value:774,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the destination\'s color.'},t.ONE_MINUS_DST_COLOR={name:'ONE_MINUS_DST_COLOR',value:775,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination\'s color.'},t.SRC_ALPHA_SATURATE={name:'SRC_ALPHA_SATURATE',value:776,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the minimum of source\'s alpha or one minus the destination\'s alpha.'},t.CONSTANT_COLOR={name:'CONSTANT_COLOR',value:32769,description:'Passed to blendFunc or blendFuncSeparate to specify a constant color blend function.'},t.ONE_MINUS_CONSTANT_COLOR={name:'ONE_MINUS_CONSTANT_COLOR',value:32770,description:'Passed to blendFunc or blendFuncSeparate to specify one minus a constant color blend function.'},t.CONSTANT_ALPHA={name:'CONSTANT_ALPHA',value:32771,description:'Passed to blendFunc or blendFuncSeparate to specify a constant alpha blend function.'},t.ONE_MINUS_CONSTANT_ALPHA={name:'ONE_MINUS_CONSTANT_ALPHA',value:32772,description:'Passed to blendFunc or blendFuncSeparate to specify one minus a constant alpha blend function.'},t.FUNC_ADD={name:'FUNC_ADD',value:32774,description:'Passed to blendEquation or blendEquationSeparate to set an addition blend function.'},t.FUNC_SUBSTRACT={name:'FUNC_SUBSTRACT',value:32778,description:'Passed to blendEquation or blendEquationSeparate to specify a subtraction blend function (source - destination).'},t.FUNC_REVERSE_SUBTRACT={name:'FUNC_REVERSE_SUBTRACT',value:32779,description:'Passed to blendEquation or blendEquationSeparate to specify a reverse subtraction blend function (destination - source).'},t.BLEND_EQUATION={name:'BLEND_EQUATION',value:32777,description:'Passed to getParameter to get the current RGB blend function.'},t.BLEND_EQUATION_RGB={name:'BLEND_EQUATION_RGB',value:32777,description:'Passed to getParameter to get the current RGB blend function. Same as BLEND_EQUATION'},t.BLEND_EQUATION_ALPHA={name:'BLEND_EQUATION_ALPHA',value:34877,description:'Passed to getParameter to get the current alpha blend function. Same as BLEND_EQUATION'},t.BLEND_DST_RGB={name:'BLEND_DST_RGB',value:32968,description:'Passed to getParameter to get the current destination RGB blend function.'},t.BLEND_SRC_RGB={name:'BLEND_SRC_RGB',value:32969,description:'Passed to getParameter to get the current destination RGB blend function.'},t.BLEND_DST_ALPHA={name:'BLEND_DST_ALPHA',value:32970,description:'Passed to getParameter to get the current destination alpha blend function.'},t.BLEND_SRC_ALPHA={name:'BLEND_SRC_ALPHA',value:32971,description:'Passed to getParameter to get the current source alpha blend function.'},t.BLEND_COLOR={name:'BLEND_COLOR',value:32773,description:'Passed to getParameter to return a the current blend color.'},t.ARRAY_BUFFER_BINDING={name:'ARRAY_BUFFER_BINDING',value:34964,description:'Passed to getParameter to get the array buffer binding.'},t.ELEMENT_ARRAY_BUFFER_BINDING={name:'ELEMENT_ARRAY_BUFFER_BINDING',value:34965,description:'Passed to getParameter to get the current element array buffer.'},t.LINE_WIDTH={name:'LINE_WIDTH',value:2849,description:'Passed to getParameter to get the current lineWidth (set by the lineWidth method).'},t.ALIASED_POINT_SIZE_RANGE={name:'ALIASED_POINT_SIZE_RANGE',value:33901,description:'Passed to getParameter to get the current size of a point drawn with gl.POINTS'},t.ALIASED_LINE_WIDTH_RANGE={name:'ALIASED_LINE_WIDTH_RANGE',value:33902,description:'Passed to getParameter to get the range of available widths for a line. Returns a length-2 array with the lo value at 0, and hight at 1.'},t.CULL_FACE_MODE={name:'CULL_FACE_MODE',value:2885,description:'Passed to getParameter to get the current value of cullFace. Should return FRONT, BACK, or FRONT_AND_BACK'},t.FRONT_FACE={name:'FRONT_FACE',value:2886,description:'Passed to getParameter to determine the current value of frontFace. Should return CW or CCW.'},t.DEPTH_RANGE={name:'DEPTH_RANGE',value:2928,description:'Passed to getParameter to return a length-2 array of floats giving the current depth range.'},t.DEPTH_WRITEMASK={name:'DEPTH_WRITEMASK',value:2930,description:'Passed to getParameter to determine if the depth write mask is enabled.'},t.DEPTH_CLEAR_VALUE={name:'DEPTH_CLEAR_VALUE',value:2931,description:'Passed to getParameter to determine the current depth clear value.'},t.DEPTH_FUNC={name:'DEPTH_FUNC',value:2932,description:'Passed to getParameter to get the current depth function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL.'},t.STENCIL_CLEAR_VALUE={name:'STENCIL_CLEAR_VALUE',value:2961,description:'Passed to getParameter to get the value the stencil will be cleared to.'},t.STENCIL_FUNC={name:'STENCIL_FUNC',value:2962,description:'Passed to getParameter to get the current stencil function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL.'},t.STENCIL_FAIL={name:'STENCIL_FAIL',value:2964,description:'Passed to getParameter to get the current stencil fail function. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP.'},t.STENCIL_PASS_DEPTH_FAIL={name:'STENCIL_PASS_DEPTH_FAIL',value:2965,description:'Passed to getParameter to get the current stencil fail function should the depth buffer test fail. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP.'},t.STENCIL_PASS_DEPTH_PASS={name:'STENCIL_PASS_DEPTH_PASS',value:2966,description:'Passed to getParameter to get the current stencil fail function should the depth buffer test pass. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP.'},t.STENCIL_REF={name:'STENCIL_REF',value:2967,description:'Passed to getParameter to get the reference value used for stencil tests.'},t.STENCIL_VALUE_MASK={name:'STENCIL_VALUE_MASK',value:2963,description:'\xA0'},t.STENCIL_WRITEMASK={name:'STENCIL_WRITEMASK',value:2968,description:'\xA0'},t.STENCIL_BACK_FUNC={name:'STENCIL_BACK_FUNC',value:34816,description:'\xA0'},t.STENCIL_BACK_FAIL={name:'STENCIL_BACK_FAIL',value:34817,description:'\xA0'},t.STENCIL_BACK_PASS_DEPTH_FAIL={name:'STENCIL_BACK_PASS_DEPTH_FAIL',value:34818,description:'\xA0'},t.STENCIL_BACK_PASS_DEPTH_PASS={name:'STENCIL_BACK_PASS_DEPTH_PASS',value:34819,description:'\xA0'},t.STENCIL_BACK_REF={name:'STENCIL_BACK_REF',value:36003,description:'\xA0'},t.STENCIL_BACK_VALUE_MASK={name:'STENCIL_BACK_VALUE_MASK',value:36004,description:'\xA0'},t.STENCIL_BACK_WRITEMASK={name:'STENCIL_BACK_WRITEMASK',value:36005,description:'\xA0'},t.VIEWPORT={name:'VIEWPORT',value:2978,description:'Returns an Int32Array with four elements for the current viewport dimensions.'},t.SCISSOR_BOX={name:'SCISSOR_BOX',value:3088,description:'Returns an Int32Array with four elements for the current scissor box dimensions.'},t.COLOR_CLEAR_VALUE={name:'COLOR_CLEAR_VALUE',value:3106,description:'\xA0'},t.COLOR_WRITEMASK={name:'COLOR_WRITEMASK',value:3107,description:'\xA0'},t.UNPACK_ALIGNMENT={name:'UNPACK_ALIGNMENT',value:3317,description:'\xA0'},t.PACK_ALIGNMENT={name:'PACK_ALIGNMENT',value:3333,description:'\xA0'},t.MAX_TEXTURE_SIZE={name:'MAX_TEXTURE_SIZE',value:3379,description:'\xA0'},t.MAX_VIEWPORT_DIMS={name:'MAX_VIEWPORT_DIMS',value:3386,description:'\xA0'},t.SUBPIXEL_BITS={name:'SUBPIXEL_BITS',value:3408,description:'\xA0'},t.RED_BITS={name:'RED_BITS',value:3410,description:'\xA0'},t.GREEN_BITS={name:'GREEN_BITS',value:3411,description:'\xA0'},t.BLUE_BITS={name:'BLUE_BITS',value:3412,description:'\xA0'},t.ALPHA_BITS={name:'ALPHA_BITS',value:3413,description:'\xA0'},t.DEPTH_BITS={name:'DEPTH_BITS',value:3414,description:'\xA0'},t.STENCIL_BITS={name:'STENCIL_BITS',value:3415,description:'\xA0'},t.POLYGON_OFFSET_UNITS={name:'POLYGON_OFFSET_UNITS',value:10752,description:'\xA0'},t.POLYGON_OFFSET_FACTOR={name:'POLYGON_OFFSET_FACTOR',value:32824,description:'\xA0'},t.TEXTURE_BINDING_2D={name:'TEXTURE_BINDING_2D',value:32873,description:'\xA0'},t.SAMPLE_BUFFERS={name:'SAMPLE_BUFFERS',value:32936,description:'\xA0'},t.SAMPLES={name:'SAMPLES',value:32937,description:'\xA0'},t.SAMPLE_COVERAGE_VALUE={name:'SAMPLE_COVERAGE_VALUE',value:32938,description:'\xA0'},t.SAMPLE_COVERAGE_INVERT={name:'SAMPLE_COVERAGE_INVERT',value:32939,description:'\xA0'},t.COMPRESSED_TEXTURE_FORMATS={name:'COMPRESSED_TEXTURE_FORMATS',value:34467,description:'\xA0'},t.VENDOR={name:'VENDOR',value:7936,description:'\xA0'},t.RENDERER={name:'RENDERER',value:7937,description:'\xA0'},t.VERSION={name:'VERSION',value:7938,description:'\xA0'},t.IMPLEMENTATION_COLOR_READ_TYPE={name:'IMPLEMENTATION_COLOR_READ_TYPE',value:35738,description:'\xA0'},t.IMPLEMENTATION_COLOR_READ_FORMAT={name:'IMPLEMENTATION_COLOR_READ_FORMAT',value:35739,description:'\xA0'},t.BROWSER_DEFAULT_WEBGL={name:'BROWSER_DEFAULT_WEBGL',value:37444,description:'\xA0'},t.STATIC_DRAW={name:'STATIC_DRAW',value:35044,description:'Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and not change often.'},t.STREAM_DRAW={name:'STREAM_DRAW',value:35040,description:'Passed to bufferData as a hint about whether the contents of the buffer are likely to not be used often.'},t.DYNAMIC_DRAW={name:'DYNAMIC_DRAW',value:35048,description:'Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and change often.'},t.ARRAY_BUFFER={name:'ARRAY_BUFFER',value:34962,description:'Passed to bindBuffer or bufferData to specify the type of buffer being used.'},t.ELEMENT_ARRAY_BUFFER={name:'ELEMENT_ARRAY_BUFFER',value:34963,description:'Passed to bindBuffer or bufferData to specify the type of buffer being used.'},t.BUFFER_SIZE={name:'BUFFER_SIZE',value:34660,description:'Passed to getBufferParameter to get a buffer\'s size.'},t.BUFFER_USAGE={name:'BUFFER_USAGE',value:34661,description:'Passed to\xA0getBufferParameter to get the hint for the buffer passed in when it was created.'},t.CURRENT_VERTEX_ATTRIB={name:'CURRENT_VERTEX_ATTRIB',value:34342,description:'Passed to getVertexAttrib to read back the current vertex attribute.'},t.VERTEX_ATTRIB_ARRAY_ENABLED={name:'VERTEX_ATTRIB_ARRAY_ENABLED',value:34338,description:'\xA0'},t.VERTEX_ATTRIB_ARRAY_SIZE={name:'VERTEX_ATTRIB_ARRAY_SIZE',value:34339,description:'\xA0'},t.VERTEX_ATTRIB_ARRAY_STRIDE={name:'VERTEX_ATTRIB_ARRAY_STRIDE',value:34340,description:'\xA0'},t.VERTEX_ATTRIB_ARRAY_TYPE={name:'VERTEX_ATTRIB_ARRAY_TYPE',value:34341,description:'\xA0'},t.VERTEX_ATTRIB_ARRAY_NORMALIZED={name:'VERTEX_ATTRIB_ARRAY_NORMALIZED',value:34922,description:'\xA0'},t.VERTEX_ATTRIB_ARRAY_POINTER={name:'VERTEX_ATTRIB_ARRAY_POINTER',value:34373,description:'\xA0'},t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING={name:'VERTEX_ATTRIB_ARRAY_BUFFER_BINDING',value:34975,description:'\xA0'},t.CULL_FACE={name:'CULL_FACE',value:2884,description:'Passed to enable/disable to turn on/off culling. Can also be used with getParameter to find the current culling method.'},t.FRONT={name:'FRONT',value:1028,description:'Passed to cullFace to specify that only front faces should be drawn.'},t.BACK={name:'BACK',value:1029,description:'Passed to cullFace to specify that only back faces should be drawn.'},t.FRONT_AND_BACK={name:'FRONT_AND_BACK',value:1032,description:'Passed to\xA0cullFace to specify that front and back faces should be drawn.'},t.BLEND={name:'BLEND',value:3042,description:'Passed to enable/disable to turn on/off blending. Can also be used with getParameter to find the current blending method.'},t.DEPTH_TEST={name:'DEPTH_TEST',value:2929,description:'Passed to enable/disable to turn on/off the depth test. Can also be used with getParameter to query the depth test.'},t.DITHER={name:'DITHER',value:3024,description:'Passed to enable/disable to turn on/off dithering. Can also be used with getParameter to find the current dithering method.'},t.POLYGON_OFFSET_FILL={name:'POLYGON_OFFSET_FILL',value:32823,description:'Passed to enable/disable to turn on/off the polygon offset. Useful for rendering hidden-line images, decals, and or solids with highlighted edges. Can also be used with getParameter to query the scissor test.'},t.SAMPLE_ALPHA_TO_COVERAGE={name:'SAMPLE_ALPHA_TO_COVERAGE',value:32926,description:'Passed to enable/disable to turn on/off the alpha to coverage. Used in multi-sampling alpha channels.'},t.SAMPLE_COVERAGE={name:'SAMPLE_COVERAGE',value:32928,description:'Passed to enable/disable to turn on/off the sample coverage. Used in multi-sampling.'},t.SCISSOR_TEST={name:'SCISSOR_TEST',value:3089,description:'Passed to enable/disable to turn on/off the scissor test. Can also be used with getParameter to query the scissor test.'},t.STENCIL_TEST={name:'STENCIL_TEST',value:2960,description:'Passed to enable/disable to turn on/off the stencil test. Can also be used with getParameter to query the stencil test.'},t.NO_ERROR={name:'NO_ERROR',value:0,description:'Returned from getError.'},t.INVALID_ENUM={name:'INVALID_ENUM',value:1280,description:'Returned from getError.'},t.INVALID_VALUE={name:'INVALID_VALUE',value:1281,description:'Returned from getError.'},t.INVALID_OPERATION={name:'INVALID_OPERATION',value:1282,description:'Returned from getError.'},t.OUT_OF_MEMORY={name:'OUT_OF_MEMORY',value:1285,description:'Returned from getError.'},t.CONTEXT_LOST_WEBGL={name:'CONTEXT_LOST_WEBGL',value:37442,description:'Returned from getError.'},t.CW={name:'CW',value:2304,description:'Passed to frontFace to specify the front face of a polygon is drawn in the clockwise direction'},t.CCW={name:'CCW',value:2305,description:'Passed to frontFace to specify the front face of a polygon is drawn in the counter clockwise direction'},t.DONT_CARE={name:'DONT_CARE',value:4352,description:'There is no preference for this behavior.'},t.FASTEST={name:'FASTEST',value:4353,description:'The most efficient behavior should be used.'},t.NICEST={name:'NICEST',value:4354,description:'The most correct or the highest quality option should be used.'},t.GENERATE_MIPMAP_HINT={name:'GENERATE_MIPMAP_HINT',value:33170,description:'Hint for the quality of filtering when generating mipmap images with WebGLRenderingContext.generateMipmap().'},t.BYTE={name:'BYTE',value:5120,description:'\xA0'},t.UNSIGNED_BYTE={name:'UNSIGNED_BYTE',value:5121,description:'\xA0'},t.SHORT={name:'SHORT',value:5122,description:'\xA0'},t.UNSIGNED_SHORT={name:'UNSIGNED_SHORT',value:5123,description:'\xA0'},t.INT={name:'INT',value:5124,description:'\xA0'},t.UNSIGNED_INT={name:'UNSIGNED_INT',value:5125,description:'\xA0'},t.FLOAT={name:'FLOAT',value:5126,description:'\xA0'},t.DEPTH_COMPONENT={name:'DEPTH_COMPONENT',value:6402,description:'\xA0'},t.ALPHA={name:'ALPHA',value:6406,description:'\xA0'},t.RGB={name:'RGB',value:6407,description:'\xA0'},t.RGBA={name:'RGBA',value:6408,description:'\xA0'},t.LUMINANCE={name:'LUMINANCE',value:6409,description:'\xA0'},t.LUMINANCE_ALPHA={name:'LUMINANCE_ALPHA',value:6410,description:'\xA0'},t.UNSIGNED_SHORT_4_4_4_4={name:'UNSIGNED_SHORT_4_4_4_4',value:32819,description:'\xA0'},t.UNSIGNED_SHORT_5_5_5_1={name:'UNSIGNED_SHORT_5_5_5_1',value:32820,description:'\xA0'},t.UNSIGNED_SHORT_5_6_5={name:'UNSIGNED_SHORT_5_6_5',value:33635,description:'\xA0'},t.FRAGMENT_SHADER={name:'FRAGMENT_SHADER',value:35632,description:'Passed to createShader to define a fragment shader.'},t.VERTEX_SHADER={name:'VERTEX_SHADER',value:35633,description:'Passed to createShader to define a vertex shader'},t.COMPILE_STATUS={name:'COMPILE_STATUS',value:35713,description:'Passed to getShaderParamter to get the status of the compilation. Returns false if the shader was not compiled. You can then query getShaderInfoLog to find the exact error'},t.DELETE_STATUS={name:'DELETE_STATUS',value:35712,description:'Passed to getShaderParamter to determine if a shader was deleted via deleteShader. Returns true if it was, false otherwise.'},t.LINK_STATUS={name:'LINK_STATUS',value:35714,description:'Passed to getProgramParameter after calling linkProgram to determine if a program was linked correctly. Returns false if there were errors. Use getProgramInfoLog to find the exact error.'},t.VALIDATE_STATUS={name:'VALIDATE_STATUS',value:35715,description:'Passed to getProgramParameter after calling validateProgram to determine if it is valid. Returns false if errors were found.'},t.ATTACHED_SHADERS={name:'ATTACHED_SHADERS',value:35717,description:'Passed to getProgramParameter after calling attachShader to determine if the shader was attached correctly. Returns false if errors occurred.'},t.ACTIVE_ATTRIBUTES={name:'ACTIVE_ATTRIBUTES',value:35721,description:'Passed to getProgramParameter to get the number of attributes active in a program.'},t.ACTIVE_UNIFORMS={name:'ACTIVE_UNIFORMS',value:35718,description:'Passed to getProgramParamter to get the number of uniforms active in a program.'},t.MAX_VERTEX_ATTRIBS={name:'MAX_VERTEX_ATTRIBS',value:34921,description:'\xA0'},t.MAX_VERTEX_UNIFORM_VECTORS={name:'MAX_VERTEX_UNIFORM_VECTORS',value:36347,description:'\xA0'},t.MAX_VARYING_VECTORS={name:'MAX_VARYING_VECTORS',value:36348,description:'\xA0'},t.MAX_COMBINED_TEXTURE_IMAGE_UNITS={name:'MAX_COMBINED_TEXTURE_IMAGE_UNITS',value:35661,description:'\xA0'},t.MAX_VERTEX_TEXTURE_IMAGE_UNITS={name:'MAX_VERTEX_TEXTURE_IMAGE_UNITS',value:35660,description:'\xA0'},t.MAX_TEXTURE_IMAGE_UNITS={name:'MAX_TEXTURE_IMAGE_UNITS',value:34930,description:'Implementation dependent number of maximum texture units. At least 8.'},t.MAX_FRAGMENT_UNIFORM_VECTORS={name:'MAX_FRAGMENT_UNIFORM_VECTORS',value:36349,description:'\xA0'},t.SHADER_TYPE={name:'SHADER_TYPE',value:35663,description:'\xA0'},t.SHADING_LANGUAGE_VERSION={name:'SHADING_LANGUAGE_VERSION',value:35724,description:'\xA0'},t.CURRENT_PROGRAM={name:'CURRENT_PROGRAM',value:35725,description:'\xA0'},t.NEVER={name:'NEVER',value:512,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will never pass. i.e. Nothing will be drawn.'},t.ALWAYS={name:'ALWAYS',value:519,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will always pass. i.e. Pixels will be drawn in the order they are drawn.'},t.LESS={name:'LESS',value:513,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than the stored value.'},t.EQUAL={name:'EQUAL',value:514,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is equals to the stored value.'},t.LEQUAL={name:'LEQUAL',value:515,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than or equal to the stored value.'},t.GREATER={name:'GREATER',value:516,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than the stored value.'},t.GEQUAL={name:'GEQUAL',value:518,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than or equal to the stored value.'},t.NOTEQUAL={name:'NOTEQUAL',value:517,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is not equal to the stored value.'},t.KEEP={name:'KEEP',value:7680,description:'\xA0'},t.REPLACE={name:'REPLACE',value:7681,description:'\xA0'},t.INCR={name:'INCR',value:7682,description:'\xA0'},t.DECR={name:'DECR',value:7683,description:'\xA0'},t.INVERT={name:'INVERT',value:5386,description:'\xA0'},t.INCR_WRAP={name:'INCR_WRAP',value:34055,description:'\xA0'},t.DECR_WRAP={name:'DECR_WRAP',value:34056,description:'\xA0'},t.NEAREST={name:'NEAREST',value:9728,description:'\xA0'},t.LINEAR={name:'LINEAR',value:9729,description:'\xA0'},t.NEAREST_MIPMAP_NEAREST={name:'NEAREST_MIPMAP_NEAREST',value:9984,description:'\xA0'},t.LINEAR_MIPMAP_NEAREST={name:'LINEAR_MIPMAP_NEAREST',value:9985,description:'\xA0'},t.NEAREST_MIPMAP_LINEAR={name:'NEAREST_MIPMAP_LINEAR',value:9986,description:'\xA0'},t.LINEAR_MIPMAP_LINEAR={name:'LINEAR_MIPMAP_LINEAR',value:9987,description:'\xA0'},t.TEXTURE_MAG_FILTER={name:'TEXTURE_MAG_FILTER',value:10240,description:'\xA0'},t.TEXTURE_MIN_FILTER={name:'TEXTURE_MIN_FILTER',value:10241,description:'\xA0'},t.TEXTURE_WRAP_S={name:'TEXTURE_WRAP_S',value:10242,description:'\xA0'},t.TEXTURE_WRAP_T={name:'TEXTURE_WRAP_T',value:10243,description:'\xA0'},t.TEXTURE_2D={name:'TEXTURE_2D',value:3553,description:'\xA0'},t.TEXTURE={name:'TEXTURE',value:5890,description:'\xA0'},t.TEXTURE_CUBE_MAP={name:'TEXTURE_CUBE_MAP',value:34067,description:'\xA0'},t.TEXTURE_BINDING_CUBE_MAP={name:'TEXTURE_BINDING_CUBE_MAP',value:34068,description:'\xA0'},t.TEXTURE_CUBE_MAP_POSITIVE_X={name:'TEXTURE_CUBE_MAP_POSITIVE_X',value:34069,description:'\xA0'},t.TEXTURE_CUBE_MAP_NEGATIVE_X={name:'TEXTURE_CUBE_MAP_NEGATIVE_X',value:34070,description:'\xA0'},t.TEXTURE_CUBE_MAP_POSITIVE_Y={name:'TEXTURE_CUBE_MAP_POSITIVE_Y',value:34071,description:'\xA0'},t.TEXTURE_CUBE_MAP_NEGATIVE_Y={name:'TEXTURE_CUBE_MAP_NEGATIVE_Y',value:34072,description:'\xA0'},t.TEXTURE_CUBE_MAP_POSITIVE_Z={name:'TEXTURE_CUBE_MAP_POSITIVE_Z',value:34073,description:'\xA0'},t.TEXTURE_CUBE_MAP_NEGATIVE_Z={name:'TEXTURE_CUBE_MAP_NEGATIVE_Z',value:34074,description:'\xA0'},t.MAX_CUBE_MAP_TEXTURE_SIZE={name:'MAX_CUBE_MAP_TEXTURE_SIZE',value:34076,description:'\xA0'},t.TEXTURE0={name:'TEXTURE0',value:33984,description:'A texture unit.'},t.TEXTURE1={name:'TEXTURE1',value:33985,description:'A texture unit.'},t.TEXTURE2={name:'TEXTURE2',value:33986,description:'A texture unit.'},t.TEXTURE3={name:'TEXTURE3',value:33987,description:'A texture unit.'},t.TEXTURE4={name:'TEXTURE4',value:33988,description:'A texture unit.'},t.TEXTURE5={name:'TEXTURE5',value:33989,description:'A texture unit.'},t.TEXTURE6={name:'TEXTURE6',value:33990,description:'A texture unit.'},t.TEXTURE7={name:'TEXTURE7',value:33991,description:'A texture unit.'},t.TEXTURE8={name:'TEXTURE8',value:33992,description:'A texture unit.'},t.TEXTURE9={name:'TEXTURE9',value:33993,description:'A texture unit.'},t.TEXTURE10={name:'TEXTURE10',value:33994,description:'A texture unit.'},t.TEXTURE11={name:'TEXTURE11',value:33995,description:'A texture unit.'},t.TEXTURE12={name:'TEXTURE12',value:33996,description:'A texture unit.'},t.TEXTURE13={name:'TEXTURE13',value:33997,description:'A texture unit.'},t.TEXTURE14={name:'TEXTURE14',value:33998,description:'A texture unit.'},t.TEXTURE15={name:'TEXTURE15',value:33999,description:'A texture unit.'},t.TEXTURE16={name:'TEXTURE16',value:34e3,description:'A texture unit.'},t.TEXTURE17={name:'TEXTURE17',value:34001,description:'A texture unit.'},t.TEXTURE18={name:'TEXTURE18',value:34002,description:'A texture unit.'},t.TEXTURE19={name:'TEXTURE19',value:34003,description:'A texture unit.'},t.TEXTURE20={name:'TEXTURE20',value:34004,description:'A texture unit.'},t.TEXTURE21={name:'TEXTURE21',value:34005,description:'A texture unit.'},t.TEXTURE22={name:'TEXTURE22',value:34006,description:'A texture unit.'},t.TEXTURE23={name:'TEXTURE23',value:34007,description:'A texture unit.'},t.TEXTURE24={name:'TEXTURE24',value:34008,description:'A texture unit.'},t.TEXTURE25={name:'TEXTURE25',value:34009,description:'A texture unit.'},t.TEXTURE26={name:'TEXTURE26',value:34010,description:'A texture unit.'},t.TEXTURE27={name:'TEXTURE27',value:34011,description:'A texture unit.'},t.TEXTURE28={name:'TEXTURE28',value:34012,description:'A texture unit.'},t.TEXTURE29={name:'TEXTURE29',value:34013,description:'A texture unit.'},t.TEXTURE30={name:'TEXTURE30',value:34014,description:'A texture unit.'},t.TEXTURE31={name:'TEXTURE31',value:34015,description:'A texture unit.'},t.ACTIVE_TEXTURE={name:'ACTIVE_TEXTURE',value:34016,description:'The current active texture unit.'},t.REPEAT={name:'REPEAT',value:10497,description:'\xA0'},t.CLAMP_TO_EDGE={name:'CLAMP_TO_EDGE',value:33071,description:'\xA0'},t.MIRRORED_REPEAT={name:'MIRRORED_REPEAT',value:33648,description:'\xA0'},t.FLOAT_VEC2={name:'FLOAT_VEC2',value:35664,description:'\xA0'},t.FLOAT_VEC3={name:'FLOAT_VEC3',value:35665,description:'\xA0'},t.FLOAT_VEC4={name:'FLOAT_VEC4',value:35666,description:'\xA0'},t.INT_VEC2={name:'INT_VEC2',value:35667,description:'\xA0'},t.INT_VEC3={name:'INT_VEC3',value:35668,description:'\xA0'},t.INT_VEC4={name:'INT_VEC4',value:35669,description:'\xA0'},t.BOOL={name:'BOOL',value:35670,description:'\xA0'},t.BOOL_VEC2={name:'BOOL_VEC2',value:35671,description:'\xA0'},t.BOOL_VEC3={name:'BOOL_VEC3',value:35672,description:'\xA0'},t.BOOL_VEC4={name:'BOOL_VEC4',value:35673,description:'\xA0'},t.FLOAT_MAT2={name:'FLOAT_MAT2',value:35674,description:'\xA0'},t.FLOAT_MAT3={name:'FLOAT_MAT3',value:35675,description:'\xA0'},t.FLOAT_MAT4={name:'FLOAT_MAT4',value:35676,description:'\xA0'},t.SAMPLER_2D={name:'SAMPLER_2D',value:35678,description:'\xA0'},t.SAMPLER_CUBE={name:'SAMPLER_CUBE',value:35680,description:'\xA0'},t.LOW_FLOAT={name:'LOW_FLOAT',value:36336,description:'\xA0'},t.MEDIUM_FLOAT={name:'MEDIUM_FLOAT',value:36337,description:'\xA0'},t.HIGH_FLOAT={name:'HIGH_FLOAT',value:36338,description:'\xA0'},t.LOW_INT={name:'LOW_INT',value:36339,description:'\xA0'},t.MEDIUM_INT={name:'MEDIUM_INT',value:36340,description:'\xA0'},t.HIGH_INT={name:'HIGH_INT',value:36341,description:'\xA0'},t.FRAMEBUFFER={name:'FRAMEBUFFER',value:36160,description:'\xA0'},t.RENDERBUFFER={name:'RENDERBUFFER',value:36161,description:'\xA0'},t.RGBA4={name:'RGBA4',value:32854,description:'\xA0'},t.RGB5_A1={name:'RGB5_A1',value:32855,description:'\xA0'},t.RGB565={name:'RGB565',value:36194,description:'\xA0'},t.DEPTH_COMPONENT16={name:'DEPTH_COMPONENT16',value:33189,description:'\xA0'},t.STENCIL_INDEX={name:'STENCIL_INDEX',value:6401,description:'\xA0'},t.STENCIL_INDEX8={name:'STENCIL_INDEX8',value:36168,description:'\xA0'},t.DEPTH_STENCIL={name:'DEPTH_STENCIL',value:34041,description:'\xA0'},t.RENDERBUFFER_WIDTH={name:'RENDERBUFFER_WIDTH',value:36162,description:'\xA0'},t.RENDERBUFFER_HEIGHT={name:'RENDERBUFFER_HEIGHT',value:36163,description:'\xA0'},t.RENDERBUFFER_INTERNAL_FORMAT={name:'RENDERBUFFER_INTERNAL_FORMAT',value:36164,description:'\xA0'},t.RENDERBUFFER_RED_SIZE={name:'RENDERBUFFER_RED_SIZE',value:36176,description:'\xA0'},t.RENDERBUFFER_GREEN_SIZE={name:'RENDERBUFFER_GREEN_SIZE',value:36177,description:'\xA0'},t.RENDERBUFFER_BLUE_SIZE={name:'RENDERBUFFER_BLUE_SIZE',value:36178,description:'\xA0'},t.RENDERBUFFER_ALPHA_SIZE={name:'RENDERBUFFER_ALPHA_SIZE',value:36179,description:'\xA0'},t.RENDERBUFFER_DEPTH_SIZE={name:'RENDERBUFFER_DEPTH_SIZE',value:36180,description:'\xA0'},t.RENDERBUFFER_STENCIL_SIZE={name:'RENDERBUFFER_STENCIL_SIZE',value:36181,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE={name:'FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE',value:36048,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME={name:'FRAMEBUFFER_ATTACHMENT_OBJECT_NAME',value:36049,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL={name:'FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL',value:36050,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE={name:'FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE',value:36051,description:'\xA0'},t.COLOR_ATTACHMENT0={name:'COLOR_ATTACHMENT0',value:36064,description:'\xA0'},t.DEPTH_ATTACHMENT={name:'DEPTH_ATTACHMENT',value:36096,description:'\xA0'},t.STENCIL_ATTACHMENT={name:'STENCIL_ATTACHMENT',value:36128,description:'\xA0'},t.DEPTH_STENCIL_ATTACHMENT={name:'DEPTH_STENCIL_ATTACHMENT',value:33306,description:'\xA0'},t.NONE={name:'NONE',value:0,description:'\xA0'},t.FRAMEBUFFER_COMPLETE={name:'FRAMEBUFFER_COMPLETE',value:36053,description:'\xA0'},t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT={name:'FRAMEBUFFER_INCOMPLETE_ATTACHMENT',value:36054,description:'\xA0'},t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT={name:'FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT',value:36055,description:'\xA0'},t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS={name:'FRAMEBUFFER_INCOMPLETE_DIMENSIONS',value:36057,description:'\xA0'},t.FRAMEBUFFER_UNSUPPORTED={name:'FRAMEBUFFER_UNSUPPORTED',value:36061,description:'\xA0'},t.FRAMEBUFFER_BINDING={name:'FRAMEBUFFER_BINDING',value:36006,description:'\xA0'},t.RENDERBUFFER_BINDING={name:'RENDERBUFFER_BINDING',value:36007,description:'\xA0'},t.MAX_RENDERBUFFER_SIZE={name:'MAX_RENDERBUFFER_SIZE',value:34024,description:'\xA0'},t.INVALID_FRAMEBUFFER_OPERATION={name:'INVALID_FRAMEBUFFER_OPERATION',value:1286,description:'\xA0'},t.UNPACK_FLIP_Y_WEBGL={name:'UNPACK_FLIP_Y_WEBGL',value:37440,description:'\xA0'},t.UNPACK_PREMULTIPLY_ALPHA_WEBGL={name:'UNPACK_PREMULTIPLY_ALPHA_WEBGL',value:37441,description:'\xA0'},t.UNPACK_COLORSPACE_CONVERSION_WEBGL={name:'UNPACK_COLORSPACE_CONVERSION_WEBGL',value:37443,description:'\xA0'},t.READ_BUFFER={name:'READ_BUFFER',value:3074,description:'\xA0'},t.UNPACK_ROW_LENGTH={name:'UNPACK_ROW_LENGTH',value:3314,description:'\xA0'},t.UNPACK_SKIP_ROWS={name:'UNPACK_SKIP_ROWS',value:3315,description:'\xA0'},t.UNPACK_SKIP_PIXELS={name:'UNPACK_SKIP_PIXELS',value:3316,description:'\xA0'},t.PACK_ROW_LENGTH={name:'PACK_ROW_LENGTH',value:3330,description:'\xA0'},t.PACK_SKIP_ROWS={name:'PACK_SKIP_ROWS',value:3331,description:'\xA0'},t.PACK_SKIP_PIXELS={name:'PACK_SKIP_PIXELS',value:3332,description:'\xA0'},t.TEXTURE_BINDING_3D={name:'TEXTURE_BINDING_3D',value:32874,description:'\xA0'},t.UNPACK_SKIP_IMAGES={name:'UNPACK_SKIP_IMAGES',value:32877,description:'\xA0'},t.UNPACK_IMAGE_HEIGHT={name:'UNPACK_IMAGE_HEIGHT',value:32878,description:'\xA0'},t.MAX_3D_TEXTURE_SIZE={name:'MAX_3D_TEXTURE_SIZE',value:32883,description:'\xA0'},t.MAX_ELEMENTS_VERTICES={name:'MAX_ELEMENTS_VERTICES',value:33e3,description:'\xA0'},t.MAX_ELEMENTS_INDICES={name:'MAX_ELEMENTS_INDICES',value:33001,description:'\xA0'},t.MAX_TEXTURE_LOD_BIAS={name:'MAX_TEXTURE_LOD_BIAS',value:34045,description:'\xA0'},t.MAX_FRAGMENT_UNIFORM_COMPONENTS={name:'MAX_FRAGMENT_UNIFORM_COMPONENTS',value:35657,description:'\xA0'},t.MAX_VERTEX_UNIFORM_COMPONENTS={name:'MAX_VERTEX_UNIFORM_COMPONENTS',value:35658,description:'\xA0'},t.MAX_ARRAY_TEXTURE_LAYERS={name:'MAX_ARRAY_TEXTURE_LAYERS',value:35071,description:'\xA0'},t.MIN_PROGRAM_TEXEL_OFFSET={name:'MIN_PROGRAM_TEXEL_OFFSET',value:35076,description:'\xA0'},t.MAX_PROGRAM_TEXEL_OFFSET={name:'MAX_PROGRAM_TEXEL_OFFSET',value:35077,description:'\xA0'},t.MAX_VARYING_COMPONENTS={name:'MAX_VARYING_COMPONENTS',value:35659,description:'\xA0'},t.FRAGMENT_SHADER_DERIVATIVE_HINT={name:'FRAGMENT_SHADER_DERIVATIVE_HINT',value:35723,description:'\xA0'},t.RASTERIZER_DISCARD={name:'RASTERIZER_DISCARD',value:35977,description:'\xA0'},t.VERTEX_ARRAY_BINDING={name:'VERTEX_ARRAY_BINDING',value:34229,description:'\xA0'},t.MAX_VERTEX_OUTPUT_COMPONENTS={name:'MAX_VERTEX_OUTPUT_COMPONENTS',value:37154,description:'\xA0'},t.MAX_FRAGMENT_INPUT_COMPONENTS={name:'MAX_FRAGMENT_INPUT_COMPONENTS',value:37157,description:'\xA0'},t.MAX_SERVER_WAIT_TIMEOUT={name:'MAX_SERVER_WAIT_TIMEOUT',value:37137,description:'\xA0'},t.MAX_ELEMENT_INDEX={name:'MAX_ELEMENT_INDEX',value:36203,description:'\xA0'},t.RED={name:'RED',value:6403,description:'\xA0'},t.RGB8={name:'RGB8',value:32849,description:'\xA0'},t.RGBA8={name:'RGBA8',value:32856,description:'\xA0'},t.RGB10_A2={name:'RGB10_A2',value:32857,description:'\xA0'},t.TEXTURE_3D={name:'TEXTURE_3D',value:32879,description:'\xA0'},t.TEXTURE_WRAP_R={name:'TEXTURE_WRAP_R',value:32882,description:'\xA0'},t.TEXTURE_MIN_LOD={name:'TEXTURE_MIN_LOD',value:33082,description:'\xA0'},t.TEXTURE_MAX_LOD={name:'TEXTURE_MAX_LOD',value:33083,description:'\xA0'},t.TEXTURE_BASE_LEVEL={name:'TEXTURE_BASE_LEVEL',value:33084,description:'\xA0'},t.TEXTURE_MAX_LEVEL={name:'TEXTURE_MAX_LEVEL',value:33085,description:'\xA0'},t.TEXTURE_COMPARE_MODE={name:'TEXTURE_COMPARE_MODE',value:34892,description:'\xA0'},t.TEXTURE_COMPARE_FUNC={name:'TEXTURE_COMPARE_FUNC',value:34893,description:'\xA0'},t.SRGB={name:'SRGB',value:35904,description:'\xA0'},t.SRGB8={name:'SRGB8',value:35905,description:'\xA0'},t.SRGB8_ALPHA8={name:'SRGB8_ALPHA8',value:35907,description:'\xA0'},t.COMPARE_REF_TO_TEXTURE={name:'COMPARE_REF_TO_TEXTURE',value:34894,description:'\xA0'},t.RGBA32F={name:'RGBA32F',value:34836,description:'\xA0'},t.RGB32F={name:'RGB32F',value:34837,description:'\xA0'},t.RGBA16F={name:'RGBA16F',value:34842,description:'\xA0'},t.RGB16F={name:'RGB16F',value:34843,description:'\xA0'},t.TEXTURE_2D_ARRAY={name:'TEXTURE_2D_ARRAY',value:35866,description:'\xA0'},t.TEXTURE_BINDING_2D_ARRAY={name:'TEXTURE_BINDING_2D_ARRAY',value:35869,description:'\xA0'},t.R11F_G11F_B10F={name:'R11F_G11F_B10F',value:35898,description:'\xA0'},t.RGB9_E5={name:'RGB9_E5',value:35901,description:'\xA0'},t.RGBA32UI={name:'RGBA32UI',value:36208,description:'\xA0'},t.RGB32UI={name:'RGB32UI',value:36209,description:'\xA0'},t.RGBA16UI={name:'RGBA16UI',value:36214,description:'\xA0'},t.RGB16UI={name:'RGB16UI',value:36215,description:'\xA0'},t.RGBA8UI={name:'RGBA8UI',value:36220,description:'\xA0'},t.RGB8UI={name:'RGB8UI',value:36221,description:'\xA0'},t.RGBA32I={name:'RGBA32I',value:36226,description:'\xA0'},t.RGB32I={name:'RGB32I',value:36227,description:'\xA0'},t.RGBA16I={name:'RGBA16I',value:36232,description:'\xA0'},t.RGB16I={name:'RGB16I',value:36233,description:'\xA0'},t.RGBA8I={name:'RGBA8I',value:36238,description:'\xA0'},t.RGB8I={name:'RGB8I',value:36239,description:'\xA0'},t.RED_INTEGER={name:'RED_INTEGER',value:36244,description:'\xA0'},t.RGB_INTEGER={name:'RGB_INTEGER',value:36248,description:'\xA0'},t.RGBA_INTEGER={name:'RGBA_INTEGER',value:36249,description:'\xA0'},t.R8={name:'R8',value:33321,description:'\xA0'},t.RG8={name:'RG8',value:33323,description:'\xA0'},t.R16F={name:'R16F',value:33325,description:'\xA0'},t.R32F={name:'R32F',value:33326,description:'\xA0'},t.RG16F={name:'RG16F',value:33327,description:'\xA0'},t.RG32F={name:'RG32F',value:33328,description:'\xA0'},t.R8I={name:'R8I',value:33329,description:'\xA0'},t.R8UI={name:'R8UI',value:33330,description:'\xA0'},t.R16I={name:'R16I',value:33331,description:'\xA0'},t.R16UI={name:'R16UI',value:33332,description:'\xA0'},t.R32I={name:'R32I',value:33333,description:'\xA0'},t.R32UI={name:'R32UI',value:33334,description:'\xA0'},t.RG8I={name:'RG8I',value:33335,description:'\xA0'},t.RG8UI={name:'RG8UI',value:33336,description:'\xA0'},t.RG16I={name:'RG16I',value:33337,description:'\xA0'},t.RG16UI={name:'RG16UI',value:33338,description:'\xA0'},t.RG32I={name:'RG32I',value:33339,description:'\xA0'},t.RG32UI={name:'RG32UI',value:33340,description:'\xA0'},t.R8_SNORM={name:'R8_SNORM',value:36756,description:'\xA0'},t.RG8_SNORM={name:'RG8_SNORM',value:36757,description:'\xA0'},t.RGB8_SNORM={name:'RGB8_SNORM',value:36758,description:'\xA0'},t.RGBA8_SNORM={name:'RGBA8_SNORM',value:36759,description:'\xA0'},t.RGB10_A2UI={name:'RGB10_A2UI',value:36975,description:'\xA0'},t.TEXTURE_IMMUTABLE_FORMAT={name:'TEXTURE_IMMUTABLE_FORMAT',value:37167,description:'\xA0'},t.TEXTURE_IMMUTABLE_LEVELS={name:'TEXTURE_IMMUTABLE_LEVELS',value:33503,description:'\xA0'},t.UNSIGNED_INT_2_10_10_10_REV={name:'UNSIGNED_INT_2_10_10_10_REV',value:33640,description:'\xA0'},t.UNSIGNED_INT_10F_11F_11F_REV={name:'UNSIGNED_INT_10F_11F_11F_REV',value:35899,description:'\xA0'},t.UNSIGNED_INT_5_9_9_9_REV={name:'UNSIGNED_INT_5_9_9_9_REV',value:35902,description:'\xA0'},t.FLOAT_32_UNSIGNED_INT_24_8_REV={name:'FLOAT_32_UNSIGNED_INT_24_8_REV',value:36269,description:'\xA0'},t.UNSIGNED_INT_24_8={name:'UNSIGNED_INT_24_8',value:34042,description:'\xA0'},t.HALF_FLOAT={name:'HALF_FLOAT',value:5131,description:'\xA0'},t.RG={name:'RG',value:33319,description:'\xA0'},t.RG_INTEGER={name:'RG_INTEGER',value:33320,description:'\xA0'},t.INT_2_10_10_10_REV={name:'INT_2_10_10_10_REV',value:36255,description:'\xA0'},t.CURRENT_QUERY={name:'CURRENT_QUERY',value:34917,description:'\xA0'},t.QUERY_RESULT={name:'QUERY_RESULT',value:34918,description:'\xA0'},t.QUERY_RESULT_AVAILABLE={name:'QUERY_RESULT_AVAILABLE',value:34919,description:'\xA0'},t.ANY_SAMPLES_PASSED={name:'ANY_SAMPLES_PASSED',value:35887,description:'\xA0'},t.ANY_SAMPLES_PASSED_CONSERVATIVE={name:'ANY_SAMPLES_PASSED_CONSERVATIVE',value:36202,description:'\xA0'},t.MAX_DRAW_BUFFERS={name:'MAX_DRAW_BUFFERS',value:34852,description:'\xA0'},t.DRAW_BUFFER0={name:'DRAW_BUFFER0',value:34853,description:'\xA0'},t.DRAW_BUFFER1={name:'DRAW_BUFFER1',value:34854,description:'\xA0'},t.DRAW_BUFFER2={name:'DRAW_BUFFER2',value:34855,description:'\xA0'},t.DRAW_BUFFER3={name:'DRAW_BUFFER3',value:34856,description:'\xA0'},t.DRAW_BUFFER4={name:'DRAW_BUFFER4',value:34857,description:'\xA0'},t.DRAW_BUFFER5={name:'DRAW_BUFFER5',value:34858,description:'\xA0'},t.DRAW_BUFFER6={name:'DRAW_BUFFER6',value:34859,description:'\xA0'},t.DRAW_BUFFER7={name:'DRAW_BUFFER7',value:34860,description:'\xA0'},t.DRAW_BUFFER8={name:'DRAW_BUFFER8',value:34861,description:'\xA0'},t.DRAW_BUFFER9={name:'DRAW_BUFFER9',value:34862,description:'\xA0'},t.DRAW_BUFFER10={name:'DRAW_BUFFER10',value:34863,description:'\xA0'},t.DRAW_BUFFER11={name:'DRAW_BUFFER11',value:34864,description:'\xA0'},t.DRAW_BUFFER12={name:'DRAW_BUFFER12',value:34865,description:'\xA0'},t.DRAW_BUFFER13={name:'DRAW_BUFFER13',value:34866,description:'\xA0'},t.DRAW_BUFFER14={name:'DRAW_BUFFER14',value:34867,description:'\xA0'},t.DRAW_BUFFER15={name:'DRAW_BUFFER15',value:34868,description:'\xA0'},t.MAX_COLOR_ATTACHMENTS={name:'MAX_COLOR_ATTACHMENTS',value:36063,description:'\xA0'},t.COLOR_ATTACHMENT1={name:'COLOR_ATTACHMENT1',value:36065,description:'\xA0'},t.COLOR_ATTACHMENT2={name:'COLOR_ATTACHMENT2',value:36066,description:'\xA0'},t.COLOR_ATTACHMENT3={name:'COLOR_ATTACHMENT3',value:36067,description:'\xA0'},t.COLOR_ATTACHMENT4={name:'COLOR_ATTACHMENT4',value:36068,description:'\xA0'},t.COLOR_ATTACHMENT5={name:'COLOR_ATTACHMENT5',value:36069,description:'\xA0'},t.COLOR_ATTACHMENT6={name:'COLOR_ATTACHMENT6',value:36070,description:'\xA0'},t.COLOR_ATTACHMENT7={name:'COLOR_ATTACHMENT7',value:36071,description:'\xA0'},t.COLOR_ATTACHMENT8={name:'COLOR_ATTACHMENT8',value:36072,description:'\xA0'},t.COLOR_ATTACHMENT9={name:'COLOR_ATTACHMENT9',value:36073,description:'\xA0'},t.COLOR_ATTACHMENT10={name:'COLOR_ATTACHMENT10',value:36074,description:'\xA0'},t.COLOR_ATTACHMENT11={name:'COLOR_ATTACHMENT11',value:36075,description:'\xA0'},t.COLOR_ATTACHMENT12={name:'COLOR_ATTACHMENT12',value:36076,description:'\xA0'},t.COLOR_ATTACHMENT13={name:'COLOR_ATTACHMENT13',value:36077,description:'\xA0'},t.COLOR_ATTACHMENT14={name:'COLOR_ATTACHMENT14',value:36078,description:'\xA0'},t.COLOR_ATTACHMENT15={name:'COLOR_ATTACHMENT15',value:36079,description:'\xA0'},t.SAMPLER_3D={name:'SAMPLER_3D',value:35679,description:'\xA0'},t.SAMPLER_2D_SHADOW={name:'SAMPLER_2D_SHADOW',value:35682,description:'\xA0'},t.SAMPLER_2D_ARRAY={name:'SAMPLER_2D_ARRAY',value:36289,description:'\xA0'},t.SAMPLER_2D_ARRAY_SHADOW={name:'SAMPLER_2D_ARRAY_SHADOW',value:36292,description:'\xA0'},t.SAMPLER_CUBE_SHADOW={name:'SAMPLER_CUBE_SHADOW',value:36293,description:'\xA0'},t.INT_SAMPLER_2D={name:'INT_SAMPLER_2D',value:36298,description:'\xA0'},t.INT_SAMPLER_3D={name:'INT_SAMPLER_3D',value:36299,description:'\xA0'},t.INT_SAMPLER_CUBE={name:'INT_SAMPLER_CUBE',value:36300,description:'\xA0'},t.INT_SAMPLER_2D_ARRAY={name:'INT_SAMPLER_2D_ARRAY',value:36303,description:'\xA0'},t.UNSIGNED_INT_SAMPLER_2D={name:'UNSIGNED_INT_SAMPLER_2D',value:36306,description:'\xA0'},t.UNSIGNED_INT_SAMPLER_3D={name:'UNSIGNED_INT_SAMPLER_3D',value:36307,description:'\xA0'},t.UNSIGNED_INT_SAMPLER_CUBE={name:'UNSIGNED_INT_SAMPLER_CUBE',value:36308,description:'\xA0'},t.UNSIGNED_INT_SAMPLER_2D_ARRAY={name:'UNSIGNED_INT_SAMPLER_2D_ARRAY',value:36311,description:'\xA0'},t.MAX_SAMPLES={name:'MAX_SAMPLES',value:36183,description:'\xA0'},t.SAMPLER_BINDING={name:'SAMPLER_BINDING',value:35097,description:'\xA0'},t.PIXEL_PACK_BUFFER={name:'PIXEL_PACK_BUFFER',value:35051,description:'\xA0'},t.PIXEL_UNPACK_BUFFER={name:'PIXEL_UNPACK_BUFFER',value:35052,description:'\xA0'},t.PIXEL_PACK_BUFFER_BINDING={name:'PIXEL_PACK_BUFFER_BINDING',value:35053,description:'\xA0'},t.PIXEL_UNPACK_BUFFER_BINDING={name:'PIXEL_UNPACK_BUFFER_BINDING',value:35055,description:'\xA0'},t.COPY_READ_BUFFER={name:'COPY_READ_BUFFER',value:36662,description:'\xA0'},t.COPY_WRITE_BUFFER={name:'COPY_WRITE_BUFFER',value:36663,description:'\xA0'},t.COPY_READ_BUFFER_BINDING={name:'COPY_READ_BUFFER_BINDING',value:36662,description:'\xA0'},t.COPY_WRITE_BUFFER_BINDING={name:'COPY_WRITE_BUFFER_BINDING',value:36663,description:'\xA0'},t.FLOAT_MAT2x3={name:'FLOAT_MAT2x3',value:35685,description:'\xA0'},t.FLOAT_MAT2x4={name:'FLOAT_MAT2x4',value:35686,description:'\xA0'},t.FLOAT_MAT3x2={name:'FLOAT_MAT3x2',value:35687,description:'\xA0'},t.FLOAT_MAT3x4={name:'FLOAT_MAT3x4',value:35688,description:'\xA0'},t.FLOAT_MAT4x2={name:'FLOAT_MAT4x2',value:35689,description:'\xA0'},t.FLOAT_MAT4x3={name:'FLOAT_MAT4x3',value:35690,description:'\xA0'},t.UNSIGNED_INT_VEC2={name:'UNSIGNED_INT_VEC2',value:36294,description:'\xA0'},t.UNSIGNED_INT_VEC3={name:'UNSIGNED_INT_VEC3',value:36295,description:'\xA0'},t.UNSIGNED_INT_VEC4={name:'UNSIGNED_INT_VEC4',value:36296,description:'\xA0'},t.UNSIGNED_NORMALIZED={name:'UNSIGNED_NORMALIZED',value:35863,description:'\xA0'},t.SIGNED_NORMALIZED={name:'SIGNED_NORMALIZED',value:36764,description:'\xA0'},t.VERTEX_ATTRIB_ARRAY_INTEGER={name:'VERTEX_ATTRIB_ARRAY_INTEGER',value:35069,description:'\xA0'},t.VERTEX_ATTRIB_ARRAY_DIVISOR={name:'VERTEX_ATTRIB_ARRAY_DIVISOR',value:35070,description:'\xA0'},t.TRANSFORM_FEEDBACK_BUFFER_MODE={name:'TRANSFORM_FEEDBACK_BUFFER_MODE',value:35967,description:'\xA0'},t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS={name:'MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS',value:35968,description:'\xA0'},t.TRANSFORM_FEEDBACK_VARYINGS={name:'TRANSFORM_FEEDBACK_VARYINGS',value:35971,description:'\xA0'},t.TRANSFORM_FEEDBACK_BUFFER_START={name:'TRANSFORM_FEEDBACK_BUFFER_START',value:35972,description:'\xA0'},t.TRANSFORM_FEEDBACK_BUFFER_SIZE={name:'TRANSFORM_FEEDBACK_BUFFER_SIZE',value:35973,description:'\xA0'},t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN={name:'TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN',value:35976,description:'\xA0'},t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS={name:'MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS',value:35978,description:'\xA0'},t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS={name:'MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS',value:35979,description:'\xA0'},t.INTERLEAVED_ATTRIBS={name:'INTERLEAVED_ATTRIBS',value:35980,description:'\xA0'},t.SEPARATE_ATTRIBS={name:'SEPARATE_ATTRIBS',value:35981,description:'\xA0'},t.TRANSFORM_FEEDBACK_BUFFER={name:'TRANSFORM_FEEDBACK_BUFFER',value:35982,description:'\xA0'},t.TRANSFORM_FEEDBACK_BUFFER_BINDING={name:'TRANSFORM_FEEDBACK_BUFFER_BINDING',value:35983,description:'\xA0'},t.TRANSFORM_FEEDBACK={name:'TRANSFORM_FEEDBACK',value:36386,description:'\xA0'},t.TRANSFORM_FEEDBACK_PAUSED={name:'TRANSFORM_FEEDBACK_PAUSED',value:36387,description:'\xA0'},t.TRANSFORM_FEEDBACK_ACTIVE={name:'TRANSFORM_FEEDBACK_ACTIVE',value:36388,description:'\xA0'},t.TRANSFORM_FEEDBACK_BINDING={name:'TRANSFORM_FEEDBACK_BINDING',value:36389,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING={name:'FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING',value:33296,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE={name:'FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE',value:33297,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_RED_SIZE={name:'FRAMEBUFFER_ATTACHMENT_RED_SIZE',value:33298,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE={name:'FRAMEBUFFER_ATTACHMENT_GREEN_SIZE',value:33299,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE={name:'FRAMEBUFFER_ATTACHMENT_BLUE_SIZE',value:33300,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE={name:'FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE',value:33301,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE={name:'FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE',value:33302,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE={name:'FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE',value:33303,description:'\xA0'},t.FRAMEBUFFER_DEFAULT={name:'FRAMEBUFFER_DEFAULT',value:33304,description:'\xA0'},t.DEPTH24_STENCIL8={name:'DEPTH24_STENCIL8',value:35056,description:'\xA0'},t.DRAW_FRAMEBUFFER_BINDING={name:'DRAW_FRAMEBUFFER_BINDING',value:36006,description:'\xA0'},t.READ_FRAMEBUFFER={name:'READ_FRAMEBUFFER',value:36008,description:'\xA0'},t.DRAW_FRAMEBUFFER={name:'DRAW_FRAMEBUFFER',value:36009,description:'\xA0'},t.READ_FRAMEBUFFER_BINDING={name:'READ_FRAMEBUFFER_BINDING',value:36010,description:'\xA0'},t.RENDERBUFFER_SAMPLES={name:'RENDERBUFFER_SAMPLES',value:36011,description:'\xA0'},t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER={name:'FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER',value:36052,description:'\xA0'},t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE={name:'FRAMEBUFFER_INCOMPLETE_MULTISAMPLE',value:36182,description:'\xA0'},t.UNIFORM_BUFFER={name:'UNIFORM_BUFFER',value:35345,description:'\xA0'},t.UNIFORM_BUFFER_BINDING={name:'UNIFORM_BUFFER_BINDING',value:35368,description:'\xA0'},t.UNIFORM_BUFFER_START={name:'UNIFORM_BUFFER_START',value:35369,description:'\xA0'},t.UNIFORM_BUFFER_SIZE={name:'UNIFORM_BUFFER_SIZE',value:35370,description:'\xA0'},t.MAX_VERTEX_UNIFORM_BLOCKS={name:'MAX_VERTEX_UNIFORM_BLOCKS',value:35371,description:'\xA0'},t.MAX_FRAGMENT_UNIFORM_BLOCKS={name:'MAX_FRAGMENT_UNIFORM_BLOCKS',value:35373,description:'\xA0'},t.MAX_COMBINED_UNIFORM_BLOCKS={name:'MAX_COMBINED_UNIFORM_BLOCKS',value:35374,description:'\xA0'},t.MAX_UNIFORM_BUFFER_BINDINGS={name:'MAX_UNIFORM_BUFFER_BINDINGS',value:35375,description:'\xA0'},t.MAX_UNIFORM_BLOCK_SIZE={name:'MAX_UNIFORM_BLOCK_SIZE',value:35376,description:'\xA0'},t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS={name:'MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS',value:35377,description:'\xA0'},t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS={name:'MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS',value:35379,description:'\xA0'},t.UNIFORM_BUFFER_OFFSET_ALIGNMENT={name:'UNIFORM_BUFFER_OFFSET_ALIGNMENT',value:35380,description:'\xA0'},t.ACTIVE_UNIFORM_BLOCKS={name:'ACTIVE_UNIFORM_BLOCKS',value:35382,description:'\xA0'},t.UNIFORM_TYPE={name:'UNIFORM_TYPE',value:35383,description:'\xA0'},t.UNIFORM_SIZE={name:'UNIFORM_SIZE',value:35384,description:'\xA0'},t.UNIFORM_BLOCK_INDEX={name:'UNIFORM_BLOCK_INDEX',value:35386,description:'\xA0'},t.UNIFORM_OFFSET={name:'UNIFORM_OFFSET',value:35387,description:'\xA0'},t.UNIFORM_ARRAY_STRIDE={name:'UNIFORM_ARRAY_STRIDE',value:35388,description:'\xA0'},t.UNIFORM_MATRIX_STRIDE={name:'UNIFORM_MATRIX_STRIDE',value:35389,description:'\xA0'},t.UNIFORM_IS_ROW_MAJOR={name:'UNIFORM_IS_ROW_MAJOR',value:35390,description:'\xA0'},t.UNIFORM_BLOCK_BINDING={name:'UNIFORM_BLOCK_BINDING',value:35391,description:'\xA0'},t.UNIFORM_BLOCK_DATA_SIZE={name:'UNIFORM_BLOCK_DATA_SIZE',value:35392,description:'\xA0'},t.UNIFORM_BLOCK_ACTIVE_UNIFORMS={name:'UNIFORM_BLOCK_ACTIVE_UNIFORMS',value:35394,description:'\xA0'},t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES={name:'UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES',value:35395,description:'\xA0'},t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER={name:'UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER',value:35396,description:'\xA0'},t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER={name:'UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER',value:35398,description:'\xA0'},t.OBJECT_TYPE={name:'OBJECT_TYPE',value:37138,description:'\xA0'},t.SYNC_CONDITION={name:'SYNC_CONDITION',value:37139,description:'\xA0'},t.SYNC_STATUS={name:'SYNC_STATUS',value:37140,description:'\xA0'},t.SYNC_FLAGS={name:'SYNC_FLAGS',value:37141,description:'\xA0'},t.SYNC_FENCE={name:'SYNC_FENCE',value:37142,description:'\xA0'},t.SYNC_GPU_COMMANDS_COMPLETE={name:'SYNC_GPU_COMMANDS_COMPLETE',value:37143,description:'\xA0'},t.UNSIGNALED={name:'UNSIGNALED',value:37144,description:'\xA0'},t.SIGNALED={name:'SIGNALED',value:37145,description:'\xA0'},t.ALREADY_SIGNALED={name:'ALREADY_SIGNALED',value:37146,description:'\xA0'},t.TIMEOUT_EXPIRED={name:'TIMEOUT_EXPIRED',value:37147,description:'\xA0'},t.CONDITION_SATISFIED={name:'CONDITION_SATISFIED',value:37148,description:'\xA0'},t.WAIT_FAILED={name:'WAIT_FAILED',value:37149,description:'\xA0'},t.SYNC_FLUSH_COMMANDS_BIT={name:'SYNC_FLUSH_COMMANDS_BIT',value:1,description:'\xA0'},t.COLOR={name:'COLOR',value:6144,description:'\xA0'},t.DEPTH={name:'DEPTH',value:6145,description:'\xA0'},t.STENCIL={name:'STENCIL',value:6146,description:'\xA0'},t.MIN={name:'MIN',value:32775,description:'\xA0'},t.MAX={name:'MAX',value:32776,description:'\xA0'},t.DEPTH_COMPONENT24={name:'DEPTH_COMPONENT24',value:33190,description:'\xA0'},t.STREAM_READ={name:'STREAM_READ',value:35041,description:'\xA0'},t.STREAM_COPY={name:'STREAM_COPY',value:35042,description:'\xA0'},t.STATIC_READ={name:'STATIC_READ',value:35045,description:'\xA0'},t.STATIC_COPY={name:'STATIC_COPY',value:35046,description:'\xA0'},t.DYNAMIC_READ={name:'DYNAMIC_READ',value:35049,description:'\xA0'},t.DYNAMIC_COPY={name:'DYNAMIC_COPY',value:35050,description:'\xA0'},t.DEPTH_COMPONENT32F={name:'DEPTH_COMPONENT32F',value:36012,description:'\xA0'},t.DEPTH32F_STENCIL8={name:'DEPTH32F_STENCIL8',value:36013,description:'\xA0'},t.INVALID_INDEX={name:'INVALID_INDEX',value:4294967295,description:'\xA0'},t.TIMEOUT_IGNORED={name:'TIMEOUT_IGNORED',value:-1,description:'\xA0'},t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL={name:'MAX_CLIENT_WAIT_TIMEOUT_WEBGL',value:37447,description:'\xA0'},t.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE={name:'VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE',value:35070,description:'Describes the frequency divisor used for instanced rendering.',extensionName:'ANGLE_instanced_arrays'},t.UNMASKED_VENDOR_WEBGL={name:'UNMASKED_VENDOR_WEBGL',value:37445,description:'Passed to getParameter to get the vendor string of the graphics driver.',extensionName:'ANGLE_instanced_arrays'},t.UNMASKED_RENDERER_WEBGL={name:'UNMASKED_RENDERER_WEBGL',value:37446,description:'Passed to getParameter to get the renderer string of the graphics driver.',extensionName:'WEBGL_debug_renderer_info'},t.MAX_TEXTURE_MAX_ANISOTROPY_EXT={name:'MAX_TEXTURE_MAX_ANISOTROPY_EXT',value:34047,description:'Returns the maximum available anisotropy.',extensionName:'EXT_texture_filter_anisotropic'},t.TEXTURE_MAX_ANISOTROPY_EXT={name:'TEXTURE_MAX_ANISOTROPY_EXT',value:34046,description:'Passed to texParameter to set the desired maximum anisotropy for a texture.',extensionName:'EXT_texture_filter_anisotropic'},t.COMPRESSED_RGB_S3TC_DXT1_EXT={name:'COMPRESSED_RGB_S3TC_DXT1_EXT',value:33776,description:'A DXT1-compressed image in an RGB image format.',extensionName:'WEBGL_compressed_texture_s3tc'},t.COMPRESSED_RGBA_S3TC_DXT1_EXT={name:'COMPRESSED_RGBA_S3TC_DXT1_EXT',value:33777,description:'A DXT1-compressed image in an RGB image format with a simple on/off alpha value.',extensionName:'WEBGL_compressed_texture_s3tc'},t.COMPRESSED_RGBA_S3TC_DXT3_EXT={name:'COMPRESSED_RGBA_S3TC_DXT3_EXT',value:33778,description:'A DXT3-compressed image in an RGBA image format. Compared to a 32-bit RGBA texture, it offers 4:1 compression.',extensionName:'WEBGL_compressed_texture_s3tc'},t.COMPRESSED_RGBA_S3TC_DXT5_EXT={name:'COMPRESSED_RGBA_S3TC_DXT5_EXT',value:33779,description:'A DXT5-compressed image in an RGBA image format. It also provides a 4:1 compression, but differs to the DXT3 compression in how the alpha compression is done.',extensionName:'WEBGL_compressed_texture_s3tc'},t.COMPRESSED_R11_EAC={name:'COMPRESSED_R11_EAC',value:37488,description:'One-channel (red) unsigned format compression.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_SIGNED_R11_EAC={name:'COMPRESSED_SIGNED_R11_EAC',value:37489,description:'One-channel (red) signed format compression.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_RG11_EAC={name:'COMPRESSED_RG11_EAC',value:37490,description:'Two-channel (red and green) unsigned format compression.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_SIGNED_RG11_EAC={name:'COMPRESSED_SIGNED_RG11_EAC',value:37491,description:'Two-channel (red and green) signed format compression.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_RGB8_ETC2={name:'COMPRESSED_RGB8_ETC2',value:37492,description:'Compresses RBG8 data with no alpha channel.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_RGBA8_ETC2_EAC={name:'COMPRESSED_RGBA8_ETC2_EAC',value:37493,description:'Compresses RGBA8 data. The RGB part is encoded the same as RGB_ETC2, but the alpha part is encoded separately.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_SRGB8_ETC2={name:'COMPRESSED_SRGB8_ETC2',value:37494,description:'Compresses sRBG8 data with no alpha channel.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC={name:'COMPRESSED_SRGB8_ALPHA8_ETC2_EAC',value:37495,description:'Compresses sRGBA8 data. The sRGB part is encoded the same as SRGB_ETC2, but the alpha part is encoded separately.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:'COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2',value:37496,description:'Similar to RGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:'COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2',value:37497,description:'Similar to SRGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.',extensionName:'WEBGL_compressed_texture_etc'},t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG={name:'COMPRESSED_RGB_PVRTC_4BPPV1_IMG',value:35840,description:'RGB compression in 4-bit mode. One block for each 4\xD74 pixels.',extensionName:'WEBGL_compressed_texture_pvrtc'},t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG={name:'COMPRESSED_RGBA_PVRTC_4BPPV1_IMG',value:35842,description:'RGBA compression in 4-bit mode. One block for each 4\xD74 pixels.',extensionName:'WEBGL_compressed_texture_pvrtc'},t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG={name:'COMPRESSED_RGB_PVRTC_2BPPV1_IMG',value:35841,description:'RGB compression in 2-bit mode. One block for each 8\xD74 pixels.',extensionName:'WEBGL_compressed_texture_pvrtc'},t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG={name:'COMPRESSED_RGBA_PVRTC_2BPPV1_IMG',value:35843,description:'RGBA compression in 2-bit mode. One block for each 8\xD74 pixe',extensionName:'WEBGL_compressed_texture_pvrtc'},t.COMPRESSED_RGB_ETC1_WEBGL={name:'COMPRESSED_RGB_ETC1_WEBGL',value:36196,description:'Compresses 24-bit RGB data with no alpha channel.',extensionName:'WEBGL_compressed_texture_etc1'},t.COMPRESSED_RGB_ATC_WEBGL={name:'COMPRESSED_RGB_ATC_WEBGL',value:35986,description:'Compresses RGB textures with no alpha channel.',extensionName:'WEBGL_compressed_texture_atc'},t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL={name:'COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL',value:35986,description:'Compresses RGBA textures using explicit alpha encoding (useful when alpha transitions are sharp).',extensionName:'WEBGL_compressed_texture_atc'},t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL={name:'COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL',value:34798,description:'Compresses RGBA textures using interpolated alpha encoding (useful when alpha transitions are gradient).',extensionName:'WEBGL_compressed_texture_atc'},t.UNSIGNED_INT_24_8_WEBGL={name:'UNSIGNED_INT_24_8_WEBGL',value:34042,description:'Unsigned integer type for 24-bit depth texture data.',extensionName:'WEBGL_depth_texture'},t.HALF_FLOAT_OES={name:'HALF_FLOAT_OES',value:36193,description:'Half floating-point type (16-bit).',extensionName:'OES_texture_half_float'},t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT={name:'FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT',value:33297,description:'\xA0',extensionName:'WEBGL_color_buffer_float'},t.UNSIGNED_NORMALIZED_EXT={name:'UNSIGNED_NORMALIZED_EXT',value:35863,description:'\xA0',extensionName:'WEBGL_color_buffer_float'},t.MIN_EXT={name:'MIN_EXT',value:32775,description:'Produces the minimum color components of the source and destination colors.',extensionName:'EXT_blend_minmax'},t.MAX_EXT={name:'MAX_EXT',value:32776,description:'Produces the maximum color components of the source and destination colors.',extensionName:'EXT_blend_minmax'},t.SRGB_EXT={name:'SRGB_EXT',value:35904,description:'Unsized sRGB format that leaves the precision up to the driver.',extensionName:'EXT_sRGB'},t.SRGB_ALPHA_EXT={name:'SRGB_ALPHA_EXT',value:35906,description:'Unsized sRGB format with unsized alpha component.',extensionName:'EXT_sRGB'},t.SRGB8_ALPHA8_EXT={name:'SRGB8_ALPHA8_EXT',value:35907,description:'Sized (8-bit) sRGB and alpha formats.',extensionName:'EXT_sRGB'},t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT={name:'FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT',value:33296,description:'Returns the framebuffer color encoding.',extensionName:'EXT_sRGB'},t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES={name:'FRAGMENT_SHADER_DERIVATIVE_HINT_OES',value:35723,description:'Indicates the accuracy of the derivative calculation for the GLSL built-in functions: dFdx, dFdy, and fwidth.',extensionName:'OES_standard_derivatives'},t.COLOR_ATTACHMENT0_WEBGL={name:'COLOR_ATTACHMENT0_WEBGL',value:36064,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT1_WEBGL={name:'COLOR_ATTACHMENT1_WEBGL',value:36065,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT2_WEBGL={name:'COLOR_ATTACHMENT2_WEBGL',value:36066,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT3_WEBGL={name:'COLOR_ATTACHMENT3_WEBGL',value:36067,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT4_WEBGL={name:'COLOR_ATTACHMENT4_WEBGL',value:36068,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT5_WEBGL={name:'COLOR_ATTACHMENT5_WEBGL',value:36069,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT6_WEBGL={name:'COLOR_ATTACHMENT6_WEBGL',value:36070,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT7_WEBGL={name:'COLOR_ATTACHMENT7_WEBGL',value:36071,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT8_WEBGL={name:'COLOR_ATTACHMENT8_WEBGL',value:36072,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT9_WEBGL={name:'COLOR_ATTACHMENT9_WEBGL',value:36073,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT10_WEBGL={name:'COLOR_ATTACHMENT10_WEBGL',value:36074,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT11_WEBGL={name:'COLOR_ATTACHMENT11_WEBGL',value:36075,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT12_WEBGL={name:'COLOR_ATTACHMENT12_WEBGL',value:36076,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT13_WEBGL={name:'COLOR_ATTACHMENT13_WEBGL',value:36077,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT14_WEBGL={name:'COLOR_ATTACHMENT14_WEBGL',value:36078,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.COLOR_ATTACHMENT15_WEBGL={name:'COLOR_ATTACHMENT15_WEBGL',value:36079,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER0_WEBGL={name:'DRAW_BUFFER0_WEBGL',value:34853,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER1_WEBGL={name:'DRAW_BUFFER1_WEBGL',value:34854,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER2_WEBGL={name:'DRAW_BUFFER2_WEBGL',value:34855,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER3_WEBGL={name:'DRAW_BUFFER3_WEBGL',value:34856,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER4_WEBGL={name:'DRAW_BUFFER4_WEBGL',value:34857,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER5_WEBGL={name:'DRAW_BUFFER5_WEBGL',value:34858,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER6_WEBGL={name:'DRAW_BUFFER6_WEBGL',value:34859,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER7_WEBGL={name:'DRAW_BUFFER7_WEBGL',value:34860,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER8_WEBGL={name:'DRAW_BUFFER8_WEBGL',value:34861,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER9_WEBGL={name:'DRAW_BUFFER9_WEBGL',value:34862,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER10_WEBGL={name:'DRAW_BUFFER10_WEBGL',value:34863,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER11_WEBGL={name:'DRAW_BUFFER11_WEBGL',value:34864,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER12_WEBGL={name:'DRAW_BUFFER12_WEBGL',value:34865,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER13_WEBGL={name:'DRAW_BUFFER13_WEBGL',value:34866,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER14_WEBGL={name:'DRAW_BUFFER14_WEBGL',value:34867,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.DRAW_BUFFER15_WEBGL={name:'DRAW_BUFFER15_WEBGL',value:34868,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},t.MAX_COLOR_ATTACHMENTS_WEBGL={name:'MAX_COLOR_ATTACHMENTS_WEBGL',value:36063,description:'Maximum number of framebuffer color attachment points',extensionName:'WEBGL_draw_buffers'},t.MAX_DRAW_BUFFERS_WEBGL={name:'MAX_DRAW_BUFFERS_WEBGL',value:34852,description:'Maximum number of draw buffers',extensionName:'WEBGL_draw_buffers'},t.VERTEX_ARRAY_BINDING_OES={name:'VERTEX_ARRAY_BINDING_OES',value:34229,description:'The bound vertex array object (VAO).',extensionName:'VERTEX_ARRAY_BINDING_OES'},t.QUERY_COUNTER_BITS_EXT={name:'QUERY_COUNTER_BITS_EXT',value:34916,description:'The number of bits used to hold the query result for the given target.',extensionName:'EXT_disjoint_timer_query'},t.CURRENT_QUERY_EXT={name:'CURRENT_QUERY_EXT',value:34917,description:'The currently active query.',extensionName:'EXT_disjoint_timer_query'},t.QUERY_RESULT_EXT={name:'QUERY_RESULT_EXT',value:34918,description:'The query result.',extensionName:'EXT_disjoint_timer_query'},t.QUERY_RESULT_AVAILABLE_EXT={name:'QUERY_RESULT_AVAILABLE_EXT',value:34919,description:'A Boolean indicating whether or not a query result is available.',extensionName:'EXT_disjoint_timer_query'},t.TIME_ELAPSED_EXT={name:'TIME_ELAPSED_EXT',value:35007,description:'Elapsed time (in nanoseconds).',extensionName:'EXT_disjoint_timer_query'},t.TIMESTAMP_EXT={name:'TIMESTAMP_EXT',value:36392,description:'The current time.',extensionName:'EXT_disjoint_timer_query'},t.GPU_DISJOINT_EXT={name:'GPU_DISJOINT_EXT',value:36795,description:'A Boolean indicating whether or not the GPU performed any disjoint operation.',extensionName:'EXT_disjoint_timer_query'},t.zeroMeaningByCommand={getError:'NO_ERROR',blendFunc:'ZERO',blendFuncSeparate:'ZERO',readBuffer:'NONE',getFramebufferAttachmentParameter:'NONE',texParameterf:'NONE',texParameteri:'NONE',drawArrays:'POINTS',drawElements:'POINTS',drawArraysInstanced:'POINTS',drawBuffers:'POINTS',drawElementsInstanced:'POINTS',drawRangeElements:'POINTS'},t.oneMeaningByCommand={blendFunc:'ONE',blendFuncSeparate:'ONE',drawArrays:'LINES',drawElements:'LINES',drawArraysInstanced:'LINES',drawBuffers:'LINES',drawElementsInstanced:'LINES',drawRangeElements:'LINES'},t}();a.WebGlConstants=e}(e||(e={}));var e;!function(a){a.WebGlConstantsByName={},function(){for(var e in a.WebGlConstants)if(a.WebGlConstants.hasOwnProperty(e)){var t=a.WebGlConstants[e];a.WebGlConstantsByName[t.name]=t}}()}(e||(e={}));var e;!function(a){a.WebGlConstantsByValue={},function(){for(var e in a.WebGlConstants)if(a.WebGlConstants.hasOwnProperty(e)){var t=a.WebGlConstants[e];a.WebGlConstantsByValue[t.value]=t}}()}(e||(e={}));var e;!function(t){!function(a){var r='__CommandName';a.command=function t(n){return function(e){e[r]=n}},a.getCommandName=function n(t){return t[r]};var n='__StateName';a.state=function i(a){return function(e){e[n]=a}},a.getStateName=function r(t){return t[n]};var o='___RecorderObjectName';a.recorder=function o(n){return function(e){e[o]=n}},a.getRecorderName=function s(t){return t[o]},a.OBJECTNAMEKEY='___ObjectName',a.OBJECTTYPEKEY='___ObjectType',a.webGlObject=function a(e){return function(t){t[a.OBJECTNAMEKEY]=e,t[a.OBJECTTYPEKEY]=window[e]||null}},a.getWebGlObjectName=function l(e){return e[a.OBJECTNAMEKEY]},a.getWebGlObjectType=function c(e){return e[a.OBJECTTYPEKEY]};var i='___AnalyserObjectName';a.analyser=function u(n){return function(e){e[i]=n}},a.getAnalyserName=function h(t){return t[i]}}(t.Decorators||(t.Decorators={}))}(e||(e={}));var e;!function(d){var e=function(){function t(){}return t.isSupportedCombination=function(e,t,n){return e=e||d.WebGlConstants.UNSIGNED_BYTE.value,((t=t||d.WebGlConstants.RGBA.value)===d.WebGlConstants.RGB.value||t===d.WebGlConstants.RGBA.value)&&(n===d.WebGlConstants.RGB.value||n===d.WebGlConstants.RGBA.value||n===d.WebGlConstants.RGBA8.value||n===d.WebGlConstants.RGBA16F.value||n===d.WebGlConstants.RGBA32F.value||n===d.WebGlConstants.RGB16F.value||n===d.WebGlConstants.RGB32F.value||n===d.WebGlConstants.R11F_G11F_B10F.value)&&this.isSupportedComponentType(e)},t.readPixels=function(e,t,n,i,r,o){e.getError();var s=4*(i*r),l;if(o===d.WebGlConstants.UNSIGNED_BYTE.value?l=new Uint8Array(s):(o=d.WebGlConstants.FLOAT.value,l=new Float32Array(s)),e.readPixels(t,n,i,r,e.RGBA,o,l),!e.getError()){if(o===d.WebGlConstants.UNSIGNED_BYTE.value)return l;for(var a=new Uint8Array(4*(i*r)),c=0;c<r;c++)for(var p=0;p<i;p++)a[4*(c*i)+4*p+0]=255*x(T(l[4*(c*i)+4*p+0],0),1),a[4*(c*i)+4*p+1]=255*x(T(l[4*(c*i)+4*p+1],0),1),a[4*(c*i)+4*p+2]=255*x(T(l[4*(c*i)+4*p+2],0),1),a[4*(c*i)+4*p+3]=255*x(T(l[4*(c*i)+4*p+3],0),1);return a}},t.isSupportedComponentType=function(e){return e===d.WebGlConstants.UNSIGNED_BYTE.value||e===d.WebGlConstants.UNSIGNED_SHORT_4_4_4_4.value||e===d.WebGlConstants.UNSIGNED_SHORT_5_5_5_1.value||e===d.WebGlConstants.UNSIGNED_SHORT_5_6_5.value||e===d.WebGlConstants.HALF_FLOAT.value||e===d.WebGlConstants.HALF_FLOAT_OES.value||e===d.WebGlConstants.FLOAT.value},t}();d.ReadPixelsHelper=e}(e||(e={}));var e;!function(n){var e=function(){function e(){}return e.storeOriginFunction=function(a,e){if(a&&a[e]){var t=this.getOriginFunctionName(e);a[t]||(a[t]=a[e])}},e.storePrototypeOriginFunction=function(a,e){if(a&&a.prototype[e]){var t=this.getOriginFunctionName(e);a.prototype[t]||(a.prototype[t]=a.prototype[e])}},e.executePrototypeOriginFunction=function(a,e,t,n){if(a){var o=this.getOriginFunctionName(t);if(e.prototype[o])return a[o]||(a[o]=e.prototype[o]),this.executeFunction(a,o,n)}},e.executeOriginFunction=function(a,e,t){if(a){var n=this.getOriginFunctionName(e);if(a[n])return this.executeFunction(a,n,t)}},e.executeFunction=function(a,e,t){var n=t;if(void 0===n||0===n.length)return a[e]();switch(n.length){case 1:return a[e](n[0]);case 2:return a[e](n[0],n[1]);case 3:return a[e](n[0],n[1],n[2]);case 4:return a[e](n[0],n[1],n[2],n[3]);case 5:return a[e](n[0],n[1],n[2],n[3],n[4]);case 6:return a[e](n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6]);case 8:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]);case 9:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]);case 10:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);case 11:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10]);case 12:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11]);case 13:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12]);case 14:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13]);case 15:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14]);case 16:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);case 17:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16]);case 18:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17]);case 19:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]);case 20:return a[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19]);default:return a[e].apply(a,n);}},e.getOriginFunctionName=function(t){return this.originFunctionPrefix+t},e.originFunctionPrefix='__SPECTOR_Origin_',e}();n.OriginFunctionHelper=e}(e||(e={}));var e;!function(n){var e=function(){function e(){}return e.isBuildableProgram=function(t){return!!t&&!!t[this.rebuildProgramFunctionName]},e.rebuildProgram=function(a,e,t,n,o){this.isBuildableProgram(a)&&a[this.rebuildProgramFunctionName](e,t,n,o)},e.rebuildProgramFunctionName='__SPECTOR_rebuildProgram',e}();n.ProgramRecompilerHelper=e}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(a,e){this.options=a,this.logger=e,this.spiedWindow=a.spiedWindow||window,this.lastFrame=0,this.speedRatio=1,this.willPlayNextFrame=!1,this.onFrameStart=new a.eventConstructor,this.onFrameEnd=new a.eventConstructor,this.onError=new a.eventConstructor,this.time=new this.options.timeConstructor,this.lastSixtyFramesDuration=[],this.lastSixtyFramesCurrentIndex=0,this.lastSixtyFramesPreviousStart=0;for(var n=0;n<t.fpsWindowSize;n++)this.lastSixtyFramesDuration[n]=0;this.init()}return t.prototype.playNextFrame=function(){this.willPlayNextFrame=!0},t.prototype.changeSpeedRatio=function(t){this.speedRatio=t},t.prototype.getFps=function(){for(var a=0,e=0;e<t.fpsWindowSize;e++)a+=this.lastSixtyFramesDuration[e];return 0===a?0:6e4/a},t.prototype.init=function(){for(var a=this,e=0,n=t.requestAnimationFrameFunctions,i;e<n.length;e++)i=n[e],this.spyRequestAnimationFrame(i,this.spiedWindow);for(var r=0,o=t.setTimerFunctions,i;r<o.length;r++)i=o[r],this.spySetTimer(i);this.spiedWindow.VRDisplay&&this.spiedWindow.addEventListener('vrdisplaypresentchange',function(e){a.spyRequestAnimationFrame('requestAnimationFrame',e.display)})},t.prototype.spyRequestAnimationFrame=function(e,t){var n=this;a.OriginFunctionHelper.storeOriginFunction(t,e),t[e]=function(){var i=arguments[0],r=n.getCallback(n,i,function(){a.OriginFunctionHelper.executeOriginFunction(t,e,[i])});return a.OriginFunctionHelper.executeOriginFunction(t,e,[r])}},t.prototype.spySetTimer=function(r){var e=this,n=this.spiedWindow[r],a=this.spiedWindow;a[r]=function(){var o=arguments[0],i=arguments[1];return-1<t.setTimerCommonValues.indexOf(i)&&(o=e.getCallback(e,o,'setTimeout'===r?function(){a[r](o)}:null)),n.apply(e.spiedWindow,[o,i])}},t.prototype.getCallback=function(a,e,n){return void 0===n&&(n=null),function(){var o=a.time.now;if(a.lastFrame=++a.lastFrame%a.speedRatio,a.willPlayNextFrame||a.speedRatio&&!a.lastFrame){a.onFrameStart.trigger(a);try{e.apply(a.spiedWindow,arguments)}catch(e){a.onError.trigger(e)}a.lastSixtyFramesCurrentIndex=(a.lastSixtyFramesCurrentIndex+1)%t.fpsWindowSize,a.lastSixtyFramesDuration[a.lastSixtyFramesCurrentIndex]=o-a.lastSixtyFramesPreviousStart,a.onFrameEnd.trigger(a),a.willPlayNextFrame=!1}else n&&n();a.lastSixtyFramesPreviousStart=o}},t.requestAnimationFrameFunctions=['requestAnimationFrame','msRequestAnimationFrame','webkitRequestAnimationFrame','mozRequestAnimationFrame','oRequestAnimationFrame'],t.setTimerFunctions=['setTimeout','setInterval'],t.setTimerCommonValues=[0,15,16,33,32,40],t.fpsWindowSize=60,t}();e.TimeSpy=t}(a.Spies||(a.Spies={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(n,e){this.options=n,this.logger=e,this.onContextRequested=new n.eventConstructor,this.canvas=n.canvas,this.init()}return t.prototype.init=function(){var e=this,t=function(){var t=e.canvas?a.OriginFunctionHelper.executeOriginFunction(this,'getContext',arguments):a.OriginFunctionHelper.executePrototypeOriginFunction(this,HTMLCanvasElement,'getContext',arguments);if(0<arguments.length&&'2d'===arguments[0])return t;if(t){var s=Array.prototype.slice.call(arguments),i='webgl2'===s[0]||'experimental-webgl2'===s[0],r=i?2:1;e.onContextRequested.trigger({context:t,contextVersion:r})}return t};this.canvas?(a.OriginFunctionHelper.storeOriginFunction(this.canvas,'getContext'),this.canvas.getContext=t):(a.OriginFunctionHelper.storePrototypeOriginFunction(HTMLCanvasElement,'getContext'),HTMLCanvasElement.prototype.getContext=t)},t}();e.CanvasSpy=t}(a.Spies||(a.Spies={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(a,e,r){this.options=a,this.time=e,this.logger=r,this.commandId=0,this.context=a.context,this.version=a.version,this.onMaxCommand=new a.injection.EventCtor,this.capturing=!1,this.globalCapturing=!0,this.injection=a.injection,this.contextInformation={context:this.context,contextVersion:this.version,toggleCapture:this.toggleGlobalCapturing.bind(this),tagWebGlObject:this.tagWebGlObject.bind(this),extensions:{}},this.commandSpies={},this.stateSpy=new this.injection.StateSpyCtor({contextInformation:this.contextInformation,stateNamespace:this.injection.StateNamespace},r),this.recorderSpy=new this.injection.RecorderSpyCtor({contextInformation:this.contextInformation,recorderNamespace:this.injection.RecorderNamespace,timeConstructor:this.injection.TimeCtor},r),this.webGlObjectSpy=new this.injection.WebGlObjectSpyCtor({contextInformation:this.contextInformation,webGlObjectNamespace:this.injection.WebGlObjectNamespace},r),this.analyser=new this.injection.CaptureAnalyserCtor({contextInformation:this.contextInformation,analyserNamespace:this.injection.AnalyserNamespace},r),this.initStaticCapture(),a.recordAlways&&this.spy()}return t.prototype.spy=function(){this.spyContext(this.context);var n=this.contextInformation.extensions;for(var e in n)n.hasOwnProperty(e)&&this.spyContext(n[e])},t.prototype.unSpy=function(){for(var t in this.commandSpies)this.commandSpies.hasOwnProperty(t)&&this.commandSpies[t].unSpy()},t.prototype.startCapture=function(a,e){void 0===a&&(a=0),void 0===e&&(e=!1);var t=this.time.now;this.maxCommands=a,this.options.recordAlways||this.spy(),this.capturing=!0,this.commandId=0,this.currentCapture={canvas:this.canvasCapture,context:this.contextCapture,commands:[],initState:{},endState:{},startTime:t,listenCommandsStartTime:0,listenCommandsEndTime:0,endTime:0,analyses:[],frameMemory:{},memory:{}},this.stateSpy.startCapture(this.currentCapture,e),this.recorderSpy.startCapture(),this.currentCapture.listenCommandsStartTime=this.time.now},t.prototype.stopCapture=function(){var t=this.time.now;return this.options.recordAlways||this.unSpy(),this.capturing=!1,this.stateSpy.stopCapture(this.currentCapture),this.recorderSpy.stopCapture(),this.currentCapture.listenCommandsEndTime=t,this.currentCapture.endTime=this.time.now,this.recorderSpy.appendRecordedInformation(this.currentCapture),this.analyser.appendAnalyses(this.currentCapture),this.currentCapture},t.prototype.isCapturing=function(){return this.globalCapturing&&this.capturing},t.prototype.setMarker=function(t){this.marker=t},t.prototype.clearMarker=function(){this.marker=null},t.prototype.getNextCommandCaptureId=function(){return this.commandId++},t.prototype.onCommand=function(a,e){if(this.globalCapturing&&(this.webGlObjectSpy.tagWebGlObjects(e),this.recorderSpy.recordCommand(e),this.isCapturing())){var t=a.createCapture(e,this.getNextCommandCaptureId(),this.marker);this.stateSpy.captureState(t),this.currentCapture.commands.push(t),t.endTime=this.time.now,0<this.maxCommands&&this.currentCapture.commands.length===this.maxCommands&&this.onMaxCommand.trigger(this)}},t.prototype.spyContext=function(a){var e=[];for(var n in a)n&&e.push(n);for(var o=0,n;o<e.length;o++)if(n=e[o],!~t.unSpyableMembers.indexOf(n))try{'number'!=typeof a[n]&&this.spyFunction(n,a)}catch(t){this.logger.error('Cant Spy member: '+n),this.logger.error(t)}},t.prototype.initStaticCapture=function(){var a=new this.injection.ExtensionsCtor(this.contextInformation,this.logger),e=a.getExtensions();for(var t in e)e.hasOwnProperty(t)&&(this.contextInformation.extensions[t]=e[t]);var n=new this.injection.CapabilitiesCtor(this.contextInformation,this.logger),o=new this.injection.CompressedTexturesCtor(this.contextInformation,this.logger);this.contextCapture={version:this.version,contextAttributes:this.context.getContextAttributes(),capabilities:n.getStateData(),extensions:a.getStateData(),compressedTextures:o.getStateData()},this.canvasCapture={width:this.context.canvas.width,height:this.context.canvas.height,clientWidth:this.context.canvas.clientWidth,clientHeight:this.context.canvas.clientHeight,browserAgent:navigator?navigator.userAgent:''}},t.prototype.spyFunction=function(e,r){if(0!==e.indexOf('__SPECTOR_Origin_')){if(!this.commandSpies[e]){var o=a.merge(this.contextInformation,{spiedCommandName:e,spiedCommandRunningContext:r,callback:this.onCommand.bind(this),commandNamespace:this.injection.CommandNamespace,stackTraceCtor:this.injection.StackTraceCtor,defaultCommandCtor:this.injection.DefaultCommandCtor});this.commandSpies[e]=new this.injection.CommandSpyCtor(o,this.time,this.logger)}this.commandSpies[e].spy()}},t.prototype.toggleGlobalCapturing=function(t){this.globalCapturing=t},t.prototype.tagWebGlObject=function(t){return this.webGlObjectSpy.tagWebGlObject(t)},t.unSpyableMembers=['canvas','drawingBufferWidth','drawingBufferHeight','glp'],t}();e.ContextSpy=t}(a.Spies||(a.Spies={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(e,r,n){this.time=r,this.logger=n,this.stackTrace=new e.stackTraceCtor,this.spiedCommandName=e.spiedCommandName,this.spiedCommandRunningContext=e.spiedCommandRunningContext,this.spiedCommand=this.spiedCommandRunningContext[this.spiedCommandName],a.OriginFunctionHelper.storeOriginFunction(this.spiedCommandRunningContext,this.spiedCommandName),this.callback=e.callback,this.commandOptions={context:e.context,contextVersion:e.contextVersion,extensions:e.extensions,toggleCapture:e.toggleCapture,spiedCommandName:e.spiedCommandName},this.initCustomCommands(e.commandNamespace),this.initCommand(e.defaultCommandCtor)}return t.prototype.spy=function(){this.spiedCommandRunningContext[this.spiedCommandName]=this.overloadedCommand},t.prototype.unSpy=function(){this.spiedCommandRunningContext[this.spiedCommandName]=this.spiedCommand},t.prototype.createCapture=function(a,e,t){return this.command.createCapture(a,e,t)},t.prototype.initCustomCommands=function(e){if(!t.customCommandsConstructors)for(var n in t.customCommandsConstructors={},e)if(e.hasOwnProperty(n)){var i=e[n],r=a.Decorators.getCommandName(i);r&&(t.customCommandsConstructors[r]=i)}},t.prototype.initCommand=function(n){this.command=t.customCommandsConstructors[this.spiedCommandName]?new t.customCommandsConstructors[this.spiedCommandName](this.commandOptions,this.stackTrace,this.logger):new n(this.commandOptions,this.stackTrace,this.logger),this.overloadedCommand=this.getSpy()},t.prototype.getSpy=function(){var e=this;return function(){var t=e.time.now,s=a.OriginFunctionHelper.executeOriginFunction(e.spiedCommandRunningContext,e.spiedCommandName,arguments),l=e.time.now,d={name:e.spiedCommandName,arguments:arguments,result:s,startTime:t,endTime:l};return e.callback(e,d),s}},t}();e.CommandSpy=t}(a.Spies||(a.Spies={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(a,e,r){this.options=a,this.stackTrace=e,this.logger=r,this.spiedCommandName=a.spiedCommandName}return t.prototype.createCapture=function(d,e,p){var u=this.stackTrace.getStackTrace(4,1),m=0===d.name.indexOf('uniform')?this.stringifyUniform(d.arguments):this.stringify(d.arguments,d.result),g={id:e,startTime:d.startTime,commandEndTime:d.endTime,endTime:0,name:d.name,commandArguments:d.arguments,result:d.result,stackTrace:u,status:0,marker:p,text:m};this.transformCapture(g);for(var o=0,s;o<g.commandArguments.length;o++)s=g.commandArguments[o],s&&s.length&&50<s.length&&(g.commandArguments[o]='Array Length: '+s.length);if(g.commandArguments){for(var a=[],o=0,l;o<g.commandArguments.length;o++)l=g.commandArguments[o],void 0===l?a.push(void 0):null===l?a.push(null):a.push(JSON.parse(this.stringifyJSON(l)));g.commandArguments=a}return g.result&&(g.result=JSON.parse(this.stringifyJSON(g.result))),g},t.prototype.stringifyJSON=function(t){try{return JSON.stringify(t)}catch(t){return null}},t.prototype.transformCapture=function(){},t.prototype.stringify=function(a,e){var t=this.options.spiedCommandName;return a&&0<a.length&&(t+=': '+this.stringifyArgs(a).join(', ')),e&&(t+=' -> '+this.stringifyResult(e)),t},t.prototype.stringifyUniform=function(a){var e=this.options.spiedCommandName;if(a&&0<a.length){for(var t=[this.stringifyValue(a[0])],n=1;n<a.length;n++)if('number'==typeof a[n]){var o=a[n]+'';t.push(o)}else{var o=this.stringifyValue(a[n]);t.push(o)}e+=': '+t.join(', ')}return e},t.prototype.stringifyArgs=function(a){for(var e=[],t=0;t<a.length;t++){var n=a[t],o=this.stringifyValue(n);e.push(o)}return e},t.prototype.stringifyResult=function(t){if(t)return this.stringifyValue(t)},t.prototype.stringifyValue=function(e){if(null===e)return'null';if(void 0===e)return'undefined';var r=a.WebGlObjects.getWebGlObjectTag(e);return r?r.displayText:'number'==typeof e&&a.WebGlConstants.isWebGlConstant(e)?a.WebGlConstants.stringifyWebGlConstant(e,this.spiedCommandName):'string'==typeof e?e:e instanceof HTMLImageElement?e.src:e instanceof ArrayBuffer?'[--('+e.byteLength+')--]':e.length?'[..('+e.length+')..]':e},t}();e.BaseCommand=t}(a.Commands||(a.Commands={}))}(e||(e={}));var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])};return function(e,t){function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),e;!function(t){!function(a){var s=['lineWidth'],e=function(t){function n(e,a,i){var r=t.call(this,e,a,i)||this;return r.isDeprecated=-1<s.indexOf(r.spiedCommandName),r}return l(n,t),n.prototype.transformCapture=function(t){this.isDeprecated&&(t.status=50)},n}(a.BaseCommand);a.DefaultCommand=e}(t.Commands||(t.Commands={}))}(e||(e={}));var i=this&&this.__decorate||function(l,e,t,n){var i=arguments.length,o=3>i?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n,s;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)o=Reflect.decorate(l,e,t,n);else for(var r=l.length-1;0<=r;r--)(s=l[r])&&(o=(3>i?s(o):3<i?s(e,t,o):s(e,t))||o);return 3<i&&o&&Object.defineProperty(e,t,o),o},e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){var t=[];return(e[0]&a.WebGlConstants.DEPTH_BUFFER_BIT.value)===a.WebGlConstants.DEPTH_BUFFER_BIT.value&&t.push(a.WebGlConstants.DEPTH_BUFFER_BIT.name),(e[0]&a.WebGlConstants.STENCIL_BUFFER_BIT.value)===a.WebGlConstants.STENCIL_BUFFER_BIT.value&&t.push(a.WebGlConstants.STENCIL_BUFFER_BIT.name),(e[0]&a.WebGlConstants.COLOR_BUFFER_BIT.value)===a.WebGlConstants.COLOR_BUFFER_BIT.value&&t.push(a.WebGlConstants.COLOR_BUFFER_BIT.name),t},n=i([a.Decorators.command('clear')],n)}(e.BaseCommand);e.Clear=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(d){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){var t=[],n=this.options.context.getParameter(d.WebGlConstants.READ_FRAMEBUFFER_BINDING.value),i=this.options.tagWebGlObject(n);t.push('READ FROM: '+this.stringifyValue(i));var r=this.options.context.getParameter(d.WebGlConstants.DRAW_FRAMEBUFFER_BINDING.value),o=this.options.tagWebGlObject(r);t.push('WRITE TO: '+this.stringifyValue(o));for(var s=0;8>s;s++)t.push(e[s]);return(e[8]&d.WebGlConstants.DEPTH_BUFFER_BIT.value)===d.WebGlConstants.DEPTH_BUFFER_BIT.value&&t.push(d.WebGlConstants.DEPTH_BUFFER_BIT.name),(e[8]&d.WebGlConstants.STENCIL_BUFFER_BIT.value)===d.WebGlConstants.STENCIL_BUFFER_BIT.value&&t.push(d.WebGlConstants.STENCIL_BUFFER_BIT.name),(e[8]&d.WebGlConstants.COLOR_BUFFER_BIT.value)===d.WebGlConstants.COLOR_BUFFER_BIT.value&&t.push(d.WebGlConstants.COLOR_BUFFER_BIT.name),t.push(d.WebGlConstants.stringifyWebGlConstant(e[9],'blitFrameBuffer')),t},n=i([d.Decorators.command('blitFrameBuffer')],n)}(e.BaseCommand);e.BlitFrameBuffer=t}(d.Commands||(d.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){var t=[];return t.push(e[0]),t.push(e[1]),t.push(a.WebGlConstants.stringifyWebGlConstant(e[2],'vertexAttribPointer')),t.push(e[3]),t.push(e[4]),t.push(e[5]),t},n=i([a.Decorators.command('vertexAttribPointer')],n)}(e.BaseCommand);e.VertexAttribPointer=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyResult=function(t){if(t)return'name: '+t.name+', size: '+t.size+', type: '+t.type},n=i([a.Decorators.command('getActiveAttrib')],n)}(e.BaseCommand);e.GetActiveAttrib=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyResult=function(t){if(t)return'name: '+t.name+', size: '+t.size+', type: '+t.type},n=i([a.Decorators.command('getActiveUniform')],n)}(e.BaseCommand);e.GetActiveUniform=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyResult=function(t){if(t)return'name: '+t.name+', size: '+t.size+', type: '+t.type},n=i([a.Decorators.command('getTransformFeedbackVarying')],n)}(e.BaseCommand);e.GetTransformFeedbackVarying=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyResult=function(t){return t?'true':'false'},n=i([a.Decorators.command('getExtension')],n)}(e.BaseCommand);e.GetExtension=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyResult=function(t){if(t)return'min: '+t.rangeMin+', max: '+t.rangeMax+', precision: '+t.precision},n=i([a.Decorators.command('getShaderPrecisionFormat')],n)}(e.BaseCommand);e.GetShaderPrecisionFormat=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyResult=function(e){if(!e)return'null';var r=a.WebGlObjects.getWebGlObjectTag(e);return r?r.displayText:e},n=i([a.Decorators.command('getParameter')],n)}(e.BaseCommand);e.GetParameter=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){var t=[];return t.push(a.WebGlConstants.stringifyWebGlConstant(e[0],'drawArrays')),t.push(e[1]),t.push(e[2]),t},n=i([a.Decorators.command('drawArrays')],n)}(e.BaseCommand);e.DrawArrays=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){var t=[];return t.push(a.WebGlConstants.stringifyWebGlConstant(e[0],'drawArraysInstanced')),t.push(e[1]),t.push(e[2]),t.push(e[3]),t},n=i([a.Decorators.command('drawArraysInstanced')],n)}(e.BaseCommand);e.DrawArraysInstanced=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){for(var t=[],n=0;n<e.length;n++)t.push(a.WebGlConstants.stringifyWebGlConstant(e[n],'drawBuffers'));return t},n=i([a.Decorators.command('drawBuffers')],n)}(e.BaseCommand);e.DrawBuffers=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){var t=[];return t.push(a.WebGlConstants.stringifyWebGlConstant(e[0],'drawElements')),t.push(e[1]),t.push(a.WebGlConstants.stringifyWebGlConstant(e[2],'drawElements')),t.push(e[3]),t},n=i([a.Decorators.command('drawElements')],n)}(e.BaseCommand);e.DrawElements=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){var t=[];return t.push(a.WebGlConstants.stringifyWebGlConstant(e[0],'drawElementsInstanced')),t.push(e[1]),t.push(a.WebGlConstants.stringifyWebGlConstant(e[2],'drawElementsInstanced')),t.push(e[3]),t.push(e[4]),t},n=i([a.Decorators.command('drawElementsInstanced')],n)}(e.BaseCommand);e.DrawElementsInstanced=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){var t=[];return t.push(a.WebGlConstants.stringifyWebGlConstant(e[0],'drawElementsInstancedANGLE')),t.push(e[1]),t.push(a.WebGlConstants.stringifyWebGlConstant(e[2],'drawElementsInstancedANGLE')),t.push(e[3]),t.push(e[4]),t},n=i([a.Decorators.command('drawElementsInstancedANGLE')],n)}(e.BaseCommand);e.DrawElementsInstancedAngle=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(e){var t=[];return t.push(a.WebGlConstants.stringifyWebGlConstant(e[0],'drawRangeElements')),t.push(e[1]),t.push(e[2]),t.push(e[3]),t.push(a.WebGlConstants.stringifyWebGlConstant(e[4],'drawRangeElements')),t.push(e[5]),t},n=i([a.Decorators.command('drawRangeElements')],n)}(e.BaseCommand);e.DrawRangeElements=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(a){for(var e=[],t=0;4>t;t++)e.push(a[t].toFixed(0));return e},n=i([a.Decorators.command('scissor')],n)}(e.BaseCommand);e.Scissor=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(a){for(var e=[],t=0;4>t;t++)e.push(a[t].toFixed(0));return e},n=i([a.Decorators.command('viewport')],n)}(e.BaseCommand);e.Viewport=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(n){var e=[];return e.push(n[0]),e},n=i([a.Decorators.command('disableVertexAttribArray')],n)}(e.BaseCommand);e.DisableVertexAttribArray=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.stringifyArgs=function(n){var e=[];return e.push(n[0]),e},n=i([a.Decorators.command('enableVertexAttribArray')],n)}(e.BaseCommand);e.EnableVertexAttribArray=t}(a.Commands||(a.Commands={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(a,e){this.options=a,this.logger=e,this.objectName=a.objectName,this.createCommandNames=this.getCreateCommandNames(),this.updateCommandNames=this.getUpdateCommandNames(),this.deleteCommandNames=this.getDeleteCommandNames(),this.startTime=this.options.time.now,this.memoryPerSecond={},this.totalMemory=0,this.frameMemory=0,this.capturing=!1,t.initializeByteSizeFormat()}return t.initializeByteSizeFormat=function(){if(!this.byteSizePerInternalFormat){this.byteSizePerInternalFormat=(e={},e[a.WebGlConstants.R8.value]=1,e[a.WebGlConstants.R16F.value]=2,e[a.WebGlConstants.R32F.value]=4,e[a.WebGlConstants.R8UI.value]=1,e[a.WebGlConstants.RG8.value]=2,e[a.WebGlConstants.RG16F.value]=4,e[a.WebGlConstants.RG32F.value]=8,e[a.WebGlConstants.ALPHA.value]=1,e[a.WebGlConstants.RGB.value]=3,e[a.WebGlConstants.RGBA.value]=4,e[a.WebGlConstants.LUMINANCE.value]=1,e[a.WebGlConstants.LUMINANCE_ALPHA.value]=2,e[a.WebGlConstants.DEPTH_COMPONENT.value]=1,e[a.WebGlConstants.DEPTH_STENCIL.value]=2,e[a.WebGlConstants.SRGB_EXT.value]=3,e[a.WebGlConstants.SRGB_ALPHA_EXT.value]=4,e[a.WebGlConstants.RGB8.value]=3,e[a.WebGlConstants.SRGB8.value]=3,e[a.WebGlConstants.RGB565.value]=2,e[a.WebGlConstants.R11F_G11F_B10F.value]=4,e[a.WebGlConstants.RGB9_E5.value]=2,e[a.WebGlConstants.RGB16F.value]=6,e[a.WebGlConstants.RGB32F.value]=12,e[a.WebGlConstants.RGB8UI.value]=3,e[a.WebGlConstants.RGBA8.value]=4,e[a.WebGlConstants.RGB5_A1.value]=2,e[a.WebGlConstants.RGBA16F.value]=8,e[a.WebGlConstants.RGBA32F.value]=16,e[a.WebGlConstants.RGBA8UI.value]=4,e[a.WebGlConstants.COMPRESSED_R11_EAC.value]=4,e[a.WebGlConstants.COMPRESSED_SIGNED_R11_EAC.value]=4,e[a.WebGlConstants.COMPRESSED_RG11_EAC.value]=4,e[a.WebGlConstants.COMPRESSED_SIGNED_RG11_EAC.value]=4,e[a.WebGlConstants.COMPRESSED_RGB8_ETC2.value]=4,e[a.WebGlConstants.COMPRESSED_RGBA8_ETC2_EAC.value]=4,e[a.WebGlConstants.COMPRESSED_SRGB8_ETC2.value]=4,e[a.WebGlConstants.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC.value]=4,e[a.WebGlConstants.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]=4,e[a.WebGlConstants.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]=4,e);var e}},t.prototype.registerCallbacks=function(l){for(var e=0,t=this.createCommandNames,n;e<t.length;e++)n=t[e],l[n]=l[n]||[],l[n].push(this.createWithoutSideEffects.bind(this));for(var i=0,r=this.updateCommandNames,n;i<r.length;i++)n=r[i],l[n]=l[n]||[],l[n].push(this.updateWithoutSideEffects.bind(this));for(var o=0,s=this.deleteCommandNames,n;o<s.length;o++)n=s[o],l[n]=l[n]||[],l[n].push(this.deleteWithoutSideEffects.bind(this))},t.prototype.startCapture=function(){this.frameMemory=0,this.capturing=!0},t.prototype.stopCapture=function(){this.frameMemory=0,this.capturing=!1},t.prototype.appendRecordedInformation=function(t){t.frameMemory[this.objectName]=this.frameMemory,t.memory[this.objectName]=this.memoryPerSecond},t.prototype.create=function(){},t.prototype.createWithoutSideEffects=function(t){this.options.toggleCapture(!1),this.create(t),this.options.toggleCapture(!0)},t.prototype.updateWithoutSideEffects=function(e){if(e&&0!==e.arguments.length){this.options.toggleCapture(!1);var t=e.arguments[0],n=this.getBoundInstance(t);if(!n)return void this.options.toggleCapture(!0);if(!a.WebGlObjects.getWebGlObjectTag(n))return void this.options.toggleCapture(!0);var s=this.getWebGlConstant(t),r=this.update(e,s,n);this.changeMemorySize(r),this.options.toggleCapture(!0)}},t.prototype.deleteWithoutSideEffects=function(a){if(a&&a.arguments&&!(1>a.arguments.length)){var e=a.arguments[0];if(e){this.options.toggleCapture(!1);var t=this.delete(e);this.changeMemorySize(-t),this.options.toggleCapture(!0)}}},t.prototype.changeMemorySize=function(a){this.totalMemory+=a,this.capturing&&(this.frameMemory+=a);var e=this.options.time.now-this.startTime,t=b(e/1e3);this.memoryPerSecond[t]=this.totalMemory},t.prototype.getWebGlConstant=function(e){var t=a.WebGlConstantsByValue[e];return t?t.name:e+''},t.prototype.getByteSizeForInternalFormat=function(n){return t.byteSizePerInternalFormat[n]||4},t}();e.BaseRecorder=t}(a.Recorders||(a.Recorders={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getCreateCommandNames=function(){return['createTexture']},n.prototype.getUpdateCommandNames=function(){return['texImage2D','compressedTexImage2D','texStorage2D']},n.prototype.getDeleteCommandNames=function(){return['deleteTexture']},n.prototype.getBoundInstance=function(e){var t=this.options.context;return e===a.WebGlConstants.TEXTURE_2D.value?t.getParameter(a.WebGlConstants.TEXTURE_BINDING_2D.value):e===a.WebGlConstants.TEXTURE_CUBE_MAP_POSITIVE_X.value||e===a.WebGlConstants.TEXTURE_CUBE_MAP_POSITIVE_Y.value||e===a.WebGlConstants.TEXTURE_CUBE_MAP_POSITIVE_Z.value||e===a.WebGlConstants.TEXTURE_CUBE_MAP_NEGATIVE_X.value||e===a.WebGlConstants.TEXTURE_CUBE_MAP_NEGATIVE_Y.value||e===a.WebGlConstants.TEXTURE_CUBE_MAP_NEGATIVE_Z.value?t.getParameter(a.WebGlConstants.TEXTURE_BINDING_CUBE_MAP.value):void 0},n.prototype.delete=function(e){var t=e.__SPECTOR_Object_CustomData;return t?t.target===a.WebGlConstants.TEXTURE_2D_ARRAY.name||t.target===a.WebGlConstants.TEXTURE_3D.name?0:t.length:0},n.prototype.update=function(a,e,t){if(2<=a.arguments.length&&0!==a.arguments[1])return 0;var n=this.getCustomData(a,e,t);if(!n)return 0;var s=t.__SPECTOR_Object_CustomData?t.__SPECTOR_Object_CustomData.length:0,r='TEXTURE_2D'===e?1:6;return n.length=n.width*n.height*r*this.getByteSizeForInternalFormat(n.internalFormat),t.__SPECTOR_Object_CustomData=n,n.length-s},n.prototype.getCustomData=function(a,e,t){return'texImage2D'===a.name?this.getTexImage2DCustomData(a,e,t):'compressedTexImage2D'===a.name?this.getCompressedTexImage2DCustomData(a,e,t):'texStorage2D'===a.name?this.getTexStorage2DCustomData(a,e,t):void 0},n.prototype.getTexStorage2DCustomData=function(n,e){var a;return 5===n.arguments.length&&(a={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],length:0}),a},n.prototype.getCompressedTexImage2DCustomData=function(n,e){if(0===n.arguments[1]){var a;return 7<=n.arguments.length&&(a={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],length:0}),a}},n.prototype.getTexImage2DCustomData=function(n,e){if(0===n.arguments[1]){var a;return 8<=n.arguments.length?a={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],format:n.arguments[6],type:n.arguments[7],length:0}:6===n.arguments.length&&(a={target:e,internalFormat:n.arguments[2],width:n.arguments[5].width,height:n.arguments[5].height,format:n.arguments[3],type:n.arguments[4],length:0}),a}},n=i([a.Decorators.recorder('Texture2d')],n)}(e.BaseRecorder);e.Texture2DRecorder=t}(a.Recorders||(a.Recorders={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getCreateCommandNames=function(){return['createTexture']},n.prototype.getUpdateCommandNames=function(){return['texImage3D','compressedTexImage3D','texStorage3D']},n.prototype.getDeleteCommandNames=function(){return['deleteTexture']},n.prototype.getBoundInstance=function(e){var t=this.options.context;return e===a.WebGlConstants.TEXTURE_2D_ARRAY.value?t.getParameter(a.WebGlConstants.TEXTURE_BINDING_2D_ARRAY.value):e===a.WebGlConstants.TEXTURE_3D.value?t.getParameter(a.WebGlConstants.TEXTURE_BINDING_3D.value):void 0},n.prototype.delete=function(e){var t=e.__SPECTOR_Object_CustomData;return t?t.target!==a.WebGlConstants.TEXTURE_2D_ARRAY.name&&t.target!==a.WebGlConstants.TEXTURE_3D.name?0:t.length:0},n.prototype.update=function(a,e,t){if(2<=a.arguments.length&&0!==a.arguments[1])return 0;var n=this.getCustomData(a,e,t);if(!n)return 0;var o=t.__SPECTOR_Object_CustomData?t.__SPECTOR_Object_CustomData.length:0;return n.length=n.width*n.height*n.depth*this.getByteSizeForInternalFormat(n.internalFormat),n&&(t.__SPECTOR_Object_CustomData=n),n.length-o},n.prototype.getCustomData=function(a,e,t){return'texImage3D'===a.name?this.getTexImage3DCustomData(a,e,t):'compressedTexImage3D'===a.name?this.getCompressedTexImage3DCustomData(a,e,t):'texStorage3D'===a.name?this.getTexStorage3DCustomData(a,e,t):void 0},n.prototype.getTexStorage3DCustomData=function(n,e){var a;return 6===n.arguments.length&&(a={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],depth:n.arguments[5],length:0}),a},n.prototype.getCompressedTexImage3DCustomData=function(n,e){if(0===n.arguments[1]){var a;return 8<=n.arguments.length&&(a={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],depth:n.arguments[5],length:0}),a}},n.prototype.getTexImage3DCustomData=function(n,e){if(0===n.arguments[1]){var a;return 9<=n.arguments.length&&(a={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],depth:n.arguments[5],format:n.arguments[7],type:n.arguments[8],length:0}),a}},n=i([a.Decorators.recorder('Texture3d')],n)}(e.BaseRecorder);e.Texture3DRecorder=t}(a.Recorders||(a.Recorders={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getCreateCommandNames=function(){return['createBuffer']},n.prototype.getUpdateCommandNames=function(){return['bufferData']},n.prototype.getDeleteCommandNames=function(){return['deleteBuffer']},n.prototype.getBoundInstance=function(e){var t=this.options.context;return e===a.WebGlConstants.ARRAY_BUFFER.value?t.getParameter(a.WebGlConstants.ARRAY_BUFFER_BINDING.value):e===a.WebGlConstants.ELEMENT_ARRAY_BUFFER.value?t.getParameter(a.WebGlConstants.ELEMENT_ARRAY_BUFFER_BINDING.value):e===a.WebGlConstants.COPY_READ_BUFFER.value?t.getParameter(a.WebGlConstants.COPY_READ_BUFFER_BINDING.value):e===a.WebGlConstants.COPY_WRITE_BUFFER.value?t.getParameter(a.WebGlConstants.COPY_WRITE_BUFFER_BINDING.value):e===a.WebGlConstants.TRANSFORM_FEEDBACK_BUFFER.value?t.getParameter(a.WebGlConstants.TRANSFORM_FEEDBACK_BUFFER_BINDING.value):e===a.WebGlConstants.UNIFORM_BUFFER.value?t.getParameter(a.WebGlConstants.UNIFORM_BUFFER_BINDING.value):e===a.WebGlConstants.PIXEL_PACK_BUFFER.value?t.getParameter(a.WebGlConstants.PIXEL_PACK_BUFFER_BINDING.value):e===a.WebGlConstants.PIXEL_UNPACK_BUFFER.value?t.getParameter(a.WebGlConstants.PIXEL_UNPACK_BUFFER_BINDING.value):void 0},n.prototype.delete=function(n){var e=n.__SPECTOR_Object_CustomData;return e?e.length:0},n.prototype.update=function(a,e,t){var n=this.getCustomData(e,a);if(!n)return 0;var o=t.__SPECTOR_Object_CustomData?t.__SPECTOR_Object_CustomData.length:0;return t.__SPECTOR_Object_CustomData=n,n.length-o},n.prototype.getCustomData=function(a,r){var t=this.getLength(r);return 4<=r.arguments.length?{target:a,length:t,usage:r.arguments[2],offset:r.arguments[3],sourceLength:r.arguments[1]?r.arguments[1].length:-1}:3===r.arguments.length?{target:a,length:t,usage:r.arguments[2]}:void 0},n.prototype.getLength=function(a){var e=-1,t=0;return 5===a.arguments.length&&(e=a.arguments[4],t=a.arguments[3]),0>=e&&(e='number'==typeof a.arguments[1]?a.arguments[1]:a.arguments[1]?a.arguments[1].byteLength||a.arguments[1].length||0:0),e-t},n=i([a.Decorators.recorder('Buffer')],n)}(e.BaseRecorder);e.BufferRecorder=t}(a.Recorders||(a.Recorders={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getCreateCommandNames=function(){return['createRenderbuffer']},n.prototype.getUpdateCommandNames=function(){return['renderbufferStorage','renderbufferStorageMultisample']},n.prototype.getDeleteCommandNames=function(){return['deleteRenderbuffer']},n.prototype.getBoundInstance=function(e){var t=this.options.context;if(e===a.WebGlConstants.RENDERBUFFER.value)return t.getParameter(a.WebGlConstants.RENDERBUFFER_BINDING.value)},n.prototype.delete=function(n){var e=n.__SPECTOR_Object_CustomData;return e?e.length:0},n.prototype.update=function(a,e,t){var n=this.getCustomData(a,e);if(!n)return 0;var o=t.__SPECTOR_Object_CustomData?t.__SPECTOR_Object_CustomData.length:0;return n.length=n.width*n.height*this.getByteSizeForInternalFormat(n.internalFormat),t.__SPECTOR_Object_CustomData=n,n.length-o},n.prototype.getCustomData=function(n,e){return 4===n.arguments.length?{target:e,internalFormat:n.arguments[1],width:n.arguments[2],height:n.arguments[3],length:0,samples:0}:{target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],length:0,samples:n.arguments[1]}},n=i([a.Decorators.recorder('Renderbuffer')],n)}(e.BaseRecorder);e.RenderBufferRecorder=t}(a.Recorders||(a.Recorders={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(n,e){this.options=n,this.logger=e,this.recorders={},this.recorderConstructors={},this.onCommandCallbacks={},this.contextInformation=n.contextInformation,this.time=new n.timeConstructor,this.initAvailableRecorders(),this.initRecorders()}return t.prototype.recordCommand=function(a){var e=this.onCommandCallbacks[a.name];if(e)for(var t=0,n=e,o;t<n.length;t++)o=n[t],o(a)},t.prototype.startCapture=function(){for(var n in this.recorders)if(this.recorders.hasOwnProperty(n)){var e=this.recorders[n];e.startCapture()}},t.prototype.stopCapture=function(){for(var n in this.recorders)if(this.recorders.hasOwnProperty(n)){var e=this.recorders[n];e.stopCapture()}},t.prototype.appendRecordedInformation=function(a){for(var e in this.recorders)if(this.recorders.hasOwnProperty(e)){var t=this.recorders[e];t.appendRecordedInformation(a)}},t.prototype.initAvailableRecorders=function(){for(var e in this.options.recorderNamespace)if(this.options.recorderNamespace.hasOwnProperty(e)){var t=this.options.recorderNamespace[e],n=a.Decorators.getRecorderName(t);n&&(this.recorderConstructors[n]=t)}},t.prototype.initRecorders=function(){for(var e in this.recorderConstructors)if(this.recorderConstructors.hasOwnProperty(e)){var r=a.merge({objectName:e,time:this.time},this.contextInformation),n=new this.recorderConstructors[e](r,this.logger);this.recorders[e]=n,n.registerCallbacks(this.onCommandCallbacks)}},t}();e.RecorderSpy=t}(a.Spies||(a.Spies={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(n,e){this.options=n,this.logger=e,this.stateTrackers={},this.onCommandCapturedCallbacks={},this.stateConstructors={},this.contextInformation=n.contextInformation,this.initAvailableStateTrackers(),this.initStateTrackers()}return t.prototype.startCapture=function(a,e){for(var t in this.stateTrackers)if(this.stateTrackers.hasOwnProperty(t)){var n=this.stateTrackers[t],o=n.startCapture(!0,e);n.requireStartAndStopStates&&(a.initState[t]=o)}},t.prototype.stopCapture=function(a){for(var e in this.stateTrackers)if(this.stateTrackers.hasOwnProperty(e)){var t=this.stateTrackers[e],n=t.stopCapture();t.requireStartAndStopStates&&(a.endState[e]=n)}},t.prototype.captureState=function(a){var e=this.onCommandCapturedCallbacks[a.name];if(e)for(var t=0,n=e,o;t<n.length;t++)o=n[t],o(a)},t.prototype.initAvailableStateTrackers=function(){for(var e in this.options.stateNamespace)if(this.options.stateNamespace.hasOwnProperty(e)){var t=this.options.stateNamespace[e],n=a.Decorators.getStateName(t);n&&(this.stateConstructors[n]=t)}},t.prototype.initStateTrackers=function(){for(var e in this.stateConstructors)if(this.stateConstructors.hasOwnProperty(e)){var r=a.merge({stateName:e},this.contextInformation),n=new this.stateConstructors[e](r,this.logger);this.stateTrackers[e]=n,n.registerCallbacks(this.onCommandCapturedCallbacks)}},t}();e.StateSpy=t}(a.Spies||(a.Spies={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(n,e){this.options=n,this.logger=e,this.webGlObjectConstructors={},this.webGlObjects={},this.contextInformation=n.contextInformation,this.initAvailableWebglObjects(),this.initWebglObjects()}return t.prototype.tagWebGlObjects=function(a){for(var e in this.webGlObjects)if(this.webGlObjects.hasOwnProperty(e)){for(var t=this.webGlObjects[e],n=0,o;n<a.arguments.length&&(o=a.arguments[n],!t.tagWebGlObject(o));n++);if(t.tagWebGlObject(a.result))break}},t.prototype.tagWebGlObject=function(a){for(var e in this.webGlObjects)if(this.webGlObjects.hasOwnProperty(e)){var t=this.webGlObjects[e],n=t.tagWebGlObject(a);if(n)return n}},t.prototype.initAvailableWebglObjects=function(){for(var e in this.options.webGlObjectNamespace)if(this.options.webGlObjectNamespace.hasOwnProperty(e)){var t=this.options.webGlObjectNamespace[e],o=a.Decorators.getWebGlObjectName(t),i=a.Decorators.getWebGlObjectType(t);o&&i&&(this.webGlObjectConstructors[o]={ctor:t,type:i})}},t.prototype.initWebglObjects=function(){for(var e in this.webGlObjectConstructors)if(this.webGlObjectConstructors.hasOwnProperty(e)){var r=a.merge({typeName:e,type:this.webGlObjectConstructors[e].type},this.contextInformation),n=new this.webGlObjectConstructors[e].ctor(r,this.logger);this.webGlObjects[e]=n}},t}();e.WebGlObjectSpy=t}(a.Spies||(a.Spies={}))}(e||(e={}));var e;!function(n){!function(e){e.drawCommands=['drawArrays','drawElements','drawArraysInstanced','drawElementsInstanced','drawElementsInstancedANGLE','drawRangeElements'];var t=function(){function t(n,e){this.options=n,this.logger=e,this.context=n.context,this.contextVersion=n.contextVersion,this.extensions=n.extensions,this.toggleCapture=n.toggleCapture,this.stateName=n.stateName,this.consumeCommands=this.getConsumeCommands(),this.changeCommandsByState=this.getChangeCommandsByState(),this.commandNameToStates=this.getCommandNameToStates()}return Object.defineProperty(t.prototype,'requireStartAndStopStates',{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.startCapture=function(n,e){return this.quickCapture=e,this.capturedCommandsByState={},n&&this.requireStartAndStopStates&&(this.currentState={},this.readFromContextNoSideEffects()),this.copyCurrentStateToPrevious(),this.currentState={},this.previousState},t.prototype.stopCapture=function(){return this.requireStartAndStopStates&&this.readFromContextNoSideEffects(),this.analyse(void 0),this.currentState},t.prototype.registerCallbacks=function(l){for(var e in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(e))for(var t=0,n=this.changeCommandsByState[e],i;t<n.length;t++)i=n[t],l[i]=l[i]||[],l[i].push(this.onChangeCommand.bind(this));for(var r=0,o=this.consumeCommands,s;r<o.length;r++)s=o[r],l[s]=l[s]||[],l[s].push(this.onConsumeCommand.bind(this))},t.prototype.getStateData=function(){return this.currentState},t.prototype.getConsumeCommands=function(){return[]},t.prototype.getChangeCommandsByState=function(){return{}},t.prototype.copyCurrentStateToPrevious=function(){this.currentState&&(this.previousState=this.currentState)},t.prototype.onChangeCommand=function(a){for(var e=this.commandNameToStates[a.name],t=0,n=e,o;t<n.length;t++){if(o=n[t],!this.isValidChangeCommand(a,o))return;this.capturedCommandsByState[o]=this.capturedCommandsByState[o]||[],this.capturedCommandsByState[o].push(a)}},t.prototype.isValidChangeCommand=function(){return!0},t.prototype.onConsumeCommand=function(t){this.isValidConsumeCommand(t)&&(this.readFromContextNoSideEffects(),this.analyse(t),this.storeCommandIds(),t[this.stateName]=this.currentState,this.startCapture(!1,this.quickCapture))},t.prototype.isValidConsumeCommand=function(){return!0},t.prototype.analyse=function(l){for(var e in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(e)){var t=this.capturedCommandsByState[e],n=t.length-1;if(0<=n)if(l){for(var i=0,r;i<n;i++)r=t[i],r.consumeCommandId=l.id,this.changeCommandCaptureStatus(r,30);var o=this.isStateEnableNoSideEffects(e,l.commandArguments),s=t[n];s.consumeCommandId=l.id,this.areStatesEquals(this.currentState[e],this.previousState[e])?this.changeCommandCaptureStatus(s,30):o?this.changeCommandCaptureStatus(s,40):this.changeCommandCaptureStatus(s,20)}else for(var i=0,s;i<t.length;i++)s=t[i],this.changeCommandCaptureStatus(s,10)}},t.prototype.storeCommandIds=function(){for(var d=['unusedCommandIds','disabledCommandIds','redundantCommandIds','validCommandIds'],e=0,t=d,n;e<t.length;e++)n=t[e],this.currentState[n]=[];for(var i in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(i))for(var r=this.capturedCommandsByState[i],o=0,s=r,a;o<s.length;o++)switch(a=s[o],a.status){case 10:this.currentState.unusedCommandIds.push(a.id);break;case 20:this.currentState.disabledCommandIds.push(a.id);break;case 30:this.currentState.redundantCommandIds.push(a.id);break;case 40:this.currentState.validCommandIds.push(a.id);}for(var l=0,c=d,n;l<c.length;l++)n=c[l],this.currentState[n].length||delete this.currentState[n]},t.prototype.changeCommandCaptureStatus=function(n,e){return n.status<e&&(n.status=e,!0)},t.prototype.areStatesEquals=function(a,r){if(typeof a!=typeof r)return!1;if(a&&!r)return!1;if(r&&!a)return!1;if(void 0===a||null===a)return!0;if(a.length&&r.length&&'string'!=typeof a){if(a.length!==r.length)return!1;for(var o=0;o<a.length;o++)if(a[o]!==r[o])return!1;return!0}return a===r},t.prototype.isStateEnable=function(){return!0},t.prototype.getSpectorData=function(e){if(e)return{__SPECTOR_Object_TAG:n.WebGlObjects.getWebGlObjectTag(e)||this.options.tagWebGlObject(e),__SPECTOR_Object_CustomData:e.__SPECTOR_Object_CustomData,__SPECTOR_Metadata:e.__SPECTOR_Metadata}},t.prototype.readFromContextNoSideEffects=function(){this.toggleCapture(!1),this.readFromContext(),this.toggleCapture(!0)},t.prototype.isStateEnableNoSideEffects=function(a,e){this.toggleCapture(!1);var t=this.isStateEnable(a,e);return this.toggleCapture(!0),t},t.prototype.getCommandNameToStates=function(){var a={};for(var e in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(e))for(var t=0,n=this.changeCommandsByState[e],o;t<n.length;t++)o=n[t],a[o]=a[o]||[],a[o].push(e);return a},t}();e.BaseState=t}(n.States||(n.States={}))}(e||(e={}));var e;!function(d){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getWebgl1Parameters=function(){return[]},n.prototype.getWebgl2Parameters=function(){return[]},n.prototype.getChangeCommandsByState=function(){this.parameters=[],this.parameters.push(this.getWebgl1Parameters()),1<this.contextVersion&&this.parameters.push(this.getWebgl2Parameters());for(var l={},e=1;e<=this.contextVersion&&!(e>this.parameters.length);e++)if(this.parameters[e-1])for(var t=0,n=this.parameters[e-1],i;t<n.length;t++)if(i=n[t],i.changeCommands)for(var r=0,o=i.changeCommands,s;r<o.length;r++)s=o[r],l[i.constant.name]=l[i.constant.name]||[],l[i.constant.name].push(s);return l},n.prototype.readFromContext=function(){for(var e=1;e<=this.contextVersion&&!(e>this.parameters.length);e++)for(var t=0,n=this.parameters[e-1];t<n.length;t++){var i=n[t],r=this.readParameterFromContext(i),o=d.WebGlObjects.getWebGlObjectTag(r);if(o)this.currentState[i.constant.name]=o;else{var s=this.stringifyParameterValue(r,i);this.currentState[i.constant.name]=s}}},n.prototype.readParameterFromContext=function(t){return t.constant.extensionName&&!this.extensions[t.constant.extensionName]?'Extension '+t.constant.extensionName+' is unavailble.':this.context.getParameter(t.constant.value)},n.prototype.stringifyParameterValue=function(e,a){if(null===e)return'null';if(void 0===e)return'undefined';if(30===a.returnType)return e=e.toString(2),e='00000000000000000000000000000000'.substr(e.length)+e;if('number'==typeof e&&d.WebGlConstants.isWebGlConstant(e)){if(20===a.returnType){var n=a.changeCommands?a.changeCommands[0]||'':'';return e=d.WebGlConstants.stringifyWebGlConstant(e,n)}return e}if(e.length&&'string'!=typeof e){for(var i=[],r=0;r<e.length;r++)i.push(e[r]);return i}return e},n}(e.BaseState);e.ParameterState=t}(d.States||(d.States={}))}(e||(e={}));var e;!function(t){!function(e){!function(a){var n=function(a){function n(t,e){var r=a.call(this,t,e)||this;return r.currentState=r.startCapture(!0,r.quickCapture),r}return l(n,a),n.prototype.getWebgl1Parameters=function(){return[{constant:t.WebGlConstants.RENDERER},{constant:t.WebGlConstants.VENDOR},{constant:t.WebGlConstants.VERSION},{constant:t.WebGlConstants.SHADING_LANGUAGE_VERSION},{constant:t.WebGlConstants.SAMPLES},{constant:t.WebGlConstants.SAMPLE_BUFFERS},{constant:t.WebGlConstants.RED_BITS},{constant:t.WebGlConstants.GREEN_BITS},{constant:t.WebGlConstants.BLUE_BITS},{constant:t.WebGlConstants.ALPHA_BITS},{constant:t.WebGlConstants.DEPTH_BITS},{constant:t.WebGlConstants.STENCIL_BITS},{constant:t.WebGlConstants.SUBPIXEL_BITS},{constant:t.WebGlConstants.LINE_WIDTH},{constant:t.WebGlConstants.ALIASED_LINE_WIDTH_RANGE},{constant:t.WebGlConstants.ALIASED_POINT_SIZE_RANGE},{constant:t.WebGlConstants.IMPLEMENTATION_COLOR_READ_FORMAT,returnType:20},{constant:t.WebGlConstants.IMPLEMENTATION_COLOR_READ_TYPE,returnType:20},{constant:t.WebGlConstants.MAX_COMBINED_TEXTURE_IMAGE_UNITS},{constant:t.WebGlConstants.MAX_CUBE_MAP_TEXTURE_SIZE},{constant:t.WebGlConstants.MAX_FRAGMENT_UNIFORM_VECTORS},{constant:t.WebGlConstants.MAX_RENDERBUFFER_SIZE},{constant:t.WebGlConstants.MAX_TEXTURE_IMAGE_UNITS},{constant:t.WebGlConstants.MAX_TEXTURE_SIZE},{constant:t.WebGlConstants.MAX_VARYING_VECTORS},{constant:t.WebGlConstants.MAX_VERTEX_ATTRIBS},{constant:t.WebGlConstants.MAX_VERTEX_TEXTURE_IMAGE_UNITS},{constant:t.WebGlConstants.MAX_VERTEX_UNIFORM_VECTORS},{constant:t.WebGlConstants.MAX_VIEWPORT_DIMS},{constant:t.WebGlConstants.MAX_TEXTURE_MAX_ANISOTROPY_EXT},{constant:t.WebGlConstants.MAX_COLOR_ATTACHMENTS_WEBGL},{constant:t.WebGlConstants.MAX_DRAW_BUFFERS_WEBGL}]},n.prototype.getWebgl2Parameters=function(){return[{constant:t.WebGlConstants.MAX_3D_TEXTURE_SIZE},{constant:t.WebGlConstants.MAX_ARRAY_TEXTURE_LAYERS},{constant:t.WebGlConstants.MAX_CLIENT_WAIT_TIMEOUT_WEBGL},{constant:t.WebGlConstants.MAX_COLOR_ATTACHMENTS},{constant:t.WebGlConstants.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS},{constant:t.WebGlConstants.MAX_COMBINED_UNIFORM_BLOCKS},{constant:t.WebGlConstants.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS},{constant:t.WebGlConstants.MAX_DRAW_BUFFERS},{constant:t.WebGlConstants.MAX_ELEMENT_INDEX},{constant:t.WebGlConstants.MAX_ELEMENTS_INDICES},{constant:t.WebGlConstants.MAX_ELEMENTS_VERTICES},{constant:t.WebGlConstants.MAX_FRAGMENT_INPUT_COMPONENTS},{constant:t.WebGlConstants.MAX_FRAGMENT_UNIFORM_BLOCKS},{constant:t.WebGlConstants.MAX_FRAGMENT_UNIFORM_COMPONENTS},{constant:t.WebGlConstants.MAX_PROGRAM_TEXEL_OFFSET},{constant:t.WebGlConstants.MAX_SAMPLES},{constant:t.WebGlConstants.MAX_SERVER_WAIT_TIMEOUT},{constant:t.WebGlConstants.MAX_TEXTURE_LOD_BIAS},{constant:t.WebGlConstants.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS},{constant:t.WebGlConstants.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS},{constant:t.WebGlConstants.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS},{constant:t.WebGlConstants.MAX_UNIFORM_BLOCK_SIZE},{constant:t.WebGlConstants.MAX_UNIFORM_BUFFER_BINDINGS},{constant:t.WebGlConstants.MAX_VARYING_COMPONENTS},{constant:t.WebGlConstants.MAX_VERTEX_OUTPUT_COMPONENTS},{constant:t.WebGlConstants.MAX_VERTEX_UNIFORM_BLOCKS},{constant:t.WebGlConstants.MAX_VERTEX_UNIFORM_COMPONENTS},{constant:t.WebGlConstants.MIN_PROGRAM_TEXEL_OFFSET}]},n}(e.ParameterState);a.Capabilities=n}(e.Information||(e.Information={}))}(t.States||(t.States={}))}(e||(e={}));var e;!function(n){!function(e){!function(t){var a=function(a){function n(t,e){var r=a.call(this,t,e)||this;return r.currentState=r.startCapture(!0,r.quickCapture),r}return l(n,a),n.prototype.getWebgl1Parameters=function(){return[{constant:n.WebGlConstants.COMPRESSED_TEXTURE_FORMATS}]},n.prototype.stringifyParameterValue=function(e){for(var t=[],a=0,r=e,o;a<r.length;a++)o=r[a],t.push(n.WebGlConstants.stringifyWebGlConstant(o,'getParameter'));return t},n}(e.ParameterState);t.CompressedTextures=a}(e.Information||(e.Information={}))}(n.States||(n.States={}))}(e||(e={}));var e;!function(t){!function(a){!function(e){var t=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.extensionDefinition=[[{name:'ANGLE_instanced_arrays',description:''},{name:'EXT_blend_minmax',description:''},{name:'EXT_color_buffer_float',description:''},{name:'EXT_color_buffer_half_float',description:''},{name:'EXT_disjoint_timer_query',description:''},{name:'EXT_frag_depth',description:''},{name:'EXT_sRGB',description:''},{name:'EXT_shader_texture_lod',description:''},{name:'EXT_texture_filter_anisotropic',description:''},{name:'OES_element_index_uint',description:''},{name:'OES_standard_derivatives',description:''},{name:'OES_texture_float',description:''},{name:'OES_texture_float_linear',description:''},{name:'OES_texture_half_float',description:''},{name:'OES_texture_half_float_linear',description:''},{name:'OES_vertex_array_object',description:''},{name:'WEBGL_color_buffer_float',description:''},{name:'WEBGL_compressed_texture_astc',description:''},{name:'WEBGL_compressed_texture_atc',description:''},{name:'WEBGL_compressed_texture_etc',description:''},{name:'WEBGL_compressed_texture_etc1',description:''},{name:'WEBGL_compressed_texture_s3tc',description:''},{name:'WEBGL_depth_texture',description:''},{name:'WEBGL_draw_buffers',description:''}]],n.currentState=n.startCapture(!0,n.quickCapture),n}return l(t,a),t.prototype.getExtensions=function(){return this.extensions},t.prototype.readFromContext=function(){for(var a=1;a<=this.contextVersion&&!(a>this.extensionDefinition.length);a++)for(var e=0,t=this.extensionDefinition[a-1];e<t.length;e++){var n=t[e],o=this.context.getExtension(n.name);o?(this.currentState[n.name]=!0,this.extensions[n.name]=o):this.currentState[n.name]=!1}},t}(a.BaseState);e.Extensions=t}(a.Information||(a.Information={}))}(t.States||(t.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.PACK_ALIGNMENT,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.UNPACK_ALIGNMENT,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.UNPACK_COLORSPACE_CONVERSION_WEBGL,returnType:20,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.UNPACK_FLIP_Y_WEBGL,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.UNPACK_PREMULTIPLY_ALPHA_WEBGL,changeCommands:['pixelStorei']}]},n.prototype.getWebgl2Parameters=function(){return[{constant:a.WebGlConstants.PACK_ROW_LENGTH,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.PACK_SKIP_PIXELS,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.PACK_SKIP_ROWS,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.UNPACK_IMAGE_HEIGHT,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.UNPACK_SKIP_PIXELS,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.UNPACK_SKIP_ROWS,changeCommands:['pixelStorei']},{constant:a.WebGlConstants.UNPACK_SKIP_IMAGES,changeCommands:['pixelStorei']}]},n.prototype.getConsumeCommands=function(){return['readPixels','texImage2D','texSubImage2D']},n.prototype.isValidChangeCommand=function(e,t){return a.WebGlConstantsByName[t].value===e.commandArguments[0]},n=i([a.Decorators.state('AlignmentState')],n)}(e.ParameterState);e.AlignmentState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.BLEND,changeCommands:['enable','disable']},{constant:a.WebGlConstants.BLEND_COLOR,changeCommands:['blendColor']},{constant:a.WebGlConstants.BLEND_DST_ALPHA,returnType:20,changeCommands:['blendFunc','blendFuncSeparate']},{constant:a.WebGlConstants.BLEND_DST_RGB,returnType:20,changeCommands:['blendFunc','blendFuncSeparate']},{constant:a.WebGlConstants.BLEND_EQUATION_ALPHA,returnType:20,changeCommands:['blendEquation','blendEquationSeparate']},{constant:a.WebGlConstants.BLEND_EQUATION_RGB,returnType:20,changeCommands:['blendEquation','blendEquationSeparate']},{constant:a.WebGlConstants.BLEND_SRC_ALPHA,returnType:20,changeCommands:['blendFunc','blendFuncSeparate']},{constant:a.WebGlConstants.BLEND_SRC_RGB,returnType:20,changeCommands:['blendFunc','blendFuncSeparate']}]},o.prototype.isValidChangeCommand=function(e){return'enable'!==e.name&&'disable'!==e.name||e.commandArguments[0]===a.WebGlConstants.BLEND.value},o.prototype.getConsumeCommands=function(){return e.drawCommands},o.prototype.isStateEnable=function(){return this.context.isEnabled(a.WebGlConstants.BLEND.value)},o=i([a.Decorators.state('BlendState')],o)}(e.ParameterState);e.BlendState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.COLOR_CLEAR_VALUE,changeCommands:['clearColor']},{constant:a.WebGlConstants.DEPTH_CLEAR_VALUE,changeCommands:['clearDepth']},{constant:a.WebGlConstants.STENCIL_CLEAR_VALUE,changeCommands:['clearStencil']}]},n.prototype.getConsumeCommands=function(){return['clear']},n.prototype.isStateEnable=function(e,t){return e===a.WebGlConstants.COLOR_CLEAR_VALUE.name?a.WebGlConstants.COLOR_BUFFER_BIT.value===(t[0]&a.WebGlConstants.COLOR_BUFFER_BIT.value):e===a.WebGlConstants.DEPTH_CLEAR_VALUE.name?a.WebGlConstants.DEPTH_BUFFER_BIT.value===(t[0]&a.WebGlConstants.DEPTH_BUFFER_BIT.value):!(e!==a.WebGlConstants.STENCIL_CLEAR_VALUE.name)&&a.WebGlConstants.STENCIL_BUFFER_BIT.value===(t[0]&a.WebGlConstants.STENCIL_BUFFER_BIT.value)},n=i([a.Decorators.state('ClearState')],n)}(e.ParameterState);e.ClearState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.COLOR_WRITEMASK,changeCommands:['colorMask']}]},o.prototype.getConsumeCommands=function(){return e.drawCommands},o=i([a.Decorators.state('ColorState')],o)}(e.ParameterState);e.ColorState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.SAMPLE_COVERAGE_VALUE,changeCommands:['sampleCoverage']},{constant:a.WebGlConstants.SAMPLE_COVERAGE_INVERT,changeCommands:['sampleCoverage']}]},o.prototype.getWebgl2Parameters=function(){return[{constant:a.WebGlConstants.SAMPLE_COVERAGE,changeCommands:['enable','disable']},{constant:a.WebGlConstants.SAMPLE_ALPHA_TO_COVERAGE,changeCommands:['enable','disable']}]},o.prototype.isValidChangeCommand=function(e,t){return'enable'!==e.name&&'disable'!==e.name||(e.commandArguments[0]===a.WebGlConstants.SAMPLE_COVERAGE.value?t===a.WebGlConstants.SAMPLE_COVERAGE.name:e.commandArguments[0]===a.WebGlConstants.SAMPLE_ALPHA_TO_COVERAGE.value&&t===a.WebGlConstants.SAMPLE_ALPHA_TO_COVERAGE.name)},o.prototype.getConsumeCommands=function(){return e.drawCommands},o.prototype.isStateEnable=function(){return 2===this.contextVersion&&this.context.isEnabled(a.WebGlConstants.SAMPLE_COVERAGE.value)},o=i([a.Decorators.state('CoverageState')],o)}(e.ParameterState);e.CoverageState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.CULL_FACE,changeCommands:['enable','disable']},{constant:a.WebGlConstants.CULL_FACE_MODE,returnType:20,changeCommands:['cullFace']}]},o.prototype.getConsumeCommands=function(){return e.drawCommands},o.prototype.isValidChangeCommand=function(e){return'enable'!==e.name&&'disable'!==e.name||e.commandArguments[0]===a.WebGlConstants.CULL_FACE.value},o.prototype.isStateEnable=function(){return this.context.isEnabled(a.WebGlConstants.CULL_FACE.value)},o=i([a.Decorators.state('CullState')],o)}(e.ParameterState);e.CullState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.DEPTH_TEST,changeCommands:['enable','disable']},{constant:a.WebGlConstants.DEPTH_FUNC,returnType:20,changeCommands:['depthFunc']},{constant:a.WebGlConstants.DEPTH_RANGE,changeCommands:['depthRange']},{constant:a.WebGlConstants.DEPTH_WRITEMASK,changeCommands:['depthMask']}]},o.prototype.getConsumeCommands=function(){return e.drawCommands},o.prototype.isValidChangeCommand=function(e){return'enable'!==e.name&&'disable'!==e.name||e.commandArguments[0]===a.WebGlConstants.DEPTH_TEST.value},o.prototype.isStateEnable=function(){return this.context.isEnabled(a.WebGlConstants.DEPTH_TEST.value)},o=i([a.Decorators.state('DepthState')],o)}(e.ParameterState);e.DepthState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.DITHER,changeCommands:['enable','disable']},{constant:a.WebGlConstants.VIEWPORT,changeCommands:['viewPort']},{constant:a.WebGlConstants.FRONT_FACE,returnType:20,changeCommands:['frontFace']},{constant:a.WebGlConstants.FRAGMENT_SHADER_DERIVATIVE_HINT_OES,changeCommands:['hint']}]},o.prototype.getWebgl2Parameters=function(){return[{constant:a.WebGlConstants.RASTERIZER_DISCARD,changeCommands:['enable','disable']},{constant:a.WebGlConstants.FRAGMENT_SHADER_DERIVATIVE_HINT,changeCommands:['hint']}]},o.prototype.isValidChangeCommand=function(e,t){return'enable'===e.name||'disable'===e.name?e.commandArguments[0]===a.WebGlConstants.DITHER.value?t===a.WebGlConstants.DITHER.name:e.commandArguments[0]===a.WebGlConstants.RASTERIZER_DISCARD.value&&t===a.WebGlConstants.RASTERIZER_DISCARD.name:'hint'!==e.name||(e.commandArguments[0]===a.WebGlConstants.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.value?t===a.WebGlConstants.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.name:e.commandArguments[0]===a.WebGlConstants.FRAGMENT_SHADER_DERIVATIVE_HINT.value&&t===a.WebGlConstants.FRAGMENT_SHADER_DERIVATIVE_HINT.name)},o.prototype.getConsumeCommands=function(){return e.drawCommands},o.prototype.isStateEnable=function(e){return e===a.WebGlConstants.DITHER.name?this.context.isEnabled(a.WebGlConstants.DITHER.value):e!==a.WebGlConstants.RASTERIZER_DISCARD.name||this.context.isEnabled(a.WebGlConstants.RASTERIZER_DISCARD.value)},o=i([a.Decorators.state('DrawState')],o)}(e.ParameterState);e.DrawState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.GENERATE_MIPMAP_HINT,changeCommands:['hint']}]},n.prototype.getConsumeCommands=function(){return['generateMipmap']},n=i([a.Decorators.state('MipmapHintState')],n)}(e.ParameterState);e.MipmapHintState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.POLYGON_OFFSET_FILL,changeCommands:['enable','disable']},{constant:a.WebGlConstants.POLYGON_OFFSET_FACTOR,changeCommands:['polygonOffset']},{constant:a.WebGlConstants.POLYGON_OFFSET_UNITS,changeCommands:['polygonOffset']}]},o.prototype.isValidChangeCommand=function(e){return'enable'!==e.name&&'disable'!==e.name||e.commandArguments[0]===a.WebGlConstants.POLYGON_OFFSET_FILL.value},o.prototype.getConsumeCommands=function(){return e.drawCommands},o.prototype.isStateEnable=function(){return this.context.isEnabled(a.WebGlConstants.POLYGON_OFFSET_FILL.value)},o=i([a.Decorators.state('PolygonOffsetState')],o)}(e.ParameterState);e.PolygonOffsetState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),o.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.SCISSOR_TEST,changeCommands:['enable','disable']},{constant:a.WebGlConstants.SCISSOR_BOX,changeCommands:['scissor']}]},o.prototype.isValidChangeCommand=function(e){return'enable'!==e.name&&'disable'!==e.name||e.commandArguments[0]===a.WebGlConstants.SCISSOR_TEST.value},o.prototype.getConsumeCommands=function(){return e.drawCommands},o.prototype.isStateEnable=function(){return this.context.isEnabled(a.WebGlConstants.SCISSOR_TEST.value)},o=i([a.Decorators.state('ScissorState')],o)}(e.ParameterState);e.ScissorState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return l(o,t),n=o,o.prototype.getWebgl1Parameters=function(){return[{constant:a.WebGlConstants.STENCIL_TEST,changeCommands:['enable','disable']},{constant:a.WebGlConstants.STENCIL_BACK_FAIL,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:a.WebGlConstants.STENCIL_BACK_FUNC,returnType:20,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:a.WebGlConstants.STENCIL_BACK_PASS_DEPTH_FAIL,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:a.WebGlConstants.STENCIL_BACK_PASS_DEPTH_PASS,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:a.WebGlConstants.STENCIL_BACK_REF,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:a.WebGlConstants.STENCIL_BACK_VALUE_MASK,returnType:30,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:a.WebGlConstants.STENCIL_BACK_WRITEMASK,returnType:30,changeCommands:['stencilMask','stencilMaskSeparate']},{constant:a.WebGlConstants.STENCIL_FAIL,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:a.WebGlConstants.STENCIL_FUNC,returnType:20,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:a.WebGlConstants.STENCIL_PASS_DEPTH_FAIL,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:a.WebGlConstants.STENCIL_PASS_DEPTH_PASS,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:a.WebGlConstants.STENCIL_REF,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:a.WebGlConstants.STENCIL_VALUE_MASK,returnType:30,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:a.WebGlConstants.STENCIL_WRITEMASK,returnType:30,changeCommands:['stencilMask','stencilMaskSeparate']}]},o.prototype.isValidChangeCommand=function(e){return'enable'===e.name||'disable'===e.name?e.commandArguments[0]===a.WebGlConstants.STENCIL_TEST.value:'stencilOp'===e.name||'stencilOpSeparate'===e.name?0<n.stencilOpStates.indexOf(e.commandArguments[0]):'stencilFunc'===e.name||'stencilFuncSeparate'===e.name?0<n.stencilFuncStates.indexOf(e.commandArguments[0]):'stencilMask'!==e.name&&'stencilMaskSeparate'!==e.name||0<n.stencilMaskStates.indexOf(e.commandArguments[0])},o.prototype.getConsumeCommands=function(){return e.drawCommands},o.prototype.isStateEnable=function(){return this.context.isEnabled(a.WebGlConstants.STENCIL_TEST.value)},o.stencilOpStates=[a.WebGlConstants.STENCIL_BACK_FAIL.value,a.WebGlConstants.STENCIL_BACK_PASS_DEPTH_FAIL.value,a.WebGlConstants.STENCIL_BACK_PASS_DEPTH_PASS.value,a.WebGlConstants.STENCIL_FAIL.value,a.WebGlConstants.STENCIL_PASS_DEPTH_FAIL.value,a.WebGlConstants.STENCIL_PASS_DEPTH_PASS.value],o.stencilFuncStates=[a.WebGlConstants.STENCIL_BACK_FUNC.value,a.WebGlConstants.STENCIL_BACK_REF.value,a.WebGlConstants.STENCIL_BACK_VALUE_MASK.value,a.WebGlConstants.STENCIL_FUNC.value,a.WebGlConstants.STENCIL_REF.value,a.WebGlConstants.STENCIL_VALUE_MASK.value],o.stencilMaskStates=[a.WebGlConstants.STENCIL_BACK_WRITEMASK.value,a.WebGlConstants.STENCIL_WRITEMASK.value],o=n=i([a.Decorators.state('StencilState')],o);var n}(e.ParameterState);e.StencilState=t}(a.States||(a.States={}))}(e||(e={}));var e;!function(_){!function(e){var t=function(a){function o(n,e){var t=a.call(this,n,e)||this;return t.captureFrameBuffer=n.context.createFramebuffer(),t.workingCanvas=document.createElement('canvas'),t.workingContext2D=t.workingCanvas.getContext('2d'),t.captureCanvas=document.createElement('canvas'),t.captureContext2D=t.captureCanvas.getContext('2d'),t.captureContext2D.imageSmoothingEnabled=!0,t.captureContext2D.mozImageSmoothingEnabled=!0,t.captureContext2D.oImageSmoothingEnabled=!0,t.captureContext2D.webkitImageSmoothingEnabled=!0,t.captureContext2D.msImageSmoothingEnabled=!0,t}return l(o,a),t=o,o.prototype.getConsumeCommands=function(){return['clear','clearBufferfv','clearBufferiv','clearBufferuiv','clearBufferfi'].concat(e.drawCommands)},o.prototype.readFromContext=function(){var e=this.context;this.currentState.Attachments=[];var t=this.context.getParameter(_.WebGlConstants.FRAMEBUFFER_BINDING.value);if(!t)return this.currentState.FrameBuffer=null,void this.getCapture(e,'Canvas COLOR_ATTACHMENT',0,0,e.drawingBufferWidth,e.drawingBufferHeight,0,0,_.WebGlConstants.UNSIGNED_BYTE.value);var d=e.getParameter(e.VIEWPORT),i=d[0],r=d[1],o=d[2],s=d[3];this.currentState.FrameBuffer=this.getSpectorData(t);var a=this.context.checkFramebufferStatus(_.WebGlConstants.FRAMEBUFFER.value);if(this.currentState.FrameBufferStatus=_.WebGlConstantsByValue[a].name,a===_.WebGlConstants.FRAMEBUFFER_COMPLETE.value)if(this.extensions[_.WebGlConstants.MAX_DRAW_BUFFERS_WEBGL.extensionName])for(var l=this.context.getParameter(_.WebGlConstants.MAX_DRAW_BUFFERS_WEBGL.value),c=0;c<l;c++)this.readFrameBufferAttachmentFromContext(this.context,t,_.WebGlConstantsByName['COLOR_ATTACHMENT'+c+'_WEBGL'],i,r,o,s);else if(1<this.contextVersion)for(var p=this.context,l=p.getParameter(_.WebGlConstants.MAX_DRAW_BUFFERS.value),c=0;c<l;c++)this.readFrameBufferAttachmentFromContext(this.context,t,_.WebGlConstantsByName['COLOR_ATTACHMENT'+c],i,r,o,s);else this.readFrameBufferAttachmentFromContext(this.context,t,_.WebGlConstantsByName.COLOR_ATTACHMENT0,i,r,o,s)},o.prototype.readFrameBufferAttachmentFromContext=function(e,t,n,i,r,o,s){var a=_.WebGlConstants.FRAMEBUFFER.value,l=this.context.getFramebufferAttachmentParameter(a,n.value,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(l!==_.WebGlConstants.NONE.value){var d=this.context.getFramebufferAttachmentParameter(a,n.value,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(d){var c=1<this.contextVersion?this.context.getFramebufferAttachmentParameter(a,n.value,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value):_.WebGlConstants.UNSIGNED_BYTE.value;l===_.WebGlConstants.RENDERBUFFER.value?this.readFrameBufferAttachmentFromRenderBuffer(e,t,n,i,r,o,s,a,c,d):l===_.WebGlConstants.TEXTURE.value&&this.readFrameBufferAttachmentFromTexture(e,t,n,i,r,o,s,a,c,d)}}},o.prototype.readFrameBufferAttachmentFromRenderBuffer=function(e,t,n,i,r,o,s,a,l,c){var u=0,y=0;if(c.__SPECTOR_Object_CustomData){var d=c.__SPECTOR_Object_CustomData;if(o=d.width,s=d.height,u=d.samples,y=d.internalFormat,!u&&!_.ReadPixelsHelper.isSupportedCombination(l,_.WebGlConstants.RGBA.value,y))return}if(u){var m=e,p=e.createRenderbuffer(),f=e.getParameter(e.RENDERBUFFER_BINDING);e.bindRenderbuffer(e.RENDERBUFFER,p),e.renderbufferStorage(e.RENDERBUFFER,y,o,s),e.bindRenderbuffer(e.RENDERBUFFER,f),e.bindFramebuffer(_.WebGlConstants.FRAMEBUFFER.value,this.captureFrameBuffer),e.framebufferRenderbuffer(_.WebGlConstants.FRAMEBUFFER.value,_.WebGlConstants.COLOR_ATTACHMENT0.value,_.WebGlConstants.RENDERBUFFER.value,p);var g=m.getParameter(m.READ_FRAMEBUFFER_BINDING),C=m.getParameter(m.DRAW_FRAMEBUFFER_BINDING);m.bindFramebuffer(m.READ_FRAMEBUFFER,t),m.bindFramebuffer(m.DRAW_FRAMEBUFFER,this.captureFrameBuffer),m.blitFramebuffer(0,0,o,s,0,0,o,s,e.COLOR_BUFFER_BIT,e.NEAREST),m.bindFramebuffer(_.WebGlConstants.FRAMEBUFFER.value,this.captureFrameBuffer),m.bindFramebuffer(m.READ_FRAMEBUFFER,g),m.bindFramebuffer(m.DRAW_FRAMEBUFFER,C),this.context.checkFramebufferStatus(_.WebGlConstants.FRAMEBUFFER.value)===_.WebGlConstants.FRAMEBUFFER_COMPLETE.value&&this.getCapture(e,n.name,i,r,o,s,0,0,_.WebGlConstants.UNSIGNED_BYTE.value),e.bindFramebuffer(_.WebGlConstants.FRAMEBUFFER.value,t),e.deleteRenderbuffer(p)}else e.bindFramebuffer(_.WebGlConstants.FRAMEBUFFER.value,this.captureFrameBuffer),e.framebufferRenderbuffer(_.WebGlConstants.FRAMEBUFFER.value,_.WebGlConstants.COLOR_ATTACHMENT0.value,_.WebGlConstants.RENDERBUFFER.value,c),this.context.checkFramebufferStatus(_.WebGlConstants.FRAMEBUFFER.value)===_.WebGlConstants.FRAMEBUFFER_COMPLETE.value&&this.getCapture(e,n.name,i,r,o,s,0,0,l),e.bindFramebuffer(_.WebGlConstants.FRAMEBUFFER.value,t)},o.prototype.readFrameBufferAttachmentFromTexture=function(e,t,n,i,r,o,s,a,l,c){var u=0;1<this.contextVersion&&(u=this.context.getFramebufferAttachmentParameter(a,n.value,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value));var g=this.context.getFramebufferAttachmentParameter(a,n.value,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value),d=this.context.getFramebufferAttachmentParameter(a,n.value,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value),m=(0<d?_.WebGlConstantsByValue[d].name:_.WebGlConstants.TEXTURE_2D.name,l);if(c.__SPECTOR_Object_CustomData){var p=c.__SPECTOR_Object_CustomData;if(o=p.width,s=p.height,m=p.type,!_.ReadPixelsHelper.isSupportedCombination(p.type,p.format,p.internalFormat))return}e.bindFramebuffer(_.WebGlConstants.FRAMEBUFFER.value,this.captureFrameBuffer),0===u?e.framebufferTexture2D(_.WebGlConstants.FRAMEBUFFER.value,_.WebGlConstants.COLOR_ATTACHMENT0.value,d||_.WebGlConstants.TEXTURE_2D.value,c,g):e.framebufferTextureLayer(_.WebGlConstants.FRAMEBUFFER.value,_.WebGlConstants.COLOR_ATTACHMENT0.value,c,g,u),this.context.checkFramebufferStatus(_.WebGlConstants.FRAMEBUFFER.value)===_.WebGlConstants.FRAMEBUFFER_COMPLETE.value&&this.getCapture(e,n.name,i,r,o,s,d,u,m),e.bindFramebuffer(_.WebGlConstants.FRAMEBUFFER.value,t)},o.prototype.getCapture=function(e,s,g,i,r,o,a,l,f){var u={attachmentName:s,src:null,textureCubeMapFace:a?_.WebGlConstantsByValue[a].name:null,textureLayer:l};if(!this.quickCapture)try{var h=_.ReadPixelsHelper.readPixels(e,g,i,r,o,f);if(h){this.workingCanvas.width=r,this.workingCanvas.height=o;var d=this.workingContext2D.createImageData(y(r),y(o));d.data.set(h),this.workingContext2D.putImageData(d,0,0);var m=r/o;1>m?(this.captureCanvas.width=t.captureBaseSize*m,this.captureCanvas.height=t.captureBaseSize):1<m?(this.captureCanvas.width=t.captureBaseSize,this.captureCanvas.height=t.captureBaseSize/m):(this.captureCanvas.width=t.captureBaseSize,this.captureCanvas.height=t.captureBaseSize),this.captureCanvas.width=T(this.captureCanvas.width,1),this.captureCanvas.height=T(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation='copy',this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this.captureContext2D.drawImage(this.workingCanvas,0,0,r,o,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation='source-over',u.src=this.captureCanvas.toDataURL()}}catch(t){this.logger.warn('Spector can not capture the visual state: '+t)}this.currentState.Attachments.push(u)},o.prototype.analyse=function(){},o.captureBaseSize=256,o=t=i([_.Decorators.state('VisualState')],o);var t}(e.BaseState);e.VisualState=t}(_.States||(_.States={}))}(e||(e={}));var e;!function(_){!function(a){var e=function(o){function s(t,e){var n=o.call(this,t,e)||this;return n.drawCallTextureInputState=new a.DrawCallTextureInputState(t,e),n.drawCallUboInputState=new a.DrawCallUboInputState(t,e),n}return l(s,o),e=s,Object.defineProperty(s.prototype,'requireStartAndStopStates',{get:function(){return!1},enumerable:!0,configurable:!0}),s.prototype.getConsumeCommands=function(){return a.drawCommands},s.prototype.getChangeCommandsByState=function(){return{}},s.prototype.readFromContext=function(){var a=this.context.getParameter(_.WebGlConstants.CURRENT_PROGRAM.value);if(a){this.currentState.frameBuffer=this.readFrameBufferFromContext(),this.currentState.programStatus={program:this.getSpectorData(a),DELETE_STATUS:this.context.getProgramParameter(a,_.WebGlConstants.DELETE_STATUS.value),LINK_STATUS:this.context.getProgramParameter(a,_.WebGlConstants.LINK_STATUS.value),VALIDATE_STATUS:this.context.getProgramParameter(a,_.WebGlConstants.VALIDATE_STATUS.value),RECOMPILABLE:_.ProgramRecompilerHelper.isBuildableProgram(a)},this.currentState.programStatus.RECOMPILABLE&&_.WebGlObjects.Program.saveInGlobalStore(a);var t=this.context.getAttachedShaders(a);this.currentState.shaders=[];for(var n=0,i=t;n<i.length;n++){var r=i[n],o=this.readShaderFromContext(r);this.currentState.shaders.push(o)}var s=this.context.getProgramParameter(a,_.WebGlConstants.ACTIVE_ATTRIBUTES.value);this.currentState.attributes=[];for(var l=0,c;l<s;l++)c=this.readAttributeFromContext(a,l),this.currentState.attributes.push(c);var u=this.context.getProgramParameter(a,_.WebGlConstants.ACTIVE_UNIFORMS.value);this.currentState.uniforms=[];for(var h=[],l=0;l<u;l++){h.push(l);var d=this.readUniformFromContext(a,l);this.currentState.uniforms.push(d)}if(1<this.contextVersion){this.readUniformsFromContextIntoState(a,h,this.currentState.uniforms);var m=this.context.getProgramParameter(a,_.WebGlConstants.ACTIVE_UNIFORM_BLOCKS.value);this.currentState.uniformBlocks=[];for(var l=0,p;l<m;l++)p=this.readUniformBlockFromContext(a,l),this.currentState.uniformBlocks.push(p);if(this.context.getParameter(_.WebGlConstants.TRANSFORM_FEEDBACK_ACTIVE.value)){var f=this.context.getProgramParameter(a,_.WebGlConstants.TRANSFORM_FEEDBACK_BUFFER_MODE.value);this.currentState.transformFeedbackMode=this.getWebGlConstant(f),this.currentState.transformFeedbacks=[];for(var g=this.context.getProgramParameter(a,_.WebGlConstants.TRANSFORM_FEEDBACK_VARYINGS.value),l=0,C;l<g;l++)C=this.readTransformFeedbackFromContext(a,l),this.currentState.transformFeedbacks.push(C)}}for(var l=0,d;l<h.length;l++){if(d=this.currentState.uniforms[l],null!==d.value&&void 0!==d.value){var E=e.samplerTypes[d.typeValue];if(E)if(d.value.length){d.textures=[];for(var y=0;y<d.value.length;y++)d.textures.push(this.readTextureFromContext(d.value[y],E))}else d.texture=this.readTextureFromContext(d.value,E)}delete d.typeValue}}},s.prototype.readFrameBufferFromContext=function(){var e=this.context.getParameter(_.WebGlConstants.FRAMEBUFFER_BINDING.value);if(!e)return null;var a={};if(a.frameBuffer=this.getSpectorData(e),this.readFrameBufferAttachmentFromContext(_.WebGlConstants.DEPTH_ATTACHMENT.value)&&(a.depthAttachment=this.readFrameBufferAttachmentFromContext(_.WebGlConstants.DEPTH_ATTACHMENT.value)),this.readFrameBufferAttachmentFromContext(_.WebGlConstants.STENCIL_ATTACHMENT.value)&&(a.stencilAttachment=this.readFrameBufferAttachmentFromContext(_.WebGlConstants.STENCIL_ATTACHMENT.value)),this.extensions[_.WebGlConstants.MAX_DRAW_BUFFERS_WEBGL.extensionName]){a.colorAttachments=[];for(var n=this.context.getParameter(_.WebGlConstants.MAX_DRAW_BUFFERS_WEBGL.value),i=0,r;i<n;i++)r=this.readFrameBufferAttachmentFromContext(_.WebGlConstantsByName['COLOR_ATTACHMENT'+i+'_WEBGL'].value),r&&a.colorAttachments.push(r)}else if(1<this.contextVersion){var o=this.context;a.colorAttachments=[];for(var n=o.getParameter(_.WebGlConstants.MAX_DRAW_BUFFERS.value),i=0,r;i<n;i++)r=this.readFrameBufferAttachmentFromContext(_.WebGlConstantsByName['COLOR_ATTACHMENT'+i].value),r&&a.colorAttachments.push(r)}else{var r=this.readFrameBufferAttachmentFromContext(_.WebGlConstantsByName.COLOR_ATTACHMENT0.value);r&&(a.colorAttachments=[r])}return a},s.prototype.readFrameBufferAttachmentFromContext=function(e){var t=_.WebGlConstants.FRAMEBUFFER.value,n=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(n!==_.WebGlConstants.NONE.value){var i={},r=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(n===_.WebGlConstants.RENDERBUFFER.value){if(i.type='RENDERBUFFER',i.buffer=this.getSpectorData(r),r){var o=r.__SPECTOR_Object_CustomData;o&&(o.internalFormat&&(i.internalFormat=this.getWebGlConstant(o.internalFormat)),i.width=o.width,i.height=o.height,i.msaaSamples=o.samples)}}else if(n===_.WebGlConstants.TEXTURE.value){i.type='TEXTURE',i.texture=this.getSpectorData(r),i.textureLevel=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value);var s=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value);i.textureCubeMapFace=this.getWebGlConstant(s),this.drawCallTextureInputState.appendTextureState(i,r)}return this.extensions.EXT_sRGB&&(i.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT.value))),1<this.contextVersion&&(i.alphaSize=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE.value),i.blueSize=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE.value),i.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING.value)),i.componentType=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value)),i.depthSize=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE.value),i.greenSize=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE.value),i.redSize=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_RED_SIZE.value),i.stencilSize=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE.value),n===_.WebGlConstants.TEXTURE.value&&(i.textureLayer=this.context.getFramebufferAttachmentParameter(t,e,_.WebGlConstants.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value))),i}},s.prototype.readShaderFromContext=function(e){var t=this.context.getShaderSource(e),a=this.getSpectorData(e),s=e&&e.__SPECTOR_Metadata&&e.__SPECTOR_Metadata.name,r=s?e.__SPECTOR_Metadata.name:this.readNameFromShaderSource(t);return r||(r=this.context.getShaderParameter(e,_.WebGlConstants.SHADER_TYPE.value)===_.WebGlConstants.FRAGMENT_SHADER.value?'Fragment':'Vertex'),{shader:a,COMPILE_STATUS:this.context.getShaderParameter(e,_.WebGlConstants.COMPILE_STATUS.value),DELETE_STATUS:this.context.getShaderParameter(e,_.WebGlConstants.DELETE_STATUS.value),SHADER_TYPE:this.getWebGlConstant(this.context.getShaderParameter(e,_.WebGlConstants.SHADER_TYPE.value)),source:t,name:r}},s.prototype.readAttributeFromContext=function(e,t){var n=this.context.getActiveAttrib(e,t),i=this.context.getAttribLocation(e,n.name);if(-1===i)return{name:n.name,size:n.size,type:this.getWebGlConstant(n.type),location:-1};var l=this.context.getVertexAttrib(i,_.WebGlConstants.CURRENT_VERTEX_ATTRIB.value),o=this.context.getVertexAttrib(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING.value),s={name:n.name,size:n.size,type:this.getWebGlConstant(n.type),location:i,offsetPointer:this.context.getVertexAttribOffset(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_POINTER.value),bufferBinding:this.getSpectorData(o),enabled:this.context.getVertexAttrib(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_ENABLED.value),arraySize:this.context.getVertexAttrib(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_SIZE.value),stride:this.context.getVertexAttrib(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_STRIDE.value),arrayType:this.getWebGlConstant(this.context.getVertexAttrib(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_TYPE.value)),normalized:this.context.getVertexAttrib(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_NORMALIZED.value),vertexAttrib:Array.prototype.slice.call(l)};return this.extensions[_.WebGlConstants.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.extensionName]?s.divisor=this.context.getVertexAttrib(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.value):1<this.contextVersion&&(s.integer=this.context.getVertexAttrib(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_INTEGER.value),s.divisor=this.context.getVertexAttrib(i,_.WebGlConstants.VERTEX_ATTRIB_ARRAY_DIVISOR.value)),this.appendBufferCustomData(s,o),s},s.prototype.readUniformFromContext=function(d,e){var t=this.context.getActiveUniform(d,e),n=this.context.getUniformLocation(d,t.name);if(n){if(1<t.size&&t.name&&t.name.indexOf('[0]')===t.name.length-3){for(var i=[],c=0,o;c<t.size;c++)if(o=this.context.getUniformLocation(d,t.name.replace('[0]','['+c+']')),o){var s=this.context.getUniform(d,o);s.length&&(s=Array.prototype.slice.call(s)),i.push({value:s})}var p={name:t.name.replace('[0]',''),size:t.size,type:this.getWebGlConstant(t.type),typeValue:t.type,location:this.getSpectorData(n),values:i};return p}var s=this.context.getUniform(d,n);s.length&&(s=Array.prototype.slice.call(s));var p={name:t.name,size:t.size,type:this.getWebGlConstant(t.type),typeValue:t.type,location:this.getSpectorData(n),value:s};return p}var p={name:t.name,size:t.size,type:this.getWebGlConstant(t.type),typeValue:t.type};return p},s.prototype.readTextureFromContext=function(e,t){var n=this.context.getParameter(_.WebGlConstants.ACTIVE_TEXTURE.value);this.context.activeTexture(_.WebGlConstants.TEXTURE0.value+e);var i={magFilter:this.getWebGlConstant(this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_MAG_FILTER.value)),minFilter:this.getWebGlConstant(this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_MIN_FILTER.value)),wrapS:this.getWebGlConstant(this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_WRAP_S.value)),wrapT:this.getWebGlConstant(this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_WRAP_T.value))};if(this.extensions[_.WebGlConstants.TEXTURE_MAX_ANISOTROPY_EXT.extensionName]&&(i.anisotropy=this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_MAX_ANISOTROPY_EXT.value)),1<this.contextVersion){i.baseLevel=this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_BASE_LEVEL.value),i.immutable=this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_IMMUTABLE_FORMAT.value),i.immutableLevels=this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_IMMUTABLE_LEVELS.value),i.maxLevel=this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_IMMUTABLE_LEVELS.value);var r=this.context.getParameter(_.WebGlConstants.SAMPLER_BINDING.value);if(r){i.sampler=this.getSpectorData(r);var o=this.context;i.samplerMaxLod=o.getSamplerParameter(r,_.WebGlConstants.TEXTURE_IMMUTABLE_LEVELS.value),i.samplerMinLod=o.getSamplerParameter(r,_.WebGlConstants.TEXTURE_IMMUTABLE_LEVELS.value),i.samplerCompareFunc=this.getWebGlConstant(o.getSamplerParameter(r,_.WebGlConstants.TEXTURE_COMPARE_FUNC.value)),i.samplerCompareMode=this.getWebGlConstant(o.getSamplerParameter(r,_.WebGlConstants.TEXTURE_COMPARE_MODE.value)),i.samplerWrapS=this.getWebGlConstant(o.getSamplerParameter(r,_.WebGlConstants.TEXTURE_WRAP_S.value)),i.samplerWrapT=this.getWebGlConstant(o.getSamplerParameter(r,_.WebGlConstants.TEXTURE_WRAP_T.value)),i.samplerWrapR=this.getWebGlConstant(o.getSamplerParameter(r,_.WebGlConstants.TEXTURE_IMMUTABLE_LEVELS.value)),i.samplerMagFilter=this.getWebGlConstant(o.getSamplerParameter(r,_.WebGlConstants.TEXTURE_MAG_FILTER.value)),i.samplerMinFilter=this.getWebGlConstant(o.getSamplerParameter(r,_.WebGlConstants.TEXTURE_MIN_FILTER.value))}else i.maxLod=this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_IMMUTABLE_LEVELS.value),i.minLod=this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_IMMUTABLE_LEVELS.value),i.compareFunc=this.getWebGlConstant(this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_COMPARE_FUNC.value)),i.compareMode=this.getWebGlConstant(this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_COMPARE_MODE.value)),i.wrapR=this.getWebGlConstant(this.context.getTexParameter(t.value,_.WebGlConstants.TEXTURE_IMMUTABLE_LEVELS.value))}var s=this.getTextureStorage(t);if(s){var a=this.quickCapture?null:t;this.drawCallTextureInputState.appendTextureState(i,s,a)}return this.context.activeTexture(n),i},s.prototype.getTextureStorage=function(e){return e===_.WebGlConstants.TEXTURE_2D?this.context.getParameter(_.WebGlConstants.TEXTURE_BINDING_2D.value):e===_.WebGlConstants.TEXTURE_CUBE_MAP?this.context.getParameter(_.WebGlConstants.TEXTURE_BINDING_CUBE_MAP.value):e===_.WebGlConstants.TEXTURE_3D?this.context.getParameter(_.WebGlConstants.TEXTURE_BINDING_3D.value):e===_.WebGlConstants.TEXTURE_2D_ARRAY?this.context.getParameter(_.WebGlConstants.TEXTURE_BINDING_2D_ARRAY.value):void 0},s.prototype.readUniformsFromContextIntoState=function(e,t,n){for(var i=this.context,r=i.getActiveUniforms(e,t,_.WebGlConstants.UNIFORM_TYPE.value),o=i.getActiveUniforms(e,t,_.WebGlConstants.UNIFORM_SIZE.value),s=i.getActiveUniforms(e,t,_.WebGlConstants.UNIFORM_BLOCK_INDEX.value),a=i.getActiveUniforms(e,t,_.WebGlConstants.UNIFORM_OFFSET.value),l=i.getActiveUniforms(e,t,_.WebGlConstants.UNIFORM_ARRAY_STRIDE.value),c=i.getActiveUniforms(e,t,_.WebGlConstants.UNIFORM_MATRIX_STRIDE.value),p=i.getActiveUniforms(e,t,_.WebGlConstants.UNIFORM_IS_ROW_MAJOR.value),u=0,d;u<t.length;u++)d=n[u],d.type=this.getWebGlConstant(r[u]),d.size=o[u],d.blockIndice=s[u],-1<d.blockIndice&&(d.blockName=i.getActiveUniformBlockName(e,d.blockIndice)),d.offset=a[u],d.arrayStride=l[u],d.matrixStride=c[u],d.rowMajor=p[u],-1<d.blockIndice&&(d.value=this.drawCallUboInputState.getUboValue(s[u],d.offset,d.size,r[u]))},s.prototype.readTransformFeedbackFromContext=function(e,t){var n=this.context,a=n.getTransformFeedbackVarying(e,t),r=n.getIndexedParameter(_.WebGlConstants.TRANSFORM_FEEDBACK_BUFFER_BINDING.value,t),o={name:a.name,size:a.size,type:this.getWebGlConstant(a.type),buffer:this.getSpectorData(r),bufferSize:n.getIndexedParameter(_.WebGlConstants.TRANSFORM_FEEDBACK_BUFFER_SIZE.value,t),bufferStart:n.getIndexedParameter(_.WebGlConstants.TRANSFORM_FEEDBACK_BUFFER_START.value,t)};return this.appendBufferCustomData(o,r),o},s.prototype.readUniformBlockFromContext=function(e,t){var n=this.context,a=n.getActiveUniformBlockParameter(e,t,_.WebGlConstants.UNIFORM_BLOCK_BINDING.value),i=n.getIndexedParameter(_.WebGlConstants.UNIFORM_BUFFER_BINDING.value,a),o={name:n.getActiveUniformBlockName(e,t),bindingPoint:a,size:n.getActiveUniformBlockParameter(e,t,_.WebGlConstants.UNIFORM_BLOCK_DATA_SIZE.value),activeUniformCount:n.getActiveUniformBlockParameter(e,t,_.WebGlConstants.UNIFORM_BLOCK_ACTIVE_UNIFORMS.value),vertex:n.getActiveUniformBlockParameter(e,t,_.WebGlConstants.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER.value),fragment:n.getActiveUniformBlockParameter(e,t,_.WebGlConstants.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER.value),buffer:this.getSpectorData(i)};return this.appendBufferCustomData(o,i),o},s.prototype.appendBufferCustomData=function(a,e){if(e){var t=e.__SPECTOR_Object_CustomData;t&&(t.usage&&(a.bufferUsage=this.getWebGlConstant(t.usage)),a.bufferLength=t.length,t.offset&&(a.bufferOffset=t.offset),t.sourceLength&&(a.bufferSourceLength=t.sourceLength))}},s.prototype.getWebGlConstant=function(e){var t=_.WebGlConstantsByValue[e];return t?t.name:e},s.prototype.readNameFromShaderSource=function(a){try{var e='',t=/#define[\s]+SHADER_NAME[\s]+([\S]+)(\n|$)/gi,o;if(o=t.exec(a),null!==o&&(o.index===t.lastIndex&&t.lastIndex++,e=o[1]),''===e){var n=/#define[\s]+SHADER_NAME_B64[\s]+([\S]+)(\n|$)/gi;o=n.exec(a),null!==o&&(o.index===n.lastIndex&&n.lastIndex++,e=o[1]),e&&(e=decodeURIComponent(atob(e)))}return e}catch(t){return null}},s.samplerTypes=(t={},t[_.WebGlConstants.SAMPLER_2D.value]=_.WebGlConstants.TEXTURE_2D,t[_.WebGlConstants.SAMPLER_CUBE.value]=_.WebGlConstants.TEXTURE_CUBE_MAP,t[_.WebGlConstants.SAMPLER_3D.value]=_.WebGlConstants.TEXTURE_3D,t[_.WebGlConstants.SAMPLER_2D_SHADOW.value]=_.WebGlConstants.TEXTURE_2D,t[_.WebGlConstants.SAMPLER_2D_ARRAY.value]=_.WebGlConstants.TEXTURE_2D_ARRAY,t[_.WebGlConstants.SAMPLER_2D_ARRAY_SHADOW.value]=_.WebGlConstants.TEXTURE_2D_ARRAY,t[_.WebGlConstants.SAMPLER_CUBE_SHADOW.value]=_.WebGlConstants.TEXTURE_CUBE_MAP,t[_.WebGlConstants.INT_SAMPLER_2D.value]=_.WebGlConstants.TEXTURE_2D,t[_.WebGlConstants.INT_SAMPLER_3D.value]=_.WebGlConstants.TEXTURE_3D,t[_.WebGlConstants.INT_SAMPLER_CUBE.value]=_.WebGlConstants.TEXTURE_CUBE_MAP,t[_.WebGlConstants.INT_SAMPLER_2D_ARRAY.value]=_.WebGlConstants.TEXTURE_2D_ARRAY,t[_.WebGlConstants.UNSIGNED_INT_SAMPLER_2D.value]=_.WebGlConstants.TEXTURE_2D,t[_.WebGlConstants.UNSIGNED_INT_SAMPLER_3D.value]=_.WebGlConstants.TEXTURE_3D,t[_.WebGlConstants.UNSIGNED_INT_SAMPLER_CUBE.value]=_.WebGlConstants.TEXTURE_CUBE_MAP,t[_.WebGlConstants.UNSIGNED_INT_SAMPLER_2D_ARRAY.value]=_.WebGlConstants.TEXTURE_2D_ARRAY,t),s=e=i([_.Decorators.state('DrawCall')],s);var e}(a.BaseState);a.DrawCallState=e;var t}(_.States||(_.States={}))}(e||(e={}));var e;!function(g){!function(e){var t=function(){function n(n,e){this.logger=e,this.context=n.context,this.captureFrameBuffer=n.context.createFramebuffer(),this.workingCanvas=document.createElement('canvas'),this.workingContext2D=this.workingCanvas.getContext('2d'),this.captureCanvas=document.createElement('canvas'),this.captureContext2D=this.captureCanvas.getContext('2d'),this.captureContext2D.imageSmoothingEnabled=!0,this.captureContext2D.mozImageSmoothingEnabled=!0,this.captureContext2D.oImageSmoothingEnabled=!0,this.captureContext2D.webkitImageSmoothingEnabled=!0,this.captureContext2D.msImageSmoothingEnabled=!0}return n.prototype.appendTextureState=function(a,e,t){if(void 0===t&&(t=null),e){var n=e.__SPECTOR_Object_CustomData;n&&(n.type&&(a.textureType=this.getWebGlConstant(n.type)),n.format&&(a.format=this.getWebGlConstant(n.format)),n.internalFormat&&(a.internalFormat=this.getWebGlConstant(n.internalFormat)),a.width=n.width,a.height=n.height,n.depth&&(a.depth=n.depth),t&&(a.visual=this.getTextureVisualState(t,e,n)))}},n.prototype.getTextureVisualState=function(e,t,i){try{var r=this.context,o={};if(!g.ReadPixelsHelper.isSupportedCombination(i.type,i.format,i.internalFormat))return o;var s=this.context.getParameter(g.WebGlConstants.FRAMEBUFFER_BINDING.value);r.bindFramebuffer(g.WebGlConstants.FRAMEBUFFER.value,this.captureFrameBuffer);try{var a=i.width,l=i.height;if(e===g.WebGlConstants.TEXTURE_3D&&i.depth)for(var c=r,u=0;u<i.depth;u++)2<u&&u<i.depth-3||(c.framebufferTextureLayer(g.WebGlConstants.FRAMEBUFFER.value,g.WebGlConstants.COLOR_ATTACHMENT0.value,t,0,u),o['3D Layer '+u]=this.getCapture(r,0,0,a,l,i.type));else if(e===g.WebGlConstants.TEXTURE_2D_ARRAY&&i.depth)for(var c=r,u=0;u<i.depth;u++)2<u&&u<i.depth-3||(c.framebufferTextureLayer(g.WebGlConstants.FRAMEBUFFER.value,g.WebGlConstants.COLOR_ATTACHMENT0.value,t,0,u),o['Layer '+u]=this.getCapture(r,0,0,a,l,i.type));else if(e===g.WebGlConstants.TEXTURE_CUBE_MAP)for(var h=0,d=n.cubeMapFaces,m;h<d.length;h++)m=d[h],r.framebufferTexture2D(g.WebGlConstants.FRAMEBUFFER.value,g.WebGlConstants.COLOR_ATTACHMENT0.value,m.value,t,0),o[m.name]=this.getCapture(r,0,0,a,l,i.type);else r.framebufferTexture2D(g.WebGlConstants.FRAMEBUFFER.value,g.WebGlConstants.COLOR_ATTACHMENT0.value,g.WebGlConstants.TEXTURE_2D.value,t,0),o[g.WebGlConstants.TEXTURE_2D.name]=this.getCapture(r,0,0,a,l,i.type)}catch(t){}return r.bindFramebuffer(g.WebGlConstants.FRAMEBUFFER.value,s),o}catch(t){}},n.prototype.getCapture=function(t,n,i,r,o,s){try{if(this.context.checkFramebufferStatus(g.WebGlConstants.FRAMEBUFFER.value)!==g.WebGlConstants.FRAMEBUFFER_COMPLETE.value)return;s=s||g.WebGlConstants.UNSIGNED_BYTE.value;var a=g.ReadPixelsHelper.readPixels(t,n,i,r,o,s);if(!a)return;this.workingCanvas.width=r,this.workingCanvas.height=o;var d=this.workingContext2D.createImageData(r,o);d.data.set(a),this.workingContext2D.putImageData(d,0,0);var c=r/o;return 1>c?(this.captureCanvas.width=e.VisualState.captureBaseSize*c,this.captureCanvas.height=e.VisualState.captureBaseSize):1<c?(this.captureCanvas.width=e.VisualState.captureBaseSize,this.captureCanvas.height=e.VisualState.captureBaseSize/c):(this.captureCanvas.width=e.VisualState.captureBaseSize,this.captureCanvas.height=e.VisualState.captureBaseSize),this.captureCanvas.width=T(this.captureCanvas.width,1),this.captureCanvas.height=T(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation='copy',this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this.captureContext2D.drawImage(this.workingCanvas,0,0,r,o,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation='source-over',this.captureCanvas.toDataURL()}catch(t){}},n.prototype.getWebGlConstant=function(e){var t=g.WebGlConstantsByValue[e];return t?t.name:e+''},n.captureBaseSize=64,n.cubeMapFaces=[g.WebGlConstants.TEXTURE_CUBE_MAP_POSITIVE_X,g.WebGlConstants.TEXTURE_CUBE_MAP_POSITIVE_Y,g.WebGlConstants.TEXTURE_CUBE_MAP_POSITIVE_Z,g.WebGlConstants.TEXTURE_CUBE_MAP_NEGATIVE_X,g.WebGlConstants.TEXTURE_CUBE_MAP_NEGATIVE_Y,g.WebGlConstants.TEXTURE_CUBE_MAP_NEGATIVE_Z],n}();e.DrawCallTextureInputState=t}(g.States||(g.States={}))}(e||(e={}));var e;!function(o){!function(e){var t=function(){function t(n,e){this.logger=e,this.context=n.context}return t.prototype.getUboValue=function(e,n,i,r){var d=t.uboTypes[r];if(d){var s=new d.arrayBufferView(i*d.lengthMultiplier),a=this.context,l=a.getIndexedParameter(o.WebGlConstants.UNIFORM_BUFFER_BINDING.value,e);if(l){var c=a.getParameter(o.WebGlConstants.UNIFORM_BUFFER_BINDING.value);try{a.bindBuffer(o.WebGlConstants.UNIFORM_BUFFER.value,l),a.getBufferSubData(o.WebGlConstants.UNIFORM_BUFFER.value,n,s)}catch(t){return}c&&a.bindBuffer(o.WebGlConstants.UNIFORM_BUFFER.value,c)}return Array.prototype.slice.call(s)}},t.uboTypes=(n={},n[o.WebGlConstants.BOOL.value]={arrayBufferView:Uint8Array,lengthMultiplier:1},n[o.WebGlConstants.BOOL_VEC2.value]={arrayBufferView:Uint8Array,lengthMultiplier:2},n[o.WebGlConstants.BOOL_VEC3.value]={arrayBufferView:Uint8Array,lengthMultiplier:3},n[o.WebGlConstants.BOOL_VEC4.value]={arrayBufferView:Uint8Array,lengthMultiplier:4},n[o.WebGlConstants.INT.value]={arrayBufferView:Int32Array,lengthMultiplier:1},n[o.WebGlConstants.INT_VEC2.value]={arrayBufferView:Int32Array,lengthMultiplier:2},n[o.WebGlConstants.INT_VEC3.value]={arrayBufferView:Int32Array,lengthMultiplier:3},n[o.WebGlConstants.INT_VEC4.value]={arrayBufferView:Int32Array,lengthMultiplier:4},n[o.WebGlConstants.UNSIGNED_INT.value]={arrayBufferView:Uint32Array,lengthMultiplier:1},n[o.WebGlConstants.UNSIGNED_INT_VEC2.value]={arrayBufferView:Uint32Array,lengthMultiplier:2},n[o.WebGlConstants.UNSIGNED_INT_VEC3.value]={arrayBufferView:Uint32Array,lengthMultiplier:3},n[o.WebGlConstants.UNSIGNED_INT_VEC4.value]={arrayBufferView:Uint32Array,lengthMultiplier:4},n[o.WebGlConstants.FLOAT.value]={arrayBufferView:Float32Array,lengthMultiplier:1},n[o.WebGlConstants.FLOAT_VEC2.value]={arrayBufferView:Float32Array,lengthMultiplier:2},n[o.WebGlConstants.FLOAT_VEC3.value]={arrayBufferView:Float32Array,lengthMultiplier:3},n[o.WebGlConstants.FLOAT_VEC4.value]={arrayBufferView:Float32Array,lengthMultiplier:4},n[o.WebGlConstants.FLOAT_MAT2.value]={arrayBufferView:Float32Array,lengthMultiplier:4},n[o.WebGlConstants.FLOAT_MAT2x3.value]={arrayBufferView:Float32Array,lengthMultiplier:6},n[o.WebGlConstants.FLOAT_MAT2x4.value]={arrayBufferView:Float32Array,lengthMultiplier:8},n[o.WebGlConstants.FLOAT_MAT3.value]={arrayBufferView:Float32Array,lengthMultiplier:9},n[o.WebGlConstants.FLOAT_MAT3x2.value]={arrayBufferView:Float32Array,lengthMultiplier:6},n[o.WebGlConstants.FLOAT_MAT3x4.value]={arrayBufferView:Float32Array,lengthMultiplier:12},n[o.WebGlConstants.FLOAT_MAT4.value]={arrayBufferView:Float32Array,lengthMultiplier:16},n[o.WebGlConstants.FLOAT_MAT4x2.value]={arrayBufferView:Float32Array,lengthMultiplier:8},n[o.WebGlConstants.FLOAT_MAT4x3.value]={arrayBufferView:Float32Array,lengthMultiplier:12},n[o.WebGlConstants.SAMPLER_2D.value]={arrayBufferView:Uint8Array,lengthMultiplier:1},n[o.WebGlConstants.SAMPLER_CUBE.value]={arrayBufferView:Uint8Array,lengthMultiplier:1},n),t}();e.DrawCallUboInputState=t;var n}(o.States||(o.States={}))}(e||(e={}));var e;!function(t){!function(t){function i(t){return t?t.typeName+' - ID: '+t.id:'No tag available.'}var a='__SPECTOR_Object_TAG';t.getWebGlObjectTag=function t(n){return n[a]},t.attachWebGlObjectTag=function n(r,e){e.displayText=i(e),r[a]=e},t.stringifyWebGlObjectTag=i}(t.WebGlObjects||(t.WebGlObjects={}))}(e||(e={})),function(t){!function(a){var e=function(){function t(t){this.options=t,this.typeName=t.typeName,this.type=t.type,this.id=0}return t.prototype.tagWebGlObject=function(e){if(this.type){var r;if(!e)return r;if(r=a.getWebGlObjectTag(e))return r;if(e instanceof this.type){var n=this.getNextId();return r={typeName:this.typeName,id:n},a.attachWebGlObjectTag(e,r),r}return r}},t.prototype.getNextId=function(){return this.id++},t}();a.BaseWebGlObject=e}(t.WebGlObjects||(t.WebGlObjects={}))}(e||(e={}));var e;!function(a){!function(g){var e=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLBuffer')],n)}(g.BaseWebGlObject);g.Buffer=e;var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLFramebuffer')],n)}(g.BaseWebGlObject);g.FrameBuffer=t;var n=function(r){function o(n,e){return r.call(this,n,e)||this}return l(o,r),o.saveInGlobalStore=function(t){var e=g.getWebGlObjectTag(t);e&&(this.store[e.id]=t)},o.getFromGlobalStore=function(t){return this.store[t]},o.updateInGlobalStore=function(t,e){if(e){var n=this.getFromGlobalStore(t);if(n){var a=g.getWebGlObjectTag(n);a&&(g.attachWebGlObjectTag(e,a),this.store[a.id]=e)}}},o.store={},o=i([a.Decorators.webGlObject('WebGLProgram')],o)}(g.BaseWebGlObject);g.Program=n;var r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLQuery')],n)}(g.BaseWebGlObject);g.Query=r;var o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLRenderbuffer')],n)}(g.BaseWebGlObject);g.Renderbuffer=o;var s=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLSampler')],n)}(g.BaseWebGlObject);g.Sampler=s;var c=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLShader')],n)}(g.BaseWebGlObject);g.Shader=c;var u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLSync')],n)}(g.BaseWebGlObject);g.Sync=u;var h=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLTexture')],n)}(g.BaseWebGlObject);g.Texture=h;var d=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLTransformFeedback')],n)}(g.BaseWebGlObject);g.TransformFeedback=d;var m=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLUniformLocation')],n)}(g.BaseWebGlObject);g.UniformLocation=m;var p=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n=i([a.Decorators.webGlObject('WebGLVertexArrayObject')],n)}(g.BaseWebGlObject);g.VertexArrayObject=p}(a.WebGlObjects||(a.WebGlObjects={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(){function e(n,a){this.options=n,this.logger=a,this.analyserName=n.analyserName}return e.prototype.appendAnalysis=function(n){n.analyses=n.analyses||[];var e=this.getAnalysis(n);n.analyses.push(e)},e.prototype.getAnalysis=function(n){var e={analyserName:this.analyserName};return this.appendToAnalysis(n,e),e},e}();n.BaseAnalyser=e}(t.Analysers||(t.Analysers={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(){function t(n,e){this.options=n,this.logger=e,this.analysers={},this.analyserConstructors={},this.contextInformation=n.contextInformation,this.initAvailableAnalysers(),this.initAnalysers()}return t.prototype.appendAnalyses=function(a){for(var e in this.analysers)if(this.analysers.hasOwnProperty(e)){var t=this.analysers[e];t.appendAnalysis(a)}},t.prototype.initAvailableAnalysers=function(){for(var e in this.options.analyserNamespace)if(this.options.analyserNamespace.hasOwnProperty(e)){var t=this.options.analyserNamespace[e],n=a.Decorators.getAnalyserName(t);n&&(this.analyserConstructors[n]=t)}},t.prototype.initAnalysers=function(){for(var e in this.analyserConstructors)if(this.analyserConstructors.hasOwnProperty(e)){var r=a.merge({analyserName:e},this.contextInformation),n=new this.analyserConstructors[e](r,this.logger);this.analysers[e]=n}},t}();e.CaptureAnalyser=t}(a.Analysers||(a.Analysers={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),s=n,n.prototype.appendToAnalysis=function(a,e){if(a.commands){e.total=a.commands.length,e.draw=0,e.clear=0;for(var t=0,n=a.commands,o;t<n.length;t++)o=n[t],'clear'===o.name?e.clear++:-1<s.drawCommands.indexOf(o.name)&&e.draw++}},n.drawCommands=['drawArrays','drawElements','drawArraysInstanced','drawElementsInstanced','drawElementsInstancedANGLE','drawRangeElements'],n=s=i([a.Decorators.analyser('CommandsSummary')],n);var s}(e.BaseAnalyser);e.CommandsSummaryAnalyser=t}(a.Analysers||(a.Analysers={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.appendToAnalysis=function(d,e){if(d.commands){for(var t={},n=0,i=d.commands,r;n<i.length;n++)r=i[n],t[r.name]=t[r.name]||0,t[r.name]++;var o=Object.keys(t).map(function(n){return[n,t[n]]});o.sort(function(a,e){var t=e[1]-a[1];return 0==t?a[0].localeCompare(e[0]):t});for(var s=0,a=o,l;s<a.length;s++)l=a[s],e[l[0]]=l[1]}},n=i([a.Decorators.analyser('Commands')],n)}(e.BaseAnalyser);e.CommandsAnalyser=t}(a.Analysers||(a.Analysers={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.appendToAnalysis=function(a,e){if(a.commands){for(var t={total:0,totalTriangles:0,totalTriangleStrip:0,totalTriangleFan:0,totalLines:0,totalLineStrip:0,totalLineLoop:0,totalPoints:0},n=0,i=a.commands,r;n<i.length;n++)r=i[n],'drawArrays'===r.name&&3<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[2]):'drawArraysInstanced'===r.name&&3<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[2]):'drawArraysInstancedANGLE'===r.name&&3<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[2]):'drawElements'===r.name&&2<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[1]):'drawElementsInstanced'===r.name&&2<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[1]):'drawElementsInstancedANGLE'===r.name&&2<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[1]):'drawRangeElements'===r.name&&4<=r.commandArguments.length&&this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[3]);e.total=t.total,e.triangles=t.totalTriangles,e.triangleStrip=t.totalTriangleStrip,e.triangleFan=t.totalTriangleFan,e.lines=t.totalLines,e.lineStrip=t.totalLineStrip,e.lineLoop=t.totalLineLoop,e.points=t.totalPoints}},n.prototype.appendToPrimitives=function(e,t,n){t===a.WebGlConstants.POINTS.value?e.totalPoints+=n:t===a.WebGlConstants.LINES.value?e.totalLines+=n:t===a.WebGlConstants.LINE_STRIP.value?e.totalLineStrip+=n:t===a.WebGlConstants.LINE_LOOP.value?e.totalLineLoop+=n:t===a.WebGlConstants.TRIANGLES.value?e.totalTriangles+=n:t===a.WebGlConstants.TRIANGLE_STRIP.value?e.totalTriangleStrip+=n:t===a.WebGlConstants.TRIANGLE_FAN.value&&(e.totalTriangleFan+=n),e.total+=n},n=i([a.Decorators.analyser('Primitives')],n)}(e.BaseAnalyser);e.PrimitivesAnalyser=t}(a.Analysers||(a.Analysers={}))}(e||(e={}));var e;!function(d){!function(e){var t=function(){function t(t){this.logger=t}return t.prototype.compare=function(a,e){var t={groups:[],properties:[]},n=this.compareGroups('Command',a,e),o=n.groups[0];return t.groups=o.groups,t.properties=o.properties,t},t.prototype.compareGroups=function(e,p,n){var i={},r={name:e,groups:[],properties:[],status:d.CaptureComparisonStatus.Equal};for(var o in p)if(p.hasOwnProperty(o)){var s=p[o];if(n.hasOwnProperty(o)){var m=n[o];if('object'==typeof s){var g=this.compareGroups(o,s,m);g.status!==d.CaptureComparisonStatus.Equal&&(r.status=d.CaptureComparisonStatus.Different),r.groups.push(g)}else{var g=this.compareProperties(o,s,m);g.status!==d.CaptureComparisonStatus.Equal&&(r.status=d.CaptureComparisonStatus.Different),r.properties.push(g)}}else if(r.status=d.CaptureComparisonStatus.Different,'object'==typeof s){var g={name:e,status:d.CaptureComparisonStatus.OnlyInA,groups:[],properties:[]};r.groups.push(g)}else{var g={name:e,status:d.CaptureComparisonStatus.OnlyInA,valueA:s,valueB:null};r.properties.push(g)}i[o]=!0}for(var c in n)if(n.hasOwnProperty(c)&&!i[c]){r.status=d.CaptureComparisonStatus.Different;var m=n[c];if('object'==typeof m){var g={name:e,status:d.CaptureComparisonStatus.OnlyInB,groups:[],properties:[]};r.groups.push(g)}else{var g={name:e,status:d.CaptureComparisonStatus.OnlyInB,valueA:null,valueB:m};r.properties.push(g)}}return r},t.prototype.compareProperties=function(e,a,r){return{name:e,status:a===r?d.CaptureComparisonStatus.Equal:d.CaptureComparisonStatus.Different,valueA:a,valueB:r}},t}();e.CommandComparator=t}(d.Comparators||(d.Comparators={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(){function e(){}return e.scrollIntoView=function(a){for(var e=a.getBoundingClientRect(),t=a.parentElement;t&&t.clientHeight===t.offsetHeight;)t=t.parentElement;if(t){var n=t.getBoundingClientRect();e.top<n.top?a.scrollIntoView(!0):e.bottom>n.bottom&&a.scrollIntoView(!1)}},e}();n.ScrollIntoViewHelper=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(a){var e=function(){function e(n,a){this.eventConstructor=n,this.logger=a,this.dummyTextGeneratorElement=document.createElement('div')}return e.prototype.createFromHtml=function(n){var e=document.createElement('div');return e.innerHTML=n,e.firstElementChild},e.prototype.htmlTemplate=function(a){for(var s=this,e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var l=a.raw,r='';return e.forEach(function(t,e){var n=l[e];Array.isArray(t)&&(t=t.join('')),n&&0<n.length&&'$'===n[n.length-1]?n=n.slice(0,-1):t=s.htmlEscape(t),r+=n,r+=t}),r+=l[l.length-1]},e.prototype.htmlEscape=function(t){return null===t||void 0===t||0===t.length?t:(this.dummyTextGeneratorElement.innerText=t,this.dummyTextGeneratorElement.innerHTML)},e}();a.BaseNoneGenericComponent=e;var t=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.events={},n}return l(t,a),t.prototype.addEventListener=function(a,e,t){return void 0===t&&(t=null),this.events[a]?this.events[a].add(e,t):-1},t.prototype.removeEventListener=function(n,e){this.events[n]&&this.events[n].remove(e)},t.prototype.renderElementFromTemplate=function(a,e,t){var n=this.createFromHtml(a);return this.bindCommands(n,e,t),n},t.prototype.bindCommands=function(a,e,t){a.getAttribute('commandname')&&this.bindCommand(a,e,t);for(var n=a.querySelectorAll('[commandName]'),i=0,r;i<n.length;i++)r=n[i],this.bindCommand(r,e,t)},t.prototype.bindCommand=function(a,e,t){var n=a.getAttribute('commandname'),i=a.getAttribute('commandeventbinding')||'';0===i.length&&(i='click');var r='true'===a.getAttribute('usecapture');this.createEvent(n),this.mapEventListener(a,i,n,e,t,r)},t.prototype.mapEventListener=function(l,e,t,n,i,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var s=this;o?l.addEventListener(e,function(a){a.stopPropagation(),a.preventDefault(),s.triggerEvent(t,this,n,i)},r):l.addEventListener(e,function(){s.triggerEvent(t,this,n,i)},r)},t.prototype.createEvent=function(n){if(!this.events[n]){var e=new this.eventConstructor;this.events[n]=e}return this.events[n]},t.prototype.triggerEvent=function(a,e,r,o){this.events[a].trigger({sender:e,stateId:o,state:r})},t}(e);a.BaseComponent=t}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(){function e(a,r,t){this.logger=t,this.placeHolder=a,this.stateStore=r}return e.prototype.compose=function(d){var e=this.stateStore.getStatesToProcess(),t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],r=this.stateStore.getLastOperation(i),o=this.stateStore.getComponentInstance(i),s=this.stateStore.getData(i);o.render(s,i,r),t=!0}if(t){var a=this.stateStore.getLastOperation(d);this.composeInContainer(this.placeHolder,Number.MAX_VALUE,d,a)}},e.prototype.composeChildren=function(a,e){if(e)for(var t=this.stateStore.getChildrenIds(a),n=0,i=0;i<t.length;i++){var r=t[i],o=this.stateStore.getLastOperation(r);this.composeInContainer(e,n,r,o),50!==o&&n++}},e.prototype.composeInContainer=function(a,e,t,n){var i=this.stateStore.getComponentInstance(t),r=i.composeInContainer(a,e,n);this.composeChildren(t,r)},e}();n.Compositor=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(l){var e=function(){function t(e,a){this.logger=a,this.stateStore=new l.StateStore(a),this.compositor=new l.Compositor(e,this.stateStore,a),this.willRender=!1,this.rootStateId=-1}return t.prototype.addRootState=function(e,t,n){void 0===n&&(n=!1);var a=new l.ComponentInstance(t,this.logger),r=this.stateStore.add(e,a);return this.rootStateId=r,this.setForRender(n),r},t.prototype.addChildState=function(a,e,t,n){void 0===n&&(n=!1);var o=this.insertChildState(a,e,Number.MAX_VALUE,t);return this.setForRender(n),o},t.prototype.insertChildState=function(e,t,n,i,r){void 0===r&&(r=!1);var o=new l.ComponentInstance(i,this.logger),s=this.stateStore.insertChildAt(e,n,t,o);return this.setForRender(r),s},t.prototype.updateState=function(a,e,t){void 0===t&&(t=!1),this.stateStore.update(a,e),this.setForRender(t)},t.prototype.removeState=function(n,e){void 0===e&&(e=!1),this.stateStore.remove(n),this.setForRender(e)},t.prototype.removeChildrenStates=function(n,e){void 0===e&&(e=!1),this.stateStore.removeChildren(n),this.setForRender(e)},t.prototype.getState=function(t){return this.stateStore.getData(t)},t.prototype.getGenericState=function(t){return this.getState(t)},t.prototype.getChildrenState=function(n){var e=this;return this.stateStore.getChildrenIds(n).map(function(){return e.stateStore.getData(n)})},t.prototype.getChildrenGenericState=function(t){return this.getChildrenState(t)},t.prototype.hasChildren=function(t){return this.stateStore.hasChildren(t)},t.prototype.updateAllChildrenState=function(a,e){for(var t=this.stateStore.getChildrenIds(a),n=0,i=t;n<i.length;n++){var r=i[n],o=this.getGenericState(r);e(o),this.updateState(r,o)}},t.prototype.updateAllChildrenGenericState=function(n,e){this.updateAllChildrenState(n,e)},t.prototype.setForRender=function(n){this.willRender||(this.willRender=!0,n?this.compose():setTimeout(this.compose.bind(this),t.REFRESHRATEINMILLISECONDS))},t.prototype.compose=function(){this.willRender=!1,this.compositor.compose(this.rootStateId),this.stateStore.flushPendingOperations()},t.REFRESHRATEINMILLISECONDS=100,t}();l.MVX=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(){function e(n,a){this.logger=a,this.component=n}return e.prototype.render=function(a,e,t){if(0!==t)return 50===t?void this.removeNode():void(this.domNode=this.component.render(a,e))},e.prototype.composeInContainer=function(l,e,t){if(50===t)return this.removeNode(),null;var n=this.cachedCurrentChildrenContainer;if(0===t)return n;var i=this.domNode,r=i.getAttribute('childrencontainer')?i:i.querySelector('[childrenContainer]');if(r&&n)for(var o=n.children;0<o.length;)r.appendChild(o[0]);if(this.cachedCurrentChildrenContainer=r,e>=l.children.length)l.appendChild(i),this.cachedCurrentDomNode&&40===t&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode));else{var s=l.children[e];l.insertBefore(i,s),40===t&&l.removeChild(s)}return this.cachedCurrentDomNode=this.domNode,r},e.prototype.removeNode=function(){this.domNode&&this.domNode.parentElement&&(this.domNode.remove?this.domNode.remove():this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode)),this.cachedCurrentDomNode&&this.cachedCurrentDomNode.parentElement&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode))},e.idGenerator=0,e}();n.ComponentInstance=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(){function e(t){this.logger=t,this.store={},this.idGenerator=0,this.pendingOperation={}}return e.prototype.getLastOperation=function(t){return this.store[t].lastOperation},e.prototype.getData=function(t){return this.store[t].data},e.prototype.getComponentInstance=function(t){return this.store[t].componentInstance},e.prototype.getParentId=function(t){return this.store[t].parent?this.store[t].parent.id:-1},e.prototype.getChildrenIds=function(a){for(var e=[],t=0,n=this.store[a].children,o;t<n.length;t++)o=n[t],e.push(o.id);return e},e.prototype.hasChildren=function(t){return 0<this.store[t].children.length},e.prototype.add=function(a,r){var o=this.getNewId();return this.pendingOperation[o]=o,this.store[o]={data:a,id:o,parent:null,children:[],componentInstance:r,lastOperation:20},o},e.prototype.update=function(n,e){this.store[n],this.pendingOperation[n]=n,this.store[n].data=e,this.store[n].lastOperation=40},e.prototype.addChild=function(a,e,t){var n=this.store[a],i=this.add(e,t);this.pendingOperation[i]=i;var r=this.store[i];return r.parent=n,n.children.push(r),i},e.prototype.insertChildAt=function(a,e,t,n){var i=this.store[a],r=this.add(t,n);this.pendingOperation[r]=r;var o=this.store[r];return o.parent=i,e>=i.children.length?i.children.push(o):0<=e?i.children.splice(e,0,o):i.children.unshift(o),r},e.prototype.removeChildById=function(a,e){for(var t=this.store[a],n=t.children.length-1;0<=n;n--)if(t.children[n].id===e){this.removeChildAt(a,n);break}},e.prototype.removeChildAt=function(a,e){var t=this.store[a],r;e>t.children.length-1?(r=t.children[t.children.length-1],t.children[t.children.length-1].parent=null,t.children.splice(t.children.length-1,1)):0<=e?(r=t.children[e],t.children[e].parent=null,t.children.splice(e,1)):(r=t.children[0],t.children[0].parent=null,t.children.splice(0,1)),r.parent=null,this.remove(r.id)},e.prototype.remove=function(n){var e=this.store[n];e.parent?(this.store[e.parent.id],this.removeChildById(e.parent.id,n)):(this.removeChildren(n),this.store[n].lastOperation=50,this.pendingOperation[n]=n)},e.prototype.removeChildren=function(n){for(var e=this.store[n];e.children.length;)this.remove(e.children[0].id)},e.prototype.getStatesToProcess=function(){return this.pendingOperation},e.prototype.flushPendingOperations=function(){for(var t in this.pendingOperation)this.pendingOperation[t]&&(50===this.store[t].lastOperation?delete this.store[t]:this.store[t].lastOperation=0);this.pendingOperation={}},e.prototype.getNewId=function(){return++this.idGenerator},e}();n.StateStore=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(a){!function(e){var t=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return l(n,e),n.prototype.render=function(e,t){var n=(o=['<div>\n                <div childrenContainer="true" class="captureMenuComponent ','">\n                </div>\n                <div class="captureMenuLogComponent ','">\n                    <span class="','">','<span>\n                </div>\n            </div>'],o.raw=['<div>\n                <div childrenContainer="true" class="captureMenuComponent ','">\n                </div>\n                <div class="captureMenuLogComponent ','">\n                    <span class="','">','<span>\n                </div>\n            </div>'],this.htmlTemplate(o,e?'active':'',e.logVisible?'active':'',e.logLevel===a.LogLevel.error?'error':'',e.logText));return this.renderElementFromTemplate(n,e,t);var o},n}(e.BaseComponent);e.CaptureMenuComponent=t}(a.EmbeddedFrontend||(a.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.onCaptureRequested=n.createEvent('onCaptureRequested'),n.onPlayRequested=n.createEvent('onPlayRequested'),n.onPauseRequested=n.createEvent('onPauseRequested'),n.onPlayNextFrameRequested=n.createEvent('onPlayNextFrameRequested'),n}return l(t,a),t.prototype.render=function(a,e){var t=(n=['\n            <div class="captureMenuActionsComponent">\n                <div commandName="onCaptureRequested">\n                </div>\n                $','\n            </div>'],n.raw=['\n            <div class="captureMenuActionsComponent">\n                <div commandName="onCaptureRequested">\n                </div>\n                $','\n            </div>'],this.htmlTemplate(n,a?'<div commandName="onPauseRequested">\n                    </div>':'<div commandName="onPlayRequested">\n                    </div>\n                    <div commandName="onPlayNextFrameRequested">\n                    </div>'));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.CaptureMenuActionsComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.onCanvasSelection=n.createEvent('onCanvasSelection'),n}return l(t,a),t.prototype.render=function(a,e){var t=(n=['\n            <div class="canvasListComponent">\n                <span commandName="onCanvasSelection">\n                    ','\n                </span>\n                <ul childrenContainer="true" style="','"></ul>\n            </div>'],n.raw=['\n            <div class="canvasListComponent">\n                <span commandName="onCanvasSelection">\n                    ','\n                </span>\n                <ul childrenContainer="true" style="','"></ul>\n            </div>'],this.htmlTemplate(n,a.currentCanvasInformation?a.currentCanvasInformation.id+' ('+a.currentCanvasInformation.width+'*'+a.currentCanvasInformation.height+')':'Choose Canvas...',a.showList?'display:block;visibility:visible':'display:none;visibility:hidden'));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.CanvasListComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.onCanvasSelected=n.createEvent('onCanvasSelected'),n}return l(t,a),t.prototype.render=function(a,e){var t=document.createElement('li'),n=document.createElement('span');return n.innerText='Id: '+a.id+' - Size: '+a.width+'*'+a.height,t.appendChild(n),this.mapEventListener(t,'click','onCanvasSelected',a,e),t},t}(n.BaseComponent);n.CanvasListItemComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(t){var e=document.createElement('span');return e.className='fpsCounterComponent',e.innerText=t.toFixed(2)+' Fps',e},t}(n.BaseComponent);n.FpsCounterComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(d){!function(e){var t=function(){function n(t,a){var r=this;this.options=t,this.logger=a,this.rootPlaceHolder=t.rootPlaceHolder||document.body,this.mvx=new e.MVX(this.rootPlaceHolder,a),this.isTrackingCanvas=!1,this.onCanvasSelected=new t.eventConstructor,this.onCaptureRequested=new t.eventConstructor,this.onPauseRequested=new t.eventConstructor,this.onPlayRequested=new t.eventConstructor,this.onPlayNextFrameRequested=new t.eventConstructor,this.captureMenuComponent=new e.CaptureMenuComponent(t.eventConstructor,a),this.canvasListComponent=new e.CanvasListComponent(t.eventConstructor,a),this.canvasListItemComponent=new e.CanvasListItemComponent(this.options.eventConstructor,this.logger),this.actionsComponent=new e.CaptureMenuActionsComponent(t.eventConstructor,a),this.fpsCounterComponent=new e.FpsCounterComponent(t.eventConstructor,a),this.rootStateId=this.mvx.addRootState({visible:!0,logLevel:d.LogLevel.info,logText:n.SelectCanvasHelpText,logVisible:!this.options.hideLog},this.captureMenuComponent),this.canvasListStateId=this.mvx.addChildState(this.rootStateId,{currentCanvasInformation:null,showList:!1},this.canvasListComponent),this.actionsStateId=this.mvx.addChildState(this.rootStateId,!0,this.actionsComponent),this.fpsStateId=this.mvx.addChildState(this.rootStateId,0,this.fpsCounterComponent),this.actionsComponent.onCaptureRequested.add(function(){var e=r.getSelectedCanvasInformation();e&&r.updateMenuStateLog(d.LogLevel.info,n.PleaseWaitHelpText,!0),setTimeout(function(){r.onCaptureRequested.trigger(e)},200)}),this.actionsComponent.onPauseRequested.add(function(){r.onPauseRequested.trigger(r.getSelectedCanvasInformation()),r.mvx.updateState(r.actionsStateId,!1)}),this.actionsComponent.onPlayRequested.add(function(){r.onPlayRequested.trigger(r.getSelectedCanvasInformation()),r.mvx.updateState(r.actionsStateId,!0)}),this.actionsComponent.onPlayNextFrameRequested.add(function(){r.onPlayNextFrameRequested.trigger(r.getSelectedCanvasInformation())}),this.canvasListComponent.onCanvasSelection.add(function(e){r.mvx.updateState(r.canvasListStateId,{currentCanvasInformation:null,showList:!e.state.showList}),r.updateMenuStateLog(d.LogLevel.info,n.SelectCanvasHelpText),r.onCanvasSelected.trigger(null),r.isTrackingCanvas&&r.trackPageCanvases(),e.state.showList?r.showMenuStateLog():r.hideMenuStateLog()}),this.canvasListItemComponent.onCanvasSelected.add(function(e){r.mvx.updateState(r.canvasListStateId,{currentCanvasInformation:e.state,showList:!1}),r.onCanvasSelected.trigger(e.state),r.updateMenuStateLog(d.LogLevel.info,n.ActionsHelpText),r.showMenuStateLog()})}return n.prototype.getSelectedCanvasInformation=function(){return this.mvx.getGenericState(this.canvasListStateId).currentCanvasInformation},n.prototype.trackPageCanvases=function(){if(this.isTrackingCanvas=!0,document.body){var t=document.body.querySelectorAll('canvas');this.updateCanvasesList(t)}},n.prototype.updateCanvasesList=function(t){this.updateCanvasesListInformationInternal(t,function(t){return{id:t.id,width:t.width,height:t.height,ref:t}})},n.prototype.updateCanvasesListInformation=function(t){this.updateCanvasesListInformationInternal(t,function(t){return{id:t.id,width:t.width,height:t.height,ref:t.ref}})},n.prototype.display=function(){this.updateMenuStateVisibility(!0)},n.prototype.hide=function(){this.updateMenuStateVisibility(!1)},n.prototype.captureComplete=function(e){e?this.updateMenuStateLog(d.LogLevel.error,e):this.updateMenuStateLog(d.LogLevel.info,n.ActionsHelpText)},n.prototype.setFPS=function(t){this.mvx.updateState(this.fpsStateId,t)},n.prototype.updateCanvasesListInformationInternal=function(e,t){this.mvx.removeChildrenStates(this.canvasListStateId);for(var i=[],r=0;r<e.length;r++){var o=e[r],s=t(o);i.push(s),this.mvx.addChildState(this.canvasListStateId,s,this.canvasListItemComponent)}var a=i.length,l=this.mvx.getGenericState(this.canvasListStateId),c=l.showList;if(!c)if(1===a){var p=i[0];this.mvx.updateState(this.canvasListStateId,{currentCanvasInformation:p,showList:c}),this.updateMenuStateLog(d.LogLevel.info,n.ActionsHelpText),this.onCanvasSelected.trigger(p)}else this.updateMenuStateLog(d.LogLevel.info,n.SelectCanvasHelpText),this.onCanvasSelected.trigger(null)},n.prototype.hideMenuStateLog=function(){var t=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:t.visible,logLevel:t.logLevel,logText:t.logText,logVisible:!1})},n.prototype.showMenuStateLog=function(){var t=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:t.visible,logLevel:t.logLevel,logText:t.logText,logVisible:!this.options.hideLog})},n.prototype.updateMenuStateLog=function(a,r,o){void 0===o&&(o=!1);var n=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:n.visible,logLevel:a,logText:r,logVisible:!this.options.hideLog},o)},n.prototype.updateMenuStateVisibility=function(n){var a=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:n,logLevel:a.logLevel,logText:a.logText,logVisible:a.logVisible})},n.SelectCanvasHelpText='Please, select a canvas in the list above.',n.ActionsHelpText='Record with the red button, you can also pause or continue playing the current scene.',n.PleaseWaitHelpText='Capturing, be patient (this can take up to 3 minutes)...',n}();e.CaptureMenu=t}(d.EmbeddedFrontend||(d.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.onCaptureLoaded=new n.eventConstructor,n}return l(t,a),t.prototype.render=function(a,e){var t=this,n=(o=['\n            <div class="captureListComponent ','">\n                <div class="openCaptureFile">\n                    <Span>Drag files here to open a previously saved capture.</span>\n                </div>\n                <ul childrenContainer="true"></ul>\n            </div>'],o.raw=['\n            <div class="captureListComponent ','">\n                <div class="openCaptureFile">\n                    <Span>Drag files here to open a previously saved capture.</span>\n                </div>\n                <ul childrenContainer="true"></ul>\n            </div>'],this.htmlTemplate(o,a?'active':'')),i=this.renderElementFromTemplate(n,a,e),r=i.querySelector('.openCaptureFile');return r.addEventListener('dragenter',function(n){return t.drag(n),!1},!1),r.addEventListener('dragover',function(n){return t.drag(n),!1},!1),r.addEventListener('drop',function(n){t.drop(n)},!1),i;var o},t.prototype.drag=function(t){t.stopPropagation(),t.preventDefault()},t.prototype.drop=function(t){t.stopPropagation(),t.preventDefault(),this.loadFiles(t)},t.prototype.loadFiles=function(a){var r=this,t=null;if(a&&a.dataTransfer&&a.dataTransfer.files&&(t=a.dataTransfer.files),a&&a.target&&a.target.files&&(t=a.target.files),t&&0<t.length)for(var e=0;e<t.length;e++)!function(n){var e=t[n].name.toLowerCase(),a=e.split('.').pop();if(t[n].type,'json'===a){var i=t[n],o=new FileReader;o.onerror=function(t){r.logger.error('Error while reading file: '+i.name+t)},o.onload=function(t){try{var e=JSON.parse(t.target.result);r.onCaptureLoaded.trigger(e)}catch(t){r.logger.error('Error while reading file: '+i.name+t)}},o.readAsText(i)}}(e)},t}(n.BaseComponent);n.CaptureListComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.onCaptureSelected=n.createEvent('onCaptureSelected'),n.onSaveRequested=n.createEvent('onSaveRequested'),n}return l(t,a),t.prototype.render=function(d,e){var t=document.createElement('li');if(d.active&&(t.className='active'),d.capture.endState.VisualState.Attachments)for(var n=0,i=d.capture.endState.VisualState.Attachments;n<i.length;n++){var r=i[n],o=document.createElement('img');o.src=encodeURI(r.src),t.appendChild(o)}else{var s=document.createElement('span');s.innerText=d.capture.endState.VisualState.FrameBufferStatus,t.appendChild(s)}var a=document.createElement('span');a.innerText=new Date(d.capture.startTime).toTimeString().split(' ')[0],t.appendChild(a);var l=document.createElement('a');return l.href='#',l.className='captureListItemSave',this.mapEventListener(l,'click','onSaveRequested',d,e,!1,!0),a.appendChild(l),this.mapEventListener(t,'click','onCaptureSelected',d,e),t},t}(n.BaseComponent);n.CaptureListItemComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(a,e){var t=(n=['\n            <div class="visualStateListComponent">\n                <ul childrenContainer="true"></ul>\n            </div>'],n.raw=['\n            <div class="visualStateListComponent">\n                <ul childrenContainer="true"></ul>\n            </div>'],this.htmlTemplate(n));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.VisualStateListComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function n(t,e){var r=a.call(this,t,e)||this;return r.onVisualStateSelected=r.createEvent('onVisualStateSelected'),r}return l(n,a),n.prototype.render=function(e,t){var p=document.createElement('li');if(e.active&&(p.className='active',setTimeout(function(){n.ScrollIntoViewHelper.scrollIntoView(p)},1)),e.VisualState.Attachments){for(var i=0,r=e.VisualState.Attachments,o;i<r.length;i++)if(o=r[i],o.src){var s=document.createElement('img');if(s.src=encodeURI(o.src),p.appendChild(s),1<e.VisualState.Attachments.length){var a=document.createElement('span');a.innerText=o.attachmentName,p.appendChild(a)}if(o.textureLayer){var l=document.createElement('span');l.innerText='Layer: '+o.textureLayer,p.appendChild(l)}if(o.textureCubeMapFace){var c=document.createElement('span');c.innerText=o.textureCubeMapFace,p.appendChild(c)}}}else{var u=document.createElement('span');u.innerText=e.VisualState.FrameBufferStatus,p.appendChild(u)}var m=document.createElement('span');return m.innerText=e.VisualState.FrameBuffer?'Frame buffer: '+e.VisualState.FrameBuffer.__SPECTOR_Object_TAG.id:'Canvas frame buffer',p.appendChild(m),this.mapEventListener(p,'click','onVisualStateSelected',e,t),p},n}(n.BaseComponent);n.VisualStateListItemComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(a,e){var t=(n=['\n            <div class="commandListComponent">\n                <ul childrenContainer="true"></ul>\n            </div>'],n.raw=['\n            <div class="commandListComponent">\n                <ul childrenContainer="true"></ul>\n            </div>'],this.htmlTemplate(n));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.CommandListComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function n(t,e){var r=a.call(this,t,e)||this;return r.onCommandSelected=r.createEvent('onCommandSelected'),r.onVertexSelected=r.createEvent('onVertexSelected'),r.onFragmentSelected=r.createEvent('onFragmentSelected'),r}return l(n,a),n.prototype.render=function(e,t){var d=document.createElement('li'),i='unknown';switch(e.capture.status){case 50:i='deprecated';break;case 10:i='unused';break;case 20:i='disabled';break;case 30:i='redundant';break;case 40:i='valid';}if(e.capture.VisualState&&(d.className=' drawCall'),e.active&&(d.className=' active',setTimeout(function(){n.ScrollIntoViewHelper.scrollIntoView(d)},1)),e.capture.marker){var r=document.createElement('span');r.className=i+' marker important',r.innerText=e.capture.marker+' ',r.style.fontWeight='1000',d.appendChild(r)}var o=document.createElement('span'),s=e.capture.text;if(s=s.replace(e.capture.name,'<span class=" '+i+' important">'+e.capture.name+'</span>'),o.innerHTML=s,d.appendChild(o),e.capture.VisualState&&'clear'!==e.capture.name)try{var a=e.capture.DrawCall.shaders[0],l=e.capture.DrawCall.shaders[1],c=document.createElement('a');c.innerText=a.name,c.href='#',d.appendChild(c),this.mapEventListener(c,'click','onVertexSelected',e,t);var p=document.createElement('a');p.innerText=l.name,p.href='#',d.appendChild(p),this.mapEventListener(p,'click','onFragmentSelected',e,t)}catch(t){}return this.mapEventListener(d,'click','onCommandSelected',e,t),d},n}(n.BaseComponent);n.CommandListItemComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(a,e){var t=(n=['\n            <div class="commandDetailComponent" childrenContainer="true">\n            </div>'],n.raw=['\n            <div class="commandDetailComponent" childrenContainer="true">\n            </div>'],this.htmlTemplate(n));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.CommandDetailComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(){function e(){}return e.getMDNLink=function(a){var t=e.WebGL2Functions[a];if(t)return e.WebGL2RootUrl+t;var n=e.WebGLFunctions[a];return n?e.WebGLRootUrl+n:e.WebGLRootUrl+a},e.WebGL2RootUrl='https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/',e.WebGLRootUrl='https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/',e.WebGL2Functions={beginQuery:'beginQuery',beginTransformFeedback:'beginTransformFeedback',bindBufferBase:'bindBufferBase',bindBufferRange:'bindBufferRange',bindSampler:'bindSampler',bindTransformFeedback:'bindTransformFeedback',bindVertexArray:'bindVertexArray',blitFramebuffer:'blitFramebuffer',clearBufferfv:'clearBuffer',clearBufferiv:'clearBuffer',clearBufferuiv:'clearBuffer',clearBufferfi:'clearBuffer',clientWaitSync:'clientWaitSync',compressedTexImage3D:'compressedTexImage3D',compressedTexSubImage3D:'compressedTexSubImage3D',copyBufferSubData:'copyBufferSubData',copyTexSubImage3D:'copyTexSubImage3D',createQuery:'createQuery',createSampler:'createSampler',createTransformFeedback:'createTransformFeedback',createVertexArray:'createVertexArray',deleteQuery:'deleteQuery',deleteSampler:'deleteSampler',deleteSync:'deleteSync',deleteTransformFeedback:'deleteTransformFeedback',deleteVertexArray:'deleteVertexArray',drawArraysInstanced:'drawArraysInstanced',drawBuffers:'drawBuffers',drawElementsInstanced:'drawElementsInstanced',drawRangeElements:'drawRangeElements',endQuery:'endQuery',endTransformFeedback:'endTransformFeedback',fenceSync:'fenceSync',framebufferTextureLayer:'framebufferTextureLayer',getActiveUniformBlockName:'getActiveUniformBlockName',getActiveUniformBlockParameter:'getActiveUniformBlockParameter',getActiveUniforms:'getActiveUniforms',getBufferSubData:'getBufferSubData',getFragDataLocation:'getFragDataLocation',getIndexedParameter:'getIndexedParameter',getInternalformatParameter:'getInternalformatParameter',getQuery:'getQuery',getQueryParameter:'getQueryParameter',getSamplerParameter:'getSamplerParameter',getSyncParameter:'getSyncParameter',getTransformFeedbackVarying:'getTransformFeedbackVarying',getUniformBlockIndex:'getUniformBlockIndex',getUniformIndices:'getUniformIndices',invalidateFramebuffer:'invalidateFramebuffer',invalidateSubFramebuffer:'invalidateSubFramebuffer',isQuery:'isQuery',isSampler:'isSampler',isSync:'isSync',isTransformFeedback:'isTransformFeedback',isVertexArray:'isVertexArray',pauseTransformFeedback:'pauseTransformFeedback',readBuffer:'readBuffer',renderbufferStorageMultisample:'renderbufferStorageMultisample',resumeTransformFeedback:'resumeTransformFeedback',samplerParameteri:'samplerParameter',samplerParameterf:'samplerParameter',texImage3D:'texImage3D',texStorage2D:'texStorage2D',texStorage3D:'texStorage3D',texSubImage3D:'texSubImage3D',transformFeedbackVaryings:'transformFeedbackVaryings',uniform1ui:'uniform',uniform2ui:'uniform',uniform3ui:'uniform',uniform4ui:'uniform',uniform1fv:'uniform',uniform2fv:'uniform',uniform3fv:'uniform',uniform4fv:'uniform',uniform1iv:'uniform',uniform2iv:'uniform',uniform3iv:'uniform',uniform4iv:'uniform',uniform1uiv:'uniform',uniform2uiv:'uniform',uniform3uiv:'uniform',uniform4uiv:'uniform',uniformBlockBinding:'uniformBlockBinding',uniformMatrix2fv:'uniformMatrix',uniformMatrix3x2fv:'uniformMatrix',uniformMatrix4x2fv:'uniformMatrix',uniformMatrix2x3fv:'uniformMatrix',uniformMatrix3fv:'uniformMatrix',uniformMatrix4x3fv:'uniformMatrix',uniformMatrix2x4fv:'uniformMatrix',uniformMatrix3x4fv:'uniformMatrix',uniformMatrix4fv:'uniformMatrix',vertexAttribDivisor:'vertexAttribDivisor',vertexAttribI4i:'vertexAttribI',vertexAttribI4ui:'vertexAttribI',vertexAttribI4iv:'vertexAttribI',vertexAttribI4uiv:'vertexAttribI',vertexAttribIPointer:'vertexAttribIPointer',waitSync:'waitSync'},e.WebGLFunctions={uniform1f:'uniform',uniform1fv:'uniform',uniform1i:'uniform',uniform1iv:'uniform',uniform2f:'uniform',uniform2fv:'uniform',uniform2i:'uniform',uniform2iv:'uniform',uniform3f:'uniform',uniform3i:'uniform',uniform3iv:'uniform',uniform4f:'uniform',uniform4fv:'uniform',uniform4i:'uniform',uniform4iv:'uniform',uniformMatrix2fv:'uniformMatrix',uniformMatrix3fv:'uniformMatrix',uniformMatrix4fv:'uniformMatrix',vertexAttrib1f:'vertexAttrib',vertexAttrib2f:'vertexAttrib',vertexAttrib3f:'vertexAttrib',vertexAttrib4f:'vertexAttrib',vertexAttrib1fv:'vertexAttrib',vertexAttrib2fv:'vertexAttrib',vertexAttrib3fv:'vertexAttrib',vertexAttrib4fv:'vertexAttrib'},e}();n.MDNCommandLinkHelper=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(a,e){var t=(n=['\n            <div class="jsonContentComponent" childrenContainer="true">\n            </div>'],n.raw=['\n            <div class="jsonContentComponent" childrenContainer="true">\n            </div>'],this.htmlTemplate(n));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.JSONContentComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(a,e){var t=(n=['\n            <div class="jsonGroupComponent">\n                <div class="jsonGroupComponentTitle">','</div>\n                <ul childrenContainer="true"></ul>\n            </div>'],n.raw=['\n            <div class="jsonGroupComponent">\n                <div class="jsonGroupComponentTitle">','</div>\n                <ul childrenContainer="true"></ul>\n            </div>'],this.htmlTemplate(n,a?a.replace(/([A-Z])/g,' $1').trim():''));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.JSONGroupComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(a,e){var t=(n=['\n            <li><span class="jsonItemComponentKey">',': </span><span class="jsonItemComponentValue">','</span><li>'],n.raw=['\n            <li><span class="jsonItemComponentKey">',': </span><span class="jsonItemComponentValue">','</span><li>'],this.htmlTemplate(n,a.key,a.value));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.JSONItemComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(a,e){var t=(n=['\n            <li class="jsonItemImageHolder"><div class="jsonItemImage"><img src="','"/><span>','</span></div></li>'],n.raw=['\n            <li class="jsonItemImageHolder"><div class="jsonItemImage"><img src="','"/><span>','</span></div></li>'],this.htmlTemplate(n,a.value,a.key));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.JSONImageItemComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.onOpenSourceClicked=n.createEvent('onOpenSourceClicked'),n}return l(t,a),t.prototype.render=function(a,e){var t=(n=['\n            <li commandName="onOpenSourceClicked"><span class="jsonItemComponentKey">',': </span><span class="jsonSourceItemComponentOpen">Click to Open.</span><li>'],n.raw=['\n            <li commandName="onOpenSourceClicked"><span class="jsonItemComponentKey">',': </span><span class="jsonSourceItemComponentOpen">Click to Open.</span><li>'],this.htmlTemplate(n,a.key));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.JSONSourceItemComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(a,e){var t=(n=['\n            <li><span class="jsonItemComponentKey">',': </span>\n                <span class="jsonItemComponentValue">',' (<a href="','" target="_blank" class="jsonSourceItemComponentOpen">Open help page</a>)\n                </span>\n            <li>'],n.raw=['\n            <li><span class="jsonItemComponentKey">',': </span>\n                <span class="jsonItemComponentValue">',' (<a href="','" target="_blank" class="jsonSourceItemComponentOpen">Open help page</a>)\n                </span>\n            <li>'],this.htmlTemplate(n,a.key,a.value,a.help));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.JSONHelpItemComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),t.prototype.render=function(t){var e=document.createElement('div');if(e.className='jsonVisualStateItemComponent',t.Attachments){for(var n=0,i=t.Attachments,r;n<i.length;n++)if(r=i[n],r.src){var o=document.createElement('img');if(o.src=encodeURI(r.src),e.appendChild(o),1<t.Attachments.length){var s=document.createElement('span');s.innerText=r.attachmentName,e.appendChild(s)}}}else{var a=document.createElement('span');a.innerText=t.FrameBufferStatus,e.appendChild(a)}var l=document.createElement('span');return l.innerText=t.FrameBuffer?t.FrameBuffer.__SPECTOR_Object_TAG.displayText:'Canvas frame buffer',e.appendChild(l),e},t}(n.BaseComponent);n.JSONVisualStateItemComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.onCapturesClicked=n.createEvent('onCapturesClicked'),n.onCommandsClicked=n.createEvent('onCommandsClicked'),n.onInformationClicked=n.createEvent('onInformationClicked'),n.onInitStateClicked=n.createEvent('onInitStateClicked'),n.onEndStateClicked=n.createEvent('onEndStateClicked'),n.onCloseClicked=n.createEvent('onCloseClicked'),n.onSearchTextChanged=n.createEvent('onSearchTextChanged'),n.onSearchTextCleared=n.createEvent('onSearchTextCleared'),n}return l(t,a),t.prototype.render=function(a,e){var t=(o=['<ul class="resultViewMenuComponent">\n                <li class="resultViewMenuOpen resultViewMenuSmall"><a href="#" role="button">Menu</a></li>\n\n                <li class="searchContainer">\n                    <input type="text" placeHolder="Search..." value="','" commandName="onSearchTextChanged" commandEventBinding="change">\n                    <a class="clearSearch" href="#" CommandName="onSearchTextCleared">X</a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onCapturesClicked">Captures</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInformationClicked">Information</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInitStateClicked">Init State</a></li>\n                <li>\n                    <a class="',' href="#" role="button" commandName="onCommandsClicked">\n                        Commands','\n                    </a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onEndStateClicked">End State</a></li>\n                <li><a href="#" role="button" commandName="onCloseClicked">Close</a></li>\n            </ul>'],o.raw=['<ul class="resultViewMenuComponent">\n                <li class="resultViewMenuOpen resultViewMenuSmall"><a href="#" role="button">Menu</a></li>\n\n                <li class="searchContainer">\n                    <input type="text" placeHolder="Search..." value="','" commandName="onSearchTextChanged" commandEventBinding="change">\n                    <a class="clearSearch" href="#" CommandName="onSearchTextCleared">X</a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onCapturesClicked">Captures</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInformationClicked">Information</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInitStateClicked">Init State</a></li>\n                <li>\n                    <a class="',' href="#" role="button" commandName="onCommandsClicked">\n                        Commands','\n                    </a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onEndStateClicked">End State</a></li>\n                <li><a href="#" role="button" commandName="onCloseClicked">Close</a></li>\n            </ul>'],this.htmlTemplate(o,a.searchText,0===a.status?'active':'',10===a.status?'active':'',20===a.status?'active':'',40===a.status?'active':'',0<a.commandCount?' ('+a.commandCount+')':'',30===a.status?'active':'')),n=this.renderElementFromTemplate(t,a,e),i=n.querySelector('.resultViewMenuOpen'),r=n.querySelectorAll('li:not(.resultViewMenuSmall)');return i.addEventListener('click',function(){if('true'===i.getAttribute('open')){i.setAttribute('open','false');for(var e=0;e<r.length;e++)r[e].style.display='none',r[e].style.visibility='hidden'}else{i.setAttribute('open','true');for(var e=0;e<r.length;e++)r[e].style.display='block',r[e].style.visibility='visible'}}),n;var o},t}(n.BaseComponent);n.ResultViewMenuComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){return a.call(this,e,r)||this}return l(t,a),t.prototype.render=function(n,e){return this.renderElementFromTemplate('<div childrenContainer="true" class="resultViewContentComponent"></div>',n,e)},t}(n.BaseComponent);n.ResultViewContentComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){return a.call(this,e,r)||this}return l(t,a),t.prototype.render=function(a,e){var t=(n=['\n                <div childrenContainer="true" class="','"></div>'],n.raw=['\n                <div childrenContainer="true" class="','"></div>'],this.htmlTemplate(n,a?'informationColumnLeftComponent':'informationColumnRightComponent'));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.InformationColumnComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){return a.call(this,e,r)||this}return l(t,a),t.prototype.render=function(a,e){var t=(n=['\n            <div childrenContainer="true" class="resultViewComponent ','">\n            </div>'],n.raw=['\n            <div childrenContainer="true" class="resultViewComponent ','">\n            </div>'],this.htmlTemplate(n,a?'active':''));return this.renderElementFromTemplate(t,a,e);var n},t}(n.BaseComponent);n.ResultViewComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(n){var e=function(a){function t(e,r){var n=a.call(this,e,r)||this;return n.onVertexSourceClicked=n.createEvent('onVertexSourceClicked'),n.onFragmentSourceClicked=n.createEvent('onFragmentSourceClicked'),n.onSourceCodeCloseClicked=n.createEvent('onSourceCodeCloseClicked'),n.onSourceCodeChanged=n.createEvent('onSourceCodeChanged'),n}return l(t,a),t.prototype.showError=function(a){if(this.editor){a=a||'';var e=[];if(a)for(var t=/^.*ERROR:\W([0-9]+):([0-9]+):(.*)$/gm,n=t.exec(a);null!=n;)e.push({row:+n[2]-1,column:n[1],text:n[3]||'Error',type:'error'}),n=t.exec(a);this.editor.getSession().setAnnotations(e)}},t.prototype.render=function(d,e){var t=this,n=d.fragment?d.sourceFragment:d.sourceVertex,i=n?this._indentIfdef(this._beautify(n)):'',r=(a=['\n            <div class="sourceCodeComponentContainer">\n                <div class="sourceCodeMenuComponentContainer">\n                    <ul class="sourceCodeMenuComponent">\n                        <li><a class="','" href="#" role="button" commandName="onVertexSourceClicked">Vertex</a></li>\n                        <li><a class="','" href="#" role="button" commandName="onFragmentSourceClicked">Fragment</a></li>\n                        <li><a href="#" role="button" commandName="onSourceCodeCloseClicked">Close</a></li>\n                    </ul>\n                </div>\n                $','\n            </div>'],a.raw=['\n            <div class="sourceCodeComponentContainer">\n                <div class="sourceCodeMenuComponentContainer">\n                    <ul class="sourceCodeMenuComponent">\n                        <li><a class="','" href="#" role="button" commandName="onVertexSourceClicked">Vertex</a></li>\n                        <li><a class="','" href="#" role="button" commandName="onFragmentSourceClicked">Fragment</a></li>\n                        <li><a href="#" role="button" commandName="onSourceCodeCloseClicked">Close</a></li>\n                    </ul>\n                </div>\n                $','\n            </div>'],this.htmlTemplate(a,d.fragment?'':'active',d.fragment?'active':'',d.editable?(l=['<div class="sourceCodeComponentEditable">','</div>'],l.raw=['<div class="sourceCodeComponentEditable">','</div>'],this.htmlTemplate(l,i)):(c=['<div class="sourceCodeComponent">\n                        <pre class="language-glsl"><code>','</code></pre>\n                    </div>'],c.raw=['<div class="sourceCodeComponent">\n                        <pre class="language-glsl"><code>','</code></pre>\n                    </div>'],this.htmlTemplate(c,i)))),o=this.renderElementFromTemplate(r.replace(/<br>/g,'\n'),d,e);if(d.editable){this.editor=ace.edit(o.querySelector('.sourceCodeComponentEditable')),this.editor.setTheme('ace/theme/monokai'),this.editor.getSession().setMode('ace/mode/glsl'),this.editor.setShowPrintMargin(!1);var s=-1;this.editor.getSession().on('change',function(){-1!=s&&clearTimeout(s),s=setTimeout(function(){t._triggerCompilation(t.editor,d,o,e)},1500)})}else Prism.highlightElement(o.querySelector('pre'));return o;var a,l,c},t.prototype._triggerCompilation=function(a,e,t,n){e.fragment?e.sourceFragment=a.getValue():e.sourceVertex=a.getValue(),this.triggerEvent('onSourceCodeChanged',t,e,n)},t.prototype._beautify=function(d,e){void 0===e&&(e=0),d=d.trim(),d=this._removeReturnInComments(d);for(var t=this._getBracket(d),n=t.firstIteration,i=t.lastIteration,r='',o=0;o<e;o++)r+='    ';if(-1===n)return d=r+d,d=d.replace(/;(?![^\(]*\))\s*/g,';\n'),d=d.replace(/\s*([*+-\/=><\s]*=)\s*/g,function(t){return' '+t.trim()+' '}),d=d.replace(/\s*(,)\s*/g,function(t){return t.trim()+' '}),d=d.replace(/\n[ \t]+/g,'\n'),d=d.replace(/\n/g,'\n'+r),d=d.replace(/\s+$/g,''),d=d.replace(/\n+$/g,'');var s=d.substr(0,n),a=d.substr(i+1,d.length),l=d.substr(n+1,i-n-1).trim(),c=this._beautify(l,e+1);return(this._beautify(s,e)+' {\n'+c+'\n'+r+'}\n'+this._beautify(a,e)).replace(/\s*\n+\s*;/g,';')},t.prototype._removeReturnInComments=function(a){for(var e=!1,t=!1,n=0,o;n<a.length;n++)o=a[n],'/'===o?'*'===a[n-1]?t=!1:'*'===a[n+1]?e||(t=!0,n++):'/'===a[n+1]&&(t||(e=!0,n++)):'\n'===o?e=!1:';'===o&&(e||t)&&(a=a.substr(0,n)+'.'+a.substr(n+1));return a},t.prototype._getBracket=function(d,e){void 0===e&&(e=-1);for(var t=d.indexOf('{',e),p=d.substr(t+1).split(''),i=1,r=t,o=0,u=0,a=p,l;u<a.length;u++)if(l=a[u],r++,'{'===l&&i++,'}'===l&&i--,0==i){o=r;break}return-1<t&&0===o?this._getBracket(d,t+1):{firstIteration:t,lastIteration:o}},t.prototype._indentIfdef=function(a){for(var e=0,t=a.split('\n'),n=0,i;n<t.length;n++){i=t[n],-1!==i.indexOf('#endif')&&e--,-1!==i.indexOf('#else')&&e--;for(var r='',o=0;o<e;o++)r+='    ';t[n]=r+i,-1===i.indexOf('#if')&&-1===i.indexOf('#else')||e++}return t.join('\n')},t}(n.BaseComponent);n.SourceCodeComponent=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(t){!function(a){var e=function(){function t(e,r){var n=this;this.options=e,this.logger=r,this.onSourceCodeChanged=new e.eventConstructor,this.rootPlaceHolder=e.rootPlaceHolder||document.body,this.mvx=new a.MVX(this.rootPlaceHolder,r),this.searchText='',this.currentCommandId=-1,this.visible=!1,this.commandCount=0,this.commandListStateId=-1,this.commandDetailStateId=-1,this.currentCaptureStateId=-1,this.currentCommandStateId=-1,this.currentVisualStateId=-1,this.visualStateListStateId=-1,this.initVisualStateId=-1,this.sourceCodeComponentStateId=-1,this.captureListComponent=new a.CaptureListComponent(e.eventConstructor,r),this.captureListItemComponent=new a.CaptureListItemComponent(e.eventConstructor,r),this.visualStateListComponent=new a.VisualStateListComponent(e.eventConstructor,r),this.visualStateListItemComponent=new a.VisualStateListItemComponent(e.eventConstructor,r),this.commandListComponent=new a.CommandListComponent(e.eventConstructor,r),this.commandListItemComponent=new a.CommandListItemComponent(e.eventConstructor,r),this.commandDetailComponent=new a.CommandDetailComponent(e.eventConstructor,r),this.jsonContentComponent=new a.JSONContentComponent(e.eventConstructor,r),this.jsonGroupComponent=new a.JSONGroupComponent(e.eventConstructor,r),this.jsonItemComponent=new a.JSONItemComponent(e.eventConstructor,r),this.jsonImageItemComponent=new a.JSONImageItemComponent(e.eventConstructor,r),this.jsonSourceItemComponent=new a.JSONSourceItemComponent(e.eventConstructor,r),this.jsonHelpItemComponent=new a.JSONHelpItemComponent(e.eventConstructor,r),this.jsonVisualStateItemComponent=new a.JSONVisualStateItemComponent(e.eventConstructor,r),this.resultViewMenuComponent=new a.ResultViewMenuComponent(e.eventConstructor,r),this.resultViewContentComponent=new a.ResultViewContentComponent(e.eventConstructor,r),this.resultViewComponent=new a.ResultViewComponent(e.eventConstructor,r),this.sourceCodeComponent=new a.SourceCodeComponent(e.eventConstructor,r),this.informationColumnComponent=new a.InformationColumnComponent(e.eventConstructor,r),this.rootStateId=this.mvx.addRootState(null,this.resultViewComponent),this.menuStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewMenuComponent),this.contentStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewContentComponent),this.captureListStateId=this.mvx.addChildState(this.rootStateId,!1,this.captureListComponent),this.initKeyboardEvents(),this.initMenuComponent(),this.captureListComponent.onCaptureLoaded.add(function(t){n.addCapture(t)}),this.captureListItemComponent.onCaptureSelected.add(function(t){n.selectCapture(t.stateId)}),this.captureListItemComponent.onSaveRequested.add(function(t){n.saveCapture(t.state.capture)}),this.visualStateListItemComponent.onVisualStateSelected.add(function(t){n.selectVisualState(t.stateId)}),this.commandListItemComponent.onCommandSelected.add(function(t){n.selectCommand(t.stateId)}),this.commandListItemComponent.onVertexSelected.add(function(t){n.selectCommand(t.stateId),n.openShader(!1)}),this.commandListItemComponent.onFragmentSelected.add(function(t){n.selectCommand(t.stateId),n.openShader(!0)}),this.sourceCodeComponent.onSourceCodeCloseClicked.add(function(){n.displayCurrentCapture()}),this.sourceCodeComponent.onVertexSourceClicked.add(function(){var e=n.mvx.getGenericState(n.sourceCodeComponentStateId);e.fragment=!1,n.mvx.updateState(n.sourceCodeComponentStateId,e)}),this.sourceCodeComponent.onFragmentSourceClicked.add(function(){var e=n.mvx.getGenericState(n.sourceCodeComponentStateId);e.fragment=!0,n.mvx.updateState(n.sourceCodeComponentStateId,e)}),this.sourceCodeComponent.onSourceCodeChanged.add(function(t){n.onSourceCodeChanged.trigger({programId:t.state.programId,sourceFragment:t.state.sourceFragment,sourceVertex:t.state.sourceVertex})}),this.jsonSourceItemComponent.onOpenSourceClicked.add(function(t){n.openShader('FRAGMENT_SHADER'===t.state.value)}),this.updateViewState()}var n=Number.MIN_VALUE;return t.prototype.saveCapture=function(a){var e=JSON.stringify(a,null,4),t=new Blob([e],{type:'octet/stream'}),n='capture '+new Date(a.startTime).toTimeString().split(' ')[0]+'.json';if(navigator.msSaveBlob)navigator.msSaveBlob(t,n);else{var i=document.createElement('a'),r=window.URL.createObjectURL(t);i.setAttribute('href',r),i.setAttribute('download',n),i.click()}},t.prototype.selectCapture=function(t){this.currentCommandId=-1,this.currentCaptureStateId=t,this.displayCurrentCapture()},t.prototype.selectCommand=function(t){this.currentCommandStateId=t,this.currentVisualStateId=this.displayCurrentCommand(),this.displayCurrentVisualState()},t.prototype.selectVisualState=function(t){this.currentVisualStateId=t,this.currentCommandStateId=this.displayCurrentVisualState(),this.displayCurrentCommand()},t.prototype.display=function(){this.visible=!0,this.updateViewState()},t.prototype.hide=function(){this.visible=!1,this.updateViewState()},t.prototype.addCapture=function(n){var a=this.mvx.insertChildState(this.captureListStateId,{capture:n,active:!1},0,this.captureListItemComponent);return this.selectCapture(a),a},t.prototype.showSourceCodeError=function(t){this.sourceCodeComponent.showError(t)},t.prototype.initKeyboardEvents=function(){var n=this;this.rootPlaceHolder.addEventListener('keydown',function(e){40===n.mvx.getGenericState(n.menuStateId).status&&(38===e.keyCode?(e.preventDefault(),e.stopPropagation(),n.selectPreviousCommand()):40===e.keyCode?(e.preventDefault(),e.stopPropagation(),n.selectNextCommand()):33===e.keyCode?(e.preventDefault(),e.stopPropagation(),n.selectPreviousVisualState()):34===e.keyCode&&(e.preventDefault(),e.stopPropagation(),n.selectNextVisualState()))})},t.prototype.openShader=function(n){this.mvx.removeChildrenStates(this.contentStateId);var a=this.mvx.getGenericState(this.currentCommandStateId);this.sourceCodeComponentStateId=this.mvx.addChildState(this.contentStateId,{programId:a.capture.DrawCall.programStatus.program.__SPECTOR_Object_TAG.id,nameVertex:a.capture.DrawCall.shaders[0].name,nameFragment:a.capture.DrawCall.shaders[1].name,sourceVertex:a.capture.DrawCall.shaders[0].source,sourceFragment:a.capture.DrawCall.shaders[1].source,fragment:n,editable:a.capture.DrawCall.programStatus.RECOMPILABLE},this.sourceCodeComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.displayCurrentCommandDetail(a)},t.prototype.selectPreviousCommand=function(){var t=this.mvx.getGenericState(this.currentCommandStateId);0>t.previousCommandStateId||this.selectCommand(t.previousCommandStateId)},t.prototype.selectNextCommand=function(){var t=this.mvx.getGenericState(this.currentCommandStateId);0>t.nextCommandStateId||this.selectCommand(t.nextCommandStateId)},t.prototype.selectPreviousVisualState=function(){var t=this.mvx.getGenericState(this.currentVisualStateId);0>t.previousVisualStateId||this.selectVisualState(t.previousVisualStateId)},t.prototype.selectNextVisualState=function(){var t=this.mvx.getGenericState(this.currentVisualStateId);0>t.nextVisualStateId||this.selectVisualState(t.nextVisualStateId)},t.prototype.initMenuComponent=function(){var n=this;this.mvx.updateState(this.menuStateId,{status:0,searchText:this.searchText,commandCount:0}),this.resultViewMenuComponent.onCloseClicked.add(function(){n.hide()}),this.resultViewMenuComponent.onCapturesClicked.add(function(){n.displayCaptures()}),this.resultViewMenuComponent.onCommandsClicked.add(function(){n.displayCurrentCapture()}),this.resultViewMenuComponent.onInformationClicked.add(function(){n.displayInformation()}),this.resultViewMenuComponent.onInitStateClicked.add(function(){n.displayInitState()}),this.resultViewMenuComponent.onEndStateClicked.add(function(){n.displayEndState()}),this.resultViewMenuComponent.onSearchTextChanged.add(function(e){n.search(e.sender.value)}),this.resultViewMenuComponent.onSearchTextCleared.add(function(e){n.mvx.updateState(n.menuStateId,{status:e.state.status,searchText:'',commandCount:e.state.commandCount}),n.search('')})},t.prototype.onCaptureRelatedAction=function(n){var a=this.mvx.getGenericState(this.currentCaptureStateId);return this.commandCount=a.capture.commands.length,this.mvx.removeChildrenStates(this.contentStateId),this.mvx.updateState(this.menuStateId,{status:n,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.getGenericState(this.captureListStateId)&&this.mvx.updateState(this.captureListStateId,!1),a.capture},t.prototype.displayCaptures=function(){this.mvx.updateState(this.menuStateId,{status:0,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.updateState(this.captureListStateId,!0)},t.prototype.displayInformation=function(){var l=this.onCaptureRelatedAction(10),e=this.mvx.addChildState(this.contentStateId,!0,this.informationColumnComponent),t=this.mvx.addChildState(this.contentStateId,!1,this.informationColumnComponent),n=this.mvx.addChildState(e,null,this.jsonContentComponent);this.displayJSONGroup(n,'Canvas',l.canvas),this.displayJSONGroup(n,'Context',l.context);for(var i=this.mvx.addChildState(t,null,this.jsonContentComponent),r=0,o=l.analyses,s;r<o.length;r++)s=o[r],this.displayJSONGroup(i,s.analyserName,s);this.displayJSONGroup(i,'Frame Memory Changes',l.frameMemory),this.displayJSONGroup(i,'Total Memory (seconds since application start: bytes)',l.memory)},t.prototype.displayJSON=function(a,e){for(var t in e.VisualState&&this.mvx.addChildState(a,e.VisualState,this.jsonVisualStateItemComponent),e)if('VisualState'!==t&&'analyserName'!==t){var s=e[t];if('source'===t)this.mvx.addChildState(a,{key:t,value:e.SHADER_TYPE},this.jsonSourceItemComponent);else if('visual'===t)for(var i in s)s.hasOwnProperty(i)&&s[i]&&this.mvx.addChildState(a,{key:i,value:s[i]},this.jsonImageItemComponent);else{var l=this.getJSONAsString(a,t,s);if(null===l||void 0===l)continue;if(this.toFilter(t)&&this.toFilter(s))continue;this.mvx.addChildState(a,{key:t,value:l},this.jsonItemComponent)}s&&s.__SPECTOR_Metadata&&this.displayJSONGroup(a,'Metadata',s.__SPECTOR_Metadata)}},t.prototype.getJSONAsString=function(a,e,s){if(null===s)return'null';if(void 0===s)return'undefined';if('number'==typeof s)return S(s)===s?s.toFixed(0):s.toFixed(4);if('string'==typeof s)return s;if('boolean'==typeof s)return s?'true':'false';if(0===s.length)return'Empty Array';if(s.length){for(var l=[],i=0,r;i<s.length;i++)r=this.getJSONAsString(a,e+'('+i.toFixed(0)+')',s[i]),null!==r&&l.push(r);return 0===l.length?null:l.join(', ')}return s.help?(this.mvx.addChildState(a,{key:e,value:s.name,help:s.help},this.jsonHelpItemComponent),null):s.__SPECTOR_Object_TAG?s.__SPECTOR_Object_TAG.displayText:s.displayText?s.displayText:('object'==typeof s&&this.displayJSONGroup(a,e,s),null)},t.prototype.displayJSONGroup=function(a,e,t){if(t){var n=this.mvx.addChildState(a,e,this.jsonGroupComponent);this.displayJSON(n,t),this.mvx.hasChildren(n)||this.mvx.removeState(n)}},t.prototype.displayInitState=function(){var n=this.onCaptureRelatedAction(20),e=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(e,n.initState)},t.prototype.displayEndState=function(){var n=this.onCaptureRelatedAction(30),e=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(e,n.endState)},t.prototype.displayCurrentCapture=function(){var t=this.onCaptureRelatedAction(40);this.mvx.updateAllChildrenGenericState(this.captureListStateId,function(t){return t.active=!1,t}),this.mvx.updateState(this.currentCaptureStateId,{capture:t,active:!0}),this.createVisualStates(t),this.commandListStateId=this.mvx.addChildState(this.contentStateId,null,this.commandListComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.createCommands(t)},t.prototype.displayCurrentCommand=function(){if(40!==this.mvx.getGenericState(this.menuStateId).status)return-1;var n=this.mvx.getGenericState(this.currentCommandStateId),e=n.capture;return this.currentCommandId=e.id,this.mvx.updateAllChildrenGenericState(this.commandListStateId,function(t){return t.active=!1,t}),this.mvx.updateState(this.currentCommandStateId,{capture:e,visualStateId:n.visualStateId,previousCommandStateId:n.previousCommandStateId,nextCommandStateId:n.nextCommandStateId,active:!0}),this.displayCurrentCommandDetail(n)},t.prototype.displayCurrentCommandDetail=function(e){var t=e.capture;this.mvx.removeChildrenStates(this.commandDetailStateId);var n=this.mvx.getGenericState(e.visualStateId);this.mvx.addChildState(this.commandDetailStateId,n.VisualState,this.jsonVisualStateItemComponent);var i='Unknown';switch(t.status){case 50:i='Deprecated';break;case 10:i='Unused';break;case 20:i='Disabled';break;case 30:i='Redundant';break;case 40:i='Valid';}var l=a.MDNCommandLinkHelper.getMDNLink(t.name);for(var d in t.result?this.displayJSONGroup(this.commandDetailStateId,'Global',{name:{help:l,name:t.name},duration:t.commandEndTime-t.startTime,result:t.result,status:i}):this.displayJSONGroup(this.commandDetailStateId,'Global',{name:{help:l,name:t.name},duration:t.commandEndTime-t.startTime,status:i}),t)'VisualState'!==d&&'result'!==d&&'object'==typeof t[d]&&this.displayJSONGroup(this.commandDetailStateId,d,t[d]);return e.visualStateId},t.prototype.displayCurrentVisualState=function(){if(40!==this.mvx.getGenericState(this.menuStateId).status)return null;var t=this.mvx.getGenericState(this.currentVisualStateId);return t.commandStateId===n?this.displayInitState():t.commandStateId===d&&this.displayEndState(),this.mvx.updateAllChildrenGenericState(this.visualStateListStateId,function(t){return t.active=!1,t}),t.active=!0,this.mvx.updateState(this.currentVisualStateId,t),t.commandStateId},t.prototype.createVisualStates=function(t){this.visualStateListStateId=this.mvx.addChildState(this.contentStateId,null,this.visualStateListComponent),this.mvx.removeChildrenStates(this.visualStateListStateId),this.initVisualStateId=this.mvx.addChildState(this.visualStateListStateId,{VisualState:t.initState.VisualState,time:t.startTime,commandStateId:n,active:!1},this.visualStateListItemComponent)},t.prototype.createCommands=function(p){this.mvx.removeChildrenStates(this.commandListStateId);for(var e=this.initVisualStateId,t=!1,m=null,i=-1,g=null,o=-1,f=0,a;f<p.commands.length;f++)if(a=p.commands[f],!this.toFilter(a.marker)||!this.toFilter(a.name)||a.id===this.currentCommandId){var E={capture:a,previousCommandStateId:i,nextCommandStateId:-1,visualStateId:void 0,active:!1},c=this.mvx.addChildState(this.commandListStateId,E,this.commandListItemComponent);if(m&&(m=this.mvx.getGenericState(i),m.nextCommandStateId=c,this.mvx.updateState(i,m)),i=c,m=E,a.VisualState){var _={VisualState:a.VisualState,time:a.endTime,commandStateId:c,active:!1,previousVisualStateId:o,nextVisualStateId:-1};e=this.mvx.addChildState(this.visualStateListStateId,_,this.visualStateListItemComponent),g&&(g=this.mvx.getGenericState(o),g.nextVisualStateId=e,this.mvx.updateState(o,g)),g=_,o=e,t=!0}else if(!t){var h=this.mvx.getGenericState(this.initVisualStateId);h.commandStateId=c,h.previousVisualStateId=-1,h.nextVisualStateId=-1,this.mvx.updateState(this.initVisualStateId,h),g=h,o=e,t=!0}E.visualStateId=e,this.mvx.updateState(c,E),(-1===this.currentCommandId&&0===f||this.currentCommandId===a.id)&&(this.currentCommandStateId=c,this.displayCurrentCommand(),this.currentVisualStateId=e,this.displayCurrentVisualState())}},t.prototype.updateViewState=function(){this.mvx.updateState(this.rootStateId,this.visible)},t.prototype.toFilter=function(t){return t+='',t=t.toLowerCase(),!!(this.searchText&&2<this.searchText.length&&-1===t.indexOf(this.searchText.toLowerCase()))},t.prototype.search=function(t){switch(this.searchText=t,this.mvx.getGenericState(this.menuStateId).status){case 0:case 40:this.displayCurrentCapture();break;case 30:this.displayEndState();break;case 10:this.displayInformation();break;case 20:this.displayInitState();}this.searchText=''},t}();a.ResultView=e}(t.EmbeddedFrontend||(t.EmbeddedFrontend={}))}(e||(e={}));var e;!function(n){!function(e){e.DefaultInjection={WebGlObjectNamespace:n.WebGlObjects,RecorderNamespace:n.Recorders,CommandNamespace:n.Commands,StateNamespace:n.States,AnalyserNamespace:n.Analysers,StackTraceCtor:n.Utils.StackTrace,LoggerCtor:n.Utils.ConsoleLogger,EventCtor:n.Utils.Event,TimeCtor:n.Utils.Time,CanvasSpyCtor:n.Spies.CanvasSpy,CommandSpyCtor:n.Spies.CommandSpy,ContextSpyCtor:n.Spies.ContextSpy,RecorderSpyCtor:n.Spies.RecorderSpy,StateSpyCtor:n.Spies.StateSpy,TimeSpyCtor:n.Spies.TimeSpy,WebGlObjectSpyCtor:n.Spies.WebGlObjectSpy,CaptureAnalyserCtor:n.Analysers.CaptureAnalyser,ExtensionsCtor:n.States.Information.Extensions,CapabilitiesCtor:n.States.Information.Capabilities,CompressedTexturesCtor:n.States.Information.CompressedTextures,DefaultCommandCtor:n.Commands.DefaultCommand,CommandComparatorCtor:n.Comparators.CommandComparator,CaptureMenuConstructor:n.EmbeddedFrontend.CaptureMenu,ResultViewConstructor:n.EmbeddedFrontend.ResultView}}(n.ProvidedInjection||(n.ProvidedInjection={}))}(e||(e={}));var e;!function(a){var e=function(){function t(e){void 0===e&&(e={}),this.options=e,this.noFrameTimeout=-1,this.injection=e.injection||a.ProvidedInjection.DefaultInjection,this.captureNextFrames=0,this.captureNextCommands=0,this.quickCapture=!1,this.retry=0,this.contexts=[],this.logger=new this.injection.LoggerCtor,this.time=new this.injection.TimeCtor,this.timeSpy=new this.injection.TimeSpyCtor({eventConstructor:this.injection.EventCtor,timeConstructor:this.injection.TimeCtor},this.logger),this.onCaptureStarted=new this.injection.EventCtor,this.onCapture=new this.injection.EventCtor,this.onError=new this.injection.EventCtor,this.timeSpy.onFrameStart.add(this.onFrameStart,this),this.timeSpy.onFrameEnd.add(this.onFrameEnd,this),this.timeSpy.onError.add(this.onErrorInternal,this)}return t.getFirstAvailable3dContext=function(t){return this.tryGetContextFromHelperField(t)||this.tryGetContextFromCanvas(t,'webgl')||this.tryGetContextFromCanvas(t,'experimental-webgl')||this.tryGetContextFromCanvas(t,'webgl2')||this.tryGetContextFromCanvas(t,'experimental-webgl2')},t.tryGetContextFromHelperField=function(n){var e=n.getAttribute('__spector_context_type');if(e)return this.tryGetContextFromCanvas(n,e)},t.tryGetContextFromCanvas=function(a,e){var t;try{t=a.getContext(e)}catch(t){}return t},t.prototype.displayUI=function(){var n=this;this.captureMenu||(this.getCaptureUI(),this.captureMenu.onPauseRequested.add(this.pause,this),this.captureMenu.onPlayRequested.add(this.play,this),this.captureMenu.onPlayNextFrameRequested.add(this.playNextFrame,this),this.captureMenu.onCaptureRequested.add(function(e){e&&n.captureCanvas(e.ref)},this),setInterval(function(){n.captureMenu.setFPS(n.getFps())},1e3),this.captureMenu.trackPageCanvases(),this.captureMenu.display()),this.resultView||(this.getResultUI(),this.onCapture.add(function(e){n.resultView.display(),n.resultView.addCapture(e)}))},t.prototype.getResultUI=function(){var a=this;return this.resultView||(this.resultView=new this.injection.ResultViewConstructor({eventConstructor:this.injection.EventCtor},this.logger),this.resultView.onSourceCodeChanged.add(function(e){a.rebuildProgramFromProgramId(e.programId,e.sourceVertex,e.sourceFragment,function(t){a.referenceNewProgram(e.programId,t),a.resultView.showSourceCodeError(null)},function(e){a.resultView.showSourceCodeError(e)})})),this.resultView},t.prototype.getCaptureUI=function(){return this.captureMenu||(this.captureMenu=new this.injection.CaptureMenuConstructor({eventConstructor:this.injection.EventCtor},this.logger)),this.captureMenu},t.prototype.rebuildProgramFromProgramId=function(e,t,n,i,r){var o=a.WebGlObjects.Program.getFromGlobalStore(e);this.rebuildProgram(o,t,n,i,r)},t.prototype.rebuildProgram=function(e,t,n,i,r){a.ProgramRecompilerHelper.rebuildProgram(e,t,n,i,r)},t.prototype.referenceNewProgram=function(e,t){a.WebGlObjects.Program.updateInGlobalStore(e,t)},t.prototype.pause=function(){this.timeSpy.changeSpeedRatio(0)},t.prototype.play=function(){this.timeSpy.changeSpeedRatio(1)},t.prototype.playNextFrame=function(){this.timeSpy.playNextFrame()},t.prototype.drawOnlyEveryXFrame=function(t){this.timeSpy.changeSpeedRatio(t)},t.prototype.getFps=function(){return this.timeSpy.getFps()},t.prototype.spyCanvases=function(){return this.canvasSpy?void this.onErrorInternal('Already spying canvas.'):void(this.canvasSpy=new this.injection.CanvasSpyCtor({eventConstructor:this.injection.EventCtor},this.logger),this.canvasSpy.onContextRequested.add(this.spyContext,this))},t.prototype.spyCanvas=function(t){return this.canvasSpy?void this.onErrorInternal('Already spying canvas.'):void(this.canvasSpy=new this.injection.CanvasSpyCtor({eventConstructor:this.injection.EventCtor,canvas:t},this.logger),this.canvasSpy.onContextRequested.add(this.spyContext,this))},t.prototype.getAvailableContexts=function(){return this.getAvailableContexts()},t.prototype.captureCanvas=function(a,e,n){void 0===e&&(e=0),void 0===n&&(n=!1);var i=this.getAvailableContextSpyByCanvas(a);if(i)this.captureContextSpy(i,e,n);else{var r=t.getFirstAvailable3dContext(a);r?this.captureContext(r,e,n):this.logger.error('No webgl context available on the chosen canvas.')}},t.prototype.captureContext=function(a,r,t){void 0===r&&(r=0),void 0===t&&(t=!1);var n=this.getAvailableContextSpyByCanvas(a.canvas);n||(n=a.getIndexedParameter?new this.injection.ContextSpyCtor({context:a,version:2,recordAlways:!1,injection:this.injection},this.time,this.logger):new this.injection.ContextSpyCtor({context:a,version:1,recordAlways:!1,injection:this.injection},this.time,this.logger),n.onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:n.context.canvas,contextSpy:n})),n&&this.captureContextSpy(n,r,t)},t.prototype.captureContextSpy=function(a,e,t){var n=this;void 0===e&&(e=0),void 0===t&&(t=!1),this.quickCapture=t,this.capturingContext?this.onErrorInternal('Already capturing a context.'):(this.retry=0,this.capturingContext=a,this.capturingContext.setMarker(this.marker),e=x(e,5e3),0<e?this.captureCommands(e):this.captureFrames(1),this.noFrameTimeout=setTimeout(function(){0<e?n.stopCapture():n.capturingContext&&1<n.retry?n.onErrorInternal('No frames with gl commands detected. Try moving the camera.'):n.onErrorInternal('No frames detected. Try moving the camera or implementing requestAnimationFrame.')},1e4))},t.prototype.captureNextFrame=function(n,e){void 0===e&&(e=!1),n instanceof HTMLCanvasElement?this.captureCanvas(n,0,e):this.captureContext(n,0,e)},t.prototype.startCapture=function(a,e,t){void 0===t&&(t=!1),a instanceof HTMLCanvasElement?this.captureCanvas(a,e,t):this.captureContext(a,e,t)},t.prototype.stopCapture=function(){if(this.capturingContext){var t=this.capturingContext.stopCapture();if(0<t.commands.length)return-1<this.noFrameTimeout&&clearTimeout(this.noFrameTimeout),this.triggerCapture(t),this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,t;0===this.captureNextCommands&&(this.retry++,this.captureFrames(1))}},t.prototype.setMarker=function(t){this.marker=t,this.capturingContext&&this.capturingContext.setMarker(t)},t.prototype.clearMarker=function(){this.marker=null,this.capturingContext&&this.capturingContext.clearMarker()},t.prototype.captureFrames=function(t){this.captureNextFrames=t,this.captureNextCommands=0,this.playNextFrame()},t.prototype.captureCommands=function(t){this.captureNextFrames=0,this.captureNextCommands=t,this.play(),this.capturingContext?(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(t,this.quickCapture)):(this.onErrorInternal('No context to capture from.'),this.captureNextCommands=0)},t.prototype.spyContext=function(n){var e=this.getAvailableContextSpyByCanvas(n.context.canvas);e||(e=new this.injection.ContextSpyCtor({context:n.context,version:n.contextVersion,recordAlways:!0,injection:this.injection},this.time,this.logger),e.onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:e.context.canvas,contextSpy:e})),e.spy()},t.prototype.getAvailableContextSpyByCanvas=function(a){for(var e=0,t=this.contexts,n;e<t.length;e++)if(n=t[e],n.canvas===a)return n.contextSpy},t.prototype.onFrameStart=function(){0<this.captureNextCommands||(0<this.captureNextFrames?(this.capturingContext&&(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(0,this.quickCapture)),this.captureNextFrames--):this.capturingContext=void 0)},t.prototype.onFrameEnd=function(){0<this.captureNextCommands||0===this.captureNextFrames&&this.stopCapture()},t.prototype.triggerCapture=function(t){this.captureMenu&&this.captureMenu.captureComplete(null),this.onCapture.trigger(t)},t.prototype.onErrorInternal=function(t){if(this.logger.error(t),-1<this.noFrameTimeout&&clearTimeout(this.noFrameTimeout),!this.capturingContext)throw t;this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,this.retry=0,this.captureMenu&&this.captureMenu.captureComplete(t),this.onError.trigger(t)},t}();a.Spector=e}(e||(e={})),t.exports=e},function(o,e,R){var t=String.prototype;!function(){var a=function(){return this}();a||'undefined'==typeof window||(a=window);var l=function(t,a,n){return'string'==typeof t?void(2==arguments.length&&(n=a),l.modules[t]||(l.payloads[t]=n,l.modules[t]=null)):void(l.original?l.original.apply(this,arguments):(console.error('dropping module because define wasn\'t a string.'),console.trace()))};l.modules={},l.payloads={};var s=function(o,e,p){if('string'==typeof e){var n=i(o,e);if(void 0!=n)return p&&p(),n}else if('[object Array]'===Object.prototype.toString.call(e)){for(var r=[],s=0,a=e.length,l;s<a;++s){if(l=i(o,e[s]),void 0==l&&d.original)return;r.push(l)}return p&&p.apply(null,r)||!0}},d=function(n,e){var t=s('',n,e);return void 0==t&&d.original?d.original.apply(this,arguments):t},c=function(a,e){if(-1!==e.indexOf('!')){var t=e.split('!');return c(a,t[0])+'!'+c(a,t[1])}if('.'==e.charAt(0)){var n=a.split('/').slice(0,-1).join('/');for(e=n+'/'+e;-1!==e.indexOf('.')&&r!=e;){var r=e;e=e.replace(/\/\.\//,'/').replace(/[^\/]+\/\.\.\//,'')}}return e},i=function(t,n){n=c(t,n);var e=l.modules[n];if(!e){if('function'==typeof(e=l.payloads[n])){var r={},d={id:n,uri:'',exports:r,packaged:!0};r=e(function(a,e){return s(n,a,e)},r,d)||d.exports,l.modules[n]=r,delete l.payloads[n]}e=l.modules[n]=r||e}return e};!function(e){var t=a;e&&(a[e]||(a[e]={}),t=a[e]),t.define&&t.define.packaged||(l.original=t.define,t.define=l,t.define.packaged=!0),t.require&&t.require.packaged||(d.original=t.require,t.require=d,t.require.packaged=!0)}('ace')}(),ace.define('ace/lib/regexp',['require','exports','module'],function(){'use strict';function i(t){return(t.global?'g':'')+(t.ignoreCase?'i':'')+(t.multiline?'m':'')+(t.extended?'x':'')+(t.sticky?'y':'')}function r(a,e,t){if(Array.prototype.indexOf)return a.indexOf(e,t);for(var n=t||0;n<a.length;n++)if(a[n]===e)return n;return-1}var d={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:t.match,replace:t.replace,split:t.split},o=void 0===d.exec.call(/()??/,'')[1],p=function(){var t=/^/g;return d.test.call(t,''),!t.lastIndex}();p&&o||(RegExp.prototype.exec=function(u){var m=d.exec.apply(this,arguments),l,t;if('string'==typeof u&&m){if(!o&&1<m.length&&-1<r(m,'')&&(t=RegExp(this.source,d.replace.call(i(this),'g','')),d.replace.call(u.slice(m.index),t,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(m[t]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var n=1;n<m.length;n++)(l=this._xregexp.captureNames[n-1])&&(m[l]=m[n]);!p&&this.global&&!m[0].length&&this.lastIndex>m.index&&this.lastIndex--}return m},p||(RegExp.prototype.test=function(n){var e=d.exec.call(this,n);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))}),ace.define('ace/lib/es5-shim',['require','exports','module'],function(){function i(){}function r(t){try{return Object.defineProperty(t,'sentinel',{}),'sentinel'in t}catch(t){}}function o(t){return t=+t,t===t?0!==t&&t!==1/0&&t!==-1/0&&(t=(0<t||-1)*S(g(t))):t=0,t}Function.prototype.bind||(Function.prototype.bind=function(a){var e=this;if('function'!=typeof e)throw new TypeError('Function.prototype.bind called on incompatible '+e);var o=m.call(arguments,1),n=function(){if(this instanceof n){var t=e.apply(this,o.concat(m.call(arguments)));return Object(t)===t?t:this}return e.apply(a,o.concat(m.call(arguments)))};return e.prototype&&(i.prototype=e.prototype,n.prototype=new i,i.prototype=null),n});var e=Function.prototype.call,n=Array.prototype,d=Object.prototype,m=n.slice,p=e.bind(d.toString),h=e.bind(d.hasOwnProperty),f,s,a,l,c;(c=h(d,'__defineGetter__'))&&(f=e.bind(d.__defineGetter__),s=e.bind(d.__defineSetter__),a=e.bind(d.__lookupGetter__),l=e.bind(d.__lookupSetter__));Array.isArray||(Array.isArray=function(t){return'[object Array]'==p(t)});var C=Object('a'),E='a'!=C[0]||!(0 in C);if((Array.prototype.forEach||(Array.prototype.forEach=function(a){var e=P(this),t=E&&'[object String]'==p(this)?this.split(''):e,n=arguments[1],i=-1,r=t.length>>>0;if('[object Function]'!=p(a))throw new TypeError;for(;++i<r;)i in t&&a.call(n,t[i],i,e)}),Array.prototype.map||(Array.prototype.map=function(a){var e=P(this),t=E&&'[object String]'==p(this)?this.split(''):e,n=t.length>>>0,i=Array(n),r=arguments[1];if('[object Function]'!=p(a))throw new TypeError(a+' is not a function');for(var o=0;o<n;o++)o in t&&(i[o]=a.call(r,t[o],o,e));return i}),Array.prototype.filter||(Array.prototype.filter=function(l){var e=P(this),n=E&&'[object String]'==p(this)?this.split(''):e,i=n.length>>>0,r=[],o=arguments[1],s;if('[object Function]'!=p(l))throw new TypeError(l+' is not a function');for(var t=0;t<i;t++)t in n&&(s=n[t],l.call(o,s,t,e)&&r.push(s));return r}),Array.prototype.every||(Array.prototype.every=function(a){var e=P(this),t=E&&'[object String]'==p(this)?this.split(''):e,n=t.length>>>0,i=arguments[1];if('[object Function]'!=p(a))throw new TypeError(a+' is not a function');for(var r=0;r<n;r++)if(r in t&&!a.call(i,t[r],r,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a){var e=P(this),t=E&&'[object String]'==p(this)?this.split(''):e,n=t.length>>>0,i=arguments[1];if('[object Function]'!=p(a))throw new TypeError(a+' is not a function');for(var r=0;r<n;r++)if(r in t&&a.call(i,t[r],r,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var e=P(this),t=E&&'[object String]'==p(this)?this.split(''):e,n=t.length>>>0;if('[object Function]'!=p(a))throw new TypeError(a+' is not a function');if(!n&&1==arguments.length)throw new TypeError('reduce of empty array with no initial value');var s=0,o;if(2<=arguments.length)o=arguments[1];else for(;;){if(s in t){o=t[s++];break}if(++s>=n)throw new TypeError('reduce of empty array with no initial value')}for(;s<n;s++)s in t&&(o=a.call(void 0,o,t[s],s,e));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var e=P(this),t=E&&'[object String]'==p(this)?this.split(''):e,n=t.length>>>0;if('[object Function]'!=p(a))throw new TypeError(a+' is not a function');if(!n&&1==arguments.length)throw new TypeError('reduceRight of empty array with no initial value');var s=n-1,o;if(2<=arguments.length)o=arguments[1];else for(;;){if(s in t){o=t[s--];break}if(0>--s)throw new TypeError('reduceRight of empty array with no initial value')}do s in this&&(o=a.call(void 0,o,t[s],s,e));while(s--);return o}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(a){var e=E&&'[object String]'==p(this)?this.split(''):P(this),t=e.length>>>0;if(!t)return-1;var r=0;for(1<arguments.length&&(r=o(arguments[1])),r=0<=r?r:T(0,t+r);r<t;r++)if(r in e&&e[r]===a)return r;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(a){var e=E&&'[object String]'==p(this)?this.split(''):P(this),t=e.length>>>0;if(!t)return-1;var r=t-1;for(1<arguments.length&&(r=x(r,o(arguments[1]))),r=0<=r?r:t-g(r);0<=r;r--)if(r in e&&a===e[r])return r;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:d)}),!Object.getOwnPropertyDescriptor)&&(Object.getOwnPropertyDescriptor=function(s,p){if('object'!=typeof s&&'function'!=typeof s||null===s)throw new TypeError('Object.getOwnPropertyDescriptor called on a non-object: '+s);if(h(s,p)){var t,n,i;if(t={enumerable:!0,configurable:!0},c){var r=s.__proto__;s.__proto__=d;var n=a(s,p),i=l(s,p);if(s.__proto__=r,n||i)return n&&(t.get=n),i&&(t.set=i),t}return t.value=s[p],t}}),Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),!Object.create){var A;A=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var n={};for(var e in n)n[e]=null;return n.constructor=n.hasOwnProperty=n.propertyIsEnumerable=n.isPrototypeOf=n.toLocaleString=n.toString=n.valueOf=n.__proto__=null,n},Object.create=function(a,r){var t;if(null===a)t=A();else{if('object'!=typeof a)throw new TypeError('typeof prototype['+typeof a+'] != \'object\'');var n=function(){};n.prototype=a,t=new n,t.__proto__=a}return void 0!==r&&Object.defineProperties(t,r),t}}if(Object.defineProperty){var v=r({}),L='undefined'==typeof document||r(document.createElement('div'));if(!v||!L)var M=Object.defineProperty}(!Object.defineProperty||M)&&(Object.defineProperty=function(r,o,t){if('object'!=typeof r&&'function'!=typeof r||null===r)throw new TypeError('Object.defineProperty called on non-object: '+r);if('object'!=typeof t&&'function'!=typeof t||null===t)throw new TypeError('Property description must be an object: '+t);if(M)try{return M.call(Object,r,o,t)}catch(t){}if(!h(t,'value')){if(!c)throw new TypeError('getters & setters can not be defined on this javascript engine');h(t,'get')&&f(r,o,t.get),h(t,'set')&&s(r,o,t.set)}else if(c&&(a(r,o)||l(r,o))){var p=r.__proto__;r.__proto__=d,delete r[o],r[o]=t.value,r.__proto__=p}else r[o]=t.value;return r}),Object.defineProperties||(Object.defineProperties=function(a,e){for(var t in e)h(e,t)&&Object.defineProperty(a,t,e[t]);return a}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(t){Object.freeze=function(n){return function(e){return'function'==typeof e?e:n(e)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)===a)throw new TypeError;for(var e='';h(a,e);)e+='?';a[e]=!0;var t=h(a,e);return delete a[e],t}),!Object.keys){var b=!0,I=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'],R=I.length;for(var N in{toString:null})b=!1;Object.keys=function(a){if('object'!=typeof a&&'function'!=typeof a||null===a)throw new TypeError('Object.keys called on a non-object');var r=[];for(var t in a)h(a,t)&&r.push(t);if(b)for(var n=0,i;n<R;n++)i=I[n],h(a,i)&&r.push(i);return r}}Date.now||(Date.now=function(){return new Date().getTime()});var y='\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';if(!t.trim||y.trim()){y='['+y+']';var w=new RegExp('^'+y+y+'*'),B=new RegExp(y+y+'*$');t.trim=function(){return(this+'').replace(w,'').replace(B,'')}}var P=function(t){if(null==t)throw new TypeError('can\'t convert '+t+' to object');return Object(t)}}),ace.define('ace/lib/fixoldbrowsers',['require','exports','module','ace/lib/regexp','ace/lib/es5-shim'],function(t){'use strict';t('./regexp'),t('./es5-shim')}),ace.define('ace/lib/dom',['require','exports','module'],function(n,l){'use strict';return(l.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName('head')[0]||t.documentElement},l.createElement=function(n,e){return document.createElementNS?document.createElementNS(e||'http://www.w3.org/1999/xhtml',n):document.createElement(n)},l.hasCssClass=function(n,e){return-1!==(n.className+'').split(/\s+/g).indexOf(e)},l.addCssClass=function(t,e){l.hasCssClass(t,e)||(t.className+=' '+e)},l.removeCssClass=function(a,e){for(var t=a.className.split(/\s+/g),n;;){if(n=t.indexOf(e),-1==n)break;t.splice(n,1)}a.className=t.join(' ')},l.toggleCssClass=function(a,e){for(var t=a.className.split(/\s+/g),n=!0,o;;){if(o=t.indexOf(e),-1==o)break;n=!1,t.splice(o,1)}return n&&t.push(e),a.className=t.join(' '),n},l.setCssClass=function(t,e,n){n?l.addCssClass(t,e):l.removeCssClass(t,e)},l.hasCssString=function(a,e){var t=0,r;if(e=e||document,e.createStyleSheet&&(r=e.styleSheets)){for(;t<r.length;)if(r[t++].owningElement.id===a)return!0;}else if(r=e.getElementsByTagName('style'))for(;t<r.length;)if(r[t++].id===a)return!0;return!1},l.importCssString=function(t,e,n){if(n=n||document,e&&l.hasCssString(e,n))return null;var a;e&&(t+='\n/*# sourceURL=ace/css/'+e+' */'),n.createStyleSheet?(a=n.createStyleSheet(),a.cssText=t,e&&(a.owningElement.id=e)):(a=l.createElement('style'),a.appendChild(n.createTextNode(t)),e&&(a.id=e),l.getDocumentHead(n).appendChild(a))},l.importCssStylsheet=function(t,e){if(e.createStyleSheet)e.createStyleSheet(t);else{var n=l.createElement('link');n.rel='stylesheet',n.href=t,l.getDocumentHead(e).appendChild(n)}},l.getInnerWidth=function(t){return parseInt(l.computedStyle(t,'paddingLeft'),10)+parseInt(l.computedStyle(t,'paddingRight'),10)+t.clientWidth},l.getInnerHeight=function(t){return parseInt(l.computedStyle(t,'paddingTop'),10)+parseInt(l.computedStyle(t,'paddingBottom'),10)+t.clientHeight},l.scrollbarWidth=function(t){var e=l.createElement('ace_inner');e.style.width='100%',e.style.minWidth='0px',e.style.height='200px',e.style.display='block';var n=l.createElement('ace_outer'),i=n.style;i.position='absolute',i.left='-10000px',i.overflow='hidden',i.width='200px',i.minWidth='0px',i.height='150px',i.display='block',n.appendChild(e);var r=t.documentElement;r.appendChild(n);var o=e.offsetWidth;i.overflow='scroll';var s=e.offsetWidth;return o==s&&(s=n.clientWidth),r.removeChild(n),o-s},'undefined'==typeof document)?void(l.importCssString=function(){}):void(void 0===window.pageYOffset?(l.getPageScrollTop=function(){return document.body.scrollTop},l.getPageScrollLeft=function(){return document.body.scrollLeft}):(l.getPageScrollTop=function(){return window.pageYOffset},l.getPageScrollLeft=function(){return window.pageXOffset}),l.computedStyle=window.getComputedStyle?function(n,e){return e?(window.getComputedStyle(n,'')||{})[e]||'':window.getComputedStyle(n,'')||{}}:function(n,e){return e?n.currentStyle[e]:n.currentStyle},l.setInnerHtml=function(a,e){var t=a.cloneNode(!1);return t.innerHTML=e,a.parentNode.replaceChild(t,a),t},'textContent'in document.documentElement?(l.setInnerText=function(n,e){n.textContent=e},l.getInnerText=function(t){return t.textContent}):(l.setInnerText=function(n,e){n.innerText=e},l.getInnerText=function(t){return t.innerText}),l.getParentWindow=function(t){return t.defaultView||t.parentWindow})}),ace.define('ace/lib/oop',['require','exports','module'],function(n,a){'use strict';a.inherits=function(n,a){n.super_=a,n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})},a.mixin=function(a,e){for(var t in e)a[t]=e[t];return a},a.implement=function(t,e){a.mixin(t,e)}}),ace.define('ace/lib/keys',['require','exports','module','ace/lib/fixoldbrowsers','ace/lib/oop'],function(n,e){'use strict';n('./fixoldbrowsers');var a=n('./oop'),o=function(){var o={MODIFIER_KEYS:{16:'Shift',17:'Ctrl',18:'Alt',224:'Meta'},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:'Backspace',9:'Tab',13:'Return',19:'Pause',27:'Esc',32:'Space',33:'PageUp',34:'PageDown',35:'End',36:'Home',37:'Left',38:'Up',39:'Right',40:'Down',44:'Print',45:'Insert',46:'Delete',96:'Numpad0',97:'Numpad1',98:'Numpad2',99:'Numpad3',100:'Numpad4',101:'Numpad5',102:'Numpad6',103:'Numpad7',104:'Numpad8',105:'Numpad9',112:'F1',113:'F2',114:'F3',115:'F4',116:'F5',117:'F6',118:'F7',119:'F8',120:'F9',121:'F10',122:'F11',123:'F12',144:'Numlock',145:'Scrolllock',"-13":'NumpadEnter'},PRINTABLE_KEYS:{32:' ',48:'0',49:'1',50:'2',51:'3',52:'4',53:'5',54:'6',55:'7',56:'8',57:'9',59:';',61:'=',65:'a',66:'b',67:'c',68:'d',69:'e',70:'f',71:'g',72:'h',73:'i',74:'j',75:'k',76:'l',77:'m',78:'n',79:'o',80:'p',81:'q',82:'r',83:'s',84:'t',85:'u',86:'v',87:'w',88:'x',89:'y',90:'z',106:'*',107:'+',109:'-',110:'.',111:'/',186:';',187:'=',188:',',189:'-',190:'.',191:'/',192:'`',219:'[',220:'\\',221:']',222:'\''}},n,e;for(e in o.FUNCTION_KEYS)n=o.FUNCTION_KEYS[e].toLowerCase(),o[n]=parseInt(e,10);for(e in o.PRINTABLE_KEYS)n=o.PRINTABLE_KEYS[e].toLowerCase(),o[n]=parseInt(e,10);return a.mixin(o,o.MODIFIER_KEYS),a.mixin(o,o.PRINTABLE_KEYS),a.mixin(o,o.FUNCTION_KEYS),o.enter=o.return,o.escape=o.esc,o.del=o.delete,o[173]='-',function(){for(var n=['cmd','ctrl','alt','shift'],a=r(2,n.length);a--;)o.KEY_MODS[a]=n.filter(function(t){return a&o.KEY_MODS[t]}).join('-')+'-'}(),o.KEY_MODS[0]='',o.KEY_MODS[-1]='input-',o}();a.mixin(e,o),e.keyCodeToString=function(n){var e=o[n];return'string'!=typeof e&&(e=String.fromCharCode(n)),e.toLowerCase()}}),ace.define('ace/lib/useragent',['require','exports','module'],function(n,e){'use strict';if(e.OS={LINUX:'LINUX',MAC:'MAC',WINDOWS:'WINDOWS'},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS},'object'==typeof navigator){var t=(navigator.platform.match(/mac|win|linux/i)||['other'])[0].toLowerCase(),a=navigator.userAgent;e.isWin='win'==t,e.isMac='mac'==t,e.isLinux='linux'==t,e.isIE='Microsoft Internet Explorer'==navigator.appName||0<=navigator.appName.indexOf('MSAppHost')?parseFloat((a.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((a.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&9>e.isIE,e.isGecko=e.isMozilla=(window.Controllers||window.controllers)&&'Gecko'===window.navigator.product,e.isOldGecko=e.isGecko&&4>parseInt((a.match(/rv:(\d+)/)||[])[1],10),e.isOpera=window.opera&&'[object Opera]'==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(a.split('WebKit/')[1])||void 0,e.isChrome=parseFloat(a.split(' Chrome/')[1])||void 0,e.isAIR=0<=a.indexOf('AdobeAIR'),e.isIPad=0<=a.indexOf('iPad'),e.isChromeOS=0<=a.indexOf(' CrOS '),e.isIOS=/iPad|iPhone|iPod/.test(a)&&!window.MSStream,e.isIOS&&(e.isMac=!0)}}),ace.define('ace/lib/event',['require','exports','module','ace/lib/keys','ace/lib/useragent'],function(n,p){'use strict';function i(o,l,t){var c=a(l);if(!m.isMac&&s){if(l.getModifierState&&(l.getModifierState('OS')||l.getModifierState('Win'))&&(c|=8),s.altGr){if(3==(3&c))return;s.altGr=0}if(18===t||17===t){var p='location'in l?l.location:l.keyLocation;if(17===t&&1===p)1==s[t]&&(e=l.timeStamp);else if(18===t&&3===c&&2===p){var r=l.timeStamp-e;50>r&&(s.altGr=!0)}}}if(t in d.MODIFIER_KEYS&&(t=-1),8&c&&91<=t&&93>=t&&(t=-1),!c&&13===t){var p='location'in l?l.location:l.keyLocation;if(3===p&&(o(l,c,-t),l.defaultPrevented))return}if(m.isChromeOS&&8&c){if(o(l,c,t),l.defaultPrevented)return;c&=-9}return!!(c||t in d.FUNCTION_KEYS||t in d.PRINTABLE_KEYS)&&o(l,c,t)}function r(){s=Object.create(null)}var d=n('./keys'),m=n('./useragent'),s=null,e=0;p.addListener=function(a,e,t){if(a.addEventListener)return a.addEventListener(e,t,!1);if(a.attachEvent){var n=function(){t.call(a,window.event)};t._wrapper=n,a.attachEvent('on'+e,n)}},p.removeListener=function(a,e,t){return a.removeEventListener?a.removeEventListener(e,t,!1):void(a.detachEvent&&a.detachEvent('on'+e,t._wrapper||t))},p.stopEvent=function(t){return p.stopPropagation(t),p.preventDefault(t),!1},p.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},p.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},p.getButton=function(t){return'dblclick'==t.type?0:'contextmenu'==t.type||m.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.preventDefault?t.button:{1:0,2:2,4:1}[t.button]},p.capture=function(t,a,n){function r(t){a&&a(t),n&&n(t),p.removeListener(document,'mousemove',a,!0),p.removeListener(document,'mouseup',r,!0),p.removeListener(document,'dragstart',r,!0)}return p.addListener(document,'mousemove',a,!0),p.addListener(document,'mouseup',r,!0),p.addListener(document,'dragstart',r,!0),r},p.addTouchMoveListener=function(t,a){if('ontouchmove'in t){var n,o;p.addListener(t,'touchstart',function(a){var e=a.changedTouches[0];n=e.clientX,o=e.clientY}),p.addListener(t,'touchmove',function(r){var e=r.changedTouches[0];r.wheelX=-(e.clientX-n)/1,r.wheelY=-(e.clientY-o)/1,n=e.clientX,o=e.clientY,a(r)})}},p.addMouseWheelListener=function(t,a){'onmousewheel'in t?p.addListener(t,'mousewheel',function(t){void 0===t.wheelDeltaX?(t.wheelX=0,t.wheelY=-t.wheelDelta/8):(t.wheelX=-t.wheelDeltaX/8,t.wheelY=-t.wheelDeltaY/8),a(t)}):'onwheel'in t?p.addListener(t,'wheel',function(t){switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=.35*t.deltaX||0,t.wheelY=.35*t.deltaY||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0);}a(t)}):p.addListener(t,'DOMMouseScroll',function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),a(t)})},p.addMultiMouseDownListener=function(t,s,n,i){function o(t){if(0===p.getButton(t)?1<t.detail?4<++r&&(r=1):r=1:r=0,m.isIE){var e=5<g(t.clientX-d)||5<g(t.clientY-l);c&&!e||(r=1),c&&clearTimeout(c),c=setTimeout(function(){c=null},s[r-1]||600),1==r&&(d=t.clientX,l=t.clientY)}if(t._clicks=r,n[i]('mousedown',t),4<r)r=0;else if(1<r)return n[i](h[r],t)}function a(t){r=2,c&&clearTimeout(c),c=setTimeout(function(){c=null},s[r-1]||600),n[i]('mousedown',t),n[i](h[r],t)}var r=0,h={2:'dblclick',3:'tripleclick',4:'quadclick'},d,l,c;Array.isArray(t)||(t=[t]),t.forEach(function(t){p.addListener(t,'mousedown',o),m.isOldIE&&p.addListener(t,'dblclick',a)})};var a=m.isMac&&m.isOpera&&!('KeyboardEvent'in window)?function(t){return 0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0)}:function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)};(p.getModifierString=function(t){return d.KEY_MODS[a(t)]},p.addCommandKeyListener=function(t,a){var e=p.addListener;if(m.isOldGecko||m.isOpera&&!('KeyboardEvent'in window)){var n=null;e(t,'keydown',function(t){n=t.keyCode}),e(t,'keypress',function(t){return i(a,t,n)})}else{var o=null;e(t,'keydown',function(n){s[n.keyCode]=(s[n.keyCode]||0)+1;var e=i(a,n,n.keyCode);return o=n.defaultPrevented,e}),e(t,'keypress',function(t){o&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(p.stopEvent(t),o=null)}),e(t,'keyup',function(t){s[t.keyCode]=null}),s||(r(),e(window,'focus',r))}},'object'==typeof window&&window.postMessage&&!m.isOldIE)&&(p.nextTick=function(t,e){e=e||window,p.addListener(e,'message',function i(n){'zero-timeout-message-1'==n.data&&(p.stopPropagation(n),p.removeListener(e,'message',i),t())}),e.postMessage('zero-timeout-message-1','*')}),p.nextFrame='object'==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),p.nextFrame=p.nextFrame?p.nextFrame.bind(window):function(t){setTimeout(t,17)}}),ace.define('ace/lib/lang',['require','exports','module'],function(n,e){'use strict';e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split('').reverse().join('')},e.stringRepeat=function(a,e){for(var t='';0<e;)1&e&&(t+=a),(e>>=1)&&(a+=a);return t};var t=/^\s\s*/,a=/\s\s*$/;e.stringTrimLeft=function(n){return n.replace(t,'')},e.stringTrimRight=function(t){return t.replace(a,'')},e.copyObject=function(a){var e={};for(var t in a)e[t]=a[t];return e},e.copyArray=function(a){for(var e=[],t=0,n=a.length;t<n;t++)e[t]=a[t]&&'object'==typeof a[t]?this.copyObject(a[t]):a[t];return e},e.deepCopy=function e(a){if('object'!=typeof a||!a)return a;var r;if(Array.isArray(a)){r=[];for(var n=0;n<a.length;n++)r[n]=e(a[n]);return r}if('[object Object]'!==Object.prototype.toString.call(a))return a;for(var n in r={},a)r[n]=e(a[n]);return r},e.arrayToMap=function(a){for(var e={},t=0;t<a.length;t++)e[a[t]]=1;return e},e.createMap=function(a){var e=Object.create(null);for(var t in a)e[t]=a[t];return e},e.arrayRemove=function(a,e){for(var t=0;t<=a.length;t++)e===a[t]&&a.splice(t,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,'\\$1')},e.escapeHTML=function(t){return t.replace(/&/g,'&#38;').replace(/"/g,'&#34;').replace(/'/g,'&#39;').replace(/</g,'&#60;')},e.getMatchOffsets=function(a,e){var t=[];return a.replace(e,function(n){t.push({offset:arguments[arguments.length-2],length:n.length})}),t},e.deferredCall=function(a){var r=null,t=function(){r=null,a()},n=function(a){return n.cancel(),r=setTimeout(t,a||0),n};return n.schedule=n,n.call=function(){return this.cancel(),a(),n},n.cancel=function(){return clearTimeout(r),r=null,n},n.isPending=function(){return r},n},e.delayedCall=function(a,o){var t=null,n=function(){t=null,a()},e=function(a){null==t&&(t=setTimeout(n,a||o))};return e.delay=function(a){t&&clearTimeout(t),t=setTimeout(n,a||o)},e.schedule=e,e.call=function(){this.cancel(),a()},e.cancel=function(){t&&clearTimeout(t),t=null},e.isPending=function(){return t},e}}),ace.define('ace/keyboard/textinput_ios',['require','exports','module','ace/lib/event','ace/lib/useragent','ace/lib/dom','ace/lib/lang','ace/lib/keys'],function(n,e){'use strict';var R=n('../lib/event'),L=n('../lib/useragent'),r=n('../lib/dom'),o=n('../lib/lang'),s=n('../lib/keys'),a=s.KEY_MODS,l=18>L.isChrome,d=L.isIE;e.TextInput=function(i,M){function n(a){if(!f){if(f=!0,S)e=0,t=a?0:I.value.length-1;else var e=4,t=5;try{I.setSelectionRange(e,t)}catch(t){}f=!1}}function h(){f||(I.value=u,L.isWebKit&&F.schedule())}function d(){clearTimeout(H),H=setTimeout(function(){C&&(I.style.cssText=C,C=''),null==M.renderer.$keepTextAreaAtCursor&&(M.renderer.$keepTextAreaAtCursor=!0,M.renderer.$moveTextAreaToCursor())},0)}var I=r.createElement('textarea');I.className=L.isIOS?'ace_text-input ace_text-input-ios':'ace_text-input',L.isTouchPad&&I.setAttribute('x-palm-disable-auto-cap',!0),I.setAttribute('wrap','off'),I.setAttribute('autocorrect','off'),I.setAttribute('autocapitalize','off'),I.setAttribute('spellcheck',!1),I.style.opacity='0',i.insertBefore(I,i.firstChild);var u='\n aaaa a\n',p=!1,m=!1,g=!1,f=!1,C='',e=!0;try{var A=document.activeElement===I}catch(t){}R.addListener(I,'blur',function(t){M.onBlur(t),A=!1}),R.addListener(I,'focus',function(t){A=!0,M.onFocus(t),n()}),this.focus=function(){return C?I.focus():void(I.style.position='fixed',I.focus())},this.blur=function(){I.blur()},this.isFocused=function(){return A};var _=o.delayedCall(function(){A&&n(e)}),F=o.delayedCall(function(){f||(I.value=u,A&&n())});L.isWebKit||M.addEventListener('changeSelection',function(){M.selection.isEmpty()!=e&&(e=!e,_.schedule())}),h(),A&&M.onFocus();var b=function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length},S=null;this.setInputHandler=function(t){S=t},this.getInputHandler=function(){return S};var T=!1,y=function(t){4===I.selectionStart&&5===I.selectionEnd||(S&&(t=S(t),S=null),g?(n(),t&&M.onPaste(t),g=!1):t==u.substr(0)&&4===I.selectionStart?T?M.execCommand('del',{source:'ace'}):M.execCommand('backspace',{source:'ace'}):p||(t.substring(0,9)==u&&t.length>u.length?t=t.substr(9):t.substr(0,4)==u.substr(0,4)?t=t.substr(4,t.length-u.length+1):t.charAt(t.length-1)==u.charAt(0)&&(t=t.slice(0,-1)),t==u.charAt(0)||t.charAt(t.length-1)==u.charAt(0)&&(t=t.slice(0,-1)),t&&M.onTextInput(t)),p&&(p=!1),T&&(T=!1))},w=function(){if(!f){var e=I.value;y(e),h()}},B=function(a,o,t){var e=a.clipboardData||window.clipboardData;if(e&&!l){var i=d||t?'Text':'text/plain';try{return o?!1!==e.setData(i,o):e.getData(i)}catch(a){if(!t)return B(a,o,!0)}}},N=function(t,e){var a=M.getCopyText();return a?void(B(t,a)?(L.isIOS&&(m=e,I.value='\n aa'+a+'a a\n',I.setSelectionRange(4,4+a.length),p={value:a}),e?M.onCut():M.onCopy(),L.isIOS||R.preventDefault(t)):(p=!0,I.value=a,I.select(),setTimeout(function(){p=!1,h(),n(),e?M.onCut():M.onCopy()}))):R.preventDefault(t)};R.addCommandKeyListener(I,M.onCommandKey.bind(M)),R.addListener(I,'select',function(){b(I)?(M.selectAll(),n()):S&&n(M.selection.isEmpty())}),R.addListener(I,'input',w),R.addListener(I,'cut',function(t){N(t,!0)}),R.addListener(I,'copy',function(t){N(t,!1)}),R.addListener(I,'paste',function(t){var e=B(t);'string'==typeof e?(e&&M.onPaste(e,t),L.isIE&&setTimeout(n),R.preventDefault(t)):(I.value='',g=!0)});var D=function(){if(f&&M.onCompositionUpdate&&!M.$readOnly){var t=I.value.replace(/\x01/g,'');if(f.lastValue!==t&&(M.onCompositionUpdate(t),f.lastValue&&M.undo(),f.canUndo&&(f.lastValue=t),f.lastValue)){var e=M.selection.getRange();M.insert(f.lastValue),M.session.markUndoGroup(),f.range=M.selection.getRange(),M.selection.setRange(e),M.selection.clearSelection()}}},O=function(t){if(M.onCompositionEnd&&!M.$readOnly){var a=f;f=!1;var n=setTimeout(function(){n=null;var t=I.value.replace(/\x01/g,'');f||(t==a.lastValue?h():!a.lastValue&&t&&(h(),y(t)))});S=function(t){return n&&clearTimeout(n),(t=t.replace(/\x01/g,''))==a.lastValue?'':(a.lastValue&&n&&M.undo(),t)},M.onCompositionEnd(),M.removeListener('mousedown',O),'compositionend'==t.type&&a.range&&M.selection.setRange(a.range),(!!L.isChrome&&53<=L.isChrome||!!L.isWebKit&&603<=L.isWebKit)&&w()}},k=o.delayedCall(D,50);R.addListener(I,'compositionstart',function(){f||!M.onCompositionStart||M.$readOnly||(f={},f.canUndo=M.session.$undoManager,M.onCompositionStart(),setTimeout(D,0),M.on('mousedown',O),f.canUndo&&!M.selection.isEmpty()&&(M.insert(''),M.session.markUndoGroup(),M.selection.clearSelection()),M.session.markUndoGroup())}),L.isGecko?R.addListener(I,'text',function(){k.schedule()}):(R.addListener(I,'keyup',function(){k.schedule()}),R.addListener(I,'keydown',function(){k.schedule()})),R.addListener(I,'compositionend',O),this.getElement=function(){return I},this.setReadOnly=function(t){I.readOnly=t},this.onContextMenu=function(a){T=!0,n(M.selection.isEmpty()),M._emit('nativecontextmenu',{target:M,domEvent:a}),this.moveToMouse(a,!0)},this.moveToMouse=function(t,e){C||(C=I.style.cssText),I.style.cssText=(e?'z-index:100000;':'')+'height:'+I.style.height+';'+(L.isIE?'opacity:0.1;':'');var n=M.container.getBoundingClientRect(),o=r.computedStyle(M.container),a=n.top+(parseInt(o.borderTopWidth)||0),i=n.left+(parseInt(n.borderLeftWidth)||0),s=n.bottom-a-I.clientHeight-2,l=function(t){I.style.left=t.clientX-i-2+'px',I.style.top=x(t.clientY-a-2,s)+'px'};l(t),'mousedown'==t.type&&(M.renderer.$keepTextAreaAtCursor&&(M.renderer.$keepTextAreaAtCursor=null),clearTimeout(H),L.isWin&&R.capture(M.container,l,d))},this.onContextMenuClose=d;var G=function(t){M.textInput.onContextMenu(t),d()},H;if(R.addListener(I,'mouseup',G),R.addListener(I,'mousedown',function(t){t.preventDefault(),d()}),R.addListener(M.renderer.scroller,'contextmenu',G),R.addListener(I,'contextmenu',G),L.isIOS){var P=null,W=!1;i.addEventListener('keydown',function(){P&&clearTimeout(P),W=!0}),i.addEventListener('keyup',function(){P=setTimeout(function(){W=!1},100)});var $=function(){if(document.activeElement===I&&!W){if(m)return setTimeout(function(){m=!1},100);var e=I.selectionStart,t=I.selectionEnd;(I.setSelectionRange(4,5),e==t)?0===e?M.onCommandKey(null,0,s.up):1===e?M.onCommandKey(null,0,s.home):2===e?M.onCommandKey(null,a.option,s.left):4===e?M.onCommandKey(null,0,s.left):5===e?M.onCommandKey(null,0,s.right):7===e?M.onCommandKey(null,a.option,s.right):8===e?M.onCommandKey(null,0,s.end):9===e?M.onCommandKey(null,0,s.down):void 0:(6===t?M.onCommandKey(null,a.shift,s.right):7===t?M.onCommandKey(null,a.shift|a.option,s.right):8===t?M.onCommandKey(null,a.shift,s.end):9===t?M.onCommandKey(null,a.shift,s.down):void 0,0===e?M.onCommandKey(null,a.shift,s.up):1===e?M.onCommandKey(null,a.shift,s.home):2===e?M.onCommandKey(null,a.shift|a.option,s.left):3===e?M.onCommandKey(null,a.shift,s.left):void 0)}};document.addEventListener('selectionchange',$),M.on('destroy',function(){document.removeEventListener('selectionchange',$)})}}}),ace.define('ace/keyboard/textinput',['require','exports','module','ace/lib/event','ace/lib/useragent','ace/lib/dom','ace/lib/lang','ace/keyboard/textinput_ios'],function(n,e){'use strict';var b=n('../lib/event'),I=n('../lib/useragent'),r=n('../lib/dom'),o=n('../lib/lang'),s=18>I.isChrome,d=I.isIE,i=n('./textinput_ios').TextInput;e.TextInput=function(l,P){function n(a){if(!f){if(f=!0,F)e=0,t=a?0:U.value.length-1;else var e=a?2:1,t=2;try{U.setSelectionRange(e,t)}catch(t){}f=!1}}function u(){f||(U.value=c,I.isWebKit&&v.schedule())}function h(){clearTimeout(G),G=setTimeout(function(){W&&(U.style.cssText=W,W=''),null==P.renderer.$keepTextAreaAtCursor&&(P.renderer.$keepTextAreaAtCursor=!0,P.renderer.$moveTextAreaToCursor())},0)}if(I.isIOS)return i.call(this,l,P);var U=r.createElement('textarea');U.className='ace_text-input',U.setAttribute('wrap','off'),U.setAttribute('autocorrect','off'),U.setAttribute('autocapitalize','off'),U.setAttribute('spellcheck',!1),U.style.opacity='0',l.insertBefore(U,l.firstChild);var c='\u2028\u2028',m=!1,p=!1,f=!1,W='',e=!0;try{var C=document.activeElement===U}catch(t){}b.addListener(U,'blur',function(t){P.onBlur(t),C=!1}),b.addListener(U,'focus',function(t){C=!0,P.onFocus(t),n()}),this.focus=function(){if(W)return U.focus();var t=U.style.top;U.style.position='fixed',U.style.top='0px',U.focus(),setTimeout(function(){U.style.position='','0px'==U.style.top&&(U.style.top=t)},0)},this.blur=function(){U.blur()},this.isFocused=function(){return C};var A=o.delayedCall(function(){C&&n(e)}),v=o.delayedCall(function(){f||(U.value=c,C&&n())});I.isWebKit||P.addEventListener('changeSelection',function(){P.selection.isEmpty()!=e&&(e=!e,A.schedule())}),u(),C&&P.onFocus();var _=function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length},F=null;this.setInputHandler=function(t){F=t},this.getInputHandler=function(){return F};var S=!1,R=function(t){F&&(t=F(t),F=null),p?(n(),t&&P.onPaste(t),p=!1):t==c.charAt(0)?S?P.execCommand('del',{source:'ace'}):P.execCommand('backspace',{source:'ace'}):(t.substring(0,2)==c?t=t.substr(2):t.charAt(0)==c.charAt(0)?t=t.substr(1):t.charAt(t.length-1)==c.charAt(0)&&(t=t.slice(0,-1)),t.charAt(t.length-1)==c.charAt(0)&&(t=t.slice(0,-1)),t&&P.onTextInput(t)),S&&(S=!1)},T=function(){if(!f){var e=U.value;R(e),u()}},y=function(o,l,t){var e=o.clipboardData||window.clipboardData;if(e&&!s){var i=d||t?'Text':'text/plain';try{return l?!1!==e.setData(i,l):e.getData(i)}catch(a){if(!t)return y(a,l,!0)}}},w=function(t,e){var a=P.getCopyText();return a?void(y(t,a)?(e?P.onCut():P.onCopy(),b.preventDefault(t)):(m=!0,U.value=a,U.select(),setTimeout(function(){m=!1,u(),n(),e?P.onCut():P.onCopy()}))):b.preventDefault(t)},B=function(t){w(t,!0)},H=function(t){w(t,!1)},D=function(t){var e=y(t);'string'==typeof e?(e&&P.onPaste(e,t),I.isIE&&setTimeout(n),b.preventDefault(t)):(U.value='',p=!0)};b.addCommandKeyListener(U,P.onCommandKey.bind(P)),b.addListener(U,'select',function(){m?m=!1:_(U)?(P.selectAll(),n()):F&&n(P.selection.isEmpty())}),b.addListener(U,'input',T),b.addListener(U,'cut',B),b.addListener(U,'copy',H),b.addListener(U,'paste',D),'oncut'in U&&'oncopy'in U&&'onpaste'in U||b.addListener(l,'keydown',function(t){if((!I.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:H(t);break;case 86:D(t);break;case 88:B(t);}});var L=function(){if(f&&P.onCompositionUpdate&&!P.$readOnly){var t=U.value.replace(/\u2028/g,'');if(f.lastValue!==t&&(P.onCompositionUpdate(t),f.lastValue&&P.undo(),f.canUndo&&(f.lastValue=t),f.lastValue)){var e=P.selection.getRange();P.insert(f.lastValue),P.session.markUndoGroup(),f.range=P.selection.getRange(),P.selection.setRange(e),P.selection.clearSelection()}}},M=function(t){if(P.onCompositionEnd&&!P.$readOnly){var a=f;f=!1;var n=setTimeout(function(){n=null;var t=U.value.replace(/\u2028/g,'');f||(t==a.lastValue?u():!a.lastValue&&t&&(u(),R(t)))});F=function(t){return n&&clearTimeout(n),(t=t.replace(/\u2028/g,''))==a.lastValue?'':(a.lastValue&&n&&P.undo(),t)},P.onCompositionEnd(),P.removeListener('mousedown',M),'compositionend'==t.type&&a.range&&P.selection.setRange(a.range),(!!I.isChrome&&53<=I.isChrome||!!I.isWebKit&&603<=I.isWebKit)&&T()}},N=o.delayedCall(L,50);b.addListener(U,'compositionstart',function(){f||!P.onCompositionStart||P.$readOnly||(f={},f.canUndo=P.session.$undoManager,P.onCompositionStart(),setTimeout(L,0),P.on('mousedown',M),f.canUndo&&!P.selection.isEmpty()&&(P.insert(''),P.session.markUndoGroup(),P.selection.clearSelection()),P.session.markUndoGroup())}),I.isGecko?b.addListener(U,'text',function(){N.schedule()}):(b.addListener(U,'keyup',function(){N.schedule()}),b.addListener(U,'keydown',function(){N.schedule()})),b.addListener(U,'compositionend',M),this.getElement=function(){return U},this.setReadOnly=function(t){U.readOnly=t},this.onContextMenu=function(a){S=!0,n(P.selection.isEmpty()),P._emit('nativecontextmenu',{target:P,domEvent:a}),this.moveToMouse(a,!0)},this.moveToMouse=function(t,e){W||(W=U.style.cssText),U.style.cssText=(e?'z-index:100000;':'')+'height:'+U.style.height+';'+(I.isIE?'opacity:0.1;':'');var n=P.container.getBoundingClientRect(),o=r.computedStyle(P.container),a=n.top+(parseInt(o.borderTopWidth)||0),i=n.left+(parseInt(n.borderLeftWidth)||0),s=n.bottom-a-U.clientHeight-2,l=function(t){U.style.left=t.clientX-i-2+'px',U.style.top=x(t.clientY-a-2,s)+'px'};l(t),'mousedown'==t.type&&(P.renderer.$keepTextAreaAtCursor&&(P.renderer.$keepTextAreaAtCursor=null),clearTimeout(G),I.isWin&&b.capture(P.container,l,h))},this.onContextMenuClose=h;var O=function(t){P.textInput.onContextMenu(t),h()},G;b.addListener(U,'mouseup',O),b.addListener(U,'mousedown',function(t){t.preventDefault(),h()}),b.addListener(P.renderer.scroller,'contextmenu',O),b.addListener(U,'contextmenu',O)}}),ace.define('ace/mouse/default_handlers',['require','exports','module','ace/lib/dom','ace/lib/event','ace/lib/useragent'],function(n,e){'use strict';function i(n){n.$clickSelection=null;var e=n.editor;e.setDefaultHandler('mousedown',this.onMouseDown.bind(n)),e.setDefaultHandler('dblclick',this.onDoubleClick.bind(n)),e.setDefaultHandler('tripleclick',this.onTripleClick.bind(n)),e.setDefaultHandler('quadclick',this.onQuadClick.bind(n)),e.setDefaultHandler('mousewheel',this.onMouseWheel.bind(n)),e.setDefaultHandler('touchmove',this.onTouchMove.bind(n)),['select','startSelect','selectEnd','selectAllEnd','selectByWordsEnd','selectByLinesEnd','dragWait','dragWaitEnd','focusWait'].forEach(function(e){n[e]=this[e]},this),n.selectByLines=this.extendSelectionBy.bind(n,'getLineRange'),n.selectByWords=this.extendSelectionBy.bind(n,'getWordRange')}function r(o,e,t,n){return a(r(t-o,2)+r(n-e,2))}function o(a,e){if(a.start.row==a.end.row)var t=2*e.column-a.start.column-a.end.column;else if(a.start.row!=a.end.row-1||a.start.column||a.end.column)var t=2*e.row-a.start.row-a.end.row;else var t=e.column-4;return 0>t?{cursor:a.start,anchor:a.end}:{cursor:a.end,anchor:a.start}}var t=(n('../lib/dom'),n('../lib/event'),n('../lib/useragent'));(function(){this.onMouseDown=function(s){var e=s.inSelection(),l=s.getDocumentPosition();this.mousedownEvent=s;var n=this.editor,i=s.getButton();if(0!==i){var r=n.getSelectionRange(),o=r.isEmpty();return n.$blockScrolling++,(o||1==i)&&n.selection.moveToPosition(l),n.$blockScrolling--,void(2==i&&(n.textInput.onContextMenu(s.domEvent),t.isMozilla||s.preventDefault()))}return this.mousedownEvent.time=Date.now(),!e||n.isFocused()||(n.focus(),!this.$focusTimout||this.$clickSelection||n.inMultiSelectMode)?(this.captureMouse(s),this.startSelect(l,1<s.domEvent._clicks),s.preventDefault()):(this.setState('focusWait'),void this.captureMouse(s))},this.startSelect=function(a,e){a=a||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var t=this.editor;t.$blockScrolling++,this.mousedownEvent.getShiftKey()?t.selection.selectToPosition(a):e||t.selection.moveToPosition(a),e||this.select(),t.renderer.scroller.setCapture&&t.renderer.scroller.setCapture(),t.setStyle('ace_selecting'),this.setState('select'),t.$blockScrolling--},this.select=function(){var a=this.editor,t=a.renderer.screenToTextCoordinates(this.x,this.y),n;if(a.$blockScrolling++,this.$clickSelection){var e=this.$clickSelection.comparePoint(t);if(-1==e)n=this.$clickSelection.end;else if(1==e)n=this.$clickSelection.start;else{var i=o(this.$clickSelection,t);t=i.cursor,n=i.anchor}a.selection.setSelectionAnchor(n.row,n.column)}a.selection.selectToPosition(t),a.$blockScrolling--,a.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(d){var e=this.editor,n=e.renderer.screenToTextCoordinates(this.x,this.y),i=e.selection[d](n.row,n.column),r;if(e.$blockScrolling++,this.$clickSelection){var t=this.$clickSelection.comparePoint(i.start),s=this.$clickSelection.comparePoint(i.end);if(-1==t&&0>=s)r=this.$clickSelection.end,i.end.row==n.row&&i.end.column==n.column||(n=i.start);else if(1==s&&0<=t)r=this.$clickSelection.start,i.start.row==n.row&&i.start.column==n.column||(n=i.end);else if(-1==t&&1==s)n=i.end,r=i.start;else{var a=o(this.$clickSelection,n);n=a.cursor,r=a.anchor}e.selection.setSelectionAnchor(r.row,r.column)}e.selection.selectToPosition(n),e.$blockScrolling--,e.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle('ace_selecting'),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var n=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),e=Date.now();(0<n||e-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(a){var e=a.getDocumentPosition(),t=this.editor,n=t.session,o=n.getBracketRange(e);o?(o.isEmpty()&&(o.start.column--,o.end.column++),this.setState('select')):(o=t.selection.getWordRange(e.row,e.column),this.setState('selectByWords')),this.$clickSelection=o,this.select()},this.onTripleClick=function(a){var e=a.getDocumentPosition(),t=this.editor;this.setState('selectByLines');var n=t.getSelectionRange();n.isMultiLine()&&n.contains(e.row,e.column)?(this.$clickSelection=t.selection.getLineRange(n.start.row),this.$clickSelection.end=t.selection.getLineRange(n.end.row).end):this.$clickSelection=t.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState('selectAll')},this.onMouseWheel=function(a){if(!a.getAccelKey()){a.getShiftKey()&&a.wheelY&&!a.wheelX&&(a.wheelX=a.wheelY,a.wheelY=0);var e=a.domEvent.timeStamp,t=e-(this.$lastScrollTime||0),n=this.editor;return n.renderer.isScrollableBy(a.wheelX*a.speed,a.wheelY*a.speed)||200>t?(this.$lastScrollTime=e,n.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed),a.stop()):void 0}},this.onTouchMove=function(a){var e=a.domEvent.timeStamp,t=e-(this.$lastScrollTime||0),n=this.editor;if(n.renderer.isScrollableBy(a.wheelX*a.speed,a.wheelY*a.speed)||200>t)return this.$lastScrollTime=e,n.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed),a.stop()}}).call(i.prototype),e.DefaultHandlers=i}),ace.define('ace/tooltip',['require','exports','module','ace/lib/oop','ace/lib/dom'],function(n,e){'use strict';function i(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}var t=(n('./lib/oop'),n('./lib/dom'));(function(){this.$init=function(){return this.$element=t.createElement('div'),this.$element.className='ace_tooltip',this.$element.style.display='none',this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(n){t.setInnerText(this.getElement(),n)},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(n,e){this.getElement().style.left=n+'px',this.getElement().style.top=e+'px'},this.setClassName=function(n){t.addCssClass(this.getElement(),n)},this.show=function(a,e,t){null!=a&&this.setText(a),null!=e&&null!=t&&this.setPosition(e,t),this.isOpen||(this.getElement().style.display='block',this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display='none',this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(i.prototype),e.Tooltip=i}),ace.define('ace/mouse/default_gutter_handler',['require','exports','module','ace/lib/dom','ace/lib/oop','ace/lib/event','ace/tooltip'],function(n,e){'use strict';function i(g){function t(){var d=f.getDocumentPosition().row,c=s.$annotations[d];if(!c)return n();if(d==e.session.getLength()){var E=e.renderer.pixelToScreenCoordinates(0,f.y).row,o=f.$pos;if(E>e.session.documentToScreenRow(o.row,o.column))return n()}if(h!=c)if(h=c.text.join('<br/>'),l.setHtml(h),l.show(),e._signal('showGutterTooltip',l),e.on('mousewheel',n),g.$tooltipFollowsMouse)i(f);else{var a=f.domEvent.target,u=a.getBoundingClientRect(),m=l.getElement().style;m.left=u.right+'px',m.top=u.bottom+'px'}}function n(){a&&(a=clearTimeout(a)),h&&(l.hide(),h=null,e._signal('hideGutterTooltip',l),e.removeEventListener('mousewheel',n))}function i(t){l.setPosition(t.x,t.y)}var e=g.editor,s=e.renderer.$gutterLayer,l=new r(e.container);g.editor.setDefaultHandler('guttermousedown',function(a){if(e.isFocused()&&0==a.getButton()&&'foldWidgets'!=s.getRegion(a)){var t=a.getDocumentPosition().row,n=e.session.selection;if(a.getShiftKey())n.selectTo(t,0);else{if(2==a.domEvent.detail)return e.selectAll(),a.preventDefault();g.$clickSelection=e.selection.getLineRange(t)}return g.setState('selectByLines'),g.captureMouse(a),a.preventDefault()}});var a,f,h;g.editor.setDefaultHandler('guttermousemove',function(e){var r=e.domEvent.target||e.domEvent.srcElement;return c.hasCssClass(r,'ace_fold-widget')?n():void(h&&g.$tooltipFollowsMouse&&i(e),f=e,a||(a=setTimeout(function(){a=null,f&&!g.isMousePressed?t():n()},50)))}),o.addListener(e.renderer.$gutter,'mouseout',function(){f=null,h&&!a&&(a=setTimeout(function(){a=null,n()},50))}),e.on('changeSession',n)}function r(t){a.call(this,t)}var c=n('../lib/dom'),t=n('../lib/oop'),o=n('../lib/event'),a=n('../tooltip').Tooltip;t.inherits(r,a),function(){this.setPosition=function(s,e){var t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),r=this.getHeight();s+=15,e+=15,s+i>t&&(s-=s+i-t),e+r>n&&(e-=20+r),a.prototype.setPosition.call(this,s,e)}}.call(r.prototype),e.GutterHandler=i}),ace.define('ace/mouse/mouse_event',['require','exports','module','ace/lib/event','ace/lib/useragent'],function(n,e){'use strict';var t=n('../lib/event'),a=n('../lib/useragent'),r=e.MouseEvent=function(n,e){this.domEvent=n,this.editor=e,this.x=this.clientX=n.clientX,this.y=this.clientY=n.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){t.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){t.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var a=this.editor,e=a.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return t.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=a.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(r.prototype)}),ace.define('ace/mouse/dragdrop_handler',['require','exports','module','ace/lib/dom','ace/lib/event','ace/lib/useragent'],function(n,e){'use strict';function i(a){function t(a,e){var s=Date.now(),n=!e||a.row!=e.row,i=!e||a.column!=e.column;!T||n||i?(M.$blockScrolling+=1,M.moveCursorToPosition(a),M.$blockScrolling-=1,T=s,P={x:E,y:B}):r(P.x,P.y,E,B)>d?T=null:s-T>=l&&(M.renderer.scrollCursorIntoView(),T=null)}function n(l,e){var g=Date.now(),f=M.renderer.layerConfig.lineHeight,i=M.renderer.layerConfig.characterWidth,r=M.renderer.scroller.getBoundingClientRect(),o={x:{left:E-r.left,right:r.right-E},y:{top:B-r.top,bottom:r.bottom-B}},s=x(o.x.left,o.x.right),a=x(o.y.top,o.y.bottom),c={row:l.row,column:l.column};2>=s/i&&(c.column+=o.x.left<o.x.right?-3:2),1>=a/f&&(c.row+=o.y.top<o.y.bottom?-1:1);var u=l.row!=c.row,h=l.column!=c.column,d=!e||l.row!=e.row;u||h&&!d?N?g-N>=p&&M.renderer.scrollCursorIntoView(c):N=g:N=null}function i(){var a=F;F=M.renderer.screenToTextCoordinates(E,B),t(F,a),n(F,a)}function h(){_=M.selection.toOrientedRange(),C=M.session.addMarker(_,'ace_selection',M.getSelectionStyle()),M.clearSelection(),M.isFocused()&&M.renderer.$cursorLayer.setBlinking(!1),clearInterval(e),i(),e=setInterval(i,20),g=0,o.addListener(document,'mousemove',m)}function d(){clearInterval(e),M.session.removeMarker(C),C=null,M.$blockScrolling+=1,M.selection.fromOrientedRange(_),M.$blockScrolling-=1,M.isFocused()&&!S&&M.renderer.$cursorLayer.setBlinking(!M.getReadOnly()),_=null,F=null,g=0,N=null,T=null,o.removeListener(document,'mousemove',m)}function m(){null==w&&(w=setTimeout(function(){null!=w&&C&&d()},20))}function p(n){var e=n.types;return!e||Array.prototype.some.call(e,function(t){return'text/plain'==t||'Text'==t})}function f(n){var e=['copy','copymove','all','uninitialized'],t=s.isMac?n.altKey:n.ctrlKey,a='uninitialized';try{a=n.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var r='none';return t&&0<=e.indexOf(a)?r='copy':0<=['move','copymove','linkmove','all','uninitialized'].indexOf(a)?r='move':0<=e.indexOf(a)&&(r='copy'),r}var M=a.editor,c=L.createElement('img');c.src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==',s.isOpera&&(c.style.cssText='width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;'),['dragWait','dragWaitEnd','startDrag','dragReadyEnd','onMouseDrag'].forEach(function(e){a[e]=this[e]},this),M.addEventListener('mousedown',this.onMouseDown.bind(a));var u=M.container,g=0,C,E,B,e,_,F,I,S,N,T,P;this.onDragStart=function(a){if(this.cancelDrag||!u.draggable){var e=this;return setTimeout(function(){e.startSelect(),e.captureMouse(a)},0),a.preventDefault()}_=M.getSelectionRange();var t=a.dataTransfer;t.effectAllowed=M.getReadOnly()?'copy':'copyMove',s.isOpera&&(M.container.appendChild(c),c.scrollTop=0),t.setDragImage&&t.setDragImage(c,0,0),s.isOpera&&M.container.removeChild(c),t.clearData(),t.setData('Text',M.session.getTextRange()),S=!0,this.setState('drag')},this.onDragEnd=function(n){if(u.draggable=!1,S=!1,this.setState(null),!M.getReadOnly()){var e=n.dataTransfer.dropEffect;I||'move'!=e||M.session.remove(M.getSelectionRange()),M.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle('ace_dragging'),this.editor.renderer.setCursorStyle('')},this.onDragEnter=function(t){if(!M.getReadOnly()&&p(t.dataTransfer))return E=t.clientX,B=t.clientY,C||h(),g++,t.dataTransfer.dropEffect=I=f(t),o.preventDefault(t)},this.onDragOver=function(t){if(!M.getReadOnly()&&p(t.dataTransfer))return E=t.clientX,B=t.clientY,C||(h(),g++),null!==w&&(w=null),t.dataTransfer.dropEffect=I=f(t),o.preventDefault(t)},this.onDragLeave=function(t){if(0>=--g&&C)return d(),I=null,o.preventDefault(t)},this.onDrop=function(a){if(F){var e=a.dataTransfer;if(S)'move'===I?_=_.contains(F.row,F.column)?{start:F,end:F}:M.moveText(_,F):'copy'===I?_=M.moveText(_,F,!0):void 0;else{var t=e.getData('Text');_={start:F,end:M.session.insert(F,t)},M.focus(),I=null}return d(),o.preventDefault(a)}},o.addListener(u,'dragstart',this.onDragStart.bind(a)),o.addListener(u,'dragend',this.onDragEnd.bind(a)),o.addListener(u,'dragenter',this.onDragEnter.bind(a)),o.addListener(u,'dragover',this.onDragOver.bind(a)),o.addListener(u,'dragleave',this.onDragLeave.bind(a)),o.addListener(u,'drop',this.onDrop.bind(a));var w=null}function r(o,e,t,n){return a(r(t-o,2)+r(n-e,2))}var L=n('../lib/dom'),o=n('../lib/event'),s=n('../lib/useragent'),p=200,l=200,d=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle('ace_dragging'),this.editor.renderer.setCursorStyle(''),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var n=this.editor;n.container.draggable=!0,n.renderer.$cursorLayer.setBlinking(!1),n.setStyle('ace_dragging');var e=s.isWin?'default':'move';n.renderer.setCursorStyle(e),this.setState('dragReady')},this.onMouseDrag=function(){var e=this.editor.container;if(s.isIE&&'dragReady'==this.state){var t=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);3<t&&e.dragDrop()}if('dragWait'===this.state){var t=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);0<t&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(a){if(this.$dragEnabled){this.mousedownEvent=a;var e=this.editor,t=a.inSelection(),n=a.getButton();if(1===(a.domEvent.detail||1)&&0===n&&t){if(a.editor.inMultiSelectMode&&(a.getAccelKey()||a.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=a.domEvent.target||a.domEvent.srcElement;('unselectable'in o&&(o.unselectable='on'),e.getDragDelay())?(s.isWebKit&&(this.cancelDrag=!0,e.container.draggable=!0),this.setState('dragWait')):this.startDrag(),this.captureMouse(a,this.onMouseDrag.bind(this)),a.defaultPrevented=!0}}}}).call(i.prototype),e.DragdropHandler=i}),ace.define('ace/lib/net',['require','exports','module','ace/lib/dom'],function(n,e){'use strict';var a=n('./dom');e.get=function(a,e){var t=new XMLHttpRequest;t.open('GET',a,!0),t.onreadystatechange=function(){4===t.readyState&&e(t.responseText)},t.send(null)},e.loadScript=function(o,i){var e=a.getDocumentHead(),t=document.createElement('script');t.src=o,e.appendChild(t),t.onload=t.onreadystatechange=function(a,e){!e&&t.readyState&&'loaded'!=t.readyState&&'complete'!=t.readyState||(t=t.onload=t.onreadystatechange=null,e||i())}},e.qualifyURL=function(n){var e=document.createElement('a');return e.href=n,e.href}}),ace.define('ace/lib/event_emitter',['require','exports','module'],function(n,e){'use strict';var t={},a=function(){this.propagationStopped=!0},r=function(){this.defaultPrevented=!0};t._emit=t._dispatchEvent=function(o,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var l=this._eventRegistry[o]||[],n=this._defaultHandlers[o];if(l.length||n){'object'==typeof e&&e||(e={}),e.type||(e.type=o),e.stopPropagation||(e.stopPropagation=a),e.preventDefault||(e.preventDefault=r),l=l.slice();for(var i=0;i<l.length&&(l[i](e,this),!e.propagationStopped);i++);return n&&!e.defaultPrevented?n(e,this):void 0}},t._signal=function(a,e){var t=(this._eventRegistry||{})[a];if(t){t=t.slice();for(var n=0;n<t.length;n++)t[n](e,this)}},t.once=function(a,e){var t=this;e&&this.addEventListener(a,function i(){t.removeEventListener(a,i),e.apply(null,arguments)})},t.setDefaultHandler=function(a,e){var t=this._defaultHandlers;if(t||(t=this._defaultHandlers={_disabled_:{}}),t[a]){var n=t[a],i=t._disabled_[a];i||(t._disabled_[a]=i=[]),i.push(n);var r=i.indexOf(e);-1!=r&&i.splice(r,1)}t[a]=e},t.removeDefaultHandler=function(a,e){var t=this._defaultHandlers;if(t){var n=t._disabled_[a];if(t[a]==e)t[a],n&&this.setDefaultHandler(a,n.pop());else if(n){var o=n.indexOf(e);-1!=o&&n.splice(o,1)}}},t.on=t.addEventListener=function(a,e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[a];return n||(n=this._eventRegistry[a]=[]),-1==n.indexOf(e)&&n[t?'unshift':'push'](e),e},t.off=t.removeListener=t.removeEventListener=function(a,e){this._eventRegistry=this._eventRegistry||{};var t=this._eventRegistry[a];if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},t.removeAllListeners=function(t){this._eventRegistry&&(this._eventRegistry[t]=[])},e.EventEmitter=t}),ace.define('ace/lib/app_config',['require','exports','module','ace/lib/oop','ace/lib/event_emitter'],function(n,e){'no use strict';function i(){'undefined'!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function r(a,e){var t=new Error(a);t.data=e,'object'==typeof console&&console.error&&console.error(t),setTimeout(function(){throw t})}var d=n('./oop'),t=n('./event_emitter').EventEmitter,o={setOptions:function(n){Object.keys(n).forEach(function(e){this.setOption(e,n[e])},this)},getOptions:function(n){var a={};return n?Array.isArray(n)||(a=n,n=Object.keys(a)):n=Object.keys(this.$options),n.forEach(function(t){a[t]=this.getOption(t)},this),a},setOption:function(a,e){if(this['$'+a]!==e){var t=this.$options[a];if(!t)return i('misspelled option "'+a+'"');if(t.forwardTo)return this[t.forwardTo]&&this[t.forwardTo].setOption(a,e);t.handlesSet||(this['$'+a]=e),t&&t.set&&t.set.call(this,e)}},getOption:function(n){var e=this.$options[n];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(n):e&&e.get?e.get.call(this):this['$'+n]:i('misspelled option "'+n+'"')}},a=function(){this.$defaultOptions={}};(function(){d.implement(this,t),this.defineOptions=function(a,e,r){return a.$options||(this.$defaultOptions[e]=a.$options={}),Object.keys(r).forEach(function(e){var t=r[e];'string'==typeof t&&(t={forwardTo:t}),t.name||(t.name=e),a.$options[t.name]=t,'initialValue'in t&&(a['$'+t.name]=t.initialValue)}),d.implement(a,o),this},this.resetOptions=function(a){Object.keys(a.$options).forEach(function(e){var t=a.$options[e];'value'in t&&a.setOption(e,t.value)})},this.setDefaultValue=function(a,e,t){var n=this.$defaultOptions[a]||(this.$defaultOptions[a]={});n[e]&&(n.forwardTo?this.setDefaultValue(n.forwardTo,e,t):n[e].value=t)},this.setDefaultValues=function(a,e){Object.keys(e).forEach(function(t){this.setDefaultValue(a,t,e[t])},this)},this.warn=i,this.reportError=r}).call(a.prototype),e.AppConfig=a}),ace.define('ace/config',['require','exports','module','ace/lib/lang','ace/lib/oop','ace/lib/net','ace/lib/app_config'],function(y,d,e){'no use strict';function r(t){if(b&&b.document){c.packaged=t||y.packaged||e.packaged||b.define&&R(2).packaged;for(var n={},i='',a=document.currentScript||document._currentScript,s=a&&a.ownerDocument||document,l=s.getElementsByTagName('script'),u=0;u<l.length;u++){var m=l[u],p=m.src||m.getAttribute('src');if(p){for(var h=m.attributes,g=0,f=h.length,E;g<f;g++)E=h[g],0===E.name.indexOf('data-ace-')&&(n[o(E.name.replace(/^data-ace-/,''))]=E.value);var C=p.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);C&&(i=C[1])}}for(var A in i&&(n.base=n.base||i,n.packaged=!0),n.basePath=n.base,n.workerPath=n.workerPath||n.base,n.modePath=n.modePath||n.base,n.themePath=n.themePath||n.base,delete n.base,n)void 0!==n[A]&&d.set(A,n[A])}}function o(t){return t.replace(/-(.)/g,function(n,e){return e.toUpperCase()})}var t=y('./lib/lang'),i=(y('./lib/oop'),y('./lib/net')),n=y('./lib/app_config').AppConfig;e.exports=d=new n;var b=function(){return this||'undefined'!=typeof window&&window}(),c={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:'',suffix:'.js',$moduleUrls:{}};d.get=function(t){if(!c.hasOwnProperty(t))throw new Error('Unknown config key: '+t);return c[t]},d.set=function(n,e){if(!c.hasOwnProperty(n))throw new Error('Unknown config key: '+n);c[n]=e},d.all=function(){return t.copyObject(c)},d.moduleUrl=function(a,e){if(c.$moduleUrls[a])return c.$moduleUrls[a];var t=a.split('/');e=e||t[t.length-2]||'';var n='snippets'==e?'/':'-',i=t[t.length-1];if('worker'==e&&'-'==n){var l=new RegExp('^'+e+'[\\-_]|[\\-_]'+e+'$','g');i=i.replace(l,'')}(!i||i==e)&&1<t.length&&(i=t[t.length-2]);var o=c[e+'Path'];return null==o?o=c.basePath:'/'==n&&(e=n=''),o&&'/'!=o.slice(-1)&&(o+='/'),o+e+n+i+this.get('suffix')},d.setModuleUrl=function(n,e){return c.$moduleUrls[n]=e},d.$loading={},d.loadModule=function(t,e){var a,r;Array.isArray(t)&&(r=t[0],t=t[1]);try{a=y(t)}catch(t){}if(a&&!d.$loading[t])return e&&e(a);if(d.$loading[t]||(d.$loading[t]=[]),d.$loading[t].push(e),!(1<d.$loading[t].length)){var o=function(){y([t],function(a){d._emit('load.module',{name:t,module:a});var r=d.$loading[t];d.$loading[t]=null,r.forEach(function(e){e&&e(a)})})};if(!d.get('packaged'))return o();i.loadScript(d.moduleUrl(t,r),o)}},r(!0),d.init=r}),ace.define('ace/mouse/mouse_handler',['require','exports','module','ace/lib/event','ace/lib/useragent','ace/mouse/default_handlers','ace/mouse/default_gutter_handler','ace/mouse/mouse_event','ace/mouse/dragdrop_handler','ace/config'],function(n,e){'use strict';var d=n('../lib/event'),i=n('../lib/useragent'),r=n('./default_handlers').DefaultHandlers,o=n('./default_gutter_handler').GutterHandler,s=n('./mouse_event').MouseEvent,p=n('./dragdrop_handler').DragdropHandler,t=n('../config'),a=function(s){var e=this;this.editor=s,new r(this),new o(this),new p(this);var t=function(){document.hasFocus&&document.hasFocus()&&(s.isFocused()||document.activeElement!=(s.textInput&&s.textInput.getElement()))||window.focus(),s.focus()},n=s.renderer.getMouseEventTarget();d.addListener(n,'click',this.onMouseEvent.bind(this,'click')),d.addListener(n,'mousemove',this.onMouseMove.bind(this,'mousemove')),d.addMultiMouseDownListener([n,s.renderer.scrollBarV&&s.renderer.scrollBarV.inner,s.renderer.scrollBarH&&s.renderer.scrollBarH.inner,s.textInput&&s.textInput.getElement()].filter(Boolean),[400,300,250],this,'onMouseEvent'),d.addMouseWheelListener(s.container,this.onMouseWheel.bind(this,'mousewheel')),d.addTouchMoveListener(s.container,this.onTouchMove.bind(this,'touchmove'));var a=s.renderer.$gutter;d.addListener(a,'mousedown',this.onMouseEvent.bind(this,'guttermousedown')),d.addListener(a,'click',this.onMouseEvent.bind(this,'gutterclick')),d.addListener(a,'dblclick',this.onMouseEvent.bind(this,'gutterdblclick')),d.addListener(a,'mousemove',this.onMouseEvent.bind(this,'guttermousemove')),d.addListener(n,'mousedown',t),d.addListener(a,'mousedown',t),i.isIE&&s.renderer.scrollBarV&&(d.addListener(s.renderer.scrollBarV.element,'mousedown',t),d.addListener(s.renderer.scrollBarH.element,'mousedown',t)),s.on('mousemove',function(t){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var n=s.renderer.screenToTextCoordinates(t.x,t.y),a=s.session.selection.getRange(),r=s.renderer;!a.isEmpty()&&a.insideStart(n.row,n.column)?r.setCursorStyle('default'):r.setCursorStyle('')}})};(function(){this.onMouseEvent=function(n,e){this.editor._emit(n,new s(e,this.editor))},this.onMouseMove=function(a,e){var t=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;t&&t.length&&this.editor._emit(a,new s(e,this.editor))},this.onMouseWheel=function(a,e){var t=new s(e,this.editor);t.speed=2*this.$scrollSpeed,t.wheelX=e.wheelX,t.wheelY=e.wheelY,this.editor._emit(a,t)},this.onTouchMove=function(a,e){var t=new s(e,this.editor);t.speed=1,t.wheelX=e.wheelX,t.wheelY=e.wheelY,this.editor._emit(a,t)},this.setState=function(t){this.state=t},this.captureMouse=function(a,r){this.x=a.x,this.y=a.y,this.isMousePressed=!0;var t=this.editor.renderer;t.$keepTextAreaAtCursor&&(t.$keepTextAreaAtCursor=null);var n=this,e=function(t){if(t){if(i.isWebKit&&!t.which&&n.releaseMouse)return n.releaseMouse();n.x=t.clientX,n.y=t.clientY,r&&r(t),n.mouseEvent=new s(t,n.editor),n.$mouseMoved=!0}},o=function(a){clearInterval(c),l(),n[n.state+'End']&&n[n.state+'End'](a),n.state='',null==t.$keepTextAreaAtCursor&&(t.$keepTextAreaAtCursor=!0,t.$moveTextAreaToCursor()),n.isMousePressed=!1,n.$onCaptureMouseMove=n.releaseMouse=null,a&&n.onMouseEvent('mouseup',a)},l=function(){n[n.state]&&n[n.state](),n.$mouseMoved=!1};if(i.isOldIE&&'dblclick'==a.domEvent.type)return setTimeout(function(){o(a)});n.$onCaptureMouseMove=e,n.releaseMouse=d.capture(this.editor.container,e,o);var c=setInterval(l,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var n=function(e){e&&e.domEvent&&'contextmenu'!=e.domEvent.type||(this.editor.off('nativecontextmenu',n),e&&e.domEvent&&d.stopEvent(e.domEvent))}.bind(this);setTimeout(n,10),this.editor.on('nativecontextmenu',n)}}).call(a.prototype),t.defineOptions(a.prototype,'mouseHandler',{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=a}),ace.define('ace/mouse/fold_handler',['require','exports','module'],function(n,e){'use strict';e.FoldHandler=function i(a){a.on('click',function(e){var t=e.getDocumentPosition(),n=a.session,o=n.getFoldAt(t.row,t.column,1);o&&(e.getAccelKey()?n.removeFold(o):n.expandFold(o),e.stop())}),a.on('gutterclick',function(e){if('foldWidgets'==a.renderer.$gutterLayer.getRegion(e)){var t=e.getDocumentPosition().row,n=a.session;n.foldWidgets&&n.foldWidgets[t]&&a.session.onFoldWidgetClick(t,e),a.isFocused()||a.focus(),e.stop()}}),a.on('gutterdblclick',function(e){if('foldWidgets'==a.renderer.$gutterLayer.getRegion(e)){var t=e.getDocumentPosition().row,n=a.session,i=n.getParentFoldRangeData(t,!0),r=i.range||i.firstRange;if(r){t=r.start.row;var o=n.getFoldAt(t,n.getLine(t).length,1);o?n.removeFold(o):(n.addFold('...',r),a.renderer.scrollCursorIntoView({row:r.start.row,column:0}))}e.stop()}})}}),ace.define('ace/keyboard/keybinding',['require','exports','module','ace/lib/keys','ace/lib/event'],function(n,e){'use strict';var a=n('../lib/keys'),d=n('../lib/event'),t=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(n){var e=this.$handlers;if(e[e.length-1]!=n){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(n,1)}},this.addKeyboardHandler=function(a,r){if(a){'function'!=typeof a||a.handleKeyboard||(a.handleKeyboard=a);var t=this.$handlers.indexOf(a);-1!=t&&this.$handlers.splice(t,1),void 0==r?this.$handlers.push(a):this.$handlers.splice(r,0,a),-1==t&&a.attach&&a.attach(this.$editor)}},this.removeKeyboardHandler=function(n){var e=this.$handlers.indexOf(n);return-1!=e&&(this.$handlers.splice(e,1),n.detach&&n.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var a=this.$data,e=a.editor;return this.$handlers.map(function(t){return t.getStatusText&&t.getStatusText(e,a)||''}).filter(Boolean).join(' ')},this.$callKeyboardHandlers=function(r,e,t,n){for(var i=!1,s=this.$editor.commands,a=this.$handlers.length,l;a--&&!((l=this.$handlers[a].handleKeyboard(this.$data,r,e,t,n))&&l.command&&(i='null'==l.command||s.exec(l.command,this.$editor,l.args,n),i&&n&&-1!=r&&1!=l.passEvent&&1!=l.command.passEvent&&d.stopEvent(n),i)););return i||-1!=r||(l={command:'insertstring'},i=s.exec('insertstring',this.$editor,e)),i&&this.$editor._signal&&this.$editor._signal('keyboardActivity',l),i},this.onCommandKey=function(o,e,t){var n=a.keyCodeToString(t);this.$callKeyboardHandlers(e,n,t,o)},this.onTextInput=function(t){this.$callKeyboardHandlers(-1,t)}}).call(t.prototype),e.KeyBinding=t}),ace.define('ace/range',['require','exports','module'],function(n,e){'use strict';var a=function(a,r,o,s){this.start={row:a,column:r},this.end={row:o,column:s}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return'Range: ['+this.start.row+'/'+this.start.column+'] -> ['+this.end.row+'/'+this.end.column+']'},this.contains=function(n,e){return 0==this.compare(n,e)},this.compareRange=function(a){var e=a.end,n=a.start,r;return r=this.compare(e.row,e.column),1==r?(r=this.compare(n.row,n.column),1==r?2:0==r?1:0):-1==r?-2:(r=this.compare(n.row,n.column),-1==r?-1:1==r?42:0)},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(n){var e=this.compareRange(n);return-1==e||0==e||1==e},this.isEnd=function(n,e){return this.end.row==n&&this.end.column==e},this.isStart=function(n,e){return this.start.row==n&&this.start.column==e},this.setStart=function(n,a){'object'==typeof n?(this.start.column=n.column,this.start.row=n.row):(this.start.row=n,this.start.column=a)},this.setEnd=function(n,a){'object'==typeof n?(this.end.column=n.column,this.end.row=n.row):(this.end.row=n,this.end.column=a)},this.inside=function(n,e){return 0==this.compare(n,e)&&!this.isEnd(n,e)&&!this.isStart(n,e)},this.insideStart=function(n,e){return 0==this.compare(n,e)&&!this.isEnd(n,e)},this.insideEnd=function(n,e){return 0==this.compare(n,e)&&!this.isStart(n,e)},this.compare=function(n,e){return this.isMultiLine()||n!==this.start.row?n<this.start.row?-1:n>this.end.row?1:this.start.row===n?e>=this.start.column?0:-1:this.end.row===n?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(n,e){return this.start.row==n&&this.start.column==e?-1:this.compare(n,e)},this.compareEnd=function(n,e){return this.end.row==n&&this.end.column==e?1:this.compare(n,e)},this.compareInside=function(n,e){return this.end.row==n&&this.end.column==e?1:this.start.row==n&&this.start.column==e?-1:this.compare(n,e)},this.clipRows=function(r,o){if(this.end.row>o)var t={row:o+1,column:0};else if(this.end.row<r)var t={row:r,column:0};if(this.start.row>o)var n={row:o+1,column:0};else if(this.start.row<r)var n={row:r,column:0};return a.fromPoints(n||this.start,t||this.end)},this.extend=function(r,s){var l=this.compare(r,s);if(0==l)return this;if(-1==l)var n={row:r,column:s};else var i={row:r,column:s};return a.fromPoints(n||this.start,i||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return a.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new a(this.start.row,0,T(this.start.row,this.end.row-1),0):new a(this.start.row,0,this.end.row,0)},this.toScreenRange=function(r){var e=r.documentToScreenPosition(this.start),t=r.documentToScreenPosition(this.end);return new a(e.row,e.column,t.row,t.column)},this.moveBy=function(n,e){this.start.row+=n,this.start.column+=e,this.end.row+=n,this.end.column+=e}}).call(a.prototype),a.fromPoints=function(n,e){return new a(n.row,n.column,e.row,e.column)},a.comparePoints=function(n,e){return n.row-e.row||n.column-e.column},a.comparePoints=function(n,e){return n.row-e.row||n.column-e.column},e.Range=a}),ace.define('ace/selection',['require','exports','module','ace/lib/oop','ace/lib/lang','ace/lib/event_emitter','ace/range'],function(n,e){'use strict';var t=n('./lib/oop'),l=n('./lib/lang'),r=n('./lib/event_emitter').EventEmitter,o=n('./range').Range,i=function(n){this.session=n,this.doc=n.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var a=this;this.lead.on('change',function(t){a._emit('changeCursor'),a.$isEmpty||a._emit('changeSelection'),a.$keepDesiredColumnOnChange||t.old.column==t.value.column||(a.$desiredColumn=null)}),this.selectionAnchor.on('change',function(){a.$isEmpty||a._emit('changeSelection')})};(function(){t.implement(this,r),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(n,e){this.anchor.setPosition(n,e),this.$isEmpty&&(this.$isEmpty=!1,this._emit('changeSelection'))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(a){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+a);var e=this.getSelectionAnchor(),t=this.getSelectionLead(),n=this.isBackwards();n&&0===e.column||this.setSelectionAnchor(e.row,e.column+a),(n||0!==t.column)&&this.$moveSelection(function(){this.moveCursorTo(t.row,t.column+a)})},this.isBackwards=function(){var n=this.anchor,e=this.lead;return n.row>e.row||n.row==e.row&&n.column>e.column},this.getRange=function(){var n=this.anchor,e=this.lead;return this.isEmpty()?o.fromPoints(e,e):this.isBackwards()?o.fromPoints(e,n):o.fromPoints(n,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit('changeSelection'))},this.selectAll=function(){var t=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(t,this.doc.getLine(t).length)},this.setRange=this.setSelectionRange=function(n,e){e?(this.setSelectionAnchor(n.end.row,n.end.column),this.selectTo(n.start.row,n.start.column)):(this.setSelectionAnchor(n.start.row,n.start.column),this.selectTo(n.end.row,n.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(n){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),n.call(this)},this.selectTo=function(n,e){this.$moveSelection(function(){this.moveCursorTo(n,e)})},this.selectToPosition=function(t){this.$moveSelection(function(){this.moveCursorToPosition(t)})},this.moveTo=function(n,e){this.clearSelection(),this.moveCursorTo(n,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(a,e){if(void 0===e){var t=a||this.lead;a=t.row,e=t.column}return this.session.getWordRange(a,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var n=this.getCursor(),e=this.session.getAWordRange(n.row,n.column);this.setSelectionRange(e)},this.getLineRange=function(a,s){var t='number'==typeof a?a:this.lead.row,i=this.session.getFoldLine(t),r;return i?(t=i.start.row,r=i.end.row):r=t,!0===s?new o(t,0,r,this.session.getLine(r).length):new o(t,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(a,e,t){var n=a.column,o=a.column+e;return 0>t&&(n=a.column-e,o=a.column),this.session.isTabStop(a)&&this.doc.getLine(a.row).slice(n,o).split(' ').length-1==e},this.moveCursorLeft=function(){var a=this.lead.getPosition(),t;if(t=this.session.getFoldAt(a.row,a.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===a.column)0<a.row&&this.moveCursorTo(a.row-1,this.doc.getLine(a.row-1).length);else{var e=this.session.getTabSize();this.wouldMoveIntoSoftTab(a,e,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-e):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var a=this.lead.getPosition(),t;if(t=this.session.getFoldAt(a.row,a.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var e=this.session.getTabSize(),a=this.lead;this.wouldMoveIntoSoftTab(a,e,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,e):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var a=this.lead.row,e=this.lead.column,t=this.session.documentToScreenRow(a,e),n=this.session.screenToDocumentPosition(t,0),i=this.session.getDisplayLine(a,null,n.row,n.column),r=i.match(/^\s*/);r[0].length==e||this.session.$useEmacsStyleLineStart||(n.column+=r[0].length),this.moveCursorToPosition(n)},this.moveCursorLineEnd=function(){var a=this.lead,e=this.session.getDocumentLastRowColumnPosition(a.row,a.column);if(this.lead.column==e.column){var t=this.session.getLine(e.row);if(e.column==t.length){var n=t.search(/\s+$/);0<n&&(e.column=n)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var n=this.doc.getLength()-1,e=this.doc.getLine(n).length;this.moveCursorTo(n,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var a=this.lead.row,e=this.lead.column,t=this.doc.getLine(a),n=t.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(a,e,1);return o?void this.moveCursorTo(o.end.row,o.end.column):(this.session.nonTokenRe.exec(n)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,n=t.substring(e)),e>=t.length?(this.moveCursorTo(a,t.length),this.moveCursorRight(),void(a<this.doc.getLength()-1&&this.moveCursorWordRight())):(this.session.tokenRe.exec(n)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(a,e)))},this.moveCursorLongWordLeft=function(){var a=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(a,t,-1))return void this.moveCursorTo(n.start.row,n.start.column);var e=this.session.getFoldStringAt(a,t,-1);null==e&&(e=this.doc.getLine(a).substring(0,t));var r=l.stringReverse(e);return(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(r)&&(t-=this.session.nonTokenRe.lastIndex,r=r.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=t)?(this.moveCursorTo(a,0),this.moveCursorLeft(),void(0<a&&this.moveCursorWordLeft())):void(this.session.tokenRe.exec(r)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(a,t))},this.$shortWordEndIndex=function(a){var e=0,n=/\s/,o=this.session.tokenRe,r;if(o.lastIndex=0,this.session.tokenRe.exec(a))e=this.session.tokenRe.lastIndex;else{for(;(r=a[e])&&n.test(r);)e++;if(1>e)for(o.lastIndex=0;(r=a[e])&&!o.test(r);)if(o.lastIndex=0,e++,n.test(r)){if(2<e){e--;break}for(;(r=a[e])&&n.test(r);)e++;if(2<e)break}}return o.lastIndex=0,e},this.moveCursorShortWordRight=function(){var a=this.lead.row,e=this.lead.column,t=this.doc.getLine(a),n=t.substring(e),i=this.session.getFoldAt(a,e,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(e==t.length){var r=this.doc.getLength();do a++,n=this.doc.getLine(a);while(a<r&&/^\s*$/.test(n));/^\s+/.test(n)||(n=''),e=0}var o=this.$shortWordEndIndex(n);this.moveCursorTo(a,e+o)},this.moveCursorShortWordLeft=function(){var a=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(a,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var e=this.session.getLine(a).substring(0,t);if(0===t){do a--,e=this.doc.getLine(a);while(0<a&&/^\s*$/.test(e));t=e.length,/\s+$/.test(e)||(e='')}var r=l.stringReverse(e),o=this.$shortWordEndIndex(r);return this.moveCursorTo(a,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(a,e){var t=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===e&&(this.$desiredColumn?t.column=this.$desiredColumn:this.$desiredColumn=t.column);var n=this.session.screenToDocumentPosition(t.row+a,t.column);0!==a&&0===e&&n.row===this.lead.row&&n.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[n.row]&&(0<n.row||0<a)&&n.row++,this.moveCursorTo(n.row,n.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(a,e,t){var n=this.session.getFoldAt(a,e,1);n&&(a=n.start.row,e=n.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(a,e),this.$keepDesiredColumnOnChange=!1,t||(this.$desiredColumn=null)},this.moveCursorToScreen=function(a,e,t){var n=this.session.screenToDocumentPosition(a,e);this.moveCursorTo(n.row,n.column,t)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(n){var e=this.getRange();return n?(n.start.column=e.start.column,n.start.row=e.start.row,n.end.column=e.end.column,n.end.row=e.end.row):n=e,n.cursor=this.isBackwards()?n.start:n.end,n.desiredColumn=this.$desiredColumn,n},this.getRangeOfMovements=function(a){var e=this.getCursor();try{a(this);var t=this.getCursor();return o.fromPoints(e,t)}catch(t){return o.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map(function(n){var e=n.clone();return e.isBackwards=n.cursor==n.start,e});else{var t=this.getRange();t.isBackwards=this.isBackwards()}return t},this.fromJSON=function(a){if(void 0==a.start){if(this.rangeList){this.toSingleRange(a[0]);for(var e=a.length,t;e--;)t=o.fromPoints(a[e].start,a[e].end),a[e].isBackwards&&(t.cursor=t.start),this.addRange(t,!0);return}a=a[0]}this.rangeList&&this.toSingleRange(a),this.setSelectionRange(a,a.isBackwards)},this.isEqual=function(n){if((n.length||this.rangeCount)&&n.length!=this.rangeCount)return!1;if(!n.length||!this.ranges)return this.getRange().isEqual(n);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(n[e]))return!1;return!0}}).call(i.prototype),e.Selection=i}),ace.define('ace/tokenizer',['require','exports','module','ace/config'],function(n,e){'use strict';var t=n('./config'),_=2e3,a=function(d){for(var e in this.states=d,this.regExps={},this.matchMappings={},this.states){for(var t=this.states[e],n=[],i=0,r=this.matchMappings[e]={defaultToken:'text'},o='g',s=[],a=0,l;a<t.length;a++)if(l=t[a],l.defaultToken&&(r.defaultToken=l.defaultToken),l.caseInsensitive&&(o='gi'),null!=l.regex){l.regex instanceof RegExp&&(l.regex=l.regex.toString().slice(1,-1));var p=l.regex,u=new RegExp('(?:('+p+')|(.))').exec('a').length-2;Array.isArray(l.token)?1==l.token.length||1==u?l.token=l.token[0]:u-1==l.token.length?(l.tokenArray=l.token,l.token=null,l.onMatch=this.$arrayTokens):(this.reportError('number of classes and regexp groups doesn\'t match',{rule:l,groupCount:u-1}),l.token=l.token[0]):'function'!=typeof l.token||l.onMatch||(l.onMatch=1<u?this.$applyToken:l.token),1<u&&(/\\\d/.test(l.regex)?p=l.regex.replace(/\\([0-9]+)/g,function(n,e){return'\\'+(parseInt(e,10)+i+1)}):(u=1,p=this.removeCapturingGroups(l.regex)),l.splitRegex||'string'==typeof l.token||s.push(l)),r[i]=a,i+=u,n.push(p),l.onMatch||(l.onMatch=null)}n.length||(r[0]=0,n.push('$')),s.forEach(function(t){t.splitRegex=this.createSplitterRegexp(t.regex,o)},this),this.regExps[e]=new RegExp('('+n.join(')|(')+')|($)',o)}};(function(){this.$setMaxTokenCount=function(t){_=0|t},this.$applyToken=function(a){var s=this.splitRegex.exec(a).slice(1),t=this.token.apply(this,s);if('string'==typeof t)return[{type:t,value:a}];for(var l=[],i=0,r=t.length;i<r;i++)s[i]&&(l[l.length]={type:t[i],value:s[i]});return l},this.$arrayTokens=function(a){if(!a)return[];var s=this.splitRegex.exec(a);if(!s)return'text';for(var l=[],n=this.tokenArray,i=0,r=n.length;i<r;i++)s[i+1]&&(l[l.length]={type:n[i],value:s[i+1]});return l},this.removeCapturingGroups=function(t){return t.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(n,e){return e?'(?:':n})},this.createSplitterRegexp=function(a,e){if(-1!=a.indexOf('(?=')){var d=0,n=!1,i={};a.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(r,e,t,o,s,a){return n?n=']'!=s:s?n=!0:o?(d==i.stack&&(i.end=a+1,i.stack=-1),d--):t&&(d++,1!=t.length&&(i.stack=d,i.start=a)),r}),null!=i.end&&/^\)*$/.test(a.substr(i.end))&&(a=a.substring(0,i.start)+a.substr(i.end))}return'^'!=a.charAt(0)&&(a='^'+a),'$'!=a.charAt(a.length-1)&&(a+='$'),new RegExp(a,(e||'').replace('g',''))},this.getLineTokens=function(r,y){if(y&&'string'!=typeof y){var A=y.slice(0);y=A[0],'#tmp'===y&&(A.shift(),y=A.shift())}else var A=[];var n=y||'start',i=this.states[n];i||(n='start',i=this.states[n]);var o=this.matchMappings[n],s=this.regExps[n];s.lastIndex=0;for(var a=[],b=0,u=0,h={type:null,value:''},d;d=s.exec(r);){var l=o.defaultToken,x=null,p=d[0],v=s.lastIndex;if(v-p.length>b){var g=r.substring(b,v-p.length);h.type==l?h.value+=g:(h.type&&a.push(h),h={type:l,value:g})}for(var S=0;S<d.length-2;S++)if(void 0!==d[S+1]){x=i[o[S]],l=x.onMatch?x.onMatch(p,n,A,r):x.token,x.next&&(n='string'==typeof x.next?x.next:x.next(n,A),i=this.states[n],i||(this.reportError('state doesn\'t exist',n),n='start',i=this.states[n]),o=this.matchMappings[n],b=v,s=this.regExps[n],s.lastIndex=v),x.consumeLineEnd&&(b=v);break}if(p)if('string'==typeof l)x&&!1===x.merge||h.type!==l?(h.type&&a.push(h),h={type:l,value:p}):h.value+=p;else if(l){h.type&&a.push(h),h={type:null,value:''};for(var S=0;S<l.length;S++)a.push(l[S])}if(b==r.length)break;if(b=v,u++>_){for(u>2*r.length&&this.reportError('infinite loop with in ace tokenizer',{startState:y,line:r});b<r.length;)h.type&&a.push(h),h={value:r.substring(b,b+=2e3),type:'overflow'};n='start',A=[];break}}return h.type&&a.push(h),1<A.length&&A[0]!==n&&A.unshift('#tmp',n),{tokens:a,state:A.length?A:n}},this.reportError=t.reportError}).call(a.prototype),e.Tokenizer=a}),ace.define('ace/mode/text_highlight_rules',['require','exports','module','ace/lib/lang'],function(n,e){'use strict';var t=n('../lib/lang'),a=function(){this.$rules={start:[{token:'empty_line',regex:'^$'},{defaultToken:'text'}]}};(function(){this.addRules=function(a,e){if(e)for(var t in a){for(var n=a[t],i=0,r;i<n.length;i++)r=n[i],(r.next||r.onMatch)&&('string'==typeof r.next&&0!==r.next.indexOf(e)&&(r.next=e+r.next),r.nextState&&0!==r.nextState.indexOf(e)&&(r.nextState=e+r.nextState));this.$rules[e+t]=n}else for(var t in a)this.$rules[t]=a[t]},this.getRules=function(){return this.$rules},this.embedRules=function(i,d,p,n,r){var o='function'==typeof i?new i().getRules():i;if(n)for(var s=0;s<n.length;s++)n[s]=d+n[s];else for(var a in n=[],o)n.push(d+a);if(this.addRules(o,d),p)for(var l=Array.prototype[r?'push':'unshift'],s=0;s<n.length;s++)l.apply(this.$rules[n[s]],t.deepCopy(p));this.$embeds||(this.$embeds=[]),this.$embeds.push(d)},this.getEmbeds=function(){return this.$embeds};var o=function(n,e){return('start'!=n||e.length)&&e.unshift(this.nextState,n),this.nextState},e=function(n,e){return e.shift(),e.shift()||'start'};this.normalizeRules=function(){function n(r){var g=i[r];g.processed=!0;for(var s=0;s<g.length;s++){var a=g[s],f=null;Array.isArray(a)&&(f=a,a={}),!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+'.end',regex:a.end||a.start,next:'pop'}),a.token+='.start',a.push=!0);var c=a.next||a.push;if(c&&Array.isArray(c)){var u=a.stateName;u||(u=a.token,'string'!=typeof u&&(u=u[0]||''),i[u]&&(u+=t++)),i[u]=c,a.next=u,n(u)}else'pop'==c&&(a.next=e);if(a.push&&(a.nextState=a.next||a.push,a.next=o,delete a.push),a.rules)for(var E in a.rules)i[E]?i[E].push&&i[E].push.apply(i[E],a.rules[E]):i[E]=a.rules[E];var d='string'==typeof a?a:a.include;if(d&&(f=Array.isArray(d)?d.map(function(t){return i[t]}):i[d]),f){var m=[s,1].concat(f);a.noEscape&&(m=m.filter(function(t){return!t.next})),g.splice.apply(g,m),s--}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||'text',a.caseInsensitive),delete a.defaultToken)}}var t=0,i=this.$rules;Object.keys(i).forEach(n,this)},this.createKeywordMapper=function(l,a,e,n){var i=Object.create(null);return Object.keys(l).forEach(function(r){var t=l[r];e&&(t=t.toLowerCase());for(var o=t.split(n||'|'),s=o.length;s--;)i[o[s]]=r}),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),l=null,e?function(t){return i[t.toLowerCase()]||a}:function(t){return i[t]||a}},this.getKeywords=function(){return this.$keywords}}).call(a.prototype),e.TextHighlightRules=a}),ace.define('ace/mode/behaviour',['require','exports','module'],function(n,e){'use strict';var t=function(){this.$behaviours={}};(function(){this.add=function(a,e,t){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[a]:this.$behaviours[a]={};}this.$behaviours[a][e]=t},this.addBehaviours=function(a){for(var e in a)for(var t in a[e])this.add(e,t,a[e][t])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(a,r){if('function'==typeof a)var t=new a().getBehaviours(r);else var t=a.getBehaviours(r);this.addBehaviours(t)},this.getBehaviours=function(a){if(a){for(var e={},t=0;t<a.length;t++)this.$behaviours[a[t]]&&(e[a[t]]=this.$behaviours[a[t]]);return e}return this.$behaviours}}).call(t.prototype),e.Behaviour=t}),ace.define('ace/token_iterator',['require','exports','module'],function(n,e){'use strict';var t=function(a,e,t){this.$session=a,this.$row=e,this.$rowTokens=a.getTokens(e);var n=a.getTokenAt(e,t);this.$tokenIndex=n?n.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;0>this.$tokenIndex;){if(this.$row-=1,0>this.$row)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var t;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var a=this.$rowTokens,e=this.$tokenIndex,t=a[e].start;if(void 0!==t)return t;for(t=0;0<e;)e-=1,t+=a[e].value.length;return t},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}}}).call(t.prototype),e.TokenIterator=t}),ace.define('ace/mode/behaviour/cstyle',['require','exports','module','ace/lib/oop','ace/mode/behaviour','ace/token_iterator','ace/lib/lang'],function(n,e){'use strict';var t=n('../../lib/oop'),r=n('../behaviour').Behaviour,o=n('../../token_iterator').TokenIterator,s=n('../../lib/lang'),a=['text','paren.rparen','punctuation.operator'],l=['text','paren.rparen','punctuation.operator','comment'],c={},y={'"':'"',"'":'\''},x=function(n){var e=-1;return(n.multiSelect&&(e=n.selection.index,c.rangeCount!=n.multiSelect.rangeCount&&(c={rangeCount:n.multiSelect.rangeCount})),c[e])?p=c[e]:void(p=c[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:'',maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:'',maybeInsertedLineEnd:''})},d=function(a,e,t,n){var o=a.end.row-a.start.row;return{text:t+e+n,selection:[0,a.start.column+1,o,a.end.column+(o?0:1)]}},m=function(t){this.add('braces','insertion',function(e,a,n,r,o){var i=n.getCursorPosition(),l=r.doc.getLine(i.row);if('{'==o){x(n);var c=n.getSelectionRange(),u=r.doc.getTextRange(c);if(''!==u&&'{'!==u&&n.getWrapBehavioursEnabled())return d(c,u,'{','}');if(m.isSaneInsertion(n,r))return /[\]\}\)]/.test(l[i.column])||n.inMultiSelectMode||t&&t.braces?(m.recordAutoInsert(n,r,'}'),{text:'{}',selection:[1,1]}):(m.recordMaybeInsert(n,r,'{'),{text:'{',selection:[1,1]})}else if('}'==o){x(n);var h=l.substring(i.column,i.column+1);if('}'==h){var f=r.$findOpeningBracket('}',{column:i.column+1,row:i.row});if(null!==f&&m.isAutoInsertedClosing(i,l,o))return m.popAutoInsertedClosing(),{text:'',selection:[1,1]}}}else{if('\n'==o||'\r\n'==o){x(n);var g='';m.isMaybeInsertedClosing(i,l)&&(g=s.stringRepeat('}',p.maybeInsertedBrackets),m.clearMaybeInsertedClosing());var h=l.substring(i.column,i.column+1);if('}'===h){var _=r.findMatchingBracket({row:i.row,column:i.column+1},'}');if(!_)return null;var y=this.$getIndent(r.getLine(_.row))}else{if(!g)return void m.clearMaybeInsertedClosing();var y=this.$getIndent(l)}var A=y+r.getTabString();return{text:'\n'+A+'\n'+y+g,selection:[1,A.length,1,A.length]}}m.clearMaybeInsertedClosing()}}),this.add('braces','deletion',function(a,e,t,n,r){var o=n.doc.getTextRange(r);if(!r.isMultiLine()&&'{'==o){if(x(t),'}'==n.doc.getLine(r.start.row).substring(r.end.column,r.end.column+1))return r.end.column++,r;p.maybeInsertedBrackets--}}),this.add('parens','insertion',function(p,e,t,n,i){if('('==i){x(t);var r=t.getSelectionRange(),o=n.doc.getTextRange(r);if(''!==o&&t.getWrapBehavioursEnabled())return d(r,o,'(',')');if(m.isSaneInsertion(t,n))return m.recordAutoInsert(t,n,')'),{text:'()',selection:[1,1]}}else if(')'==i){x(t);var s=t.getCursorPosition(),a=n.doc.getLine(s.row),l=a.substring(s.column,s.column+1);if(')'==l){var c=n.$findOpeningBracket(')',{column:s.column+1,row:s.row});if(null!==c&&m.isAutoInsertedClosing(s,a,i))return m.popAutoInsertedClosing(),{text:'',selection:[1,1]}}}}),this.add('parens','deletion',function(a,e,t,n,i){var r=n.doc.getTextRange(i);if(!i.isMultiLine()&&'('==r&&(x(t),')'==n.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i}),this.add('brackets','insertion',function(p,e,t,n,i){if('['==i){x(t);var r=t.getSelectionRange(),o=n.doc.getTextRange(r);if(''!==o&&t.getWrapBehavioursEnabled())return d(r,o,'[',']');if(m.isSaneInsertion(t,n))return m.recordAutoInsert(t,n,']'),{text:'[]',selection:[1,1]}}else if(']'==i){x(t);var s=t.getCursorPosition(),a=n.doc.getLine(s.row),l=a.substring(s.column,s.column+1);if(']'==l){var c=n.$findOpeningBracket(']',{column:s.column+1,row:s.row});if(null!==c&&m.isAutoInsertedClosing(s,a,i))return m.popAutoInsertedClosing(),{text:'',selection:[1,1]}}}}),this.add('brackets','deletion',function(a,e,t,n,i){var r=n.doc.getTextRange(i);if(!i.isMultiLine()&&'['==r&&(x(t),']'==n.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i}),this.add('string_dquotes','insertion',function(m,e,t,n,i){var r=n.$mode.$quotes||y;if(1==i.length&&r[i]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(i))return;x(t);var o=i,s=t.getSelectionRange(),a=n.doc.getTextRange(s);if(!(''===a||1==a.length&&r[a])&&t.getWrapBehavioursEnabled())return d(s,a,o,o);if(!a){var h=t.getCursorPosition(),c=n.doc.getLine(h.row),u=c.substring(h.column-1,h.column),p=c.substring(h.column,h.column+1),f=n.getTokenAt(h.row,h.column),g=n.getTokenAt(h.row,h.column+1);if('\\'==u&&f&&/escape/.test(f.type))return null;var S=f&&/string|escape/.test(f.type),A=!g||/string|escape/.test(g.type),T;if(p==o)(T=S!==A)&&/string\.end/.test(g.type)&&(T=!1);else{if(S&&!A)return null;if(S&&A)return null;var E=n.$mode.tokenRe;E.lastIndex=0;var _=E.test(u);E.lastIndex=0;var R=E.test(u);if(_||R)return null;if(p&&!/[\s;,.})\]\\]/.test(p))return null;T=!0}return{text:T?o+o:'',selection:[1,1]}}}}),this.add('string_dquotes','deletion',function(a,e,t,n,i){var r=n.doc.getTextRange(i);if(!i.isMultiLine()&&('"'==r||'\''==r)&&(x(t),n.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)==r))return i.end.column++,i})},p;m.isSaneInsertion=function(s,e){var t=s.getCursorPosition(),n=new o(e,t.row,t.column);if(!this.$matchTokenType(n.getCurrentToken()||'text',a)){var i=new o(e,t.row,t.column+1);if(!this.$matchTokenType(i.getCurrentToken()||'text',a))return!1}return n.stepForward(),n.getCurrentTokenRow()!==t.row||this.$matchTokenType(n.getCurrentToken()||'text',l)},m.$matchTokenType=function(n,e){return-1<e.indexOf(n.type||n)},m.recordAutoInsert=function(a,e,t){var n=a.getCursorPosition(),r=e.doc.getLine(n.row);this.isAutoInsertedClosing(n,r,p.autoInsertedLineEnd[0])||(p.autoInsertedBrackets=0),p.autoInsertedRow=n.row,p.autoInsertedLineEnd=t+r.substr(n.column),p.autoInsertedBrackets++},m.recordMaybeInsert=function(a,e,t){var n=a.getCursorPosition(),r=e.doc.getLine(n.row);this.isMaybeInsertedClosing(n,r)||(p.maybeInsertedBrackets=0),p.maybeInsertedRow=n.row,p.maybeInsertedLineStart=r.substr(0,n.column)+t,p.maybeInsertedLineEnd=r.substr(n.column),p.maybeInsertedBrackets++},m.isAutoInsertedClosing=function(a,e,t){return 0<p.autoInsertedBrackets&&a.row===p.autoInsertedRow&&t===p.autoInsertedLineEnd[0]&&e.substr(a.column)===p.autoInsertedLineEnd},m.isMaybeInsertedClosing=function(n,e){return 0<p.maybeInsertedBrackets&&n.row===p.maybeInsertedRow&&e.substr(n.column)===p.maybeInsertedLineEnd&&e.substr(0,n.column)==p.maybeInsertedLineStart},m.popAutoInsertedClosing=function(){p.autoInsertedLineEnd=p.autoInsertedLineEnd.substr(1),p.autoInsertedBrackets--},m.clearMaybeInsertedClosing=function(){p&&(p.maybeInsertedBrackets=0,p.maybeInsertedRow=-1)},t.inherits(m,r),e.CstyleBehaviour=m}),ace.define('ace/unicode',['require','exports','module'],function(n,a){'use strict';a.packages={},function(t){var e=/\w{4}/g;for(var n in t)a.packages[n]=t[n].replace(e,'\\u$&')}({L:'0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC',Ll:'0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A',Lu:'0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A',Lt:'01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC',Lm:'02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F',Lo:'01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC',M:'0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26',Mn:'0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26',Mc:'0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC',Me:'0488048906DE20DD-20E020E2-20E4A670-A672',N:'0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19',Nd:'0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19',Nl:'16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF',No:'00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835',P:'0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65',Pd:'002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D',Ps:'0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62',Pe:'0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63',Pi:'00AB2018201B201C201F20392E022E042E092E0C2E1C2E20',Pf:'00BB2019201D203A2E032E052E0A2E0D2E1D2E21',Pc:'005F203F20402054FE33FE34FE4D-FE4FFF3F',Po:'0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65',S:'0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD',Sm:'002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC',Sc:'002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6',Sk:'005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3',So:'00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD',Z:'002000A01680180E2000-200A20282029202F205F3000',Zs:'002000A01680180E2000-200A202F205F3000',Zl:'2028',Zp:'2029',C:'0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF',Cc:'0000-001F007F-009F',Cf:'00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB',Co:'E000-F8FF',Cs:'D800-DFFF',Cn:'03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF'})}),ace.define('ace/mode/text',['require','exports','module','ace/tokenizer','ace/mode/text_highlight_rules','ace/mode/behaviour/cstyle','ace/unicode','ace/lib/lang','ace/token_iterator','ace/range'],function(n,e){'use strict';var t=n('../tokenizer').Tokenizer,i=n('./text_highlight_rules').TextHighlightRules,r=n('./behaviour/cstyle').CstyleBehaviour,o=n('../unicode'),f=n('../lib/lang'),E=n('../token_iterator').TokenIterator,s=n('../range').Range,a=function(){this.HighlightRules=i};(function(){this.$defaultBehaviour=new r,this.tokenRe=new RegExp('^['+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+'\\$_]+','g'),this.nonTokenRe=new RegExp('^(?:[^'+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+'\\$_]|\\s])+','g'),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new t(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart='',this.blockComment='',this.toggleCommentLines=function(a,e,y,n){function r(a){for(var e=y;e<=n;e++)a(b.getLine(e),e)}var b=e.doc,o=!0,i=!0,s=1/0,l=e.getTabSize(),t=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var u=this.lineCommentStart.map(f.escapeRegExp).join('|'),d=this.lineCommentStart[0];else var u=f.escapeRegExp(this.lineCommentStart),d=this.lineCommentStart;u=new RegExp('^(\\s*)(?:'+u+') ?'),t=e.getUseSoftTabs();var m=function(a,e){var t=a.match(u);if(t){var n=t[1].length,o=t[0].length;h(a,n,o)||' '!=t[0][o-1]||o--,b.removeInLine(e,n,o)}},p=function(n,e){o&&!/\S/.test(n)||(h(n,s,s)?b.insertInLine({row:e,column:s},d+' '):b.insertInLine({row:e,column:s},d))},g=function(t){return u.test(t)},h=function(a,e,t){for(var n=0;e--&&' '==a.charAt(e);)n++;if(0!=n%l)return!1;for(var n=0;' '==a.charAt(t++);)n++;return 2<l?n%l!=l-1:0==n%l}}else{if(!this.blockComment)return!1;var d=this.blockComment.start,E=this.blockComment.end,u=new RegExp('^(\\s*)(?:'+f.escapeRegExp(d)+')'),C=new RegExp('(?:'+f.escapeRegExp(E)+')\\s*$'),p=function(n,e){g(n,e)||o&&!/\S/.test(n)||(b.insertInLine({row:e,column:n.length},E),b.insertInLine({row:e,column:s},d))},m=function(a,e){var t;(t=a.match(C))&&b.removeInLine(e,a.length-t[0].length,a.length),(t=a.match(u))&&b.removeInLine(e,t[1].length,t[0].length)},g=function(t,a){if(u.test(t))return!0;for(var n=e.getTokens(a),o=0;o<n.length;o++)if('comment'===n[o].type)return!0}}var A=1/0;r(function(a,e){var t=a.search(/\S/);-1===t?A>a.length&&(A=a.length):(t<s&&(s=t),i&&!g(a,e)&&(i=!1))}),s==1/0&&(s=A,o=!1,i=!1),t&&0!=s%l&&(s=S(s/l)*l),r(i?m:p)},this.toggleBlockComment=function(l,e,t,n){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var r=new E(e,n.row,n.column),a=r.getCurrentToken(),c=(e.selection,e.selection.toOrientedRange()),u,o;if(a&&/comment/.test(a.type)){for(var h,d,m;a&&/comment/.test(a.type);){if(m=a.value.indexOf(i.start),-1!=m){var p=r.getCurrentTokenRow(),f=r.getCurrentTokenColumn()+m;h=new s(p,f,p,f+i.start.length);break}a=r.stepBackward()}for(var r=new E(e,n.row,n.column),a=r.getCurrentToken(),m;a&&/comment/.test(a.type);){if(m=a.value.indexOf(i.end),-1!=m){var p=r.getCurrentTokenRow(),f=r.getCurrentTokenColumn()+m;d=new s(p,f,p,f+i.end.length);break}a=r.stepForward()}d&&e.remove(d),h&&(e.remove(h),u=h.start.row,o=-i.start.length)}else o=i.start.length,u=t.start.row,e.insert(t.end,i.end),e.insert(t.start,i.start);c.start.row==u&&(c.start.column+=o),c.end.row==u&&(c.end.column+=o),e.selection.fromOrientedRange(c)}},this.getNextLineIndent=function(n,e){return this.$getIndent(e)},this.checkOutdent=function(){return!1},this.autoOutdent=function(){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(){return null},this.createModeDelegates=function(a){for(var o in this.$embeds=[],this.$modes={},a)a[o]&&(this.$embeds.push(o),this.$modes[o]=new a[o]);for(var t=['toggleBlockComment','toggleCommentLines','getNextLineIndent','checkOutdent','autoOutdent','transformAction','getCompletions'],o=0;o<t.length;o++)!function(n){var e=t[o],a=n[e];n[t[o]]=function(){return this.$delegator(e,arguments,a)}}(this)},this.$delegator=function(l,e,t){var n=e[0];'string'!=typeof n&&(n=n[0]);for(var d=0;d<this.$embeds.length;d++)if(this.$modes[this.$embeds[d]]){var r=n.split(this.$embeds[d]);if(!r[0]&&r[1]){e[0]=r[1];var o=this.$modes[this.$embeds[d]];return o[l].apply(o,e)}}var s=t.apply(this,e);return t?s:void 0},this.transformAction=function(n,e){if(this.$behaviour){var t=this.$behaviour.getBehaviours();for(var r in t)if(t[r][e]){var o=t[r][e].apply(this,arguments);if(o)return o}}},this.getKeywords=function(d){if(!this.completionKeywords){var e=this.$tokenizer.rules,t=[];for(var n in e)for(var i=e[n],r=0,o=i.length;r<o;r++)if('string'==typeof i[r].token)/keyword|support|storage/.test(i[r].token)&&t.push(i[r].regex);else if('object'==typeof i[r].token)for(var s=0,a=i[r].token.length;s<a;s++)if(/keyword|support|storage/.test(i[r].token[s])){var n=i[r].regex.match(/\(.+?\)/g)[s];t.push(n.substr(1,n.length-2))}this.completionKeywords=t}return d?t.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(){return(this.$keywordList||this.$createKeywordList()).map(function(t){return{name:t,value:t,score:0,meta:'keyword'}})},this.$id='ace/mode/text'}).call(a.prototype),e.Mode=a}),ace.define('ace/apply_delta',['require','exports','module'],function(n,e){'use strict';e.applyDelta=function(n,e){var t=e.start.row,i=e.start.column,r=n[t]||'';switch(e.action){case'insert':if(1===e.lines.length)n[t]=r.substring(0,i)+e.lines[0]+r.substring(i);else{var o=[t,1].concat(e.lines);n.splice.apply(n,o),n[t]=r.substring(0,i)+n[t],n[t+e.lines.length-1]+=r.substring(i)}break;case'remove':var s=e.end.column,a=e.end.row;t===a?n[t]=r.substring(0,i)+r.substring(s):n.splice(t,a-t+1,r.substring(0,i)+n[a].substring(s));}}}),ace.define('ace/anchor',['require','exports','module','ace/lib/oop','ace/lib/event_emitter'],function(n,e){'use strict';var a=n('./lib/oop'),i=n('./lib/event_emitter').EventEmitter,t=e.Anchor=function(a,e,t){this.$onChange=this.onChange.bind(this),this.attach(a),void 0===t?this.setPosition(e.row,e.column):this.setPosition(e,t)};(function(){function e(a,r,t){var n=t?a.column<=r.column:a.column<r.column;return a.row<r.row||a.row==r.row&&n}function t(d,c,n){var p='insert'==d.action,r=(p?1:-1)*(d.end.row-d.start.row),o=(p?1:-1)*(d.end.column-d.start.column),s=d.start,a=p?s:d.end;return e(c,s,n)?{row:c.row,column:c.column}:e(a,c,!n)?{row:c.row+r,column:c.column+(c.row==a.row?o:0)}:{row:s.row,column:s.column}}a.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(a){if(!(a.start.row==a.end.row&&a.start.row!=this.row||a.start.row>this.row)){var e=t(a,{row:this.row,column:this.column},this.$insertRight);this.setPosition(e.row,e.column,!0)}},this.setPosition=function(a,o,s){var n;if(n=s?{row:a,column:o}:this.$clipPositionToDocument(a,o),this.row!=n.row||this.column!=n.column){var l={row:this.row,column:this.column};this.row=n.row,this.column=n.column,this._signal('change',{old:l,value:n})}},this.detach=function(){this.document.removeEventListener('change',this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on('change',this.$onChange)},this.$clipPositionToDocument=function(a,e){var t={};return a>=this.document.getLength()?(t.row=T(0,this.document.getLength()-1),t.column=this.document.getLine(t.row).length):0>a?(t.row=0,t.column=0):(t.row=a,t.column=x(this.document.getLine(t.row).length,T(0,e))),0>e&&(t.column=0),t}}).call(t.prototype)}),ace.define('ace/document',['require','exports','module','ace/lib/oop','ace/apply_delta','ace/lib/event_emitter','ace/range','ace/anchor'],function(n,e){'use strict';var t=n('./lib/oop'),i=n('./apply_delta').applyDelta,r=n('./lib/event_emitter').EventEmitter,d=n('./range').Range,o=n('./anchor').Anchor,a=function(t){this.$lines=[''],0===t.length?this.$lines=['']:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){t.implement(this,r),this.setValue=function(n){var e=this.getLength()-1;this.remove(new d(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},n)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(n,e){return new o(this,n,e)},this.$split=0==='aaa'.split(/a/).length?function(t){return t.replace(/\r\n|\r/g,'\n').split('\n')}:function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(n){var e=n.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:'\n',this._signal('changeNewLineMode')},this.getNewLineCharacter=function(){switch(this.$newLineMode){case'windows':return'\r\n';case'unix':return'\n';default:return this.$autoNewLine||'\n';}},this.$autoNewLine='',this.$newLineMode='auto',this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal('changeNewLineMode'))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return'\r\n'==t||'\r'==t||'\n'==t},this.getLine=function(t){return this.$lines[t]||''},this.getLines=function(n,e){return this.$lines.slice(n,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(a){var e;if(a.start.row===a.end.row)e=[this.getLine(a.start.row).substring(a.start.column,a.end.column)];else{e=this.getLines(a.start.row,a.end.row),e[0]=(e[0]||'').substring(a.start.column);var t=e.length-1;a.end.row-a.start.row==t&&(e[t]=e[t].substring(0,a.end.column))}return e},this.insertLines=function(n,e){return console.warn('Use of document.insertLines is deprecated. Use the insertFullLines method instead.'),this.insertFullLines(n,e)},this.removeLines=function(n,e){return console.warn('Use of document.removeLines is deprecated. Use the removeFullLines method instead.'),this.removeFullLines(n,e)},this.insertNewLine=function(t){return console.warn('Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead.'),this.insertMergedLines(t,['',''])},this.insert=function(n,e){return 1>=this.getLength()&&this.$detectNewLine(e),this.insertMergedLines(n,this.$split(e))},this.insertInLine=function(a,e){var t=this.clippedPos(a.row,a.column),r=this.pos(a.row,a.column+e.length);return this.applyDelta({start:t,end:r,action:'insert',lines:[e]},!0),this.clonePos(r)},this.clippedPos=function(a,r){var o=this.getLength();void 0===a?a=o:0>a?a=0:a>=o&&(a=o-1,r=void 0);var n=this.getLine(a);return void 0==r&&(r=n.length),r=x(T(r,0),n.length),{row:a,column:r}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(n,a){return{row:n,column:a}},this.$clipPosition=function(n){var e=this.getLength();return n.row>=e?(n.row=T(0,e-1),n.column=this.getLine(e-1).length):(n.row=T(0,n.row),n.column=x(T(n.column,0),this.getLine(n.row).length)),n},this.insertFullLines=function(a,r){a=x(T(a,0),this.getLength());var t=0;a<this.getLength()?(r=r.concat(['']),t=0):(r=[''].concat(r),a--,t=this.$lines[a].length),this.insertMergedLines({row:a,column:t},r)},this.insertMergedLines=function(a,e){var r=this.clippedPos(a.row,a.column),o={row:r.row+e.length-1,column:(1==e.length?r.column:0)+e[e.length-1].length};return this.applyDelta({start:r,end:o,action:'insert',lines:e}),this.clonePos(o)},this.remove=function(a){var e=this.clippedPos(a.start.row,a.start.column),r=this.clippedPos(a.end.row,a.end.column);return this.applyDelta({start:e,end:r,action:'remove',lines:this.getLinesForRange({start:e,end:r})}),this.clonePos(e)},this.removeInLine=function(a,e,t){var n=this.clippedPos(a,e),o=this.clippedPos(a,t);return this.applyDelta({start:n,end:o,action:'remove',lines:this.getLinesForRange({start:n,end:o})},!0),this.clonePos(n)},this.removeFullLines=function(s,e){s=x(T(0,s),this.getLength()-1),e=x(T(0,e),this.getLength()-1);var t=e==this.getLength()-1&&0<s,n=e<this.getLength()-1,i=t?s-1:s,r=t?this.getLine(i).length:0,o=n?e+1:e,a=n?0:this.getLine(o).length,l=new d(i,r,o,a),c=this.$lines.slice(s,e+1);return this.applyDelta({start:l.start,end:l.end,action:'remove',lines:this.getLinesForRange(l)}),c},this.removeNewLine=function(t){t<this.getLength()-1&&0<=t&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:'remove',lines:['','']})},this.replace=function(n,e){return(n instanceof d||(n=d.fromPoints(n.start,n.end)),0===e.length&&n.isEmpty())?n.start:e==this.getTextRange(n)?n.end:(this.remove(n),e?this.insert(n.start,e):n.start)},this.applyDeltas=function(n){for(var e=0;e<n.length;e++)this.applyDelta(n[e])},this.revertDeltas=function(n){for(var e=n.length-1;0<=e;e--)this.revertDelta(n[e])},this.applyDelta=function(a,e){var t='insert'==a.action;(t?1>=a.lines.length&&!a.lines[0]:!d.comparePoints(a.start,a.end))||(t&&2e4<a.lines.length&&this.$splitAndapplyLargeDelta(a,2e4),i(this.$lines,a,e),this._signal('change',a))},this.$splitAndapplyLargeDelta=function(d,e){for(var t=d.lines,n=t.length,i=d.start.row,r=d.start.column,o=0,s=0;;){o=s,s+=e-1;var a=t.slice(o,s);if(s>n){d.lines=a,d.start.row=i+o,d.start.column=r;break}a.push(''),this.applyDelta({start:this.pos(i+o,r),end:this.pos(i+s,r=0),action:d.action,lines:a},!0)}},this.revertDelta=function(t){this.applyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:'insert'==t.action?'remove':'insert',lines:t.lines.slice()})},this.indexToPosition=function(a,e){for(var t=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,i=e||0,s=t.length;i<s;i++)if(0>(a-=t[i].length+n))return{row:i,column:a+t[i].length+n};return{row:s-1,column:t[s-1].length}},this.positionToIndex=function(a,e){for(var t=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,i=0,r=x(a.row,t.length),o=e||0;o<r;++o)i+=t[o].length+n;return i+a.column}}).call(a.prototype),e.Document=a}),ace.define('ace/background_tokenizer',['require','exports','module','ace/lib/oop','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('./lib/oop'),a=n('./lib/event_emitter').EventEmitter,r=function(t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var l=this;this.$worker=function(){if(l.running){for(var n=new Date,e=l.currentLine,t=-1,i=l.doc,r=e;l.lines[e];)e++;var o=i.getLength(),s=0;for(l.running=!1;e<o;){l.$tokenizeRow(e),t=e;do e++;while(l.lines[e]);if(0==++s%5&&20<new Date-n){l.running=setTimeout(l.$worker,20);break}}l.currentLine=e,-1==t&&(t=e),r<=t&&l.fireUpdateEvent(r,t)}}};(function(){t.implement(this,a),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(n,a){this._signal('update',{data:{first:n,last:a}})},this.start=function(t){this.currentLine=x(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(a){var e=a.start.row,t=a.end.row-e;if(0==t)this.lines[e]=null;else if('remove'==a.action)this.lines.splice(e,t+1,null),this.states.splice(e,t+1,null);else{var n=Array(t+1);n.unshift(e,1),this.lines.splice.apply(this.lines,n),this.states.splice.apply(this.states,n)}this.currentLine=x(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||'start'},this.$tokenizeRow=function(a){var e=this.doc.getLine(a),t=this.states[a-1],n=this.tokenizer.getLineTokens(e,t,a);return this.states[a]+''==n.state+''?this.currentLine==a&&(this.currentLine=a+1):(this.states[a]=n.state,this.lines[a+1]=null,this.currentLine>a+1&&(this.currentLine=a+1)),this.lines[a]=n.tokens}}).call(r.prototype),e.BackgroundTokenizer=r}),ace.define('ace/search_highlight',['require','exports','module','ace/lib/lang','ace/lib/oop','ace/range'],function(n,e){'use strict';var a=n('./lib/lang'),t=(n('./lib/oop'),n('./range').Range),r=function(a,e,t){this.setRegexp(a),this.clazz=e,this.type=t||'text'};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+''!=t+''&&(this.regExp=t,this.cache=[])},this.update=function(r,e,i,n){if(this.regExp)for(var o=n.firstRow,s=n.lastRow,d=o,l;d<=s;d++){l=this.cache[d],null==l&&(l=a.getMatchOffsets(i.getLine(d),this.regExp),l.length>this.MAX_RANGES&&(l=l.slice(0,this.MAX_RANGES)),l=l.map(function(n){return new t(d,n.offset,d,n.offset+n.length)}),this.cache[d]=l.length?l:'');for(var c=l.length;c--;)e.drawSingleLineMarker(r,l[c].toScreenRange(i),this.clazz,n)}}}).call(r.prototype),e.SearchHighlight=r}),ace.define('ace/edit_session/fold_line',['require','exports','module','ace/range'],function(n,e){'use strict';function i(r,e){this.foldData=r,Array.isArray(e)?this.folds=e:e=this.folds=[e];var t=e[e.length-1];this.range=new a(e[0].start.row,e[0].start.column,t.end.row,t.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(t){t.setFoldLine(this)},this)}var a=n('../range').Range;(function(){this.shiftRow=function(n){this.start.row+=n,this.end.row+=n,this.folds.forEach(function(e){e.start.row+=n,e.end.row+=n})},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error('Can\'t add a fold to this FoldLine as it has no connection');this.folds.push(t),this.folds.sort(function(n,e){return-n.range.compareEnd(e.start.row,e.start.column)}),0<this.range.compareEnd(t.start.row,t.start.column)?(this.end.row=t.end.row,this.end.column=t.end.column):0>this.range.compareStart(t.end.row,t.end.column)&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error('Trying to add fold to FoldRow that doesn\'t have a matching row');this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(d,e,t){var n=0,s=this.folds,a=!0,l,i,r;null==e&&(e=this.end.row,t=this.end.column);for(var p=0;p<s.length;p++){if(l=s[p],-1==(i=l.range.compareStart(e,t)))return void d(null,e,t,n,a);if(r=d(null,l.start.row,l.start.column,n,a),(r=!r&&d(l.placeholder,l.start.row,l.start.column,n))||0===i)return;a=!l.sameRow,n=l.end.column}d(null,e,t,n,a)},this.getNextFoldTo=function(a,e){for(var t=0,r,o;t<this.folds.length;t++){if(r=this.folds[t],-1==(o=r.range.compareEnd(a,e)))return{fold:r,kind:'after'};if(0===o)return{fold:r,kind:'inside'}}return null},this.addRemoveChars=function(a,e,t){var n=this.getNextFoldTo(a,e),o,i;if(n)if(o=n.fold,'inside'==n.kind&&o.start.column!=e&&o.start.row!=a)window.console&&window.console.log(a,e,o);else if(o.start.row==a){i=this.folds;var r=i.indexOf(o);for(0===r&&(this.start.column+=t),r;r<i.length;r++){if(o=i[r],o.start.column+=t,!o.sameRow)return;o.end.column+=t}this.end.column+=t}},this.split=function(d,e){var t=this.getNextFoldTo(d,e);if(!t||'inside'==t.kind)return null;var p=t.fold,r=this.folds,o=this.foldData,s=r.indexOf(p),a=r[s-1];this.end.row=a.end.row,this.end.column=a.end.column,r=r.splice(s,r.length-s);var l=new i(o,r);return o.splice(o.indexOf(this)+1,0,l),l},this.merge=function(a){for(var e=a.folds,t=0;t<e.length;t++)this.addFold(e[t]);var n=this.foldData;n.splice(n.indexOf(a),1)},this.toString=function(){var n=[this.range.toString()+': ['];return this.folds.forEach(function(e){n.push('  '+e.toString())}),n.push(']'),n.join('\n')},this.idxToPosition=function(a){for(var e=0,t=0,n;t<this.folds.length;t++){if(n=this.folds[t],0>(a-=n.start.column-e))return{row:n.start.row,column:n.start.column+a};if(0>(a-=n.placeholder.length))return n.start;e=n.end.column}return{row:this.end.row,column:this.end.column+a}}}).call(i.prototype),e.FoldLine=i}),ace.define('ace/range_list',['require','exports','module','ace/range'],function(n,e){'use strict';var t=n('./range').Range,d=t.comparePoints,a=function(){this.ranges=[]};(function(){this.comparePoints=d,this.pointIndex=function(r,e,c){for(var n=this.ranges,i=c||0;i<n.length;i++){var p=n[i],s=d(r,p.end);if(!(0<s)){var a=d(r,p.start);return 0===s?e&&0!==a?-i-2:i:0<a||0===a&&!e?i:-i-1}}return-i-1},this.add=function(a){var e=!a.isEmpty(),t=this.pointIndex(a.start,e);0>t&&(t=-t-1);var r=this.pointIndex(a.end,e,t);return 0>r?r=-r-1:r++,this.ranges.splice(t,r-t,a)},this.addList=function(a){for(var e=[],t=a.length;t--;)e.push.apply(e,this.add(a[t]));return e},this.substractPoint=function(n){var e=this.pointIndex(n);if(0<=e)return this.ranges.splice(e,1)},this.merge=function(){var a=[],e=this.ranges;e=e.sort(function(n,e){return d(n.start,e.start)});for(var t=e[0],r=1,o;r<e.length;r++){o=t,t=e[r];var n=d(o.end,t.start);0>n||(0!=n||o.isEmpty()||t.isEmpty())&&(0>d(o.end,t.end)&&(o.end.row=t.end.row,o.end.column=t.end.column),e.splice(r,1),a.push(t),t=o,r--)}return this.ranges=e,a},this.contains=function(n,a){return 0<=this.pointIndex({row:n,column:a})},this.containsPoint=function(t){return 0<=this.pointIndex(t)},this.rangeAtPoint=function(n){var e=this.pointIndex(n);if(0<=e)return this.ranges[e]},this.clipRows=function(a,l){var d=this.ranges;if(d[0].start.row>l||d[d.length-1].start.row<a)return[];var n=this.pointIndex({row:a,column:0});0>n&&(n=-n-1);var c=this.pointIndex({row:l,column:0},n);0>c&&(c=-c-1);for(var p=[],o=n;o<c;o++)p.push(d[o]);return p},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on('change',this.onChange)},this.detach=function(){this.session&&(this.session.removeListener('change',this.onChange),this.session=null)},this.$onChange=function(d){if('insert'==d.action)var e=d.start,t=d.end;else var t=d.start,e=d.end;for(var n=e.row,i=t.row,r=i-n,o=-e.column+t.column,s=this.ranges,a=0,l=s.length,c;a<l;a++)if(c=s[a],!(c.end.row<n)){if(c.start.row>n)break;if(c.start.row==n&&c.start.column>=e.column&&(c.start.column==e.column&&this.$insertRight||(c.start.column+=o,c.start.row+=r)),c.end.row==n&&c.end.column>=e.column){if(c.end.column==e.column&&this.$insertRight)continue;c.end.column==e.column&&0<o&&a<l-1&&c.end.column>c.start.column&&c.end.column==s[a+1].start.column&&(c.end.column-=o),c.end.column+=o,c.end.row+=r}}if(0!=r&&a<l)for(;a<l;a++){var c=s[a];c.start.row+=r,c.end.row+=r}}}).call(a.prototype),e.RangeList=a}),ace.define('ace/edit_session/fold',['require','exports','module','ace/range','ace/range_list','ace/lib/oop'],function(n,e){'use strict';function i(n,e){n.row-=e.row,0==n.row&&(n.column-=e.column)}function r(n,e){i(n.start,e),i(n.end,e)}function o(n,e){0==n.row&&(n.column+=e.column),n.row+=e.row}function s(n,e){o(n.start,e),o(n.end,e)}var t=(n('../range').Range,n('../range_list').RangeList),a=n('../lib/oop'),l=e.Fold=function(n,e){this.foldLine=null,this.placeholder=e,this.range=n,this.start=n.start,this.end=n.end,this.sameRow=n.start.row==n.end.row,this.subFolds=this.ranges=[]};a.inherits(l,t),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(n){this.foldLine=n,this.subFolds.forEach(function(e){e.setFoldLine(n)})},this.clone=function(){var n=this.range.clone(),a=new l(n,this.placeholder);return this.subFolds.forEach(function(t){a.subFolds.push(t.clone())}),a.collapseChildren=this.collapseChildren,a},this.addSubFold=function(l){if(!this.range.isEqual(l)){if(!this.range.containsRange(l))throw new Error('A fold can\'t intersect already existing fold'+l.range+this.range);r(l,this.start);for(var e=l.start.row,t=l.start.column,n=0,i=-1;n<this.subFolds.length&&1==(i=this.subFolds[n].range.compare(e,t));n++);var o=this.subFolds[n];if(0==i)return o.addSubFold(l);for(var e=l.range.end.row,t=l.range.end.column,s=n,i=-1;s<this.subFolds.length&&1==(i=this.subFolds[s].range.compare(e,t));s++);if(this.subFolds[s],0==i)throw new Error('A fold can\'t intersect already existing fold'+l.range+this.range);return this.subFolds.splice(n,s-n,l),l.setFoldLine(this.foldLine),l}},this.restoreRange=function(t){return s(t,this.start)}}.call(l.prototype)}),ace.define('ace/edit_session/folding',['require','exports','module','ace/range','ace/edit_session/fold_line','ace/edit_session/fold','ace/token_iterator'],function(n,e){'use strict';var d=n('../range').Range,E=n('./fold_line').FoldLine,o=n('./fold').Fold,r=n('../token_iterator').TokenIterator;e.Folding=function i(){this.getFoldAt=function(a,e,t){var n=this.getFoldLine(a);if(!n)return null;for(var l=n.folds,r=0,o;r<l.length;r++)if(o=l[r],o.range.contains(a,e)){if(1==t&&o.range.isEnd(a,e))continue;if(-1==t&&o.range.isStart(a,e))continue;return o}},this.getFoldsInRange=function(d){var e=d.start,t=d.end,n=this.$foldData,i=[];e.column+=1,t.column-=1;for(var r=0,o;r<n.length;r++)if(o=n[r].range.compareRange(d),2!=o){if(-2==o)break;for(var s=n[r].folds,a=0,l;a<s.length&&(l=s[a],-2!=(o=l.range.compareRange(d)));a++)if(2!=o){if(42==o)break;i.push(l)}}return e.column-=1,t.column+=1,i},this.getFoldsInRangeList=function(n){if(Array.isArray(n)){var a=[];n.forEach(function(t){a=a.concat(this.getFoldsInRange(t))},this)}else var a=this.getFoldsInRange(n);return a},this.getAllFolds=function(){for(var a=[],e=this.$foldData,t=0;t<e.length;t++)for(var n=0;n<e[t].folds.length;n++)a.push(e[t].folds[n]);return a},this.getFoldStringAt=function(d,e,t,n){if(!(n=n||this.getFoldLine(d)))return null;for(var i={end:{column:0}},s=0,a,r;s<n.folds.length;s++){r=n.folds[s];var o=r.range.compareEnd(d,e);if(-1==o){a=this.getLine(r.start.row).substring(i.end.column,r.start.column);break}if(0===o)return null;i=r}return a||(a=this.getLine(r.start.row).substring(i.end.column)),-1==t?a.substring(0,e-i.end.column):1==t?a.substring(e-i.end.column):a},this.getFoldLine=function(a,e){var t=this.$foldData,n=0;for(e&&(n=t.indexOf(e)),-1==n&&(n=0),n;n<t.length;n++){var o=t[n];if(o.start.row<=a&&o.end.row>=a)return o;if(o.end.row>a)return null}return null},this.getNextFoldLine=function(a,e){var t=this.$foldData,n=0;for(e&&(n=t.indexOf(e)),-1==n&&(n=0),n;n<t.length;n++){var o=t[n];if(o.end.row>=a)return o}return null},this.getFoldedRowCount=function(l,e){for(var t=this.$foldData,n=e-l+1,i=0;i<t.length;i++){var r=t[i],o=r.end.row,s=r.start.row;if(o>=e){s<e&&(s>=l?n-=e-s:n=0);break}o>=l&&(n-=s>=l?o-s:o-l+1)}return n},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort(function(n,e){return n.start.row-e.start.row}),t},this.addFold=function(s,e){var t=this.$foldData,i=!1,r;s instanceof o?r=s:(r=new o(e,s),r.collapseChildren=e.collapseChildren),this.$clipRangeToDocument(r.range);var _=r.start.row,a=r.start.column,l=r.end.row,c=r.end.column;if(!(_<l||_==l&&a<=c-2))throw new Error('The range has to be at least 2 characters width');var u=this.getFoldAt(_,a,1),h=this.getFoldAt(l,c,-1);if(u&&h==u)return u.addSubFold(r);u&&!u.range.isStart(_,a)&&this.removeFold(u),h&&!h.range.isEnd(l,c)&&this.removeFold(h);var d=this.getFoldsInRange(r.range);0<d.length&&(this.removeFolds(d),d.forEach(function(t){r.addSubFold(t)}));for(var m=0,p;m<t.length;m++){if(p=t[m],l==p.start.row){p.addFold(r),i=!0;break}if(_==p.end.row){if(p.addFold(r),i=!0,!r.sameRow){var f=t[m+1];if(f&&f.start.row==l){p.merge(f);break}}break}if(l<=p.start.row)break}return i||(p=this.$addFoldLine(new E(this.$foldData,r))),this.$useWrapMode?this.$updateWrapData(p.start.row,p.start.row):this.$updateRowLengthCache(p.start.row,p.start.row),this.$modified=!0,this._signal('changeFold',{data:r,action:'add'}),r},this.addFolds=function(t){t.forEach(function(t){this.addFold(t)},this)},this.removeFold=function(a){var l=a.foldLine,t=l.start.row,n=l.end.row,i=this.$foldData,r=l.folds;if(1==r.length)i.splice(i.indexOf(l),1);else if(l.range.isEnd(a.end.row,a.end.column))r.pop(),l.end.row=r[r.length-1].end.row,l.end.column=r[r.length-1].end.column;else if(l.range.isStart(a.start.row,a.start.column))r.shift(),l.start.row=r[0].start.row,l.start.column=r[0].start.column;else if(a.sameRow)r.splice(r.indexOf(a),1);else{var o=l.split(a.start.row,a.start.column);r=o.folds,r.shift(),o.start.row=r[0].start.row,o.start.column=r[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(t,n):this.$updateRowLengthCache(t,n)),this.$modified=!0,this._signal('changeFold',{data:a,action:'remove'})},this.removeFolds=function(a){for(var e=[],t=0;t<a.length;t++)e.push(a[t]);e.forEach(function(t){this.removeFold(t)},this),this.$modified=!0},this.expandFold=function(n){this.removeFold(n),n.subFolds.forEach(function(e){n.restoreRange(e),this.addFold(e)},this),0<n.collapseChildren&&this.foldAll(n.start.row+1,n.end.row,n.collapseChildren-1),n.subFolds=[]},this.expandFolds=function(t){t.forEach(function(t){this.expandFold(t)},this)},this.unfold=function(a,r){var t,n;if(null==a?(t=new d(0,0,this.getLength(),0),r=!0):t='number'==typeof a?new d(a,0,a,this.getLine(a).length):'row'in a?d.fromPoints(a,a):a,n=this.getFoldsInRangeList(t),r)this.removeFolds(n);else for(var i=n;i.length;)this.expandFolds(i),i=this.getFoldsInRangeList(t);return n.length?n:void 0},this.isRowFolded=function(n,e){return!!this.getFoldLine(n,e)},this.getRowFoldEnd=function(a,e){var t=this.getFoldLine(a,e);return t?t.end.row:a},this.getRowFoldStart=function(a,e){var t=this.getFoldLine(a,e);return t?t.start.row:a},this.getFoldDisplayLine=function(a,e,t,l,i){null==l&&(l=a.start.row),null==i&&(i=0),null==e&&(e=a.end.row),null==t&&(t=this.getLine(e).length);var r=this.doc,o='';return a.walk(function(s,e,t,n){if(!(e<l)){if(e==l){if(t<i)return;n=T(i,n)}o+=null==s?r.getLine(e).substring(n,t):s}},e,t),o},this.getDisplayLine=function(a,e,t,n){var i=this.getFoldLine(a);if(i)return this.getFoldDisplayLine(i,a,e,t,n);var r;return r=this.doc.getLine(a),r.substring(n||0,e||r.length)},this.$cloneFoldData=function(){var a=[];return a=this.$foldData.map(function(e){var t=e.folds.map(function(t){return t.clone()});return new E(a,t)})},this.toggleFold=function(l){var e=this.selection,i=e.getRange(),r,t;if(i.isEmpty()){var n=i.start;if(r=this.getFoldAt(n.row,n.column))return void this.expandFold(r);(t=this.findMatchingBracket(n))?1==i.comparePoint(t)?i.end=t:(i.start=t,i.start.column++,i.end.column--):(t=this.findMatchingBracket({row:n.row,column:n.column+1}))?(1==i.comparePoint(t)?i.end=t:i.start=t,i.start.column++):i=this.getCommentFoldRange(n.row,n.column)||i}else{var o=this.getFoldsInRange(i);if(l&&o.length)return void this.expandFolds(o);1==o.length&&(r=o[0])}if(r||(r=this.getFoldAt(i.start.row,i.start.column)),r&&r.range.toString()==i.toString())return void this.expandFold(r);var s='...';if(!i.isMultiLine()){if(s=this.getTextRange(i),4>s.length)return;s=s.trim().substring(0,2)+'..'}this.addFold(s,i)},this.getCommentFoldRange=function(a,e,t){var n=new r(this,a,e),i=n.getCurrentToken(),o=i.type;if(i&&/^comment|string/.test(o)){o=o.match(/comment|string/)[0],'comment'==o&&(o+='|doc-start');var s=new RegExp(o),l=new d;if(1!=t){do i=n.stepBackward();while(i&&s.test(i.type));n.stepForward()}if(l.start.row=n.getCurrentTokenRow(),l.start.column=n.getCurrentTokenColumn()+2,n=new r(this,a,e),-1!=t){var c=-1;do if(i=n.stepForward(),-1==c){var p=this.getState(n.$row);s.test(p)||(c=n.$row)}else if(n.$row>c)break;while(i&&s.test(i.type));i=n.stepBackward()}else i=n.getCurrentToken();return l.end.row=n.getCurrentTokenRow(),l.end.column=n.getCurrentTokenColumn()+i.value.length-2,l}},this.foldAll=function(a,e,t){void 0==t&&(t=1e5);var n=this.foldWidgets;if(n){e=e||this.getLength(),a=a||0;for(var i=a;i<e;i++)if(null==n[i]&&(n[i]=this.getFoldWidget(i)),'start'==n[i]){var r=this.getFoldWidgetRange(i);if(r&&r.isMultiLine()&&r.end.row<=e&&r.start.row>=a){i=r.end.row;try{var o=this.addFold('...',r);o&&(o.collapseChildren=t)}catch(t){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle='markbegin',this.setFoldStyle=function(n){if(!this.$foldStyles[n])throw new Error('invalid fold style: '+n+'['+Object.keys(this.$foldStyles).join(', ')+']');if(this.$foldStyle!=n){this.$foldStyle=n,'manual'==n&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){if(this.$foldMode!=t){if(this.$foldMode=t,this.off('change',this.$updateFoldWidgets),this.off('tokenizerUpdate',this.$tokenizerUpdateFoldWidgets),this._signal('changeAnnotation'),!t||'manual'==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on('change',this.$updateFoldWidgets),this.on('tokenizerUpdate',this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(a,e){var t=this.foldWidgets;if(!t||e&&t[a])return{};for(var l=a-1,r,d;0<=l;){if(d=t[l],null==d&&(d=t[l]=this.getFoldWidget(l)),'start'==d){var o=this.getFoldWidgetRange(l);if(r||(r=o),o&&o.end.row>=a)break}l--}return{range:-1!=l&&o,firstRange:r}},this.onFoldWidgetClick=function(a,e){e=e.domEvent;var t={children:e.shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey};if(!this.$toggleFoldWidget(a,t)){var n=e.target||e.srcElement;n&&/ace_fold-widget/.test(n.className)&&(n.className+=' ace_invalid')}},this.$toggleFoldWidget=function(d,e){if(this.getFoldWidget){var t=this.getFoldWidget(d),n=this.getLine(d),i='end'===t?-1:1,r=this.getFoldAt(d,-1==i?0:n.length,i);if(r)return e.children||e.all?this.removeFold(r):this.expandFold(r),r;var o=this.getFoldWidgetRange(d,!0);if(o&&!o.isMultiLine()&&(r=this.getFoldAt(o.start.row,o.start.column,1))&&o.isEqual(r.range))return this.removeFold(r),r;if(e.siblings){var s=this.getParentFoldRangeData(d);if(s.range)var a=s.range.start.row+1,l=s.range.end.row;this.foldAll(a,l,e.all?1e4:0)}else e.children?(l=o?o.end.row:this.getLength(),this.foldAll(d+1,l,e.all?1e4:0)):o&&(e.all&&(o.collapseChildren=1e4),this.addFold('...',o));return o}},this.toggleFoldWidget=function(){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var t=this.$toggleFoldWidget(e,{});if(!t){var a=this.getParentFoldRangeData(e,!0);if(t=a.range||a.firstRange){e=t.start.row;var o=this.getFoldAt(e,this.getLine(e).length,1);o?this.removeFold(o):this.addFold('...',t)}}},this.updateFoldWidgets=function(a){var e=a.start.row,t=a.end.row-e;if(0==t)this.foldWidgets[e]=null;else if('remove'==a.action)this.foldWidgets.splice(e,t+1,null);else{var n=Array(t+1);n.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,n)}},this.tokenizerUpdateFoldWidgets=function(n){var e=n.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}}),ace.define('ace/edit_session/bracket_match',['require','exports','module','ace/token_iterator','ace/range'],function(n,e){'use strict';var d=n('../token_iterator').TokenIterator,r=n('../range').Range;e.BracketMatch=function i(){this.findMatchingBracket=function(a,e){if(0==a.column)return null;var t=e||this.getLine(a.row).charAt(a.column-1);if(''==t)return null;var n=t.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],a):this.$findOpeningBracket(n[2],a):null},this.getBracketRange=function(o){var e=this.getLine(o.row),n=!0,i=e.charAt(o.column-1),l=i&&i.match(/([\(\[\{])|([\)\]\}])/),d;if(l||(i=e.charAt(o.column),o={row:o.row,column:o.column+1},l=i&&i.match(/([\(\[\{])|([\)\]\}])/),n=!1),!l)return null;if(l[1]){var t=this.$findClosingBracket(l[1],o);if(!t)return null;d=r.fromPoints(o,t),n||(d.end.column++,d.start.column--),d.cursor=d.end}else{var t=this.$findOpeningBracket(l[2],o);if(!t)return null;d=r.fromPoints(t,o),n||(d.start.column++,d.end.column--),d.cursor=d.start}return d},this.$brackets={")":'(',"(":')',"]":'[',"[":']',"{":'}',"}":'{'},this.$findOpeningBracket=function(r,e,t){var n=this.$brackets[r],i=1,o=new d(this,e.row,e.column),s=o.getCurrentToken();if(s||(s=o.stepForward()),s){t||(t=new RegExp('(\\.?'+s.type.replace('.','\\.').replace('rparen','.paren').replace(/\b(?:end)\b/,'(?:start|begin|end)')+')+'));for(var a=e.column-o.getCurrentTokenColumn()-2,l=s.value;;){for(;0<=a;){var c=l.charAt(a);if(!(c==n))c==r&&(i+=1);else if(0==(i-=1))return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()};a-=1}do s=o.stepBackward();while(s&&!t.test(s.type));if(null==s)break;l=s.value,a=l.length-1}return null}},this.$findClosingBracket=function(r,e,t){var n=this.$brackets[r],i=1,o=new d(this,e.row,e.column),s=o.getCurrentToken();if(s||(s=o.stepForward()),s){t||(t=new RegExp('(\\.?'+s.type.replace('.','\\.').replace('lparen','.paren').replace(/\b(?:start|begin)\b/,'(?:start|begin|end)')+')+'));for(var a=e.column-o.getCurrentTokenColumn();;){for(var l=s.value,c=l.length,p;a<c;){if(p=l.charAt(a),p!=n)p==r&&(i+=1);else if(0==(i-=1))return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()};a+=1}do s=o.stepForward();while(s&&!t.test(s.type));if(null==s)break;a=0}return null}}}}),ace.define('ace/edit_session',['require','exports','module','ace/lib/oop','ace/lib/lang','ace/config','ace/lib/event_emitter','ace/selection','ace/mode/text','ace/range','ace/document','ace/background_tokenizer','ace/search_highlight','ace/edit_session/folding','ace/edit_session/bracket_match'],function(n,e){'use strict';var p=n('./lib/oop'),i=n('./lib/lang'),r=n('./config'),o=n('./lib/event_emitter').EventEmitter,s=n('./selection').Selection,a=n('./mode/text').Mode,f=n('./range').Range,l=n('./document').Document,t=n('./background_tokenizer').BackgroundTokenizer,c=n('./search_highlight').SearchHighlight,u=function(n,a){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id='session'+ ++u.$uid,this.$foldData.toString=function(){return this.join('\n')},this.on('changeFold',this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),'object'==typeof n&&n.getLine||(n=new l(n)),this.setDocument(n),this.selection=new s(this),r.resetOptions(this),this.setMode(a),r._signal('session',this)};u.$uid=0,function(){function e(t){return!(4352>t)&&(4352<=t&&4447>=t||4515<=t&&4519>=t||4602<=t&&4607>=t||9001<=t&&9002>=t||11904<=t&&11929>=t||11931<=t&&12019>=t||12032<=t&&12245>=t||12272<=t&&12283>=t||12288<=t&&12350>=t||12353<=t&&12438>=t||12441<=t&&12543>=t||12549<=t&&12589>=t||12593<=t&&12686>=t||12688<=t&&12730>=t||12736<=t&&12771>=t||12784<=t&&12830>=t||12832<=t&&12871>=t||12880<=t&&13054>=t||13056<=t&&19903>=t||19968<=t&&42124>=t||42128<=t&&42182>=t||43360<=t&&43388>=t||44032<=t&&55203>=t||55216<=t&&55238>=t||55243<=t&&55291>=t||63744<=t&&64255>=t||65040<=t&&65049>=t||65072<=t&&65106>=t||65108<=t&&65126>=t||65128<=t&&65131>=t||65281<=t&&65376>=t||65504<=t&&65510>=t)}p.implement(this,o),this.setDocument=function(t){this.doc&&this.doc.removeListener('change',this.$onChange),this.doc=t,t.on('change',this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(a){if(!a)return this.$docRowCache=[],void(this.$screenRowCache=[]);var r=this.$docRowCache.length,t=this.$getRowCacheIndex(this.$docRowCache,a)+1;r>t&&(this.$docRowCache.splice(t,r),this.$screenRowCache.splice(t,r))},this.$getRowCacheIndex=function(a,e){for(var t=0,n=a.length-1;t<=n;){var i=t+n>>1,r=a[i];if(e>r)t=i+1;else{if(!(e<r))return i;n=i-1}}return t-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(n){var e=n.data;this.$resetRowCache(e.start.row)},this.onChange=function(n){this.$modified=!0,this.$resetRowCache(n.start.row);var e=this.$updateInternalDataOnChange(n);this.$fromUndo||!this.$undoManager||n.ignore||(this.$deltasDoc.push(n),e&&0!=e.length&&this.$deltasFold.push({action:'removeFolds',folds:e}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(n),this._signal('change',n)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(a,e){var t=this.bgTokenizer.getTokens(a),i=0,r;if(null==e)n=t.length-1,i=this.getLine(a).length;else for(var n=0;n<t.length&&!((i+=t[n].value.length)>=e);n++);return(r=t[n])?(r.index=n,r.start=i-r.value.length,r):null},this.setUndoManager=function(n){if(this.$undoManager=n,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),n){var e=this;this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.$deltasFold.length&&(e.$deltas.push({group:'fold',deltas:e.$deltasFold}),e.$deltasFold=[]),e.$deltasDoc.length&&(e.$deltas.push({group:'doc',deltas:e.$deltasDoc}),e.$deltasDoc=[]),0<e.$deltas.length&&n.execute({action:'aceupdate',args:[e.$deltas,e],merge:e.mergeUndoDeltas}),e.mergeUndoDeltas=!1,e.$deltas=[]},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(' ',this.getTabSize()):'\t'},this.setUseSoftTabs=function(t){this.setOption('useSoftTabs',t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption('tabSize',t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&0==t.column%this.$tabSize},this.setNavigateWithinSoftTabs=function(t){this.setOption('navigateWithinSoftTabs',t)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption('overwrite',t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(n,e){this.$decorations[n]||(this.$decorations[n]=''),this.$decorations[n]+=' '+e,this._signal('changeBreakpoint',{})},this.removeGutterDecoration=function(n,e){this.$decorations[n]=(this.$decorations[n]||'').replace(' '+e,''),this._signal('changeBreakpoint',{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(n){this.$breakpoints=[];for(var e=0;e<n.length;e++)this.$breakpoints[n[e]]='ace_breakpoint';this._signal('changeBreakpoint',{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal('changeBreakpoint',{})},this.setBreakpoint=function(n,e){void 0===e&&(e='ace_breakpoint'),e?this.$breakpoints[n]=e:delete this.$breakpoints[n],this._signal('changeBreakpoint',{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal('changeBreakpoint',{})},this.addMarker=function(a,s,l,d){var c=this.$markerId++,p={range:a,type:l||'line',renderer:'function'==typeof l?l:null,clazz:s,inFront:!!d,id:c};return d?(this.$frontMarkers[c]=p,this._signal('changeFrontMarker')):(this.$backMarkers[c]=p,this._signal('changeBackMarker')),c},this.addDynamicMarker=function(a,e){if(a.update){var r=this.$markerId++;return a.id=r,a.inFront=!!e,e?(this.$frontMarkers[r]=a,this._signal('changeFrontMarker')):(this.$backMarkers[r]=a,this._signal('changeBackMarker')),a}},this.removeMarker=function(a){var e=this.$frontMarkers[a]||this.$backMarkers[a];if(e){var t=e.inFront?this.$frontMarkers:this.$backMarkers;e&&(delete t[a],this._signal(e.inFront?'changeFrontMarker':'changeBackMarker'))}},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(n){if(!this.$searchHighlight){var e=new c(null,'ace_selected-word','text');this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(n)},this.highlightLines=function(a,e,o,n){'number'!=typeof e&&(o=e,e=a),o||(o='ace_step');var i=new f(a,0,e,1/0);return i.id=this.addMarker(i,o,'fullLine',n),i},this.setAnnotations=function(t){this.$annotations=t,this._signal('changeAnnotation',{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(n){var e=n.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:'\n'},this.getWordRange=function(a,e){var t=this.getLine(a),n=!1;if(0<e&&(n=!!t.charAt(e-1).match(this.tokenRe)),n||(n=!!t.charAt(e).match(this.tokenRe)),n)var i=this.tokenRe;else if(/^\s+$/.test(t.slice(e-1,e+1)))var i=/\s/;else var i=this.nonTokenRe;var r=e;if(0<r){do r--;while(0<=r&&t.charAt(r).match(i));r++}for(var o=e;o<t.length&&t.charAt(o).match(i);)o++;return new f(a,r,a,o)},this.getAWordRange=function(a,e){for(var t=this.getWordRange(a,e),n=this.getLine(t.end.row);n.charAt(t.end.column).match(/[ \t]/);)t.end.column+=1;return t},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption('useWorker',t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(n){var e=n.data;this.bgTokenizer.start(e.first),this._signal('tokenizerUpdate',n)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(o,s){if(o&&'object'==typeof o){if(o.getTokenizer)return this.$onChangeMode(o);var t=o,l=t.path}else l=o||'ace/mode/text';return(this.$modes['ace/mode/text']||(this.$modes['ace/mode/text']=new a),this.$modes[l]&&!t)?(this.$onChangeMode(this.$modes[l]),void(s&&s())):void(this.$modeId=l,r.loadModule(['mode',l],function(a){return this.$modeId===l?void(this.$modes[l]&&!t?this.$onChangeMode(this.$modes[l]):a&&a.Mode&&(a=new a.Mode(t),t||(this.$modes[l]=a,a.$id=l),this.$onChangeMode(a)),s&&s()):s&&s()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes['ace/mode/text'],!0))},this.$onChangeMode=function(a,e){if(e||(this.$modeId=a.$id),this.$mode!==a){this.$mode=a,this.$stopWorker(),this.$useWorker&&this.$startWorker();var o=a.getTokenizer();if(void 0!==o.addEventListener){var n=this.onReloadTokenizer.bind(this);o.addEventListener('update',n)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(o);else{this.bgTokenizer=new t(o);var i=this;this.bgTokenizer.addEventListener('update',function(t){i._signal('tokenizerUpdate',t)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=a.tokenRe,this.nonTokenRe=a.nonTokenRe,e||(a.attachToSession&&a.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(a.foldingRules),this.bgTokenizer.start(0),this._emit('changeMode'))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){r.warn('Could not load worker',t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal('changeScrollTop',t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal('changeScrollLeft',t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?T(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var n=0;return this.lineWidgets.forEach(function(e){e&&e.screenWidth>n&&(n=e.screenWidth)}),this.lineWidgetWidth=n},this.$computeWidth=function(d){if(this.$modified||d){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),t=this.$rowLengthCache,n=0,i=0,r=this.$foldData[i],o=r?r.start.row:1/0,s=e.length,a=0;a<s;a++){if(a>o){if((a=r.end.row+1)>=s)break;r=this.$foldData[i++],o=r?r.start.row:1/0}null==t[a]&&(t[a]=this.$getStringScreenWidth(e[a])[0]),t[a]>n&&(n=t[a])}this.screenWidth=n}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(n,e){return this.doc.getLines(n,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(n,e){return this.doc.insert(n,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(n,e){return this.doc.removeFullLines(n,e)},this.undoChanges=function(a,e){if(a.length){this.$fromUndo=!0;for(var o=null,n=a.length-1,i;-1!=n;n--)i=a[n],'doc'==i.group?(this.doc.revertDeltas(i.deltas),o=this.$getUndoSelection(i.deltas,!0,o)):i.deltas.forEach(function(t){this.addFolds(t.folds)},this);return this.$fromUndo=!1,o&&this.$undoSelect&&!e&&this.selection.setSelectionRange(o),o}},this.redoChanges=function(a,e){if(a.length){this.$fromUndo=!0;for(var o=null,n=0,i;n<a.length;n++)i=a[n],'doc'==i.group&&(this.doc.applyDeltas(i.deltas),o=this.$getUndoSelection(i.deltas,!1,o));return this.$fromUndo=!1,o&&this.$undoSelect&&!e&&this.selection.setSelectionRange(o),o}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(d,c,e){function i(t){return c?'insert'!==t.action:'insert'===t.action}var t=d[0],n,r;n=i(t)?f.fromPoints(t.start,t.end):f.fromPoints(t.start,t.start);for(var o=1;o<d.length;o++)t=d[o],i(t)?(r=t.start,-1==n.compare(r.row,r.column)&&n.setStart(r),r=t.end,1==n.compare(r.row,r.column)&&n.setEnd(r),!0):(r=t.start,-1==n.compare(r.row,r.column)&&(n=f.fromPoints(t.start,t.start)),!1);if(null!=e){0===f.comparePoints(e.start,n.start)&&(e.start.column+=n.end.column-n.start.column,e.end.column+=n.end.column-n.start.column);var a=e.compareRange(n);1==a?n.setStart(e.start):-1==a&&n.setEnd(e.end)}return n},this.replace=function(n,e){return this.doc.replace(n,e)},this.moveText=function(d,e,t){var c=this.getTextRange(d),i=this.getFoldsInRange(d),r=f.fromPoints(e,e);if(!t){this.remove(d);var o=d.start.row-d.end.row,s=o?-d.end.column:d.start.column-d.end.column;s&&(r.start.row==d.end.row&&r.start.column>d.end.column&&(r.start.column+=s),r.end.row==d.end.row&&r.end.column>d.end.column&&(r.end.column+=s)),o&&r.start.row>=d.end.row&&(r.start.row+=o,r.end.row+=o)}if(r.end=this.insert(r.start,c),i.length){var a=d.start,l=r.start,o=l.row-a.row,s=l.column-a.column;this.addFolds(i.map(function(t){return t=t.clone(),t.start.row==a.row&&(t.start.column+=s),t.end.row==a.row&&(t.end.column+=s),t.start.row+=o,t.end.row+=o,t}))}return r},this.indentRows=function(a,e,t){t=t.replace(/\t/g,this.getTabString());for(var n=a;n<=e;n++)this.doc.insertInLine({row:n,column:0},t)},this.outdentRows=function(a){for(var e=a.collapseRows(),t=new f(0,0,0,0),n=this.getTabSize(),i=e.start.row,r;i<=e.end.row;++i){r=this.getLine(i),t.start.row=i,t.end.row=i;for(var o=0;o<n&&' '==r.charAt(o);++o);o<n&&'\t'==r.charAt(o)?(t.start.column=o,t.end.column=o+1):(t.start.column=0,t.end.column=o),this.remove(t)}},this.$moveLines=function(l,e,t){if(l=this.getRowFoldStart(l),e=this.getRowFoldEnd(e),0>t){var n=this.getRowFoldStart(l+t);if(0>n)return 0;var i=n-l}else if(0<t){var n=this.getRowFoldEnd(e+t);if(n>this.doc.getLength()-1)return 0;var i=n-e}else{l=this.$clipRowToDocument(l),e=this.$clipRowToDocument(e);var i=e-l+1}var r=new f(l,0,e,d),o=this.getFoldsInRange(r).map(function(t){return t=t.clone(),t.start.row+=i,t.end.row+=i,t}),s=0==t?this.doc.getLines(l,e):this.doc.removeFullLines(l,e);return this.doc.insertFullLines(l+i,s),o.length&&this.addFolds(o),i},this.moveLinesUp=function(n,e){return this.$moveLines(n,e,-1)},this.moveLinesDown=function(n,e){return this.$moveLines(n,e,1)},this.duplicateLines=function(n,e){return this.$moveLines(n,e,0)},this.$clipRowToDocument=function(t){return T(0,x(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(n,e){return 0>e?0:x(this.doc.getLine(n).length,e)},this.$clipPositionToDocument=function(a,r){if(r=T(0,r),0>a)a=0,r=0;else{var o=this.doc.getLength();a>=o?(a=o-1,r=this.doc.getLine(o-1).length):r=x(this.doc.getLine(a).length,r)}return{row:a,column:r}},this.$clipRangeToDocument=function(n){0>n.start.row?(n.start.row=0,n.start.column=0):n.start.column=this.$clipColumnToRow(n.start.row,n.start.column);var e=this.doc.getLength()-1;return n.end.row>e?(n.end.row=e,n.end.column=this.doc.getLine(e).length):n.end.column=this.$clipColumnToRow(n.end.row,n.end.column),n},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(n){if(n!=this.$useWrapMode){if(this.$useWrapMode=n,this.$modified=!0,this.$resetRowCache(0),n){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal('changeWrapMode')}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(n,a){this.$wrapLimitRange.min===n&&this.$wrapLimitRange.max===a||(this.$wrapLimitRange={min:n,max:a},this.$modified=!0,this.$useWrapMode&&this._signal('changeWrapMode'))},this.adjustWrapLimit=function(a,e){var r=this.$wrapLimitRange;0>r.max&&(r={min:e,max:e});var n=this.$constrainWrapLimit(a,r.min,r.max);return n!=this.$wrapLimit&&1<n&&(this.$wrapLimit=n,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal('changeWrapLimit')),!0)},this.$constrainWrapLimit=function(a,e,t){return e&&(a=T(e,a)),t&&(a=x(t,a)),a},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(E){var e=this.$useWrapMode,t=E.action,n=E.start,i=E.end,r=n.row,o=i.row,s=o-r,_=null;if(!(this.$updating=!0,0!=s)){s=g(E.start.column-E.end.column),'remove'===t&&(_=this.getFoldsInRange(E),this.removeFolds(_),s=-s);var l=this.getFoldLine(r);l&&l.addRemoveChars(r,n.column,s)}else if('remove'===t){this[e?'$wrapData':'$rowLengthCache'].splice(r,s);var u=this.$foldData;_=this.getFoldsInRange(E),this.removeFolds(_);var l=this.getFoldLine(i.row),c=0;if(l){l.addRemoveChars(i.row,i.column,n.column-i.column),l.shiftRow(-s);var h=this.getFoldLine(r);h&&h!==l&&(h.merge(l),l=h),c=u.indexOf(l)+1}for(c;c<u.length;c++){var l=u[c];l.start.row>=i.row&&l.shiftRow(-s)}o=r}else{var d=Array(s);d.unshift(r,0);var m=e?this.$wrapData:this.$rowLengthCache;m.splice.apply(m,d);var u=this.$foldData,l=this.getFoldLine(r),c=0;if(l){var p=l.range.compareInside(n.row,n.column);0==p?(l=l.split(n.row,n.column))&&(l.shiftRow(s),l.addRemoveChars(o,0,i.column-n.column)):-1==p&&(l.addRemoveChars(r,0,i.column-n.column),l.shiftRow(s)),c=u.indexOf(l)+1}for(c;c<u.length;c++){var l=u[c];l.start.row>=r&&l.shiftRow(s)}}return e&&this.$wrapData.length!=this.doc.getLength()&&console.error('doc.getLength() and $wrapData.length have to be the same!'),this.$updating=!1,e?this.$updateWrapData(r,o):this.$updateRowLengthCache(r,o),_},this.$updateRowLengthCache=function(n,e){this.$rowLengthCache[n]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(t,e){var n=this.doc.getAllLines(),i=this.getTabSize(),a=this.$wrapData,s=this.$wrapLimit,l=t,d,r;for(e=x(e,n.length-1);l<=e;)r=this.getFoldLine(l,r),r?(d=[],r.walk(function(t,e,r,o){var a;if(null!=t){a=this.$getDisplayTokens(t,d.length),a[0]=_;for(var i=1;i<a.length;i++)a[i]=y}else a=this.$getDisplayTokens(n[e].substring(o,r),d.length);d=d.concat(a)}.bind(this),r.end.row,n[r.end.row].length+1),a[r.start.row]=this.$computeWrapSplits(d,s,i),l=r.end.row+1):(d=this.$getDisplayTokens(n[l]),a[l]=this.$computeWrapSplits(d,s,i),l++)};var _=3,y=4,b=10,s=11,n=12;this.$computeWrapSplits=function(a,e,u){function o(){var e=0;if(0===m)return e;if(p)for(var t=0,r;t<a.length;t++)if(r=a[t],r==b)e+=1;else{if(r!=s){if(r==n)continue;break}e+=u}return d&&!1!==p&&(e+=u),x(e,m)}function s(e){var t=a.slice(l,e),n=t.length;t.join('').replace(/12/g,function(){n-=1}).replace(/2/g,function(){n-=1}),r.length||(g=o(),r.indent=g),c+=n,r.push(c),l=e}if(0==a.length)return[];for(var r=[],t=a.length,l=0,c=0,d=this.$wrapAsCode,p=this.$indentedSoftWrap,m=e<=T(2*u,8)||!1===p?0:S(e/2),g=0,i;t-l>e-g;)if(i=l+e-g,a[i-1]>=b&&a[i]>=b)s(i);else if(a[i]!=_&&a[i]!=y){for(var h=T(i-(e-(e>>2)),l-1);i>h&&a[i]<_;)i--;if(d){for(;i>h&&a[i]<_;)i--;for(;i>h&&9==a[i];)i--}else for(;i>h&&a[i]<b;)i--;i>h?s(++i):(i=l+e,2==a[i]&&i--,s(i-g))}else{for(i;i!=l-1&&a[i]!=_;i--);if(i>l){s(i);continue}for(i=l+e;i<a.length&&a[i]==y;i++);if(i==a.length)break;s(i)}return r},this.$getDisplayTokens=function(a,t){var d=[],r;t=t||0;for(var i=0,o;i<a.length;i++)if(o=a.charCodeAt(i),9==o){r=this.getScreenTabSize(d.length+t),d.push(s);for(var c=1;c<r;c++)d.push(n)}else 32==o?d.push(b):39<o&&48>o||57<o&&64>o?d.push(9):4352<=o&&e(o)?d.push(1,2):d.push(1);return d},this.$getStringScreenWidth=function(a,t,n){if(0==t)return[0,0];null==t&&(t=1/0),n=n||0;var i,r;for(r=0;r<a.length&&(i=a.charCodeAt(r),n+=9==i?this.getScreenTabSize(n):4352<=i&&e(i)?2:1,!(n>t));r++);return[n,r]},this.lineWidgets=null,this.getRowLength=function(n){if(this.lineWidgets)var e=this.lineWidgets[n]&&this.lineWidgets[n].rowCount||0;else e=0;return this.$useWrapMode&&this.$wrapData[n]?this.$wrapData[n].length+1+e:1+e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(a){if(this.$useWrapMode){var e=this.screenToDocumentPosition(a,Number.MAX_VALUE),t=this.$wrapData[e.row];return t.length&&t[0]<e.column?t.indent:0}return 0},this.getScreenLastRowColumn=function(n){var e=this.screenToDocumentPosition(n,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(a,e){var t=this.documentToScreenRow(a,e);return this.getScreenLastRowColumn(t)},this.getDocumentLastRowColumnPosition=function(a,e){var t=this.documentToScreenRow(a,e);return this.screenToDocumentPosition(t,d/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-t%this.$tabSize},this.screenToDocumentRow=function(n,e){return this.screenToDocumentPosition(n,e).row},this.screenToDocumentColumn=function(n,e){return this.screenToDocumentPosition(n,e).column},this.screenToDocumentPosition=function(E,e){if(0>E)return{row:0,column:0};var t=0,_=0,y=0,s=0,a=this.$screenRowCache,l=this.$getRowCacheIndex(a,E),c=a.length,A,n;if(c&&0<=l)var y=a[l],t=this.$docRowCache[l],i=E>a[c-1];else var i=!c;for(var h=this.getLength()-1,b=this.getNextFoldLine(t),m=b?b.start.row:1/0;y<=E&&(s=this.getRowLength(t),!(y+s>E||t>=h));)y+=s,++t>m&&(t=b.end.row+1,b=this.getNextFoldLine(t,b),m=b?b.start.row:1/0),i&&(this.$docRowCache.push(t),this.$screenRowCache.push(y));if(b&&b.start.row<=t)A=this.getFoldDisplayLine(b),t=b.start.row;else{if(y+s<=E||t>h)return{row:h,column:this.getLine(h).length};A=this.getLine(t),b=null}var p=0;if(this.$useWrapMode){var f=this.$wrapData[t];if(f){var g=S(E-y);n=f[g],0<g&&f.length&&(p=f.indent,_=f[g-1]||f[f.length-1],A=A.substring(_))}}return _+=this.$getStringScreenWidth(A,e-p)[1],this.$useWrapMode&&_>=n&&(_=n-1),b?b.idxToPosition(_):{row:t,column:_}},this.documentToScreenPosition=function(E,e){if(void 0===e)var t=this.$clipPositionToDocument(E.row,E.column);else t=this.$clipPositionToDocument(E,e);E=t.row,e=t.column;var n=0,_=null,r=null;(r=this.getFoldAt(E,e,1))&&(E=r.start.row,e=r.start.column);var o=0,a=this.$docRowCache,l=this.$getRowCacheIndex(a,E),c=a.length,y;if(c&&0<=l)var o=a[l],n=this.$screenRowCache[l],s=E>a[c-1];else var s=!c;for(var h=this.getNextFoldLine(o),d=h?h.start.row:1/0;o<E;){if(o>=d){if((y=h.end.row+1)>E)break;h=this.getNextFoldLine(y,h),d=h?h.start.row:1/0}else y=o+1;n+=this.getRowLength(o),o=y,s&&(this.$docRowCache.push(o),this.$screenRowCache.push(n))}var m='';h&&o>=d?(m=this.getFoldDisplayLine(h,E,e),_=h.start.row):(m=this.getLine(E).substring(0,e),_=E);var p=0;if(this.$useWrapMode){var f=this.$wrapData[_];if(f){for(var g=0;m.length>=f[g];)n++,g++;m=m.substring(f[g-1]||0,m.length),p=0<g?f.indent:0}}return{row:n,column:p+this.$getStringScreenWidth(m)[0]}},this.documentToScreenColumn=function(n,e){return this.documentToScreenPosition(n,e).column},this.documentToScreenRow=function(n,e){return this.documentToScreenPosition(n,e).row},this.getScreenLength=function(){var l=0,e=null;if(this.$useWrapMode)for(var t=this.$wrapData.length,n=0,i=0,e=this.$foldData[i++],r=e?e.start.row:1/0,o;n<t;)o=this.$wrapData[n],l+=o?o.length+1:1,n++,n>r&&(n=e.end.row+1,e=this.$foldData[i++],r=e?e.start.row:1/0);else{l=this.getLength();for(var s=this.$foldData,i=0;i<s.length;i++)e=s[i],l-=e.end.row-e.start.row}return this.lineWidgets&&(l+=this.$getWidgetScreenLength()),l},this.$setFontMetrics=function(a){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,t,n){if(0===t)return[0,0];t||(t=1/0),n=n||0;var i,r;for(r=0;r<e.length&&(i=e.charAt(r),!((n+='\t'===i?this.getScreenTabSize(n):a.getCharacterWidth(i))>t));r++);return[n,r]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}.call(u.prototype),n('./edit_session/folding').Folding.call(u.prototype),n('./edit_session/bracket_match').BracketMatch.call(u.prototype),r.defineOptions(u.prototype,'session',{wrap:{set:function(n){if(n&&'off'!=n?'free'==n?n=!0:'printMargin'==n?n=-1:'string'==typeof n&&(n=parseInt(n,10)||!1):n=!1,this.$wrap!=n)if(this.$wrap=n,n){var a='number'==typeof n?n:null;this.setWrapLimitRange(a,a),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?'printMargin':this.getWrapLimitRange().min?this.$wrap:'free':'off'},handlesSet:!0},wrapMethod:{set:function(t){(t='auto'==t?'text'!=this.$mode.type:'text'!=t)!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:'auto'},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal('changeBreakpoint')},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){isNaN(t)||this.$tabSize===t||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal('changeTabSize'))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},overwrite:{set:function(){this._signal('changeOverwrite')},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId}}}),e.EditSession=u}),ace.define('ace/search',['require','exports','module','ace/lib/lang','ace/lib/oop','ace/range'],function(n,e){'use strict';function i(a,r){function n(t){return /\w/.test(t)||r.regExp?'\\b':''}return n(a[0])+a+n(a[a.length-1])}var l=n('./lib/lang'),t=n('./lib/oop'),u=n('./range').Range,r=function(){this.$options={}};(function(){this.set=function(n){return t.mixin(this.$options,n),this},this.getOptions=function(){return l.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(a){var s=this.$options,e=this.$matchIterator(a,s);if(!e)return!1;var t=null;return e.forEach(function(a,e,n,r){return t=new u(a,e,n,r),!(e==r&&s.start&&s.start.start&&0!=s.skipCurrent&&t.isEqual(s.start))||(t=null,!1)}),t},this.findAll=function(r){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var t=e.range,n=t?r.getLines(t.start.row,t.end.row):r.doc.getAllLines(),i=[],o=e.re;if(e.$isMultiLine){var a=o.length,s=n.length-a,c;e:for(var y=o.offset||0;y<=s;y++){for(var h=0;h<a;h++)if(-1==n[y+h].search(o[h]))continue e;var d=n[y],m=n[y+a-1],p=d.length-d.match(o[0])[0].length,f=m.match(o[a-1])[0].length;c&&c.end.row===y&&c.end.column>p||(i.push(c=new u(y,p,y+a-1,f)),2<a&&(y=y+a-2))}}else for(var g=0;g<n.length;g++)for(var C=l.getMatchOffsets(n[g],o),h=0,E;h<C.length;h++)E=C[h],i.push(new u(g,E.offset,g,E.offset+E.length));if(t){for(var A=t.start.column,b=t.start.column,g=0,h=i.length-1;g<h&&i[g].start.column<A&&i[g].start.row==t.start.row;)g++;for(;g<h&&i[h].end.column>b&&i[h].end.row==t.end.row;)h--;for(i=i.slice(g,h+1),g=0,h=i.length;g<h;g++)i[g].start.row+=t.start.row,i[g].end.row+=t.start.row}return i},this.replace=function(a,e){var t=this.$options,n=this.$assembleRegExp(t);if(t.$isMultiLine)return e;if(n){var i=n.exec(a);if(!i||i[0].length!=a.length)return null;if(e=a.replace(n,e),t.preserveCase){e=e.split('');for(var l=x(a.length,a.length),o;l--;)o=a[l],e[l]=o&&o.toLowerCase()!=o?e[l].toUpperCase():e[l].toLowerCase();e=e.join('')}return e}},this.$assembleRegExp=function(a,e){if(a.needle instanceof RegExp)return a.re=a.needle;var r=a.needle;if(!a.needle)return a.re=!1;a.regExp||(r=l.escapeRegExp(r)),a.wholeWord&&(r=i(r,a));var n=a.caseSensitive?'gm':'gmi';if(a.$isMultiLine=!e&&/[\n\r]/.test(r),a.$isMultiLine)return a.re=this.$assembleMultilineRegExp(r,n);try{var o=new RegExp(r,n)}catch(t){o=!1}return a.re=o},this.$assembleMultilineRegExp=function(a,e){for(var t=a.replace(/\r\n|\r|\n/g,'$\n^').split('\n'),n=[],o=0;o<t.length;o++)try{n.push(new RegExp(t[o],e))}catch(t){return!1}return n},this.$matchIterator=function(d,p){var e=this.$assembleRegExp(p);if(!e)return!1;var m=1==p.backwards,t=0!=p.skipCurrent,r=p.range,o=p.start;o||(o=r?r[m?'end':'start']:d.selection.getRange()),o.start&&(o=o[t==m?'start':'end']);var i=r?r.start.row:0,a=r?r.end.row:d.getLength()-1;if(m)var s=function(t){var e=o.row;if(!l(e,o.column,t)){for(e--;e>=i;e--)if(l(e,Number.MAX_VALUE,t))return;if(0!=p.wrap)for(e=a,i=o.row;e>=i;e--)if(l(e,Number.MAX_VALUE,t))return}};else var s=function(t){var e=o.row;if(!l(e,o.column,t)){for(e+=1;e<=a;e++)if(l(e,0,t))return;if(0!=p.wrap)for(e=i,a=o.row;e<=a;e++)if(l(e,0,t))return}};if(p.$isMultiLine)var g=e.length,l=function(n,t,r){var o=m?n-g+1:n;if(!(0>o)){var i=d.getLine(o),a=i.search(e[0]);if((m||!(a<t))&&-1!==a){for(var s=1;s<g;s++)if(i=d.getLine(o+s),-1==i.search(e[s]))return;var l=i.match(e[g-1])[0].length;if(!(m&&l>t))return!!r(o,a,o+g-1,l)||void 0}}};else if(m)var l=function(n,t,i){var r=d.getLine(n),s=[],a=0,l;for(e.lastIndex=0;l=e.exec(r);){var o=l[0].length;if(a=l.index,!o){if(a>=r.length)break;e.lastIndex=a+=1}if(l.index+o>t)break;s.push(l.index,o)}for(var p=s.length-1;0<=p;p-=2){var u=s[p-1],o=s[p];if(i(n,u,n,u+o))return!0}};else var l=function(n,t,i){var r=d.getLine(n),s=t,a;for(e.lastIndex=t;a=e.exec(r);){var o=a[0].length;if(s=a.index,i(n,s,n,s+o))return!0;if(!o&&(e.lastIndex=s+=1,s>=r.length))return!1}};return{forEach:s}}}).call(r.prototype),e.Search=r}),ace.define('ace/keyboard/hash_handler',['require','exports','module','ace/lib/keys','ace/lib/useragent'],function(n,e){'use strict';function i(n,e){this.platform=e||(o.isMac?'mac':'win'),this.commands={},this.commandKeyBinding={},this.addCommands(n),this.$singleCommand=!0}function r(n,e){i.call(this,n,e),this.$singleCommand=!1}var l=n('../lib/keys'),o=n('../lib/useragent'),d=l.KEY_MODS;r.prototype=i.prototype,function(){function e(t){return'object'==typeof t&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(a,l){var t=a&&('string'==typeof a?a:a.name);a=this.commands[t],l||delete this.commands[t];var n=this.commandKeyBinding;for(var i in n){var r=n[i];if(r==a)delete n[i];else if(Array.isArray(r)){var o=r.indexOf(a);-1!=o&&(r.splice(o,1),1==r.length&&(n[i]=r[0]))}}},this.bindKey=function(a,l,c){if('object'==typeof a&&a&&(void 0==c&&(c=a.position),a=a[this.platform]),a)return'function'==typeof l?this.addCommand({exec:l,bindKey:a,name:l.name||a}):void a.split('|').forEach(function(t){var a='';if(-1!=t.indexOf(' ')){var e=t.split(/\s+/);t=e.pop(),e.forEach(function(r){var e=this.parseKeys(r),t=d[e.hashId]+e.key;a+=(a?' ':'')+t,this._addCommandToBinding(a,'chainKeys')},this),a+=' '}var n=this.parseKeys(t),r=d[n.hashId]+n.key;this._addCommandToBinding(a+r,l,c)},this)},this._addCommandToBinding=function(d,t,c){var p=this.commandKeyBinding,o;if(!t)delete p[d];else if(!p[d]||this.$singleCommand)p[d]=t;else{Array.isArray(p[d])?-1!=(o=p[d].indexOf(t))&&p[d].splice(o,1):p[d]=[p[d]],'number'!=typeof c&&(c=e(t));var r=p[d];for(o=0;o<r.length;o++){var s=r[o],a=e(s);if(a>c)break}r.splice(o,0,t)}},this.addCommands=function(a){a&&Object.keys(a).forEach(function(e){var t=a[e];if(t){if('string'==typeof t)return this.bindKey(t,e);'function'==typeof t&&(t={exec:t}),'object'==typeof t&&(t.name||(t.name=e),this.addCommand(t))}},this)},this.removeCommands=function(n){Object.keys(n).forEach(function(e){this.removeCommand(n[e])},this)},this.bindKeys=function(n){Object.keys(n).forEach(function(e){this.bindKey(e,n[e])},this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(o){var e=o.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(t){return t}),t=e.pop(),d=l[t];if(l.FUNCTION_KEYS[d])t=l.FUNCTION_KEYS[d].toLowerCase();else{if(!e.length)return{key:t,hashId:-1};if(1==e.length&&'shift'==e[0])return{key:t.toUpperCase(),hashId:-1}}for(var i=0,c=e.length,s;c--;){if(s=l.KEY_MODS[e[c]],null==s)return'undefined'!=typeof console&&console.error('invalid modifier '+e[c]+' in '+o),!1;i|=s}return{key:t,hashId:i}},this.findKeyCommand=function(a,e){var t=d[a]+e;return this.commandKeyBinding[t]},this.handleKeyboard=function(a,e,t,n){if(!(0>n)){var i=d[e]+t,r=this.commandKeyBinding[i];return a.$keyChain&&(a.$keyChain+=' '+i,r=this.commandKeyBinding[a.$keyChain]||r),r&&('chainKeys'==r||'chainKeys'==r[r.length-1])?(a.$keyChain=a.$keyChain||i,{command:'null'}):(a.$keyChain&&(e&&4!=e||1!=t.length?(-1==e||0<n)&&(a.$keyChain=''):a.$keyChain=a.$keyChain.slice(0,-i.length-1)),{command:r})}},this.getStatusText=function(n,e){return e.$keyChain||''}}.call(i.prototype),e.HashHandler=i,e.MultiHashHandler=r}),ace.define('ace/commands/command_manager',['require','exports','module','ace/lib/oop','ace/keyboard/hash_handler','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('../lib/oop'),a=n('../keyboard/hash_handler').MultiHashHandler,r=n('../lib/event_emitter').EventEmitter,o=function(n,e){a.call(this,e,n),this.byName=this.commands,this.setDefaultHandler('exec',function(t){return t.command.exec(t.editor,t.args||{})})};t.inherits(o,a),function(){t.implement(this,r),this.exec=function(a,o,s){if(Array.isArray(a)){for(var l=a.length;l--;)if(this.exec(a[l],o,s))return!0;return!1}if('string'==typeof a&&(a=this.commands[a]),!a)return!1;if(o&&o.$readOnly&&!a.readOnly)return!1;if(a.isAvailable&&!a.isAvailable(o))return!1;var i={editor:o,command:a,args:s};return i.returnValue=this._emit('exec',i),this._signal('afterExec',i),!1!==i.returnValue},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit('changeStatus'),this.recording?(this.macro.pop(),this.removeEventListener('exec',this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(t){this.macro.push([t.command,t.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on('exec',this.$addCommandToMacro),this.recording=!0)},this.replay=function(n){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(n);try{this.$inReplay=!0,this.macro.forEach(function(e){'string'==typeof e?this.exec(e,n):this.exec(e[0],n,e[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map(function(t){return'string'!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t})}}.call(o.prototype),e.CommandManager=o}),ace.define('ace/commands/default_commands',['require','exports','module','ace/lib/lang','ace/config','ace/range'],function(n,e){'use strict';function i(n,a){return{win:n,mac:a}}var l=n('../lib/lang'),t=n('../config'),d=n('../range').Range;e.commands=[{name:'showSettingsMenu',bindKey:i('Ctrl-,','Command-,'),exec:function(n){t.loadModule('ace/ext/settings_menu',function(e){e.init(n),n.showSettingsMenu()})},readOnly:!0},{name:'goToNextError',bindKey:i('Alt-E','F4'),exec:function(n){t.loadModule('ace/ext/error_marker',function(e){e.showErrorMarker(n,1)})},scrollIntoView:'animate',readOnly:!0},{name:'goToPreviousError',bindKey:i('Alt-Shift-E','Shift-F4'),exec:function(n){t.loadModule('ace/ext/error_marker',function(e){e.showErrorMarker(n,-1)})},scrollIntoView:'animate',readOnly:!0},{name:'selectall',bindKey:i('Ctrl-A','Command-A'),exec:function(t){t.selectAll()},readOnly:!0},{name:'centerselection',bindKey:i(null,'Ctrl-L'),exec:function(t){t.centerSelection()},readOnly:!0},{name:'gotoline',bindKey:i('Ctrl-L','Command-L'),exec:function(n){var e=parseInt(prompt('Enter line number:'),10);isNaN(e)||n.gotoLine(e)},readOnly:!0},{name:'fold',bindKey:i('Alt-L|Ctrl-F1','Command-Alt-L|Command-F1'),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'unfold',bindKey:i('Alt-Shift-L|Ctrl-Shift-F1','Command-Alt-Shift-L|Command-Shift-F1'),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'toggleFoldWidget',bindKey:i('F2','F2'),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'toggleParentFoldWidget',bindKey:i('Alt-F2','Alt-F2'),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'foldall',bindKey:i(null,'Ctrl-Command-Option-0'),exec:function(t){t.session.foldAll()},scrollIntoView:'center',readOnly:!0},{name:'foldOther',bindKey:i('Alt-0','Command-Option-0'),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:'center',readOnly:!0},{name:'unfoldall',bindKey:i('Alt-Shift-0','Command-Option-Shift-0'),exec:function(t){t.session.unfold()},scrollIntoView:'center',readOnly:!0},{name:'findnext',bindKey:i('Ctrl-K','Command-G'),exec:function(t){t.findNext()},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'findprevious',bindKey:i('Ctrl-Shift-K','Command-Shift-G'),exec:function(t){t.findPrevious()},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'selectOrFindNext',bindKey:i('Alt-K','Ctrl-G'),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:'selectOrFindPrevious',bindKey:i('Alt-Shift-K','Ctrl-Shift-G'),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:'find',bindKey:i('Ctrl-F','Command-F'),exec:function(n){t.loadModule('ace/ext/searchbox',function(e){e.Search(n)})},readOnly:!0},{name:'overwrite',bindKey:'Insert',exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:'selecttostart',bindKey:i('Ctrl-Shift-Home','Command-Shift-Home|Command-Shift-Up'),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:'forEach',readOnly:!0,scrollIntoView:'animate',aceCommandGroup:'fileJump'},{name:'gotostart',bindKey:i('Ctrl-Home','Command-Home|Command-Up'),exec:function(t){t.navigateFileStart()},multiSelectAction:'forEach',readOnly:!0,scrollIntoView:'animate',aceCommandGroup:'fileJump'},{name:'selectup',bindKey:i('Shift-Up','Shift-Up|Ctrl-Shift-P'),exec:function(t){t.getSelection().selectUp()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'golineup',bindKey:i('Up','Up|Ctrl-P'),exec:function(n,e){n.navigateUp(e.times)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selecttoend',bindKey:i('Ctrl-Shift-End','Command-Shift-End|Command-Shift-Down'),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:'forEach',readOnly:!0,scrollIntoView:'animate',aceCommandGroup:'fileJump'},{name:'gotoend',bindKey:i('Ctrl-End','Command-End|Command-Down'),exec:function(t){t.navigateFileEnd()},multiSelectAction:'forEach',readOnly:!0,scrollIntoView:'animate',aceCommandGroup:'fileJump'},{name:'selectdown',bindKey:i('Shift-Down','Shift-Down|Ctrl-Shift-N'),exec:function(t){t.getSelection().selectDown()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'golinedown',bindKey:i('Down','Down|Ctrl-N'),exec:function(n,e){n.navigateDown(e.times)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectwordleft',bindKey:i('Ctrl-Shift-Left','Option-Shift-Left'),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotowordleft',bindKey:i('Ctrl-Left','Option-Left'),exec:function(t){t.navigateWordLeft()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selecttolinestart',bindKey:i('Alt-Shift-Left','Command-Shift-Left|Ctrl-Shift-A'),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotolinestart',bindKey:i('Alt-Left|Home','Command-Left|Home|Ctrl-A'),exec:function(t){t.navigateLineStart()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectleft',bindKey:i('Shift-Left','Shift-Left|Ctrl-Shift-B'),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotoleft',bindKey:i('Left','Left|Ctrl-B'),exec:function(n,e){n.navigateLeft(e.times)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectwordright',bindKey:i('Ctrl-Shift-Right','Option-Shift-Right'),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotowordright',bindKey:i('Ctrl-Right','Option-Right'),exec:function(t){t.navigateWordRight()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selecttolineend',bindKey:i('Alt-Shift-Right','Command-Shift-Right|Shift-End|Ctrl-Shift-E'),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotolineend',bindKey:i('Alt-Right|End','Command-Right|End|Ctrl-E'),exec:function(t){t.navigateLineEnd()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectright',bindKey:i('Shift-Right','Shift-Right'),exec:function(t){t.getSelection().selectRight()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotoright',bindKey:i('Right','Right|Ctrl-F'),exec:function(n,e){n.navigateRight(e.times)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectpagedown',bindKey:'Shift-PageDown',exec:function(t){t.selectPageDown()},readOnly:!0},{name:'pagedown',bindKey:i(null,'Option-PageDown'),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:'gotopagedown',bindKey:i('PageDown','PageDown|Ctrl-V'),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:'selectpageup',bindKey:'Shift-PageUp',exec:function(t){t.selectPageUp()},readOnly:!0},{name:'pageup',bindKey:i(null,'Option-PageUp'),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:'gotopageup',bindKey:'PageUp',exec:function(t){t.gotoPageUp()},readOnly:!0},{name:'scrollup',bindKey:i('Ctrl-Up',null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:'scrolldown',bindKey:i('Ctrl-Down',null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:'selectlinestart',bindKey:'Shift-Home',exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectlineend',bindKey:'Shift-End',exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'togglerecording',bindKey:i('Ctrl-Alt-E','Command-Option-E'),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:'replaymacro',bindKey:i('Ctrl-Shift-E','Command-Shift-E'),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:'jumptomatching',bindKey:i('Ctrl-P','Ctrl-P'),exec:function(t){t.jumpToMatching()},multiSelectAction:'forEach',scrollIntoView:'animate',readOnly:!0},{name:'selecttomatching',bindKey:i('Ctrl-Shift-P','Ctrl-Shift-P'),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:'forEach',scrollIntoView:'animate',readOnly:!0},{name:'expandToMatching',bindKey:i('Ctrl-Shift-M','Ctrl-Shift-M'),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:'forEach',scrollIntoView:'animate',readOnly:!0},{name:'passKeysToBrowser',bindKey:i(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:'copy',exec:function(){},readOnly:!0},{name:'cut',exec:function(n){var e=n.getSelectionRange();n._emit('cut',e),n.selection.isEmpty()||(n.session.remove(e),n.clearSelection())},scrollIntoView:'cursor',multiSelectAction:'forEach'},{name:'paste',exec:function(n,e){n.$handlePaste(e)},scrollIntoView:'cursor'},{name:'removeline',bindKey:i('Ctrl-D','Command-D'),exec:function(t){t.removeLines()},scrollIntoView:'cursor',multiSelectAction:'forEachLine'},{name:'duplicateSelection',bindKey:i('Ctrl-Shift-D','Command-Shift-D'),exec:function(t){t.duplicateSelection()},scrollIntoView:'cursor',multiSelectAction:'forEach'},{name:'sortlines',bindKey:i('Ctrl-Alt-S','Command-Alt-S'),exec:function(t){t.sortLines()},scrollIntoView:'selection',multiSelectAction:'forEachLine'},{name:'togglecomment',bindKey:i('Ctrl-/','Command-/'),exec:function(t){t.toggleCommentLines()},multiSelectAction:'forEachLine',scrollIntoView:'selectionPart'},{name:'toggleBlockComment',bindKey:i('Ctrl-Shift-/','Command-Shift-/'),exec:function(t){t.toggleBlockComment()},multiSelectAction:'forEach',scrollIntoView:'selectionPart'},{name:'modifyNumberUp',bindKey:i('Ctrl-Shift-Up','Alt-Shift-Up'),exec:function(t){t.modifyNumber(1)},scrollIntoView:'cursor',multiSelectAction:'forEach'},{name:'modifyNumberDown',bindKey:i('Ctrl-Shift-Down','Alt-Shift-Down'),exec:function(t){t.modifyNumber(-1)},scrollIntoView:'cursor',multiSelectAction:'forEach'},{name:'replace',bindKey:i('Ctrl-H','Command-Option-F'),exec:function(n){t.loadModule('ace/ext/searchbox',function(e){e.Search(n,!0)})}},{name:'undo',bindKey:i('Ctrl-Z','Command-Z'),exec:function(t){t.undo()}},{name:'redo',bindKey:i('Ctrl-Shift-Z|Ctrl-Y','Command-Shift-Z|Command-Y'),exec:function(t){t.redo()}},{name:'copylinesup',bindKey:i('Alt-Shift-Up','Command-Option-Up'),exec:function(t){t.copyLinesUp()},scrollIntoView:'cursor'},{name:'movelinesup',bindKey:i('Alt-Up','Option-Up'),exec:function(t){t.moveLinesUp()},scrollIntoView:'cursor'},{name:'copylinesdown',bindKey:i('Alt-Shift-Down','Command-Option-Down'),exec:function(t){t.copyLinesDown()},scrollIntoView:'cursor'},{name:'movelinesdown',bindKey:i('Alt-Down','Option-Down'),exec:function(t){t.moveLinesDown()},scrollIntoView:'cursor'},{name:'del',bindKey:i('Delete','Delete|Ctrl-D|Shift-Delete'),exec:function(t){t.remove('right')},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'backspace',bindKey:i('Shift-Backspace|Backspace','Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H'),exec:function(t){t.remove('left')},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'cut_or_delete',bindKey:i('Shift-Delete',null),exec:function(t){return!!t.selection.isEmpty()&&void t.remove('left')},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'removetolinestart',bindKey:i('Alt-Backspace','Command-Backspace'),exec:function(t){t.removeToLineStart()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'removetolineend',bindKey:i('Alt-Delete','Ctrl-K'),exec:function(t){t.removeToLineEnd()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'removewordleft',bindKey:i('Ctrl-Backspace','Alt-Backspace|Ctrl-Alt-Backspace'),exec:function(t){t.removeWordLeft()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'removewordright',bindKey:i('Ctrl-Delete','Alt-Delete'),exec:function(t){t.removeWordRight()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'outdent',bindKey:i('Shift-Tab','Shift-Tab'),exec:function(t){t.blockOutdent()},multiSelectAction:'forEach',scrollIntoView:'selectionPart'},{name:'indent',bindKey:i('Tab','Tab'),exec:function(t){t.indent()},multiSelectAction:'forEach',scrollIntoView:'selectionPart'},{name:'blockoutdent',bindKey:i('Ctrl-[','Ctrl-['),exec:function(t){t.blockOutdent()},multiSelectAction:'forEachLine',scrollIntoView:'selectionPart'},{name:'blockindent',bindKey:i('Ctrl-]','Ctrl-]'),exec:function(t){t.blockIndent()},multiSelectAction:'forEachLine',scrollIntoView:'selectionPart'},{name:'insertstring',exec:function(n,e){n.insert(e)},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'inserttext',exec:function(n,e){n.insert(l.stringRepeat(e.text||'',e.times||1))},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'splitline',bindKey:i(null,'Ctrl-O'),exec:function(t){t.splitLine()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'transposeletters',bindKey:i('Alt-Shift-X','Ctrl-T'),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:'cursor'},{name:'touppercase',bindKey:i('Ctrl-U','Ctrl-U'),exec:function(t){t.toUpperCase()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'tolowercase',bindKey:i('Ctrl-Shift-U','Ctrl-Shift-U'),exec:function(t){t.toLowerCase()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'expandtoline',bindKey:i('Ctrl-Shift-L','Command-Shift-L'),exec:function(n){var e=n.selection.getRange();e.start.column=e.end.column=0,e.end.row++,n.selection.setRange(e,!1)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'joinlines',bindKey:i(null,null),exec:function(r){for(var e=r.selection.isBackwards(),t=e?r.selection.getSelectionLead():r.selection.getSelectionAnchor(),n=e?r.selection.getSelectionAnchor():r.selection.getSelectionLead(),i=r.session.doc.getLine(t.row).length,o=r.session.doc.getTextRange(r.selection.getRange()),a=o.replace(/\n\s*/,' ').length,s=r.session.doc.getLine(t.row),c=t.row+1,p;c<=n.row+1;c++)p=l.stringTrimLeft(l.stringTrimRight(r.session.doc.getLine(c))),0!==p.length&&(p=' '+p),s+=p;n.row+1<r.session.doc.getLength()-1&&(s+=r.session.doc.getNewLineCharacter()),r.clearSelection(),r.session.doc.replace(new d(t.row,0,n.row+2,0),s),0<a?(r.selection.moveCursorTo(t.row,t.column),r.selection.selectTo(t.row,t.column+a)):(i=r.session.doc.getLine(t.row).length>i?i+1:i,r.selection.moveCursorTo(t.row,i))},multiSelectAction:'forEach',readOnly:!0},{name:'invertSelection',bindKey:i(null,null),exec:function(a){var e=a.session.doc.getLength()-1,t=a.session.doc.getLine(e).length,n=a.selection.rangeList.ranges,i=[];1>n.length&&(n=[a.selection.getRange()]);for(var r=0;r<n.length;r++)r==n.length-1&&(n[r].end.row===e&&n[r].end.column===t||i.push(new d(n[r].end.row,n[r].end.column,e,t))),0===r?0===n[r].start.row&&0===n[r].start.column||i.push(new d(0,0,n[r].start.row,n[r].start.column)):i.push(new d(n[r-1].end.row,n[r-1].end.column,n[r].start.row,n[r].start.column));a.exitMultiSelectMode(),a.clearSelection();for(var r=0;r<i.length;r++)a.selection.addRange(i[r],!1)},readOnly:!0,scrollIntoView:'none'}]}),ace.define('ace/editor',['require','exports','module','ace/lib/fixoldbrowsers','ace/lib/oop','ace/lib/dom','ace/lib/lang','ace/lib/useragent','ace/keyboard/textinput','ace/mouse/mouse_handler','ace/mouse/fold_handler','ace/keyboard/keybinding','ace/edit_session','ace/search','ace/range','ace/lib/event_emitter','ace/commands/command_manager','ace/commands/default_commands','ace/config','ace/token_iterator'],function(n,e){'use strict';n('./lib/fixoldbrowsers');var _=n('./lib/oop'),i=n('./lib/dom'),y=n('./lib/lang'),o=n('./lib/useragent'),s=n('./keyboard/textinput').TextInput,a=n('./mouse/mouse_handler').MouseHandler,l=n('./mouse/fold_handler').FoldHandler,c=n('./keyboard/keybinding').KeyBinding,u=n('./edit_session').EditSession,h=n('./search').Search,b=n('./range').Range,t=n('./lib/event_emitter').EventEmitter,d=n('./commands/command_manager').CommandManager,p=n('./commands/default_commands').commands,m=n('./config'),C=n('./token_iterator').TokenIterator,f=function(r,e){var t=r.getContainerElement();this.container=t,this.renderer=r,this.id='editor'+ ++f.$uid,this.commands=new d(o.isMac?'mac':'win',p),'object'==typeof document&&(this.textInput=new s(r.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new a(this),new l(this)),this.keyBinding=new c(this),this.$blockScrolling=0,this.$search=new h().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on('exec',this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=y.delayedCall(function(){this._signal('input',{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on('change',function(n,e){e._$emitInputEvent.schedule(31)}),this.setSession(e||new u('')),m.resetOptions(this),m._signal('editor',this)};f.$uid=0,function(){_.implement(this,t),this.$initOperationListeners=function(){this.selections=[],this.commands.on('exec',this.startOperation.bind(this),!0),this.commands.on('afterExec',this.endOperation.bind(this),!0),this.$opResetTimer=y.delayedCall(this.endOperation.bind(this)),this.on('change',function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on('changeSelection',function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&void 0!==this.curOp.command.scrollIntoView&&this.$blockScrolling++},this.endOperation=function(a){if(this.curOp){if(a&&!1===a.returnValue)return this.curOp=null;this._signal('beforeEndOperation');var e=this.curOp.command;e.name&&0<this.$blockScrolling&&this.$blockScrolling--;var t=e&&e.scrollIntoView;if(t){switch(t){case'center-animate':t='animate';case'center':this.renderer.scrollCursorIntoView(null,.5);break;case'animate':case'cursor':this.renderer.scrollCursorIntoView();break;case'selectionPart':var n=this.selection.getRange(),o=this.renderer.layerConfig;(n.start.row>=o.lastRow||n.end.row<=o.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);}'animate'==t&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=['backspace','del','insertstring'],this.$historyTracker=function(a){if(this.$mergeUndoDeltas){var e=this.prevOp,t=this.$mergeableCommands,n=e.command&&a.command.name==e.command.name;if('insertstring'==a.command.name){var o=a.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),n=n&&this.mergeNextCommand&&(!/\s/.test(o)||/\s/.test(e.args)),this.mergeNextCommand=!0}else n=n&&-1!==t.indexOf(a.command.name);'always'!=this.$mergeUndoDeltas&&2e3<Date.now()-this.sequenceStartTime&&(n=!1),n?this.session.mergeUndoDeltas=!0:-1!==t.indexOf(a.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(a,r){if(a&&'string'==typeof a){this.$keybindingId=a;var t=this;m.loadModule(['keybinding',a],function(e){t.$keybindingId==a&&t.keyBinding.setKeyboardHandler(e&&e.handler),r&&r()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(a),r&&r()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(a){if(this.session!=a){this.curOp&&this.endOperation(),this.curOp={};var r=this.session;if(r){this.session.off('change',this.$onDocumentChange),this.session.off('changeMode',this.$onChangeMode),this.session.off('tokenizerUpdate',this.$onTokenizerUpdate),this.session.off('changeTabSize',this.$onChangeTabSize),this.session.off('changeWrapLimit',this.$onChangeWrapLimit),this.session.off('changeWrapMode',this.$onChangeWrapMode),this.session.off('changeFold',this.$onChangeFold),this.session.off('changeFrontMarker',this.$onChangeFrontMarker),this.session.off('changeBackMarker',this.$onChangeBackMarker),this.session.off('changeBreakpoint',this.$onChangeBreakpoint),this.session.off('changeAnnotation',this.$onChangeAnnotation),this.session.off('changeOverwrite',this.$onCursorChange),this.session.off('changeScrollTop',this.$onScrollTopChange),this.session.off('changeScrollLeft',this.$onScrollLeftChange);var o=this.session.getSelection();o.off('changeCursor',this.$onCursorChange),o.off('changeSelection',this.$onSelectionChange)}this.session=a,a?(this.$onDocumentChange=this.onDocumentChange.bind(this),a.on('change',this.$onDocumentChange),this.renderer.setSession(a),this.$onChangeMode=this.onChangeMode.bind(this),a.on('changeMode',this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),a.on('tokenizerUpdate',this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),a.on('changeTabSize',this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),a.on('changeWrapLimit',this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),a.on('changeWrapMode',this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),a.on('changeFold',this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on('changeFrontMarker',this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on('changeBackMarker',this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on('changeBreakpoint',this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on('changeAnnotation',this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on('changeOverwrite',this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on('changeScrollTop',this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on('changeScrollLeft',this.$onScrollLeftChange),this.selection=a.getSelection(),this.selection.on('changeCursor',this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on('changeSelection',this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(a)),this._signal('changeSession',{session:a,oldSession:r}),this.curOp=null,r&&r._signal('changeEditor',{oldEditor:this}),a&&a._signal('changeEditor',{editor:this}),a&&a.bgTokenizer&&a.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(n,e){return this.session.doc.setValue(n),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),n},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(n,e){this.renderer.setTheme(n,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption('fontSize')||i.computedStyle(this.container,'fontSize')},this.setFontSize=function(t){this.setOption('fontSize',t)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var a=this;this.$highlightPending=!0,setTimeout(function(){a.$highlightPending=!1;var e=a.session;if(e&&e.bgTokenizer){var t=e.findMatchingBracket(a.getCursorPosition());if(t)var n=new b(t.row,t.column,t.row,t.column+1);else if(e.$mode.getMatching)var n=e.$mode.getMatching(a.session);n&&(e.$bracketHighlight=e.addMarker(n,'ace_bracket','text'))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var d=this;this.$highlightTagPending=!0,setTimeout(function(){d.$highlightTagPending=!1;var e=d.session;if(e&&e.bgTokenizer){var t=d.getCursorPosition(),n=new C(d.session,t.row,t.column),i=n.getCurrentToken();if(!i||!/\b(?:tag-open|tag-name)/.test(i.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1==i.type.indexOf('tag-open')||(i=n.stepForward())){var p=i.value,o=0,s=n.stepBackward();if('<'==s.value)do s=i,(i=n.stepForward())&&i.value===p&&-1!==i.type.indexOf('tag-name')&&('<'===s.value?o++:'</'===s.value&&o--);while(i&&0<=o);else{do i=s,s=n.stepBackward(),i&&i.value===p&&-1!==i.type.indexOf('tag-name')&&('<'===s.value?o++:'</'===s.value&&o--);while(s&&0>=o);n.stepForward()}if(!i)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var a=n.getCurrentTokenRow(),l=n.getCurrentTokenColumn(),c=new b(a,l,a,l+i.value.length),u=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&void 0!=u&&0!==c.compareRange(u.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),c&&!e.$tagHighlight&&(e.$tagHighlight=e.addMarker(c,'ace_bracket','text'))}}},50)}},this.focus=function(){var t=this;setTimeout(function(){t.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit('focus',t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit('blur',t))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(a){var e=this.session.$useWrapMode,t=a.start.row==a.end.row?a.end.row:1/0;this.renderer.updateLines(a.start.row,t,e),this._signal('change',a),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(n){var e=n.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(m.warn('Automatically scrolling cursor into view after selection change','this will be disabled in the next version','set editor.$blockScrolling = Infinity to disable this message'),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal('changeSelection')},this.$updateHighlightActiveLine=function(){var a=this.getSession(),t;if(this.$highlightActiveLine&&('line'==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||1<this.renderer.$minLines||(t=!1)),a.$highlightLineMarker&&!t)a.removeMarker(a.$highlightLineMarker.id),a.$highlightLineMarker=null;else if(!a.$highlightLineMarker&&t){var r=new b(t.row,t.column,t.row,1/0);r.id=a.addMarker(r,'ace_active-line','screenLine'),a.$highlightLineMarker=r}else t&&(a.$highlightLineMarker.start.row=t.row,a.$highlightLineMarker.end.row=t.row,a.$highlightLineMarker.start.column=t.column,a._signal('changeBackMarker'))},this.onSelectionChange=function(){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var t=this.selection.getRange(),n=this.getSelectionStyle();e.$selectionMarker=e.addMarker(t,'ace_selection',n)}var a=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(a),this._signal('changeSelection')},this.$getSelectionHighLightRegexp=function(){var a=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var t=e.start.column-1,n=e.end.column+1,i=a.getLine(e.start.row),r=i.length,o=i.substring(T(t,0),x(n,r));if(!(0<=t&&/^[\w\d]/.test(o)||n<=r&&/[\w\d]$/.test(o))&&(o=i.substring(e.start.column,e.end.column),/^[\w\d]+$/.test(o)))return this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o})}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit('changeMode',t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText();return this._signal('copy',t),t},this.onCopy=function(){this.commands.exec('copy',this)},this.onCut=function(){this.commands.exec('cut',this)},this.onPaste=function(n,a){this.commands.exec('paste',this,{text:n,event:a})},this.$handlePaste=function(a){'string'==typeof a&&(a={text:a}),this._signal('paste',a);var s=a.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(s);else{var t=s.split(/\r\n|\r|\n/),n=this.selection.rangeList.ranges;if(t.length>n.length||2>t.length||!t[1])return this.commands.exec('insertstring',this,s);for(var i=n.length,r;i--;)r=n[i],r.isEmpty()||this.session.remove(r),this.session.insert(r.start,t[i])}},this.execCommand=function(n,e){return this.commands.exec(n,this,e)},this.insert=function(p,e){var m=this.session,n=m.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var r=n.transformAction(m.getState(i.row),'insertion',this,m,p);r&&(p!==r.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),p=r.text)}if('\t'==p&&(p=this.session.getTabString()),!this.selection.isEmpty()){var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}else if(this.session.getOverwrite()&&-1==p.indexOf('\n')){var o=new b.fromPoints(i,i);o.end.column+=p.length,this.session.remove(o)}if('\n'==p||'\r\n'==p){var s=m.getLine(i.row);if(i.column>s.search(/\S|$/)){var a=s.substr(i.column).search(/\S|$/);m.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var l=i.column,c=m.getState(i.row),s=m.getLine(i.row),u=n.checkOutdent(c,s,p);if(m.insert(i,p),r&&r.selection&&(2==r.selection.length?this.selection.setSelectionRange(new b(i.row,l+r.selection[0],i.row,l+r.selection[1])):this.selection.setSelectionRange(new b(i.row+r.selection[0],r.selection[1],i.row+r.selection[2],r.selection[3]))),m.getDocument().isNewLine(p)){var g=n.getNextLineIndent(c,s.slice(0,i.column),m.getTabString());m.insert({row:i.row+1,column:0},g)}u&&n.autoOutdent(c,m,i.row)},this.onTextInput=function(t){this.keyBinding.onTextInput(t)},this.onCommandKey=function(a,e,t){this.keyBinding.onCommandKey(a,e,t)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption('scrollSpeed',t)},this.getScrollSpeed=function(){return this.getOption('scrollSpeed')},this.setDragDelay=function(t){this.setOption('dragDelay',t)},this.getDragDelay=function(){return this.getOption('dragDelay')},this.setSelectionStyle=function(t){this.setOption('selectionStyle',t)},this.getSelectionStyle=function(){return this.getOption('selectionStyle')},this.setHighlightActiveLine=function(t){this.setOption('highlightActiveLine',t)},this.getHighlightActiveLine=function(){return this.getOption('highlightActiveLine')},this.setHighlightGutterLine=function(t){this.setOption('highlightGutterLine',t)},this.getHighlightGutterLine=function(){return this.getOption('highlightGutterLine')},this.setHighlightSelectedWord=function(t){this.setOption('highlightSelectedWord',t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption('readOnly',t)},this.getReadOnly=function(){return this.getOption('readOnly')},this.setBehavioursEnabled=function(t){this.setOption('behavioursEnabled',t)},this.getBehavioursEnabled=function(){return this.getOption('behavioursEnabled')},this.setWrapBehavioursEnabled=function(t){this.setOption('wrapBehavioursEnabled',t)},this.getWrapBehavioursEnabled=function(){return this.getOption('wrapBehavioursEnabled')},this.setShowFoldWidgets=function(t){this.setOption('showFoldWidgets',t)},this.getShowFoldWidgets=function(){return this.getOption('showFoldWidgets')},this.setFadeFoldWidgets=function(t){this.setOption('fadeFoldWidgets',t)},this.getFadeFoldWidgets=function(){return this.getOption('fadeFoldWidgets')},this.remove=function(a){this.selection.isEmpty()&&('left'==a?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var t=this.session,n=t.getState(e.start.row),i=t.getMode().transformAction(n,'deletion',this,t,e);if(0===e.end.column){var r=t.getTextRange(e);if('\n'==r[r.length-1]){var o=t.getLine(e.end.row);/^\s+$/.test(o)&&(e.end.column=o.length)}}i&&(e=i)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert('\n'),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var a=this.getCursorPosition(),e=a.column;if(0!==e){var t=this.session.getLine(a.row),r,n;e<t.length?(r=t.charAt(e)+t.charAt(e-1),n=new b(a.row,e-1,a.row,e+1)):(r=t.charAt(e-1)+t.charAt(e-2),n=new b(a.row,e-2,a.row,e)),this.session.replace(n,r),this.session.selection.moveToPosition(n.end)}}},this.toLowerCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),t=this.session.getTextRange(e);this.session.replace(e,t.toLowerCase()),this.selection.setSelectionRange(a)},this.toUpperCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),t=this.session.getTextRange(e);this.session.replace(e,t.toUpperCase()),this.selection.setSelectionRange(a)},this.indent=function(){var o=this.session,e=this.getSelectionRange();if(e.start.row<e.end.row){var t=this.$getSelectedRows();return void o.indentRows(t.first,t.last,'\t')}if(e.start.column<e.end.column&&!/^\s+$/.test(o.getTextRange(e))){var t=this.$getSelectedRows();return void o.indentRows(t.first,t.last,'\t')}var n=o.getLine(e.start.row),i=e.start,r=o.getTabSize(),s=o.documentToScreenColumn(i.row,i.column);if(this.session.getUseSoftTabs())var a=r-s%r,l=y.stringRepeat(' ',a);else{for(var a=s%r;' '==n[e.start.column-1]&&a;)e.start.column--,a--;this.selection.setSelectionRange(e),l='\t'}return this.insert(l)},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,'\t')},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){var a=this.$getSelectedRows(),e=this.session,t=[];for(i=a.first;i<=a.last;i++)t.push(e.getLine(i));t.sort(function(n,e){return n.toLowerCase()<e.toLowerCase()?-1:n.toLowerCase()>e.toLowerCase()?1:0});for(var n=new b(0,0,0,0),i=a.first,r;i<=a.last;i++)r=e.getLine(i),n.start.row=i,n.end.row=i,n.end.column=r.length,e.replace(n,t[i-a.first])},this.toggleCommentLines=function(){var n=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(n,this.session,e.first,e.last)},this.toggleBlockComment=function(){var a=this.getCursorPosition(),e=this.session.getState(a.row),t=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,t,a)},this.getNumberAt=function(a,e){var t=/[\-]?[0-9]+(?:\.[0-9]+)?/g;t.lastIndex=0;for(var n=this.session.getLine(a),o;t.lastIndex<e;)if(o=t.exec(n),o.index<=e&&o.index+o[0].length>=e)return{value:o[0],start:o.index,end:o.index+o[0].length};return null},this.modifyNumber=function(d){var e=this.selection.getCursor().row,t=this.selection.getCursor().column,n=new b(e,t-1,e,t),i=this.session.getTextRange(n);if(!isNaN(parseFloat(i))&&isFinite(i)){var p=this.getNumberAt(e,t);if(p){var o=0<=p.value.indexOf('.')?p.start+p.value.indexOf('.')+1:p.end,s=p.start+p.value.length-o,a=parseFloat(p.value);a*=r(10,s),d*=o!==p.end&&t<o?r(10,p.end-t-1):r(10,p.end-t),a+=d,a/=r(10,s);var l=a.toFixed(s),c=new b(e,p.start,e,p.end);this.session.replace(c,l),this.moveCursorTo(e,T(p.start+1,t+l.length-p.value.length))}}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var a=this.selection,e=this.session,t=a.getRange(),n=a.isBackwards();if(t.isEmpty()){var i=t.start.row;e.duplicateLines(i,i)}else{var r=n?t.start:t.end,o=e.insert(r,e.getTextRange(t),!1);t.start=r,t.end=o,a.setSelectionRange(t,n)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(a,e,t){return this.session.moveText(a,e,t)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(g,e){var f=this.selection,r,n;if(!f.inMultiSelectMode||this.inVirtualSelectionMode){var i=f.toOrientedRange();r=this.$getSelectedRows(i),n=this.session.$moveLines(r.first,r.last,e?0:g),e&&-1==g&&(n=0),i.moveBy(n,0),f.fromOrientedRange(i)}else{var o=f.rangeList.ranges;f.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var s=0,a=0,l=o.length,c=0,u;c<l;c++){u=c,o[c].moveBy(s,0),r=this.$getSelectedRows(o[c]);for(var h=r.first,d=r.last;++c<l;){a&&o[c].moveBy(a,0);var m=this.$getSelectedRows(o[c]);if(e&&m.first!=d)break;if(!e&&m.first>d+1)break;d=m.last}for(c--,s=this.session.$moveLines(h,d,e?0:g),e&&-1==g&&(u=c+1);u<=c;)o[u].moveBy(s,0),u++;e||(s=0),a+=s}f.fromOrientedRange(f.ranges[0]),f.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(a,e){var t=this.renderer,n=this.renderer.layerConfig,i=a*S(n.height/n.lineHeight);this.$blockScrolling++,!0===e?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):!1==e&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection()),this.$blockScrolling--;var r=t.scrollTop;t.scrollBy(0,i*n.lineHeight),null!=e&&t.scrollCursorIntoView(null,.5),t.animateScrolling(r)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(a,e,t,n){this.renderer.scrollToLine(a,e,t,n)},this.centerSelection=function(){var n=this.getSelectionRange(),e={row:S(n.start.row+(n.end.row-n.start.row)/2),column:S(n.start.column+(n.end.column-n.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(n,e){this.selection.moveCursorTo(n,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(m,e){var t=this.getCursorPosition(),n=new C(this.session,t.row,t.column),i=n.getCurrentToken(),r=i||n.stepForward();if(r){var E=!1,_={},c=t.column-r.start,u={")":'(',"(":'(',"]":'[',"[":'[',"{":'{',"}":'{'},h,s;do{if(r.value.match(/[{}()\[\]]/g)){for(;c<r.value.length&&!E;c++)if(u[r.value[c]])switch(s=u[r.value[c]]+'.'+r.type.replace('rparen','lparen'),isNaN(_[s])&&(_[s]=0),r.value[c]){case'(':case'[':case'{':_[s]++;break;case')':case']':case'}':_[s]--,-1===_[s]&&(h='bracket',E=!0);}}else r&&-1!==r.type.indexOf('tag-name')&&(isNaN(_[r.value])&&(_[r.value]=0),'<'===i.value?_[r.value]++:'</'===i.value&&_[r.value]--,-1===_[r.value]&&(h='tag',E=!0));E||(i=r,r=n.stepForward(),c=0)}while(r&&!E);if(h){var a,d;if('bracket'===h)(a=this.session.getBracketRange(t))||(a=new b(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+c-1,n.getCurrentTokenRow(),n.getCurrentTokenColumn()+c-1),d=a.start,(e||d.row===t.row&&2>g(d.column-t.column))&&(a=this.session.getBracketRange(d)));else if('tag'===h){if(!r||-1===r.type.indexOf('tag-name'))return;var p=r.value;if(a=new b(n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2,n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2),0===a.compare(t.row,t.column)){E=!1;do r=i,(i=n.stepBackward())&&(-1!==i.type.indexOf('tag-close')&&a.setEnd(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1),r.value===p&&-1!==r.type.indexOf('tag-name')&&('<'===i.value?_[p]++:'</'===i.value&&_[p]--,0===_[p]&&(E=!0)));while(i&&!E)}r&&r.type.indexOf('tag-name')&&(d=a.start,d.row==t.row&&2>g(d.column-t.column)&&(d=a.end))}d=a&&a.cursor||d,d&&(m?a&&e?this.selection.setRange(a):a&&a.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))}}},this.gotoLine=function(a,e,t){this.selection.clearSelection(),this.session.unfold({row:a-1,column:e||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(a-1,e||0),this.$blockScrolling-=1,this.isRowFullyVisible(a-1)||this.scrollToLine(a-1,!0,t)},this.navigateTo=function(n,e){this.selection.moveTo(n,e)},this.navigateUp=function(n){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var a=this.selection.anchor.getPosition();return this.moveCursorToPosition(a)}this.selection.clearSelection(),this.selection.moveCursorBy(-n||-1,0)},this.navigateDown=function(n){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(n||1,0)},this.navigateLeft=function(n){if(this.selection.isEmpty())for(n=n||1;n--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(n){if(this.selection.isEmpty())for(n=n||1;n--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(a,e){e&&this.$search.set(e);var t=this.$search.find(this.session),n=0;return t?(this.$tryReplace(t,a)&&(n=1),null!==t&&(this.selection.setSelectionRange(t),this.renderer.scrollSelectionIntoView(t.start,t.end)),n):n},this.replaceAll=function(a,e){e&&this.$search.set(e);var t=this.$search.findAll(this.session),n=0;if(!t.length)return n;this.$blockScrolling+=1;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var r=t.length-1;0<=r;--r)this.$tryReplace(t[r],a)&&n++;return this.selection.setSelectionRange(i),this.$blockScrolling-=1,n},this.$tryReplace=function(a,e){var t=this.session.getTextRange(a);return e=this.$search.replace(t,e),null===e?null:(a.end=this.session.replace(a,e),a)},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(a,i,t){i||(i={}),'string'==typeof a||a instanceof RegExp?i.needle=a:'object'==typeof a&&_.mixin(i,a);var n=this.selection.getRange();null==i.needle&&(a=this.session.getTextRange(n)||this.$search.$options.needle,a||(n=this.session.getWordRange(n.start.row,n.start.column),a=this.session.getTextRange(n)),this.$search.set({needle:a})),this.$search.set(i),i.start||this.$search.set({start:n});var s=this.$search.find(this.session);return i.preventScroll?s:s?(this.revealRange(s,t),s):(i.backwards?n.start=n.end:n.end=n.start,void this.selection.setRange(n))},this.findNext=function(n,e){this.find({skipCurrent:!0,backwards:!1},n,e)},this.findPrevious=function(n,e){this.find(n,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(a,e){this.$blockScrolling+=1,this.session.unfold(a),this.selection.setSelectionRange(a),this.$blockScrolling-=1;var t=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(a.start,a.end,.5),!1!==e&&this.renderer.animateScrolling(t)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal('destroy',this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(l){if(l){var d=this,n=!1,i;this.$scrollAnchor||(this.$scrollAnchor=document.createElement('div'));var t=this.$scrollAnchor;t.style.cssText='position:absolute',this.container.insertBefore(t,this.container.firstChild);var r=this.on('changeSelection',function(){n=!0}),o=this.renderer.on('beforeRender',function(){n&&(i=d.renderer.container.getBoundingClientRect())}),s=this.renderer.on('afterRender',function(){if(n&&i&&(d.isFocused()||d.searchBox&&d.searchBox.isFocused())){var r=d.renderer,e=r.$cursorLayer.$pixelPos,o=r.layerConfig,s=e.top-o.offset;n=0<=e.top&&0>s+i.top||!(e.top<o.height&&e.top+i.top+o.lineHeight>window.innerHeight)&&null,null!=n&&(t.style.top=s+'px',t.style.left=e.left+'px',t.style.height=o.lineHeight+'px',t.scrollIntoView(n)),n=i=null}});this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off('changeSelection',r),this.renderer.off('afterRender',s),this.renderer.off('beforeRender',o))}}},this.$resetCursorStyle=function(){var n=this.$cursorStyle||'ace',e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(n)),e.isBlinking=!this.$readOnly&&'wide'!=n,i.setCssClass(e.element,'ace_slim-cursors',/slim/.test(n)))}}.call(f.prototype),m.defineOptions(f.prototype,'editor',{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal('changeSelectionStyle',{data:t})},initialValue:'line'},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(){this.$resetCursorStyle()},values:['ace','slim','smooth','wide'],initialValue:'ace'},mergeUndoDeltas:{values:[!1,!0,'always'],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.keybindingId},handlesSet:!0},hScrollBarAlwaysVisible:'renderer',vScrollBarAlwaysVisible:'renderer',highlightGutterLine:'renderer',animatedScroll:'renderer',showInvisibles:'renderer',showPrintMargin:'renderer',printMarginColumn:'renderer',printMargin:'renderer',fadeFoldWidgets:'renderer',showFoldWidgets:'renderer',showLineNumbers:'renderer',showGutter:'renderer',displayIndentGuides:'renderer',fontSize:'renderer',fontFamily:'renderer',maxLines:'renderer',minLines:'renderer',scrollPastEnd:'renderer',fixedWidthGutter:'renderer',theme:'renderer',scrollSpeed:'$mouseHandler',dragDelay:'$mouseHandler',dragEnabled:'$mouseHandler',focusTimout:'$mouseHandler',tooltipFollowsMouse:'$mouseHandler',firstLineNumber:'session',overwrite:'session',newLineMode:'session',useWorker:'session',useSoftTabs:'session',tabSize:'session',wrap:'session',indentedSoftWrap:'session',foldStyle:'session',mode:'session'}),e.Editor=f}),ace.define('ace/undomanager',['require','exports','module'],function(n,e){'use strict';var t=function(){this.reset()};(function(){function e(t){return{action:t.action,start:t.start,end:t.end,lines:1==t.lines.length?null:t.lines,text:1==t.lines.length?t.lines[0]:null}}function t(t){return{action:t.action,start:t.start,end:t.end,lines:t.lines||[t.text]}}function n(l,e){for(var t=Array(l.length),d=0;d<l.length;d++){for(var i=l[d],r={group:i.group,deltas:Array(i.length)},o=0,s;o<i.deltas.length;o++)s=i.deltas[o],r.deltas[o]=e(s);t[d]=r}return t}this.execute=function(n){var e=n.args[0];this.$doc=n.args[1],n.merge&&this.hasUndo()&&(this.dirtyCounter--,e=this.$undoStack.pop().concat(e)),this.$undoStack.push(e),this.$redoStack=[],0>this.dirtyCounter&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(a){var e=this.$undoStack.pop(),t=null;return e&&(t=this.$doc.undoChanges(e,a),this.$redoStack.push(e),this.dirtyCounter--),t},this.redo=function(a){var e=this.$redoStack.pop(),t=null;return e&&(t=this.$doc.redoChanges(this.$deserializeDeltas(e),a),this.$undoStack.push(e),this.dirtyCounter++),t},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return 0<this.$undoStack.length},this.hasRedo=function(){return 0<this.$redoStack.length},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter},this.$serializeDeltas=function(a){return n(a,e)},this.$deserializeDeltas=function(a){return n(a,t)}}).call(t.prototype),e.UndoManager=t}),ace.define('ace/layer/gutter',['require','exports','module','ace/lib/dom','ace/lib/oop','ace/lib/lang','ace/lib/event_emitter'],function(n,e){'use strict';var _=n('../lib/dom'),t=n('../lib/oop'),l=n('../lib/lang'),r=n('../lib/event_emitter').EventEmitter,o=function(t){this.element=_.createElement('div'),this.element.className='ace_layer ace_gutter-layer',t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){t.implement(this,r),this.setSession=function(t){this.session&&this.session.removeEventListener('change',this.$updateAnnotations),this.session=t,t&&t.on('change',this.$updateAnnotations)},this.addGutterDecoration=function(n,e){window.console&&console.warn&&console.warn('deprecated use session.addGutterDecoration'),this.session.addGutterDecoration(n,e)},this.removeGutterDecoration=function(n,e){window.console&&console.warn&&console.warn('deprecated use session.removeGutterDecoration'),this.session.removeGutterDecoration(n,e)},this.setAnnotations=function(o){this.$annotations=[];for(var e=0;e<o.length;e++){var t=o[e],n=t.row,i=this.$annotations[n];i||(i=this.$annotations[n]={text:[]});var r=t.text;r=r?l.escapeHTML(r):t.html||'',-1===i.text.indexOf(r)&&i.text.push(r);var s=t.type;'error'==s?i.className=' ace_error':'warning'==s&&' ace_error'!=i.className?i.className=' ace_warning':'info'!=s||i.className||(i.className=' ace_info')}},this.$updateAnnotations=function(a){if(this.$annotations.length){var e=a.start.row,t=a.end.row-e;if(0==t);else if('remove'==a.action)this.$annotations.splice(e,t+1,null);else{var n=Array(t+1);n.unshift(e,1),this.$annotations.splice.apply(this.$annotations,n)}}},this.update=function(i){for(var e=this.session,t=i.firstRow,n=x(i.lastRow+i.gutterOffset,e.getLength()-1),r=e.getNextFoldLine(t),o=r?r.start.row:1/0,s=this.$showFoldWidgets&&e.foldWidgets,a=e.$breakpoints,l=e.$decorations,c=e.$firstLineNumber,u=0,h=e.gutterRenderer||this.$renderer,d=null,m=-1,p=t;;){if(p>o&&(p=r.end.row+1,r=e.getNextFoldLine(p,r),o=r?r.start.row:1/0),p>n){for(;this.$cells.length>m+1;)d=this.$cells.pop(),this.element.removeChild(d.element);break}d=this.$cells[++m],d||(d={element:null,textNode:null,foldWidget:null},d.element=_.createElement('div'),d.textNode=document.createTextNode(''),d.element.appendChild(d.textNode),this.element.appendChild(d.element),this.$cells[m]=d);var f='ace_gutter-cell ';a[p]&&(f+=a[p]),l[p]&&(f+=l[p]),this.$annotations[p]&&(f+=this.$annotations[p].className),d.element.className!=f&&(d.element.className=f);var g=e.getRowLength(p)*i.lineHeight+'px';if(g!=d.element.style.height&&(d.element.style.height=g),s){var C=s[p];null==C&&(C=s[p]=e.getFoldWidget(p))}if(C){d.foldWidget||(d.foldWidget=_.createElement('span'),d.element.appendChild(d.foldWidget));var f='ace_fold-widget ace_'+C;f+='start'==C&&p==o&&p<r.end.row?' ace_closed':' ace_open',d.foldWidget.className!=f&&(d.foldWidget.className=f);var g=i.lineHeight+'px';d.foldWidget.style.height!=g&&(d.foldWidget.style.height=g)}else d.foldWidget&&(d.element.removeChild(d.foldWidget),d.foldWidget=null);var E=u=h?h.getText(e,p):p+c;E!==d.textNode.data&&(d.textNode.data=E),p++}this.element.style.height=i.minHeight+'px',(this.$fixedWidth||e.$useWrapMode)&&(u=e.getLength()+c);var A=h?h.getWidth(e,u,i):u.toString().length*i.characterWidth,b=this.$padding||this.$computePadding();(A+=b.left+b.right)===this.gutterWidth||isNaN(A)||(this.gutterWidth=A,this.element.style.width=y(this.gutterWidth)+'px',this._emit('changeGutterWidth',A))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer='',this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return''},getText:function(){return''}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?_.addCssClass(this.element,'ace_folding-enabled'):_.removeCssClass(this.element,'ace_folding-enabled'),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=_.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(t.paddingLeft)+1||0,this.$padding.right=parseInt(t.paddingRight)||0,this.$padding},this.getRegion=function(a){var e=this.$padding||this.$computePadding(),t=this.element.getBoundingClientRect();return a.x<e.left+t.left?'markers':this.$showFoldWidgets&&a.x>t.right-e.right?'foldWidgets':void 0}}).call(o.prototype),e.Gutter=o}),ace.define('ace/layer/marker',['require','exports','module','ace/range','ace/lib/dom'],function(n,e){'use strict';var g=n('../range').Range,t=n('../lib/dom'),a=function(n){this.element=t.createElement('div'),this.element.className='ace_layer ace_marker-layer',n.appendChild(this.element)};(function(){function e(a,r,t,n){return(a?1:0)|(r?2:0)|(t?4:0)|(n?8:0)}this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.update=function(a){if(a){this.config=a;var e=[];for(var t in this.markers){var n=this.markers[t];if(n.range){var i=n.range.clipRows(a.firstRow,a.lastRow);if(!i.isEmpty())if(i=i.toScreenRange(this.session),n.renderer){var r=this.$getTop(i.start.row,a),o=this.$padding+i.start.column*a.characterWidth;n.renderer(e,i,o,r,a)}else'fullLine'==n.type?this.drawFullLineMarker(e,i,n.clazz,a):'screenLine'==n.type?this.drawScreenLineMarker(e,i,n.clazz,a):i.isMultiLine()?'text'==n.type?this.drawTextMarker(e,i,n.clazz,a):this.drawMultiLineMarker(e,i,n.clazz,a):this.drawSingleLineMarker(e,i,n.clazz+' ace_start ace_br15',a)}else n.update(e,this,this.session,a)}this.element.innerHTML=e.join('')}},this.$getTop=function(n,e){return(n-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(i,t,n,r,o){for(var s=this.session,a=t.start.row,l=t.end.row,c=a,u=0,h=0,d=s.getScreenLastRowColumn(c),m=new g(c,t.start.column,c,h);c<=l;c++)m.start.row=m.end.row=c,m.start.column=c==a?t.start.column:s.getRowWrapIndent(c),m.end.column=d,u=h,h=d,d=c+1<l?s.getScreenLastRowColumn(c+1):c==l?0:t.end.column,this.drawSingleLineMarker(i,m,n+(c==a?' ace_start':'')+' ace_br'+e(c==a||c==a+1&&t.start.column,u<h,h>d,c==l),r,c==l?0:1,o)},this.drawMultiLineMarker=function(d,e,t,n,i){var r=this.$padding,o=n.lineHeight,s=this.$getTop(e.start.row,n),a=r+e.start.column*n.characterWidth;i=i||'',d.push('<div class=\'',t,' ace_br1 ace_start\' style=\'','height:',o,'px;','right:0;','top:',s,'px;','left:',a,'px;',i,'\'></div>'),s=this.$getTop(e.end.row,n);var l=e.end.column*n.characterWidth;if(d.push('<div class=\'',t,' ace_br12\' style=\'','height:',o,'px;','width:',l,'px;','top:',s,'px;','left:',r,'px;',i,'\'></div>'),!(0>=(o=(e.end.row-e.start.row-1)*n.lineHeight))){s=this.$getTop(e.start.row+1,n);var c=(e.start.column?1:0)|(e.end.column?0:8);d.push('<div class=\'',t,c?' ace_br'+c:'','\' style=\'','height:',o,'px;','right:0;','top:',s,'px;','left:',r,'px;',i,'\'></div>')}},this.drawSingleLineMarker=function(d,e,t,n,i,r){var o=n.lineHeight,s=(e.end.column+(i||0)-e.start.column)*n.characterWidth,a=this.$getTop(e.start.row,n),l=this.$padding+e.start.column*n.characterWidth;d.push('<div class=\'',t,'\' style=\'','height:',o,'px;','width:',s,'px;','top:',a,'px;','left:',l,'px;',r||'','\'></div>')},this.drawFullLineMarker=function(a,e,t,n,i){var r=this.$getTop(e.start.row,n),o=n.lineHeight;e.start.row!=e.end.row&&(o+=this.$getTop(e.end.row,n)-r),a.push('<div class=\'',t,'\' style=\'','height:',o,'px;','top:',r,'px;','left:0;right:0;',i||'','\'></div>')},this.drawScreenLineMarker=function(a,e,t,n,i){var r=this.$getTop(e.start.row,n),o=n.lineHeight;a.push('<div class=\'',t,'\' style=\'','height:',o,'px;','top:',r,'px;','left:0;right:0;',i||'','\'></div>')}}).call(a.prototype),e.Marker=a}),ace.define('ace/layer/text',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/lib/lang','ace/lib/useragent','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('../lib/oop'),p=n('../lib/dom'),m=n('../lib/lang'),r=(n('../lib/useragent'),n('../lib/event_emitter').EventEmitter),o=function(t){this.element=p.createElement('div'),this.element.className='ace_layer ace_text-layer',t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){t.implement(this,r),this.EOF_CHAR='\xB6',this.EOL_CHAR_LF='\xAC',this.EOL_CHAR_CRLF='\xA4',this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR='\u2014',this.SPACE_CHAR='\xB7',this.$padding=0,this.$updateEolChar=function(){var t='\n'==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(t){this.$padding=t,this.element.style.padding='0 '+t+'px'},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on('changeCharacterSize',function(t){this._signal('changeCharacterSize',t)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var o=this.session.getTabSize();this.tabSize=o;for(var e=this.$tabStrings=[0],t=1;t<o+1;t++)this.showInvisibles?e.push('<span class=\'ace_invisible ace_invisible_tab\'>'+m.stringRepeat(this.TAB_CHAR,t)+'</span>'):e.push(m.stringRepeat(' ',t));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var n='ace_indent-guide',i='',r='';if(this.showInvisibles){n+=' ace_invisible',i=' ace_invisible_space',r=' ace_invisible_tab';var s=m.stringRepeat(this.SPACE_CHAR,this.tabSize),a=m.stringRepeat(this.TAB_CHAR,this.tabSize)}else var s=m.stringRepeat(' ',this.tabSize),a=s;this.$tabStrings[' ']='<span class=\''+n+i+'\'>'+s+'</span>',this.$tabStrings['\t']='<span class=\''+n+r+'\'>'+a+'</span>'}},this.updateLines=function(d,e,t){this.config.lastRow==d.lastRow&&this.config.firstRow==d.firstRow||this.scrollLines(d),this.config=d;for(var n=T(e,d.firstRow),i=x(t,d.lastRow),r=this.element.childNodes,o=0,s=d.firstRow,a;s<n;s++){if(a=this.session.getFoldLine(s),a){if(a.containsRow(n)){n=a.start.row;break}s=a.end.row}o++}for(var s=n,a=this.session.getNextFoldLine(s),l=a?a.start.row:1/0;;){if(s>l&&(s=a.end.row+1,a=this.session.getNextFoldLine(s,a),l=a?a.start.row:1/0),s>i)break;var c=r[o++];if(c){var p=[];this.$renderLine(p,s,!this.$useLineGroups(),s==l&&a),c.style.height=d.lineHeight*this.session.getRowLength(s)+'px',c.innerHTML=p.join('')}s++}},this.scrollLines=function(a){var e=this.config;if(this.config=a,!e||e.lastRow<a.firstRow)return this.update(a);if(a.lastRow<e.firstRow)return this.update(a);var o=this.element;if(e.firstRow<a.firstRow)for(var n=this.session.getFoldedRowCount(e.firstRow,a.firstRow-1);0<n;n--)o.removeChild(o.firstChild);if(e.lastRow>a.lastRow)for(var n=this.session.getFoldedRowCount(a.lastRow+1,e.lastRow);0<n;n--)o.removeChild(o.lastChild);if(a.firstRow<e.firstRow){var i=this.$renderLinesFragment(a,a.firstRow,e.firstRow-1);o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i)}if(a.lastRow>e.lastRow){var i=this.$renderLinesFragment(a,e.lastRow+1,a.lastRow);o.appendChild(i)}},this.$renderLinesFragment=function(r,e,t){for(var n=this.element.ownerDocument.createDocumentFragment(),i=e,o=this.session.getNextFoldLine(i),s=o?o.start.row:1/0;;){if(i>s&&(i=o.end.row+1,o=this.session.getNextFoldLine(i,o),s=o?o.start.row:1/0),i>t)break;var a=p.createElement('div'),l=[];if(this.$renderLine(l,i,!1,i==s&&o),a.innerHTML=l.join(''),this.$useLineGroups())a.className='ace_line_group',n.appendChild(a),a.style.height=r.lineHeight*this.session.getRowLength(i)+'px';else for(;a.firstChild;)n.appendChild(a.firstChild);i++}return n},this.update=function(a){this.config=a;for(var e=[],t=a.firstRow,n=a.lastRow,i=t,r=this.session.getNextFoldLine(i),o=r?r.start.row:1/0;;){if(i>o&&(i=r.end.row+1,r=this.session.getNextFoldLine(i,r),o=r?r.start.row:1/0),i>n)break;this.$useLineGroups()&&e.push('<div class=\'ace_line_group\' style=\'height:',a.lineHeight*this.session.getRowLength(i),'px\'>'),this.$renderLine(e,i,!1,i==o&&r),this.$useLineGroups()&&e.push('</div>'),i++}this.element.innerHTML=e.join('')},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(a,o,e,t){var d=this,n=/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,r=t.replace(n,function(t,e,n,a){if(e)return d.showInvisibles?'<span class=\'ace_invisible ace_invisible_space\'>'+m.stringRepeat(d.SPACE_CHAR,t.length)+'</span>':t;if('&'==t)return'&#38;';if('<'==t)return'&#60;';if('>'==t)return'&#62;';if('\t'==t){var r=d.session.getScreenTabSize(o+a);return o+=r-1,d.$tabStrings[r]}if('\u3000'==t){var i=d.showInvisibles?'ace_cjk ace_invisible ace_invisible_space':'ace_cjk',s=d.showInvisibles?d.SPACE_CHAR:'';return o+=1,'<span class=\''+i+'\' style=\'width:'+2*d.config.characterWidth+'px\'>'+s+'</span>'}return n?'<span class=\'ace_invisible ace_invisible_space ace_invalid\'>'+d.SPACE_CHAR+'</span>':(o+=1,'<span class=\'ace_cjk\' style=\'width:'+2*d.config.characterWidth+'px\'>'+t+'</span>')});if(this.$textToken[e.type])a.push(r);else{var i='ace_'+e.type.replace(/\./g,' ace_'),s='';'fold'==e.type&&(s=' style=\'width:'+e.value.length*this.config.characterWidth+'px;\' '),a.push('<span class=\'',i,'\'',s,'>',r,'</span>')}return o+t.length},this.renderIndentGuide=function(a,e,t){var n=e.search(this.$indentGuideRe);return 0>=n||n>=t?e:' '==e[0]?(n-=n%this.tabSize,a.push(m.stringRepeat(this.$tabStrings[' '],n/this.tabSize)),e.substr(n)):'\t'==e[0]?(a.push(m.stringRepeat(this.$tabStrings['\t'],n)),e.substr(n)):e},this.$renderWrappedLine=function(o,e,t,n){for(var i=0,r=0,s=t[0],a=0,l=0;l<e.length;l++){var c=e[l],p=c.value;if(0==l&&this.displayIndentGuides){if(i=p.length,!(p=this.renderIndentGuide(o,p,s)))continue;i-=p.length}if(i+p.length<s)a=this.$renderToken(o,a,c,p),i+=p.length;else{for(;i+p.length>=s;)a=this.$renderToken(o,a,c,p.substring(0,s-i)),p=p.substring(s-i),i=s,n||o.push('</div>','<div class=\'ace_line\' style=\'height:',this.config.lineHeight,'px\'>'),o.push(m.stringRepeat('\xA0',t.indent)),r++,a=0,s=t[r]||d;0!=p.length&&(i+=p.length,a=this.$renderToken(o,a,c,p))}}},this.$renderSimpleLine=function(a,e){var t=0,n=e[0],i=n.value;this.displayIndentGuides&&(i=this.renderIndentGuide(a,i)),i&&(t=this.$renderToken(a,t,n,i));for(var r=1;r<e.length;r++)n=e[r],i=n.value,t=this.$renderToken(a,t,n,i)},this.$renderLine=function(a,e,t,n){if(n||0==n||(n=this.session.getFoldLine(e)),n)var i=this.$getFoldLineTokens(e,n);else var i=this.session.getTokens(e);if(t||a.push('<div class=\'ace_line\' style=\'height:',this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(e)),'px\'>'),i.length){var r=this.session.getRowSplitData(e);r&&r.length?this.$renderWrappedLine(a,i,r,t):this.$renderSimpleLine(a,i)}this.showInvisibles&&(n&&(e=n.end.row),a.push('<span class=\'ace_invisible ace_invisible_eol\'>',e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,'</span>')),t||a.push('</div>')},this.$getFoldLineTokens=function(a,e){function n(a,e,t){for(var r=0,i=0;i+a[r].value.length<e;)if(i+=a[r].value.length,++r==a.length)return;if(i!=e){var o=a[r].value.substring(e-i);o.length>t-e&&(o=o.substring(0,t-e)),c.push({type:a[r].type,value:o}),i=e+o.length,r+=1}for(;i<t&&r<a.length;){var o=a[r].value;o.length+i>t?c.push({type:a[r].type,value:o.substring(0,t-i)}):c.push(a[r]),i+=o.length,r+=1}}var d=this.session,c=[],r=d.getTokens(a);return e.walk(function(o,i,t,s,a){null==o?(a&&(r=d.getTokens(i)),r.length&&n(r,s,t)):c.push({type:'fold',value:o})},e.end.row,this.session.getLine(e.end.row).length),c},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(o.prototype),e.Text=o}),ace.define('ace/layer/cursor',['require','exports','module','ace/lib/dom'],function(n,e){'use strict';var a=n('../lib/dom'),t=function(t){this.element=a.createElement('div'),this.element.className='ace_layer ace_cursor-layer',t.appendChild(this.element),void 0==r&&(r=!('opacity'in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),a.addCssClass(this.element,'ace_hidden-cursors'),this.$updateCursors=(r?this.$updateVisibility:this.$updateOpacity).bind(this)},r;(function(){this.$updateVisibility=function(a){for(var e=this.cursors,t=e.length;t--;)e[t].style.visibility=a?'':'hidden'},this.$updateOpacity=function(a){for(var e=this.cursors,t=e.length;t--;)e[t].style.opacity=a?'':'0'},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t==this.smoothBlinking||r||(this.smoothBlinking=t,a.setCssClass(this.element,'ace_smooth-blinking',t),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var t=a.createElement('div');return t.className='ace_cursor',this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(1<this.cursors.length){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,a.addCssClass(this.element,'ace_hidden-cursors'),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,a.removeCssClass(this.element,'ace_hidden-cursors'),this.restartTimer()},this.restartTimer=function(){var n=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&a.removeCssClass(this.element,'ace_smooth-blinking'),n(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){a.addCssClass(this.element,'ace_smooth-blinking')}.bind(this));var e=function(){this.timeoutId=setTimeout(function(){n(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){n(!0),e()},this.blinkInterval),e()}},this.getPixelPosition=function(a,e){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var t=this.session.documentToScreenPosition(a);return{left:this.$padding+t.column*this.config.characterWidth,top:(t.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight}},this.update=function(l){this.config=l;var e=this.session.$selectionMarkers,t=0,n=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]);for(var t=0,i=e.length,r;t<i;t++)if(r=this.getPixelPosition(e[t].cursor,!0),!((r.top>l.height+l.offset||0>r.top)&&1<t)){var o=(this.cursors[n++]||this.addCursor()).style;this.drawCursor?this.drawCursor(o,r,l,e[t],this.session):(o.left=r.left+'px',o.top=r.top+'px',o.width=l.characterWidth+'px',o.height=l.lineHeight+'px')}for(;this.cursors.length>n;)this.removeCursor();var s=this.session.getOverwrite();this.$setOverwrite(s),this.$pixelPos=r,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?a.addCssClass(this.element,'ace_overwrite-cursors'):a.removeCssClass(this.element,'ace_overwrite-cursors'))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(t.prototype),e.Cursor=t}),ace.define('ace/scrollbar',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/lib/event','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('./lib/oop'),i=n('./lib/dom'),r=n('./lib/event'),o=n('./lib/event_emitter').EventEmitter,s=function(t){this.element=i.createElement('div'),this.element.className='ace_scrollbar ace_scrollbar'+this.classSuffix,this.inner=i.createElement('div'),this.inner.className='ace_scrollbar-inner',this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addListener(this.element,'scroll',this.onScroll.bind(this)),r.addListener(this.element,'mousedown',r.preventDefault)};(function(){t.implement(this,o),this.setVisible=function(t){this.element.style.display=t?'':'none',this.isVisible=t,this.coeff=1}}).call(s.prototype);var a=function(n,e){s.call(this,n),this.scrollTop=0,this.scrollHeight=0,e.$scrollbarWidth=this.width=i.scrollbarWidth(n.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+'px',this.$minWidth=0};t.inherits(a,s),function(){this.classSuffix='-v',this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var t=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-t)/(this.coeff-t)}this._emit('scroll',{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return T(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(t){this.element.style.height=t+'px'},this.setInnerHeight=this.setScrollHeight=function(t){this.scrollHeight=t,32768<t?(this.coeff=32768/t,t=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=t+'px'},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=t,this.element.scrollTop=t*this.coeff)}}.call(a.prototype);var l=function(n,e){s.call(this,n),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+'px'};t.inherits(l,s),function(){this.classSuffix='-h',this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit('scroll',{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+'px'},this.setInnerWidth=function(t){this.inner.style.width=t+'px'},this.setScrollWidth=function(t){this.inner.style.width=t+'px'},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}.call(l.prototype),e.ScrollBar=a,e.ScrollBarV=a,e.ScrollBarH=l,e.VScrollBar=a,e.HScrollBar=l}),ace.define('ace/renderloop',['require','exports','module','ace/lib/event'],function(n,e){'use strict';var a=n('./lib/event'),t=function(n,e){this.onRender=n,this.pending=!1,this.changes=0,this.window=e||window};(function(){this.schedule=function(n){if(this.changes|=n,!this.pending&&this.changes){this.pending=!0;var r=this;a.nextFrame(function(){r.pending=!1;for(var t;t=r.changes;)r.changes=0,r.onRender(t)},this.window)}}}).call(t.prototype),e.RenderLoop=t}),ace.define('ace/layer/font_metrics',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/lib/lang','ace/lib/useragent','ace/lib/event_emitter'],function(n,e){var t=n('../lib/oop'),i=n('../lib/dom'),r=n('../lib/lang'),o=n('../lib/useragent'),s=n('../lib/event_emitter').EventEmitter,a=0,l=e.FontMetrics=function(t){this.el=i.createElement('div'),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement('div'),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement('div'),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),a||this.$testFractionalRect(),this.$measureNode.innerHTML=r.stringRepeat('X',a),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){t.implement(this,s),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var n=i.createElement('div');this.$setMeasureNodeStyles(n.style),n.style.width='0.2px',document.documentElement.appendChild(n);var e=n.getBoundingClientRect().width;a=0<e&&1>e?50:100,n.parentNode.removeChild(n)},this.$setMeasureNodeStyles=function(n,e){n.width=n.height='auto',n.left=n.top='0px',n.visibility='hidden',n.position='absolute',n.whiteSpace='pre',8>o.isIE?n['font-family']='inherit':n.font='inherit',n.overflow=e?'hidden':'visible'},this.checkForSizeChanges=function(){var n=this.$measureSizes();if(n&&(this.$characterSize.width!==n.width||this.$characterSize.height!==n.height)){this.$measureNode.style.fontWeight='bold';var a=this.$measureSizes();this.$measureNode.style.fontWeight='',this.$characterSize=n,this.charSizes=Object.create(null),this.allowBoldFonts=a&&a.width===n.width&&a.height===n.height,this._emit('changeCharacterSize',{data:n})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=setInterval(function(){t.checkForSizeChanges()},500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50==a){var n=null;try{n=this.$measureNode.getBoundingClientRect()}catch(e){n={width:0,height:0}}var e={height:n.height,width:n.width/a}}else var e={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/a};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(t){return this.$main.innerHTML=r.stringRepeat(t,a),this.$main.getBoundingClientRect().width/a},this.getCharacterWidth=function(n){var e=this.charSizes[n];return void 0===e&&(e=this.charSizes[n]=this.$measureCharWidth(n)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(l.prototype)}),ace.define('ace/virtual_renderer',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/config','ace/lib/useragent','ace/layer/gutter','ace/layer/marker','ace/layer/text','ace/layer/cursor','ace/scrollbar','ace/scrollbar','ace/renderloop','ace/layer/font_metrics','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('./lib/oop'),E=n('./lib/dom'),_=n('./config'),o=n('./lib/useragent'),s=n('./layer/gutter').Gutter,a=n('./layer/marker').Marker,l=n('./layer/text').Text,c=n('./layer/cursor').Cursor,u=n('./scrollbar').HScrollBar,h=n('./scrollbar').VScrollBar,d=n('./renderloop').RenderLoop,m=n('./layer/font_metrics').FontMetrics,i=n('./lib/event_emitter').EventEmitter;E.importCssString('.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_text-input-ios {position: absolute !important;top: -100000px !important;left: -100000px !important;}','ace_editor.css');var p=function(r,e){var t=this;this.container=r||E.createElement('div'),this.$keepTextAreaAtCursor=!o.isOldIE,E.addCssClass(this.container,'ace_editor'),this.setTheme(e),this.$gutter=E.createElement('div'),this.$gutter.className='ace_gutter',this.container.appendChild(this.$gutter),this.scroller=E.createElement('div'),this.scroller.className='ace_scroller',this.container.appendChild(this.scroller),this.content=E.createElement('div'),this.content.className='ace_content',this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on('changeGutterWidth',this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var n=this.$textLayer=new l(this.content);this.canvas=n.element,this.$markerFront=new a(this.content),this.$cursorLayer=new c(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.addEventListener('scroll',function(n){t.$scrollAnimation||t.session.setScrollTop(n.data-t.scrollMargin.top)}),this.scrollBarH.addEventListener('scroll',function(n){t.$scrollAnimation||t.session.setScrollLeft(n.data-t.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new m(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener('changeCharacterSize',function(n){t.updateCharacterSize(),t.onResize(!0,t.gutterWidth,t.$size.width,t.$size.height),t._signal('changeCharacterSize',n)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),_.resetOptions(this),_._emit('renderer',this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,t.implement(this,i),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle('ace_nobold',!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(t){this.session&&this.session.doc.off('changeNewLineMode',this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&0>=t.getScrollTop()&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on('changeNewLineMode',this.onChangeNewLineMode))},this.updateLines=function(a,r,o){if(void 0===r&&(r=1/0),this.$changedLines?(this.$changedLines.firstRow>a&&(this.$changedLines.firstRow=a),this.$changedLines.lastRow<r&&(this.$changedLines.lastRow=r)):this.$changedLines={firstRow:a,lastRow:r},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!o)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(a,e,t,s){if(!(2<this.resizing)){0<this.resizing?this.resizing++:this.resizing=a?1:0;var l=this.container;s||(s=l.clientHeight||l.scrollHeight),t||(t=l.clientWidth||l.scrollWidth);var r=this.$updateCachedSize(a,e,t,s);if(!this.$size.scrollerHeight||!t&&!s)return this.resizing=0;a&&(this.$gutterLayer.$padding=null),a?this.$renderChanges(r|this.$changes,!0):this.$loop.schedule(r|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(a,e,t,l){l-=this.$extraHeight||0;var d=0,r=this.$size,o={width:r.width,height:r.height,scrollerHeight:r.scrollerHeight,scrollerWidth:r.scrollerWidth};return l&&(a||r.height!=l)&&(r.height=l,d|=this.CHANGE_SIZE,r.scrollerHeight=r.height,this.$horizScroll&&(r.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+'px',d|=this.CHANGE_SCROLL),t&&(a||r.width!=t)&&(d|=this.CHANGE_SIZE,r.width=t,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,this.scrollBarH.element.style.left=this.scroller.style.left=e+'px',r.scrollerWidth=T(0,t-e-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+'px',this.scroller.style.bottom=this.scrollBarH.getHeight()+'px',(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||a)&&(d|=this.CHANGE_FULL)),r.$dirty=!t||!l,d&&this._signal('resize',o),d},this.onGutterResize=function(){var t=this.$showGutter?this.$gutter.offsetWidth:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var n=this.$size.scrollerWidth-2*this.$padding,e=S(n/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption('animatedScroll',t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption('showInvisibles',t)},this.getShowInvisibles=function(){return this.getOption('showInvisibles')},this.getDisplayIndentGuides=function(){return this.getOption('displayIndentGuides')},this.setDisplayIndentGuides=function(t){this.setOption('displayIndentGuides',t)},this.setShowPrintMargin=function(t){this.setOption('showPrintMargin',t)},this.getShowPrintMargin=function(){return this.getOption('showPrintMargin')},this.setPrintMarginColumn=function(t){this.setOption('printMarginColumn',t)},this.getPrintMarginColumn=function(){return this.getOption('printMarginColumn')},this.getShowGutter=function(){return this.getOption('showGutter')},this.setShowGutter=function(t){return this.setOption('showGutter',t)},this.getFadeFoldWidgets=function(){return this.getOption('fadeFoldWidgets')},this.setFadeFoldWidgets=function(t){this.setOption('fadeFoldWidgets',t)},this.setHighlightGutterLine=function(t){this.setOption('highlightGutterLine',t)},this.getHighlightGutterLine=function(){return this.getOption('highlightGutterLine')},this.$updateGutterLineHighlight=function(){var a=this.$cursorLayer.$pixelPos,e=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var t=this.session.selection.getCursor();t.column=0,a=this.$cursorLayer.getPixelPosition(t,!0),e*=this.session.getRowLength(t.row)}this.$gutterLineHighlight.style.top=a.top-this.layerConfig.offset+'px',this.$gutterLineHighlight.style.height=e+'px'},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var n=E.createElement('div');n.className='ace_layer ace_print-margin-layer',this.$printMarginEl=E.createElement('div'),this.$printMarginEl.className='ace_print-margin',n.appendChild(this.$printMarginEl),this.content.insertBefore(n,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=this.characterWidth*this.$printMarginColumn+this.$padding+'px',e.visibility=this.$showPrintMargin?'visible':'hidden',this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var a=this.layerConfig,e=this.$cursorLayer.$pixelPos.top,t=this.$cursorLayer.$pixelPos.left;e-=a.offset;var n=this.textarea.style,i=this.lineHeight;if(0>e||e>a.height-i)return void(n.top=n.left='0');var r=this.characterWidth;if(this.$composition){var o=this.textarea.value.replace(/^\x01+/,'');r*=this.session.$getStringScreenWidth(o)[0]+2,i+=2}t-=this.scrollLeft,t>this.$size.scrollerWidth-r&&(t=this.$size.scrollerWidth-r),t+=this.gutterWidth,n.height=i+'px',n.width=r+'px',n.left=x(t,this.$size.scrollerWidth-r)+'px',n.top=x(e,this.$size.height-i)+'px'}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var n=this.layerConfig,e=n.lastRow;return this.session.documentToScreenRow(e,0)*n.lineHeight-this.session.getScrollTop()>n.height-n.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(a,e,t,n){var o=this.scrollMargin;o.top=0|a,o.bottom=0|e,o.right=0|n,o.left=0|t,o.v=o.top+o.bottom,o.h=o.left+o.right,o.top&&0>=this.scrollTop&&this.session&&this.session.setScrollTop(-o.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption('hScrollBarAlwaysVisible',t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption('vScrollBarAlwaysVisible',t)},this.$updateScrollBarV=function(){var n=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(n-=(e-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>n-e&&(n=this.scrollTop+e,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(n+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(a,r){if(this.$changes&&(a|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!a&&!r)return void(this.$changes|=a);if(this.$size.$dirty)return this.$changes|=a,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal('beforeRender');var o=this.layerConfig;if(a&this.CHANGE_FULL||a&this.CHANGE_SIZE||a&this.CHANGE_TEXT||a&this.CHANGE_LINES||a&this.CHANGE_SCROLL||a&this.CHANGE_H_SCROLL){if(a|=this.$computeLayerConfig(),o.firstRow!=this.layerConfig.firstRow&&o.firstRowScreen==this.layerConfig.firstRowScreen){var n=this.scrollTop+(o.firstRow-this.layerConfig.firstRow)*this.lineHeight;0<n&&(this.scrollTop=n,a|=this.CHANGE_SCROLL,a|=this.$computeLayerConfig())}o=this.layerConfig,this.$updateScrollBarV(),a&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-o.offset+'px',this.content.style.marginTop=-o.offset+'px',this.content.style.width=o.width+2*this.$padding+'px',this.content.style.height=o.minHeight+'px'}return a&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+'px',this.scroller.className=0>=this.scrollLeft?'ace_scroller':'ace_scroller ace_scroll-left'),a&this.CHANGE_FULL?(this.$textLayer.update(o),this.$showGutter&&this.$gutterLayer.update(o),this.$markerBack.update(o),this.$markerFront.update(o),this.$cursorLayer.update(o),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal('afterRender')):a&this.CHANGE_SCROLL?(a&this.CHANGE_TEXT||a&this.CHANGE_LINES?this.$textLayer.update(o):this.$textLayer.scrollLines(o),this.$showGutter&&this.$gutterLayer.update(o),this.$markerBack.update(o),this.$markerFront.update(o),this.$cursorLayer.update(o),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal('afterRender')):(a&this.CHANGE_TEXT?(this.$textLayer.update(o),this.$showGutter&&this.$gutterLayer.update(o)):a&this.CHANGE_LINES?(this.$updateLines()||a&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(o):(a&this.CHANGE_TEXT||a&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(o),a&this.CHANGE_CURSOR&&(this.$cursorLayer.update(o),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(o),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(o),void this._signal('afterRender'))},this.$autosize=function(){var a=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,t=x(e,T((this.$minLines||1)*this.lineHeight,a))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(t+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&t>this.$maxPixelHeight&&(t=this.$maxPixelHeight);var n=a>e;if(t!=this.desiredHeight||this.$size.height!=this.desiredHeight||n!=this.$vScroll){n!=this.$vScroll&&(this.$vScroll=n,this.scrollBarV.setVisible(n));var o=this.container.clientWidth;this.container.style.height=t+'px',this.$updateCachedSize(!0,this.$gutterWidth,o,t),this.desiredHeight=t,this._signal('autosize')}},this.$computeLayerConfig=function(){var S=this.session,e=this.$size,t=e.height<=2*this.lineHeight,R=this.session.getScreenLength(),i=R*this.lineHeight,w=this.$getLongestLine(),L=!t&&(this.$hScrollBarAlwaysVisible||0>e.scrollerWidth-w-2*this.$padding),s=this.$horizScroll!==L;s&&(this.$horizScroll=L,this.scrollBarH.setVisible(L));var a=this.$vScroll;this.$maxLines&&1<this.lineHeight&&this.$autosize();var l=this.scrollTop%this.lineHeight,M=e.scrollerHeight+this.lineHeight,B=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=B;var h=this.scrollMargin;this.session.setScrollTop(T(-h.top,x(this.scrollTop,i-e.scrollerHeight+h.bottom))),this.session.setScrollLeft(T(-h.left,x(this.scrollLeft,w+2*this.$padding-e.scrollerWidth+h.right)));var d=!t&&(this.$vScrollBarAlwaysVisible||0>e.scrollerHeight-i+B||this.scrollTop>h.top),m=a!==d;m&&(this.$vScroll=d,this.scrollBarV.setVisible(d));var p=y(M/this.lineHeight)-1,C=T(0,b((this.scrollTop-l)/this.lineHeight)),D=C+p,I=this.lineHeight,N,P;C=S.screenToDocumentRow(C,0);var g=S.getFoldLine(C);g&&(C=g.start.row),N=S.documentToScreenRow(C,0),P=S.getRowLength(C)*I,D=x(S.screenToDocumentRow(D,0),S.getLength()-1),M=e.scrollerHeight+S.getRowLength(D)*I+P,l=this.scrollTop-N*I;var _=0;return this.layerConfig.width!=w&&(_=this.CHANGE_H_SCROLL),(s||m)&&(_=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal('scrollbarVisibilityChanged'),m&&(w=this.$getLongestLine())),this.layerConfig={width:w,padding:this.$padding,firstRow:C,firstRowScreen:N,lastRow:D,lineHeight:I,characterWidth:this.characterWidth,minHeight:M,maxHeight:i,offset:l,gutterOffset:I?T(0,y((l+e.height-e.scrollerHeight)/I)):0,height:this.$size.scrollerHeight},_},this.$updateLines=function(){if(this.$changedLines){var a=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var t=this.layerConfig;if(!(a>t.lastRow+1||e<t.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(t),void this.$textLayer.update(t)):(this.$textLayer.updateLines(t,a,e),!0)}},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),T(this.$size.scrollerWidth-2*this.$padding,b(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(n,e){this.$gutterLayer.addGutterDecoration(n,e)},this.removeGutterDecoration=function(n,e){this.$gutterLayer.removeGutterDecoration(n,e)},this.updateBreakpoints=function(){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(a,e,t){this.scrollCursorIntoView(a,t),this.scrollCursorIntoView(e,t)},this.scrollCursorIntoView=function(d,e,t){if(0!==this.$size.scrollerHeight){var n=this.$cursorLayer.getPixelPosition(d),i=n.left,r=n.top,o=t&&t.top||0,s=t&&t.bottom||0,a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>r?(e&&a+o>r+this.lineHeight&&(r-=e*this.$size.scrollerHeight),0==r&&(r=-this.scrollMargin.top),this.session.setScrollTop(r)):a+this.$size.scrollerHeight-s<r+this.lineHeight&&(e&&a+this.$size.scrollerHeight-s<r-this.lineHeight&&(r+=e*this.$size.scrollerHeight),this.session.setScrollTop(r+this.lineHeight-this.$size.scrollerHeight));var l=this.scrollLeft;l>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):l+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(b(i+this.characterWidth-this.$size.scrollerWidth)):l<=this.$padding&&i-l<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return T(0,S((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(a,o){'number'==typeof a&&(a={row:a,column:0});var t=this.$cursorLayer.getPixelPosition(a),n=this.$size.scrollerHeight-this.lineHeight,i=t.top-n*(o||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(a,e){var t=0,n=this.STEPS,o=[];for(t=0;t<n;++t)o.push(function(a,e,t){return t*(r(a-1,3)+1)+e}(t/this.STEPS,a,e-a));return o},this.scrollToLine=function(a,l,t,n){var i=this.$cursorLayer.getPixelPosition({row:a,column:0}),r=i.top;l&&(r-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(r),!1!==t&&this.animateScrolling(o,n)},this.animateScrolling=function(a,s){var t=this.scrollTop;if(this.$animatedScroll){var l=this;if(a!=t){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(a=i[0])==t)return}var r=l.$calcSteps(a,t);this.$scrollAnimation={from:a,to:t,steps:r},clearInterval(this.$timer),l.session.setScrollTop(r.shift()),l.session.$scrollTop=t,this.$timer=setInterval(function(){r.length?(l.session.setScrollTop(r.shift()),l.session.$scrollTop=t):null==t?(l.$timer=clearInterval(l.$timer),l.$scrollAnimation=null,s&&s()):(l.session.$scrollTop=-1,l.session.setScrollTop(t),t=null)},10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(n,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(n,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),n&&this.session.setScrollLeft(this.session.getScrollLeft()+n)},this.isScrollableBy=function(n,e){return 0>e&&this.session.getScrollTop()>=1-this.scrollMargin.top||0<e&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||0>n&&this.session.getScrollLeft()>=1-this.scrollMargin.left||0<n&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0},this.pixelToScreenCoordinates=function(a,e){var t=this.scroller.getBoundingClientRect(),n=(a+this.scrollLeft-t.left-this.$padding)/this.characterWidth,i=S((e+this.scrollTop-t.top)/this.lineHeight),s=b(n);return{row:i,column:s,side:0<n-s?1:-1}},this.screenToTextCoordinates=function(a,e){var t=this.scroller.getBoundingClientRect(),n=b((a+this.scrollLeft-t.left-this.$padding)/this.characterWidth),o=(e+this.scrollTop-t.top)/this.lineHeight;return this.session.screenToDocumentPosition(o,T(n,0))},this.textToScreenCoordinates=function(a,e){var t=this.scroller.getBoundingClientRect(),n=this.session.documentToScreenPosition(a,e),i=this.$padding+b(n.column*this.characterWidth),r=n.row*this.lineHeight;return{pageX:t.left+i-this.scrollLeft,pageY:t.top+r-this.scrollTop}},this.visualizeFocus=function(){E.addCssClass(this.container,'ace_focus')},this.visualizeBlur=function(){E.removeCssClass(this.container,'ace_focus')},this.showComposition=function(){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,E.addCssClass(this.textarea,'ace_composition'),this.textarea.style.cssText='',this.$moveTextAreaToCursor()},this.setCompositionText=function(){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(E.removeCssClass(this.textarea,'ace_composition'),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(a,r){function n(e){if(t.$themeId!=a)return r&&r();if(!e||!e.cssClass)throw new Error('couldn\'t load module '+a+' or it didn\'t call define');E.importCssString(e.cssText,e.cssClass,t.container.ownerDocument),t.theme&&E.removeCssClass(t.container,t.theme.cssClass);var i='padding'in e?e.padding:'padding'in(t.theme||{})?4:t.$padding;t.$padding&&i!=t.$padding&&t.setPadding(i),t.$theme=e.cssClass,t.theme=e,E.addCssClass(t.container,e.cssClass),E.setCssClass(t.container,'ace_dark',e.isDark),t.$size&&(t.$size.width=0,t.$updateSizeAsync()),t._dispatchEvent('themeLoaded',{theme:e}),r&&r()}var t=this;if(this.$themeId=a,t._dispatchEvent('themeChange',{theme:a}),a&&'string'!=typeof a)n(a);else{var o=a||this.$options.theme.initialValue;_.loadModule(['theme',o],n)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(n,e){E.setCssClass(this.container,n,!1!==e)},this.unsetStyle=function(t){E.removeCssClass(this.container,t)},this.setCursorStyle=function(t){this.scroller.style.cursor!=t&&(this.scroller.style.cursor=t)},this.setMouseCursor=function(t){this.scroller.style.cursor=t},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(p.prototype),_.defineOptions(p.prototype,'renderer',{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){'number'==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?'block':'none',this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){E.setCssClass(this.$gutter,'ace_fade-fold-widgets',t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t)},initialValue:!0},showLineNumbers:{set:function(t){this.$gutterLayer.setShowLineNumbers(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){return this.$gutterLineHighlight?void(this.$gutterLineHighlight.style.display=t?'':'none',this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()):(this.$gutterLineHighlight=E.createElement('div'),this.$gutterLineHighlight.className='ace_gutter-active-line',void this.$gutter.appendChild(this.$gutterLineHighlight))},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){'number'==typeof t&&(t+='px'),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(){this.updateFull()}},minLines:{set:function(){this.updateFull()}},maxPixelHeight:{set:function(){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(t){t=+t||0,this.$scrollPastEnd!=t&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:'./theme/textmate',handlesSet:!0}}),e.VirtualRenderer=p}),ace.define('ace/worker/worker_client',['require','exports','module','ace/lib/oop','ace/lib/net','ace/lib/event_emitter','ace/config'],function(d,e){'use strict';function i(a){var e='importScripts(\''+o.qualifyURL(a)+'\');';try{return new Blob([e],{type:'application/javascript'})}catch(a){var t=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,n=new t;return n.append(e),n.getBlob('application/javascript')}}function r(a){var e=i(a),t=window.URL||window.webkitURL,n=t.createObjectURL(e);return new Worker(n)}var t=d('../lib/oop'),o=d('../lib/net'),p=d('../lib/event_emitter').EventEmitter,m=d('../config'),n=function(e,t,l,p,o){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),d.nameToUrl&&!d.toUrl&&(d.toUrl=d.nameToUrl),m.get('packaged')||!d.toUrl)p=p||m.moduleUrl(t,'worker');else{var s=this.$normalizePath;p=p||s(d.toUrl('ace/worker/worker.js',null,'_'));var a={};e.forEach(function(e){a[e]=s(d.toUrl(e,null,'_').replace(/(\.js)?(\?.*)?$/,''))})}this.$worker=r(p),o&&this.send('importScripts',o),this.$worker.postMessage({init:!0,tlns:a,module:t,classname:l}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){t.implement(this,p),this.onMessage=function(a){var e=a.data;switch(e.type){case'event':this._signal(e.name,{data:e.data});break;case'call':var t=this.callbacks[e.id];t&&(t(e.data),delete this.callbacks[e.id]);break;case'error':this.reportError(e.data);break;case'log':window.console&&console.log&&console.log.apply(console,e.data);}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return o.qualifyURL(t)},this.terminate=function(){this._signal('terminate',{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off('change',this.changeListener),this.$doc=null},this.send=function(n,a){this.$worker.postMessage({command:n,args:a})},this.call=function(a,e,t){if(t){var n=this.callbackId++;this.callbacks[n]=t,e.push(n)}this.send(a,e)},this.emit=function(n,a){try{this.$worker.postMessage({event:n,data:{data:a.data}})}catch(t){console.error(t.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call('setValue',[t.getValue()]),t.on('change',this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),'insert'==t.action?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,50<t.length&&t.length>this.$doc.getLength()>>1?this.call('setValue',[this.$doc.getValue()]):this.emit('change',{data:t}))}}).call(n.prototype);var a=function(a,e,t){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var n=null,i=!1,r=Object.create(p),o=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(t){o.messageBuffer.push(t),n&&(i?setTimeout(s):s())},this.setEmitSync=function(t){i=t};var s=function(){var t=o.messageBuffer.shift();t.command?n[t.command].apply(n,t.args):t.event&&r._signal(t.event,t.data)};r.postMessage=function(t){o.onMessage({data:t})},r.callback=function(n,a){this.postMessage({type:'call',id:a,data:n})},r.emit=function(n,a){this.postMessage({type:'event',name:n,data:a})},m.loadModule(['worker',e],function(a){for(n=new a[t](r);o.messageBuffer.length;)s()})};a.prototype=n.prototype,e.UIWorkerClient=a,e.WorkerClient=n,e.createWorker=r}),ace.define('ace/placeholder',['require','exports','module','ace/range','ace/lib/event_emitter','ace/lib/oop'],function(n,e){'use strict';var d=n('./range').Range,t=n('./lib/event_emitter').EventEmitter,a=n('./lib/oop'),r=function(l,e,t,n,i,r){var o=this;this.length=e,this.session=l,this.doc=l.getDocument(),this.mainClass=i,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on('change',this.$onUpdate),this.$others=n,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=t;var s=l.getUndoManager().$undoStack||l.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=s.length,this.setup(),l.selection.on('changeCursor',this.$onCursorChange)};(function(){a.implement(this,t),this.setup=function(){var a=this,e=this.doc,t=this.session;this.selectionBefore=t.selection.toJSON(),t.selection.inMultiSelectMode&&t.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var n=this.pos;n.$insertRight=!0,n.detach(),n.markerId=t.addMarker(new d(n.row,n.column,n.row,n.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(t){var n=e.createAnchor(t.row,t.column);n.$insertRight=!0,n.detach(),a.others.push(n)}),t.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var a=this.session,e=this;this.othersActive=!0,this.others.forEach(function(t){t.markerId=a.addMarker(new d(t.row,t.column,t.row,t.column+e.length),e.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(i){if(this.$updating)return this.updateAnchors(i);var e=i;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var t='insert'===i.action?e.end.column-e.start.column:e.start.column-e.end.column,n=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,r=e.start.column-this.pos.column;if(this.updateAnchors(i),n&&(this.length+=t),n&&!this.session.$fromUndo)if('insert'===i.action)for(var o=this.others.length-1;0<=o;o--){var s=this.others[o],a={row:s.row,column:s.column+r};this.doc.insertMergedLines(a,i.lines)}else if('remove'===i.action)for(var o=this.others.length-1;0<=o;o--){var s=this.others[o],a={row:s.row,column:s.column+r};this.doc.remove(new d(a.row,a.column,a.row,a.column-t))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(n){this.pos.onChange(n);for(var e=this.others.length;e--;)this.others[e].onChange(n);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var a=this,e=this.session,t=function(t,n){e.removeMarker(t.markerId),t.markerId=e.addMarker(new d(t.row,t.column,t.row,t.column+a.length),n,null,!1)};t(this.pos,this.mainClass);for(var n=this.others.length;n--;)t(this.others[n],this.othersClass)}},this.onCursorChange=function(n){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit('cursorEnter',n)):(this.hideOtherMarkers(),this._emit('cursorLeave',n))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener('change',this.$onUpdate),this.session.selection.removeEventListener('changeCursor',this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var a=this.session.getUndoManager(),e=(a.$undoStack||a.$undostack).length-this.$undoStackDepth,t=0;t<e;t++)a.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(r.prototype),e.PlaceHolder=r}),ace.define('ace/mouse/multi_select_handler',['require','exports','module','ace/lib/event','ace/lib/useragent'],function(n,e){function i(n,e){return n.row==e.row&&n.column==e.column}function r(s){var e=s.domEvent,L=e.altKey,M=e.shiftKey,B=e.ctrlKey,D=s.getAccelKey(),I=s.getButton();if(B&&o.isMac&&(I=e.button),s.editor.inMultiSelectMode&&2==I)return void s.editor.textInput.onContextMenu(s.domEvent);if(!B&&!L&&!D)return void(0===I&&s.editor.inMultiSelectMode&&s.editor.exitMultiSelectMode());if(0===I){var c=s.editor,h=c.selection,d=c.inMultiSelectMode,N=s.getDocumentPosition(),p=h.getCursor(),f=s.inSelection()||h.isEmpty()&&i(N,p),g=s.x,C=s.y,E=function(t){g=t.clientX,C=t.clientY},A=c.session,v=c.renderer.pixelToScreenCoordinates(g,C),_=v,F;if(c.$mouseHandler.$enableJumpToDef)B&&L||D&&L?F=M?'block':'add':L&&c.$blockSelectEnabled&&(F='block');else if(!D||L)L&&c.$blockSelectEnabled&&(F='block');else if(F='add',!d&&M)return;if(F&&o.isMac&&e.ctrlKey&&c.$mouseHandler.cancelContextMenu(),'add'==F){if(!d&&f)return;if(!d){var u=h.toOrientedRange();c.addSelectionMarker(u)}var b=h.rangeList.rangeAtPoint(N);c.$blockScrolling++,c.inVirtualSelectionMode=!0,M&&(b=null,u=h.ranges[0]||u,c.removeSelectionMarker(u)),c.once('mouseup',function(){var t=h.toOrientedRange();b&&t.isEmpty()&&i(b.cursor,t.cursor)?h.substractPoint(t.cursor):(M?h.substractPoint(u.cursor):u&&(c.removeSelectionMarker(u),h.addRange(u)),h.addRange(t)),c.$blockScrolling--,c.inVirtualSelectionMode=!1})}else if('block'==F){s.stop(),c.inVirtualSelectionMode=!0;var S=[],T=function(){var n=c.renderer.pixelToScreenCoordinates(g,C),e=A.screenToDocumentPosition(n.row,n.column);i(_,n)&&i(e,h.lead)||(_=n,c.$blockScrolling++,c.selection.moveToPosition(e),c.renderer.scrollCursorIntoView(),c.removeSelectionMarkers(S),S=h.rectangularRangeBlock(_,v),c.$mouseHandler.$clickSelection&&1==S.length&&S[0].isEmpty()&&(S[0]=c.$mouseHandler.$clickSelection.clone()),S.forEach(c.addSelectionMarker,c),c.updateSelectionMarkers(),c.$blockScrolling--)},y;c.$blockScrolling++,d&&!D?h.toSingleRange():!d&&D&&(y=h.toOrientedRange(),c.addSelectionMarker(y)),M?v=A.documentToScreenPosition(h.lead):h.moveToPosition(N),c.$blockScrolling--,_={row:-1,column:-1};var R=function(){clearInterval(w),c.removeSelectionMarkers(S),S.length||(S=[h.toOrientedRange()]),c.$blockScrolling++,y&&(c.removeSelectionMarker(y),h.toSingleRange(y));for(var e=0;e<S.length;e++)h.addRange(S[e]);c.inVirtualSelectionMode=!1,c.$mouseHandler.$clickSelection=null,c.$blockScrolling--};t.capture(c.container,E,R);var w=setInterval(function(){T()},20);return s.preventDefault()}}}var t=n('../lib/event'),o=n('../lib/useragent');e.onMouseDown=r}),ace.define('ace/commands/multi_select_commands',['require','exports','module','ace/keyboard/hash_handler'],function(n,e){e.defaultCommands=[{name:'addCursorAbove',exec:function(t){t.selectMoreLines(-1)},bindKey:{win:'Ctrl-Alt-Up',mac:'Ctrl-Alt-Up'},scrollIntoView:'cursor',readOnly:!0},{name:'addCursorBelow',exec:function(t){t.selectMoreLines(1)},bindKey:{win:'Ctrl-Alt-Down',mac:'Ctrl-Alt-Down'},scrollIntoView:'cursor',readOnly:!0},{name:'addCursorAboveSkipCurrent',exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:'Ctrl-Alt-Shift-Up',mac:'Ctrl-Alt-Shift-Up'},scrollIntoView:'cursor',readOnly:!0},{name:'addCursorBelowSkipCurrent',exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:'Ctrl-Alt-Shift-Down',mac:'Ctrl-Alt-Shift-Down'},scrollIntoView:'cursor',readOnly:!0},{name:'selectMoreBefore',exec:function(t){t.selectMore(-1)},bindKey:{win:'Ctrl-Alt-Left',mac:'Ctrl-Alt-Left'},scrollIntoView:'cursor',readOnly:!0},{name:'selectMoreAfter',exec:function(t){t.selectMore(1)},bindKey:{win:'Ctrl-Alt-Right',mac:'Ctrl-Alt-Right'},scrollIntoView:'cursor',readOnly:!0},{name:'selectNextBefore',exec:function(t){t.selectMore(-1,!0)},bindKey:{win:'Ctrl-Alt-Shift-Left',mac:'Ctrl-Alt-Shift-Left'},scrollIntoView:'cursor',readOnly:!0},{name:'selectNextAfter',exec:function(t){t.selectMore(1,!0)},bindKey:{win:'Ctrl-Alt-Shift-Right',mac:'Ctrl-Alt-Shift-Right'},scrollIntoView:'cursor',readOnly:!0},{name:'splitIntoLines',exec:function(t){t.multiSelect.splitIntoLines()},bindKey:{win:'Ctrl-Alt-L',mac:'Ctrl-Alt-L'},readOnly:!0},{name:'alignCursors',exec:function(t){t.alignCursors()},bindKey:{win:'Ctrl-Alt-A',mac:'Ctrl-Alt-A'},scrollIntoView:'cursor'},{name:'findAll',exec:function(t){t.findAll()},bindKey:{win:'Ctrl-Alt-K',mac:'Ctrl-Alt-G'},scrollIntoView:'cursor',readOnly:!0}],e.multiSelectCommands=[{name:'singleSelection',bindKey:'esc',exec:function(t){t.exitMultiSelectMode()},scrollIntoView:'cursor',readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var t=n('../keyboard/hash_handler').HashHandler;e.keyboardHandler=new t(e.multiSelectCommands)}),ace.define('ace/multi_select',['require','exports','module','ace/range_list','ace/range','ace/selection','ace/mouse/multi_select_handler','ace/lib/event','ace/lib/lang','ace/commands/multi_select_commands','ace/search','ace/edit_session','ace/editor','ace/config'],function(n,E){function i(a,e,t){return p.$options.wrap=!0,p.$options.needle=e,p.$options.backwards=-1==t,p.find(a)}function r(n,e){return n.row==e.row&&n.column==e.column}function o(n){n.$multiselectOnSessionChange||(n.$onAddRange=n.$onAddRange.bind(n),n.$onRemoveRange=n.$onRemoveRange.bind(n),n.$onMultiSelect=n.$onMultiSelect.bind(n),n.$onSingleSelect=n.$onSingleSelect.bind(n),n.$multiselectOnSessionChange=E.onSessionChange.bind(n),n.$checkMultiselectChange=n.$checkMultiselectChange.bind(n),n.$multiselectOnSessionChange(n),n.on('changeSession',n.$multiselectOnSessionChange),n.on('mousedown',t),n.commands.addCommands(d.defaultCommands),s(n))}function s(o){function t(){s&&(o.renderer.setMouseCursor(''),s=!1)}var e=o.textInput.getElement(),s=!1;a.addListener(e,'keydown',function(e){var n=18==e.keyCode&&!(e.ctrlKey||e.shiftKey||e.metaKey);o.$blockSelectEnabled&&n?s||(o.renderer.setMouseCursor('crosshair'),s=!0):s&&t()}),a.addListener(e,'keyup',t),a.addListener(e,'blur',t)}var e=n('./range_list').RangeList,_=n('./range').Range,y=n('./selection').Selection,t=n('./mouse/multi_select_handler').onMouseDown,a=n('./lib/event'),l=n('./lib/lang'),d=n('./commands/multi_select_commands');E.commands=d.defaultCommands.concat(d.multiSelectCommands);var c=n('./search').Search,p=new c,u=n('./edit_session').EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(u.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(a,e){if(a){if(!this.inMultiSelectMode&&0===this.rangeCount){var t=this.toOrientedRange();if(this.rangeList.add(t),this.rangeList.add(a),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(a);this.rangeList.removeAll(),this.rangeList.add(t),this.$onAddRange(t)}a.cursor||(a.cursor=a.end);var n=this.rangeList.add(a);return this.$onAddRange(a),n.length&&this.$onRemoveRange(n),1<this.rangeCount&&!this.inMultiSelectMode&&(this._signal('multiSelect'),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(a)}},this.toSingleRange=function(n){n=n||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),n&&this.fromOrientedRange(n)},this.substractPoint=function(n){var e=this.rangeList.substractPoint(n);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length?this.$onRemoveRange(t):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal('addRange',{range:t})},this.$onRemoveRange=function(a){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var r=this.rangeList.ranges.pop();a.push(r),this.rangeCount=0}for(var t=a.length,n;t--;)n=this.ranges.indexOf(a[t]),this.ranges.splice(n,1);this._signal('removeRange',{ranges:a}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal('singleSelect'),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(r=r||this.ranges[0])&&!r.isEqual(this.getRange())&&this.fromOrientedRange(r)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new e,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(1<this.rangeCount){var l=this.rangeList.ranges,e=l[l.length-1],t=_.fromPoints(l[0].start,e.end);this.toSingleRange(),this.setSelectionRange(t,e.cursor==e.start)}else{var t=this.getRange(),n=this.isBackwards(),i=t.start.row,r=t.end.row;if(i==r){if(n)var o=t.end,s=t.start;else var o=t.start,s=t.end;return this.addRange(_.fromPoints(s,s)),void this.addRange(_.fromPoints(o,o))}var a=[],d=this.getLineRange(i,!0);d.start.column=t.start.column,a.push(d);for(var c=i+1;c<r;c++)a.push(this.getLineRange(c,!0));d=this.getLineRange(r,!0),d.end.column=t.end.column,a.push(d),a.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(1<this.rangeCount){var a=this.rangeList.ranges,e=a[a.length-1],t=_.fromPoints(a[0].start,e.end);this.toSingleRange(),this.setSelectionRange(t,e.cursor==e.start)}else{var n=this.session.documentToScreenPosition(this.selectionLead),o=this.session.documentToScreenPosition(this.selectionAnchor);this.rectangularRangeBlock(n,o).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(l,e,t){var E=[],i=l.column<e.column;if(i)var o=l.column,s=e.column;else var o=e.column,s=l.column;var a=l.row<e.row;if(a)var c=l.row,u=e.row;else var c=e.row,u=l.row;0>o&&(o=0),0>c&&(c=0),c==u&&(t=!0);for(var h=c,d;h<=u;h++){if(d=_.fromPoints(this.session.screenToDocumentPosition(h,o),this.session.screenToDocumentPosition(h,s)),d.isEmpty()){if(m&&r(d.end,m))break;var m=d.end}d.cursor=i?d.start:d.end,E.push(d)}if(a&&E.reverse(),!t){for(var p=E.length-1;E[p].isEmpty()&&0<p;)p--;if(0<p)for(var f=0;E[f].isEmpty();)f++;for(var g=p;g>=f;g--)E[g].isEmpty()&&E.splice(g,1)}return E}}.call(y.prototype);var m=n('./editor').Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(n){n.cursor||(n.cursor=n.end);var e=this.getSelectionStyle();return n.marker=this.session.addMarker(n,'ace_selection',e),this.session.$selectionMarkers.push(n),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,n},this.removeSelectionMarker=function(n){if(n.marker){this.session.removeMarker(n.marker);var e=this.session.$selectionMarkers.indexOf(n);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(a){for(var e=this.session.$selectionMarkers,t=a.length,n;t--;)if(n=a[t],n.marker){this.session.removeMarker(n.marker);var o=e.indexOf(n);-1!=o&&e.splice(o,1)}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle('ace_multiselect'),this.keyBinding.addKeyboardHandler(d.keyboardHandler),this.commands.setDefaultHandler('exec',this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle('ace_multiselect'),this.keyBinding.removeKeyboardHandler(d.keyboardHandler),this.commands.removeDefaultHandler('exec',this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit('changeSelection'))},this.$onMultiSelectExec=function(a){var e=a.command,t=a.editor;if(t.multiSelect){if(e.multiSelectAction)'forEach'==e.multiSelectAction?n=t.forEachSelection(e,a.args):'forEachLine'==e.multiSelectAction?n=t.forEachSelection(e,a.args,!0):'single'==e.multiSelectAction?(t.exitMultiSelectMode(),n=e.exec(t,a.args||{})):n=e.multiSelectAction(t,a.args||{});else{var n=e.exec(t,a.args||{});t.multiSelect.addRange(t.multiSelect.toOrientedRange()),t.multiSelect.mergeOverlappingRanges()}return n}},this.forEachSelection=function(c,e,t){if(!this.inVirtualSelectionMode){var n=t&&t.keepOrder,r=1==t||t&&t.$byLines,o=this.session,s=this.selection,a=s.rangeList,l=(n?s:a).ranges,u;if(!l.length)return c.exec?c.exec(this,e||{}):c(this,e||{});var i=s._eventRegistry;s._eventRegistry={};var g=new y(o);this.inVirtualSelectionMode=!0;for(var d=l.length;d--;){if(r)for(;0<d&&l[d].start.row==l[d-1].end.row;)d--;g.fromOrientedRange(l[d]),g.index=d,this.selection=o.selection=g;var m=c.exec?c.exec(this,e||{}):c(this,e||{});u||void 0===m||(u=m),g.toOrientedRange(l[d])}g.detach(),this.selection=o.selection=s,this.inVirtualSelectionMode=!1,s._eventRegistry=i,s.mergeOverlappingRanges();var p=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),p&&p.from==p.to&&this.renderer.animateScrolling(p.from),u}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var a='';if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,t=[],n=0;n<e.length;n++)t.push(this.session.getTextRange(e[n]));var o=this.session.getDocument().getNewLineCharacter();a=t.join(o),a.length==(t.length-1)*o.length&&(a='')}else this.selection.isEmpty()||(a=this.session.getTextRange(this.getSelectionRange()));return a},this.$checkMultiselectChange=function(a,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var n=e==this.multiSelect.anchor?t.cursor==t.start?t.end:t.start:t.cursor;n.row==e.row&&this.session.$clipPositionToDocument(n.row,n.column).column==e.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(a,e,t){if(e=e||{},e.needle=a||e.needle,void 0==e.needle){var n=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(n)}this.$search.set(e);var i=this.$search.findAll(this.session);if(!i.length)return 0;this.$blockScrolling+=1;var r=this.multiSelect;t||r.toSingleRange(i[0]);for(var o=i.length;o--;)r.addRange(i[o],!0);return n&&r.rangeList.rangeAtPoint(n.start)&&r.addRange(n,!0),this.$blockScrolling-=1,i.length},this.selectMoreLines=function(l,e){var t=this.selection.toOrientedRange(),n=t.cursor==t.end,i=this.session.documentToScreenPosition(t.cursor);this.selection.$desiredColumn&&(i.column=this.selection.$desiredColumn);var r=this.session.screenToDocumentPosition(i.row+l,i.column);if(t.isEmpty())var o=r;else var s=this.session.documentToScreenPosition(n?t.end:t.start),o=this.session.screenToDocumentPosition(s.row+l,s.column);if(n){var a=_.fromPoints(r,o);a.cursor=a.start}else{var a=_.fromPoints(o,r);a.cursor=a.end}if(a.desiredColumn=i.column,!this.selection.inMultiSelectMode)this.selection.addRange(t);else if(e)var d=t.cursor;this.selection.addRange(a),d&&this.selection.substractPoint(d)},this.transposeSelections=function(l){for(var e=this.session,t=e.multiSelect,n=t.ranges,i=n.length,r;i--;)if(r=n[i],r.isEmpty()){var o=e.getWordRange(r.start.row,r.start.column);r.start.row=o.start.row,r.start.column=o.start.column,r.end.row=o.end.row,r.end.column=o.end.column}t.mergeOverlappingRanges();for(var s=[],i=n.length,r;i--;)r=n[i],s.unshift(e.getTextRange(r));0>l?s.unshift(s.pop()):s.push(s.shift());for(var i=n.length;i--;){var r=n[i],o=r.clone();e.replace(r,s[i]),r.start.row=o.start.row,r.start.column=o.start.column}},this.selectMore=function(d,e,t){var c=this.session,r=c.multiSelect,o=r.toOrientedRange();if(!o.isEmpty()||(o=c.getWordRange(o.start.row,o.start.column),o.cursor=-1==d?o.start:o.end,this.multiSelect.addRange(o),!t)){var s=c.getTextRange(o),a=i(c,s,d);a&&(a.cursor=-1==d?a.start:a.end,this.$blockScrolling+=1,this.session.unfold(a),this.multiSelect.addRange(a),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(o.cursor)}},this.alignCursors=function(){var d=this.session,E=d.multiSelect,e=E.ranges,t=-1,n=e.filter(function(n){return!(n.cursor.row!=t)||void(t=n.cursor.row)});if(e.length&&n.length!=e.length-1){n.forEach(function(t){E.substractPoint(t.cursor)});var C=0,o=1/0,s=e.map(function(e){var t=e.cursor,n=d.getLine(t.row),a=n.substr(t.column).search(/\S/g);return-1==a&&(a=0),t.column>C&&(C=t.column),a<o&&(o=a),a});e.forEach(function(e,t){var n=e.cursor,a=C-n.column,r=s[t]-o;a>r?d.insert(n,l.stringRepeat(' ',a-r)):d.remove(new _(n.row,n.column,n.row,n.column-a+r)),e.start.column=e.end.column=C,e.start.row=e.end.row=n.row,e.cursor=e.end}),E.fromOrientedRange(e[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var a=this.selection.getRange(),r=a.start.row,i=a.end.row,c=r==i;if(c){var m=this.session.getLength(),h;do h=this.session.getLine(i);while(/[=:]/.test(h)&&++i<m);do h=this.session.getLine(r);while(/[=:]/.test(h)&&0<--r);0>r&&(r=0),i>=m&&(i=m-1)}var p=this.session.removeFullLines(r,i);p=this.$reAlignText(p,c),this.session.insert({row:r,column:0},p.join('\n')+'\n'),c||(a.start.column=0,a.end.column=p[p.length-1].length),this.selection.setRange(a)}},this.$reAlignText=function(r,e){function n(t){return l.stringRepeat(' ',t)}function i(t){return t[2]?n(c)+t[2]+n(s-t[2].length+a)+t[4].replace(/^([=:])\s+/,'$1 '):t[0]}var o=!0,d=!0,c,s,a;return r.map(function(n){var e=n.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==c?(c=e[1].length,s=e[2].length,a=e[3].length,e):(c+s+a!=e[1].length+e[2].length+e[3].length&&(d=!1),c!=e[1].length&&(o=!1),c>e[1].length&&(c=e[1].length),s<e[2].length&&(s=e[2].length),a>e[3].length&&(a=e[3].length),e):[n]}).map(e?i:o?d?function r(t){return t[2]?n(c+s-t[2].length)+t[2]+n(a,' ')+t[4].replace(/^([=:])\s+/,'$1 '):t[0]}:i:function o(t){return t[2]?n(c)+t[2]+n(a)+t[4].replace(/^([=:])\s+/,'$1 '):t[0]})}}).call(m.prototype),E.onSessionChange=function(a){var e=a.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var t=a.oldSession;t&&(t.multiSelect.off('addRange',this.$onAddRange),t.multiSelect.off('removeRange',this.$onRemoveRange),t.multiSelect.off('multiSelect',this.$onMultiSelect),t.multiSelect.off('singleSelect',this.$onSingleSelect),t.multiSelect.lead.off('change',this.$checkMultiselectChange),t.multiSelect.anchor.off('change',this.$checkMultiselectChange)),e&&(e.multiSelect.on('addRange',this.$onAddRange),e.multiSelect.on('removeRange',this.$onRemoveRange),e.multiSelect.on('multiSelect',this.$onMultiSelect),e.multiSelect.on('singleSelect',this.$onSingleSelect),e.multiSelect.lead.on('change',this.$checkMultiselectChange),e.multiSelect.anchor.on('change',this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},E.MultiSelect=o,n('./config').defineOptions(m.prototype,'editor',{enableMultiselect:{set:function(n){o(this),n?(this.on('changeSession',this.$multiselectOnSessionChange),this.on('mousedown',t)):(this.off('changeSession',this.$multiselectOnSessionChange),this.off('mousedown',t))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})}),ace.define('ace/mode/folding/fold_mode',['require','exports','module','ace/range'],function(n,e){'use strict';var o=n('../../range').Range,t=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(a,e,t){var n=a.getLine(t);return this.foldingStartMarker.test(n)?'start':'markbeginend'==e&&this.foldingStopMarker&&this.foldingStopMarker.test(n)?'end':''},this.getFoldWidgetRange=function(){return null},this.indentationBlock=function(i,e,t){var n=/\S/,r=i.getLine(e),p=r.search(n);if(-1!=p){for(var s=t||r.length,a=i.getLength(),l=e,c=e,u;++e<a;)if(u=i.getLine(e).search(n),-1!=u){if(u<=p)break;c=e}if(c>l){var m=i.getLine(c).length;return new o(l,s,c,m)}}},this.openingBracketBlock=function(i,e,t,d,r){var c={row:t,column:d+1},s=i.$findClosingBracket(e,c,r);if(s){var a=i.foldWidgets[s.row];return null==a&&(a=i.getFoldWidget(s.row)),'start'==a&&s.row>c.row&&(s.row--,s.column=i.getLine(s.row).length),o.fromPoints(c,s)}},this.closingBracketBlock=function(i,e,t,l){var d={row:t,column:l},s=i.$findOpeningBracket(e,d);if(s)return s.column++,d.column--,o.fromPoints(s,d)}}).call(t.prototype)}),ace.define('ace/theme/textmate',['require','exports','module','ace/lib/dom'],function(n,e){'use strict';e.isDark=!1,e.cssClass='ace-tm',e.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',n('../lib/dom').importCssString(e.cssText,e.cssClass)}),ace.define('ace/line_widgets',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/range'],function(n,e){'use strict';function i(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on('change',this.updateOnChange),this.session.on('changeFold',this.updateOnFold),this.session.on('changeEditor',this.$onChangeEditor)}var a=(n('./lib/oop'),n('./lib/dom'));n('./range').Range,function(){this.getRowLength=function(n){var e;return e=this.lineWidgets?this.lineWidgets[n]&&this.lineWidgets[n].rowCount||0:0,this.$useWrapMode&&this.$wrapData[n]?this.$wrapData[n].length+1+e:1+e},this.$getWidgetScreenLength=function(){var n=0;return this.lineWidgets.forEach(function(e){e&&e.rowCount&&!e.hidden&&(n+=e.rowCount)}),n},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on('beforeRender',this.measureWidgets),t.renderer.on('afterRender',this.renderWidgets)))},this.detach=function(){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off('beforeRender',this.measureWidgets),e.renderer.off('afterRender',this.renderWidgets);var t=this.session.lineWidgets;t&&t.forEach(function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))})}},this.updateOnFold=function(l,e){var t=e.lineWidgets;if(t&&l.action){for(var n=l.data,i=n.start.row,r=n.end.row,o='add'==l.action,s=i+1;s<r;s++)t[s]&&(t[s].hidden=o);t[r]&&(o?t[i]?t[r].hidden=o:t[i]=t[r]:(t[i]==t[r]&&(t[i]=void 0),t[r].hidden=o))}},this.updateOnChange=function(a){var e=this.session.lineWidgets;if(e){var t=a.start.row,n=a.end.row-t;if(0==n);else if('remove'==a.action){var i=e.splice(t+1,n);i.forEach(function(t){t&&this.removeLineWidget(t)},this),this.$updateRows()}else{var r=Array(n);r.unshift(t,0),e.splice.apply(e,r),this.$updateRows()}}},this.$updateRows=function(){var n=this.session.lineWidgets;if(n){var a=!0;n.forEach(function(t,e){if(t)for(a=!1,t.row=e;t.$oldWidget;)t.$oldWidget.row=e,t=t.$oldWidget}),a&&(this.session.lineWidgets=null)}},this.addLineWidget=function(r){this.session.lineWidgets||(this.session.lineWidgets=Array(this.session.getLength()));var e=this.session.lineWidgets[r.row];e&&(r.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[r.row]=r,r.session=this.session;var t=this.editor.renderer;r.html&&!r.el&&(r.el=a.createElement('div'),r.el.innerHTML=r.html),r.el&&(a.addCssClass(r.el,'ace_lineWidgetContainer'),r.el.style.position='absolute',r.el.style.zIndex=5,t.container.appendChild(r.el),r._inDocument=!0),r.coverGutter||(r.el.style.zIndex=3),null==r.pixelHeight&&(r.pixelHeight=r.el.offsetHeight),null==r.rowCount&&(r.rowCount=r.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(r.row,0);if(r.$fold=n,n){var i=this.session.lineWidgets;r.row!=n.end.row||i[n.start.row]?r.hidden=!0:i[n.start.row]=r}return this.session._emit('changeFold',{data:{start:{row:r.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(r),r},this.removeLineWidget=function(n){if(n._inDocument=!1,n.session=null,n.el&&n.el.parentNode&&n.el.parentNode.removeChild(n.el),n.editor&&n.editor.destroy)try{n.editor.destroy()}catch(t){}if(this.session.lineWidgets){var e=this.session.lineWidgets[n.row];if(e==n)this.session.lineWidgets[n.row]=n.$oldWidget,n.$oldWidget&&this.onWidgetChanged(n.$oldWidget);else for(;e;){if(e.$oldWidget==n){e.$oldWidget=n.$oldWidget;break}e=e.$oldWidget}}this.session._emit('changeFold',{data:{start:{row:n.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(a){for(var e=this.session.lineWidgets,t=e&&e[a],n=[];t;)n.push(t),t=t.$oldWidget;return n},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(l,e){var t=this.session._changedWidgets,n=e.layerConfig;if(t&&t.length){for(var i=1/0,d=0,o;d<t.length;d++)if(o=t[d],o&&o.el&&o.session==this.session){if(!o._inDocument){if(this.session.lineWidgets[o.row]!=o)continue;o._inDocument=!0,e.container.appendChild(o.el)}o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=y(o.w/n.characterWidth));var s=o.h/n.lineHeight;o.coverLine&&0>(s-=this.session.getRowLineCount(o.row))&&(s=0),o.rowCount!=s&&(o.rowCount=s,o.row<i&&(i=o.row))}i!=1/0&&(this.session._emit('changeFold',{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(d,e){var t=e.layerConfig,n=this.session.lineWidgets;if(n){for(var i=x(this.firstRow,t.firstRow),r=T(this.lastRow,t.lastRow,n.length);0<i&&!n[i];)i--;this.firstRow=t.firstRow,this.lastRow=t.lastRow,e.$cursorLayer.config=t;for(var o=i,p;o<=r;o++)if(p=n[o],p&&p.el)if(p.hidden)p.el.style.top=-100-(p.pixelHeight||0)+'px';else{p._inDocument||(p._inDocument=!0,e.container.appendChild(p.el));var a=e.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;p.coverLine||(a+=t.lineHeight*this.session.getRowLineCount(p.row)),p.el.style.top=a-t.offset+'px';var l=p.coverGutter?0:e.gutterWidth;p.fixedWidth||(l-=e.scrollLeft),p.el.style.left=l+'px',p.fullWidth&&p.screenWidth&&(p.el.style.minWidth=t.width+2*t.padding+'px'),p.el.style.right=p.fixedWidth?e.scrollBar.getWidth()+'px':''}}}}.call(i.prototype),e.LineWidgets=i}),ace.define('ace/ext/error_marker',['require','exports','module','ace/line_widgets','ace/lib/dom','ace/range'],function(n,e){'use strict';function i(a,e,t){for(var n=0,l=a.length-1;n<=l;){var r=n+l>>1,o=t(e,a[r]);if(0<o)n=r+1;else{if(!(0>o))return r;l=r-1}}return-(n+1)}function r(a,e,c){var n=a.getAnnotations().sort(d.comparePoints);if(n.length){var p=i(n,{row:e,column:-1},d.comparePoints);0>p&&(p=-p-1),p>=n.length?p=0<c?0:n.length-1:0==p&&0>c&&(p=n.length-1);var u=n[p];if(u&&c){if(u.row===e){do u=n[p+=c];while(u&&u.row===e);if(!u)return n.slice()}var m=[];e=u.row;do m[0>c?'unshift':'push'](u),u=n[p+=c];while(u&&u.row==e);return m.length&&m}}}var E=n('../line_widgets').LineWidgets,o=n('../lib/dom'),d=n('../range').Range;e.showErrorMarker=function(s,e){var t=s.session;t.widgetManager||(t.widgetManager=new E(t),t.widgetManager.attach(s));var n=s.getCursorPosition(),i=n.row,a=t.widgetManager.getWidgetsAtRow(i).filter(function(t){return'errorMarker'==t.type})[0];a?a.destroy():i-=e;var l=r(t,i,e),u;if(l){var c=l[0];n.column=(c.pos&&'number'!=typeof c.column?c.pos.sc:c.column)||0,n.row=c.row,u=s.renderer.$gutterLayer.$annotations[n.row]}else{if(a)return;u={text:['Looks good!'],className:'ace_ok'}}s.session.unfold(n.row),s.selection.moveToPosition(n);var h={row:n.row,fixedWidth:!0,coverGutter:!0,el:o.createElement('div'),type:'errorMarker'},d=h.el.appendChild(o.createElement('div')),m=h.el.appendChild(o.createElement('div'));m.className='error_widget_arrow '+u.className;var p=s.renderer.$cursorLayer.getPixelPosition(n).left;m.style.left=p+s.renderer.gutterWidth-5+'px',h.el.className='error_widget_wrapper',d.className='error_widget '+u.className,d.innerHTML=u.text.join('<br>'),d.appendChild(o.createElement('div'));var f=function(a,e,t){if(0===e&&('esc'===t||'return'===t))return h.destroy(),{command:'null'}};h.destroy=function(){s.$mouseHandler.isMousePressed||(s.keyBinding.removeKeyboardHandler(f),t.widgetManager.removeLineWidget(h),s.off('changeSelection',h.destroy),s.off('changeSession',h.destroy),s.off('mouseup',h.destroy),s.off('change',h.destroy))},s.keyBinding.addKeyboardHandler(f),s.on('changeSelection',h.destroy),s.on('changeSession',h.destroy),s.on('mouseup',h.destroy),s.on('change',h.destroy),s.session.widgetManager.addLineWidget(h),h.el.onmousedown=s.focus.bind(s),s.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},o.importCssString('    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }','')}),ace.define('ace/ace',['require','exports','module','ace/lib/fixoldbrowsers','ace/lib/dom','ace/lib/event','ace/editor','ace/edit_session','ace/undomanager','ace/virtual_renderer','ace/worker/worker_client','ace/keyboard/hash_handler','ace/placeholder','ace/multi_select','ace/mode/folding/fold_mode','ace/theme/textmate','ace/ext/error_marker','ace/config'],function(n,d){'use strict';n('./lib/fixoldbrowsers');var t=n('./lib/dom'),r=n('./lib/event'),o=n('./editor').Editor,i=n('./edit_session').EditSession,a=n('./undomanager').UndoManager,s=n('./virtual_renderer').VirtualRenderer;n('./worker/worker_client'),n('./keyboard/hash_handler'),n('./placeholder'),n('./multi_select'),n('./mode/folding/fold_mode'),n('./theme/textmate'),n('./ext/error_marker'),d.config=n('./config'),d.require=n,d.define=R(2),d.edit=function(c){if('string'==typeof c){var p=c;if(!(c=document.getElementById(p)))throw new Error('ace.edit can\'t find div #'+p)}if(c&&c.env&&c.env.editor instanceof o)return c.env.editor;var n='';if(c&&/input|textarea/i.test(c.tagName)){var i=c;n=i.value,c=t.createElement('pre'),i.parentNode.replaceChild(c,i)}else c&&(n=t.getInnerText(c),c.innerHTML='');var a=d.createEditSession(n),m=new o(new s(c));m.setSession(a);var g={document:a,editor:m,onResize:m.resize.bind(m,null)};return i&&(g.textarea=i),r.addListener(window,'resize',g.onResize),m.on('destroy',function(){r.removeListener(window,'resize',g.onResize),g.editor.container.env=null}),m.container.env=m.env=g,m},d.createEditSession=function(r,e){var t=new i(r,e);return t.setUndoManager(new a),t},d.EditSession=i,d.UndoManager=a,d.version='1.2.8'}),function(){ace.require(['ace/ace'],function(n){for(var e in n&&(n.config.init(!0),n.define=ace.define),window.ace||(window.ace=n),n)n.hasOwnProperty(e)&&(window.ace[e]=n[e])})}(),ace.define('ace/theme/monokai',['require','exports','module','ace/lib/dom'],function(n,e){e.isDark=!0,e.cssClass='ace-monokai',e.cssText='.ace-monokai .ace_gutter {    background: #222;    color: #8F908A    }    .ace-monokai .ace_print-margin {    width: 1px;    background: #555651    }    .ace-monokai {    background-color: #222;    color: #f9f9f9;    font-size: 14px;    }    .ace-monokai .ace_cursor {    color: #F8F8F0    }    .ace-monokai .ace_marker-layer .ace_selection {    background: #a6e22e    }    .ace-monokai.ace_multiselect .ace_selection.ace_start {    box-shadow: 0 0 3px 0px #272822;    }    .ace-monokai .ace_marker-layer .ace_step {    background: rgb(102, 82, 0)    }    .ace-monokai .ace_marker-layer .ace_bracket {    margin: -1px 0 0 -1px;    border: 1px solid #a6e22e    }    .ace-monokai .ace_marker-layer .ace_active-line {    background: #2c2c2c    }    .ace-monokai .ace_gutter-active-line {    background-color: #2c2c2c    }    .ace-monokai .ace_marker-layer .ace_selected-word {    border: 1px solid #a6e22e    }    .ace-monokai .ace_invisible {    color: #52524d    }    .ace-monokai .ace_entity.ace_name.ace_tag,    .ace-monokai .ace_keyword,    .ace-monokai .ace_meta.ace_tag,    .ace-monokai .ace_storage {    color: #F0640D    }    .ace-monokai .ace_punctuation,    .ace-monokai .ace_punctuation.ace_tag {    color: #fff    }    .ace-monokai .ace_constant.ace_character,    .ace-monokai .ace_constant.ace_other {    color: #5db0d7    }    .ace-monokai .ace_constant.ace_language {        color: #e6db74    }    .ace-monokai .ace_constant.ace_numeric {    color: #ae81ff    }    .ace-monokai .ace_invalid {    color: #F8F8F0;    background-color: #F0640D    }    .ace-monokai .ace_invalid.ace_deprecated {    color: #F8F8F0;    background-color: #5db0d7    }    .ace-monokai .ace_support.ace_constant,    .ace-monokai .ace_support.ace_function {    color: #5db0d7    }    .ace-monokai .ace_fold {    background-color: #A6E22E;    border-color: #F8F8F2    }    .ace-monokai .ace_storage.ace_type,    .ace-monokai .ace_support.ace_class,    .ace-monokai .ace_support.ace_type {    font-style: italic;    color: #5db0d7    }    .ace-monokai .ace_entity.ace_name.ace_function,    .ace-monokai .ace_entity.ace_other,    .ace-monokai .ace_entity.ace_other.ace_attribute-name,    .ace-monokai .ace_variable {    color: #A6E22E    }    .ace-monokai .ace_variable.ace_parameter {    font-style: italic;    color: #FD971F    }    .ace-monokai .ace_string {    color: #E6DB74    }    .ace-monokai .ace_comment {    color: #75715E    }    .ace-monokai .ace_indent-guide {    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y    }',n('../lib/dom').importCssString(e.cssText,e.cssClass)}),ace.define('ace/ext/searchbox',['require','exports','module','ace/lib/dom','ace/lib/lang','ace/lib/event','ace/keyboard/hash_handler','ace/lib/keys'],function(n,e){'use strict';var d=n('../lib/dom'),i=n('../lib/lang'),p=n('../lib/event'),t=n('../keyboard/hash_handler').HashHandler,o=n('../lib/keys');d.importCssString('        .ace_search {        background-color: #ddd;        color: #666;        border: 1px solid #cbcbcb;        border-top: 0 none;        overflow: hidden;        margin: 0;        padding: 4px 6px 0 4px;        position: absolute;        top: 0;        z-index: 99;        white-space: normal;        }        .ace_search.left {        border-left: 0 none;        border-radius: 0px 0px 5px 0px;        left: 0;        }        .ace_search.right {        border-radius: 0px 0px 0px 5px;        border-right: 0 none;        right: 0;        }        .ace_search_form, .ace_replace_form {        margin: 0 20px 4px 0;        overflow: hidden;        line-height: 1.9;        }        .ace_replace_form {        margin-right: 0;        }        .ace_search_form.ace_nomatch {        outline: 1px solid red;        }        .ace_search_field {        border-radius: 3px 0 0 3px;        background-color: white;        color: black;        border: 1px solid #cbcbcb;        border-right: 0 none;        box-sizing: border-box!important;        outline: 0;        padding: 0;        font-size: inherit;        margin: 0;        line-height: inherit;        padding: 0 6px;        min-width: 17em;        vertical-align: top;        }        .ace_searchbtn {        border: 1px solid #cbcbcb;        line-height: inherit;        display: inline-block;        padding: 0 6px;        background: #fff;        border-right: 0 none;        border-left: 1px solid #dcdcdc;        cursor: pointer;        margin: 0;        position: relative;        box-sizing: content-box!important;        color: #666;        }        .ace_searchbtn:last-child {        border-radius: 0 3px 3px 0;        border-right: 1px solid #cbcbcb;        }        .ace_searchbtn:disabled {        background: none;        cursor: default;        }        .ace_searchbtn:hover {        background-color: #eef1f6;        }        .ace_searchbtn.prev, .ace_searchbtn.next {        padding: 0px 0.7em        }        .ace_searchbtn.prev:after, .ace_searchbtn.next:after {        content: "";        border: solid 2px #888;        width: 0.5em;        height: 0.5em;        border-width:  2px 0 0 2px;        display:inline-block;        transform: rotate(-45deg);        }        .ace_searchbtn.next:after {        border-width: 0 2px 2px 0 ;        }        .ace_searchbtn_close {        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;        border-radius: 50%;        border: 0 none;        color: #656565;        cursor: pointer;        font: 16px/16px Arial;        padding: 0;        height: 14px;        width: 14px;        top: 9px;        right: 7px;        position: absolute;        }        .ace_searchbtn_close:hover {        background-color: #656565;        background-position: 50% 100%;        color: white;        }        .ace_button {        margin-left: 2px;        cursor: pointer;        -webkit-user-select: none;        -moz-user-select: none;        -o-user-select: none;        -ms-user-select: none;        user-select: none;        overflow: hidden;        opacity: 0.7;        border: 1px solid rgba(100,100,100,0.23);        padding: 1px;        box-sizing:    border-box!important;        color: black;        }        .ace_button:hover {        background-color: #eee;        opacity:1;        }        .ace_button:active {        background-color: #ddd;        }        .ace_button.checked {        border-color: #3399ff;        opacity:1;        }        .ace_search_options{        margin-bottom: 3px;        text-align: right;        -webkit-user-select: none;        -moz-user-select: none;        -o-user-select: none;        -ms-user-select: none;        user-select: none;        clear: both;        }        .ace_search_counter {        float: left;        font-family: arial;        padding: 0 8px;        }','ace_searchbox');var a='<div class="ace_search right">            <span action="hide" class="ace_searchbtn_close"></span>            <div class="ace_search_form">                <input class="ace_search_field" placeholder="Search for" spellcheck="false"></input>                <span action="findPrev" class="ace_searchbtn prev"></span>                <span action="findNext" class="ace_searchbtn next"></span>                <span action="findAll" class="ace_searchbtn" title="Alt-Enter">All</span>            </div>            <div class="ace_replace_form">                <input class="ace_search_field" placeholder="Replace with" spellcheck="false"></input>                <span action="replaceAndFindNext" class="ace_searchbtn">Replace</span>                <span action="replaceAll" class="ace_searchbtn">All</span>            </div>            <div class="ace_search_options">                <span action="toggleReplace" class="ace_button" title="Toggel Replace mode"                    style="float:left;margin-top:-2px;padding:0 5px;">+</span>                <span class="ace_search_counter"></span>                <span action="toggleRegexpMode" class="ace_button" title="RegExp Search">.*</span>                <span action="toggleCaseSensitive" class="ace_button" title="CaseSensitive Search">Aa</span>                <span action="toggleWholeWords" class="ace_button" title="Whole Word Search">\\b</span>                <span action="searchInSelection" class="ace_button" title="Search In Selection">S</span>            </div>        </div>'.replace(/> +/g,'>'),r=function(t){var e=d.createElement('div');e.innerHTML=a,this.element=e.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(t)};(function(){this.setEditor=function(t){t.searchBox=this,t.renderer.scroller.appendChild(this.element),this.editor=t},this.setSession=function(){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(t){this.searchBox=t.querySelector('.ace_search_form'),this.replaceBox=t.querySelector('.ace_replace_form'),this.searchOption=t.querySelector('[action=searchInSelection]'),this.replaceOption=t.querySelector('[action=toggleReplace]'),this.regExpOption=t.querySelector('[action=toggleRegexpMode]'),this.caseSensitiveOption=t.querySelector('[action=toggleCaseSensitive]'),this.wholeWordOption=t.querySelector('[action=toggleWholeWords]'),this.searchInput=this.searchBox.querySelector('.ace_search_field'),this.replaceInput=this.replaceBox.querySelector('.ace_search_field'),this.searchCounter=t.querySelector('.ace_search_counter')},this.$init=function(){var n=this.element;this.$initElements(n);var a=this;p.addListener(n,'mousedown',function(t){setTimeout(function(){a.activeInput.focus()},0),p.stopPropagation(t)}),p.addListener(n,'click',function(t){var e=t.target||t.srcElement,n=e.getAttribute('action');n&&a[n]?a[n]():a.$searchBarKb.commands[n]&&a.$searchBarKb.commands[n].exec(a),p.stopPropagation(t)}),p.addCommandKeyListener(n,function(t,e,n){var i=o.keyCodeToString(n),r=a.$searchBarKb.findKeyCommand(e,i);r&&r.exec&&(r.exec(a),p.stopEvent(t))}),this.$onChange=i.delayedCall(function(){a.find(!1,!1)}),p.addListener(this.searchInput,'input',function(){a.$onChange.schedule(20)}),p.addListener(this.searchInput,'focus',function(){a.activeInput=a.searchInput,a.searchInput.value&&a.highlight()}),p.addListener(this.replaceInput,'focus',function(){a.activeInput=a.replaceInput,a.searchInput.value&&a.highlight()})},this.$closeSearchBarKb=new t([{bindKey:'Esc',name:'closeSearchBar',exec:function(t){t.searchBox.hide()}}]),this.$searchBarKb=new t,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(n){var e=n.isReplace=!n.isReplace;n.replaceBox.style.display=e?'':'none',n.replaceOption.checked=!1,n.$syncOptions(),n.searchInput.focus()},"Ctrl-H|Command-Option-F":function(t){t.replaceOption.checked=!0,t.$syncOptions(),t.replaceInput.focus()},"Ctrl-G|Command-G":function(t){t.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(t){t.findPrev()},esc:function(t){setTimeout(function(){t.hide()})},Return:function(t){t.activeInput==t.replaceInput&&t.replace(),t.findNext()},"Shift-Return":function(t){t.activeInput==t.replaceInput&&t.replace(),t.findPrev()},"Alt-Return":function(t){t.activeInput==t.replaceInput&&t.replaceAll(),t.findAll()},Tab:function(t){(t.activeInput==t.replaceInput?t.searchInput:t.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:'toggleRegexpMode',bindKey:{win:'Alt-R|Alt-/',mac:'Ctrl-Alt-R|Ctrl-Alt-/'},exec:function(t){t.regExpOption.checked=!t.regExpOption.checked,t.$syncOptions()}},{name:'toggleCaseSensitive',bindKey:{win:'Alt-C|Alt-I',mac:'Ctrl-Alt-R|Ctrl-Alt-I'},exec:function(t){t.caseSensitiveOption.checked=!t.caseSensitiveOption.checked,t.$syncOptions()}},{name:'toggleWholeWords',bindKey:{win:'Alt-B|Alt-W',mac:'Ctrl-Alt-B|Ctrl-Alt-W'},exec:function(t){t.wholeWordOption.checked=!t.wholeWordOption.checked,t.$syncOptions()}},{name:'toggleReplace',exec:function(t){t.replaceOption.checked=!t.replaceOption.checked,t.$syncOptions()}},{name:'searchInSelection',exec:function(t){t.searchOption.checked=!t.searchRange,t.setSearchRange(t.searchOption.checked&&t.editor.getSelectionRange()),t.$syncOptions()}}]),this.setSearchRange=function(t){this.searchRange=t,t?this.searchRangeMarker=this.editor.session.addMarker(t,'ace_active-line'):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(t){d.setCssClass(this.replaceOption,'checked',this.searchRange),d.setCssClass(this.searchOption,'checked',this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?'-':'+',d.setCssClass(this.regExpOption,'checked',this.regExpOption.checked),d.setCssClass(this.wholeWordOption,'checked',this.wholeWordOption.checked),d.setCssClass(this.caseSensitiveOption,'checked',this.caseSensitiveOption.checked),this.replaceBox.style.display=this.replaceOption.checked?'':'none',this.find(!1,!1,t)},this.highlight=function(t){this.editor.session.highlight(t||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(a,i,s){var l=this.editor.find(this.searchInput.value,{skipCurrent:a,backwards:i,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:s,range:this.searchRange}),c=!l&&this.searchInput.value;d.setCssClass(this.searchBox,'ace_nomatch',c),this.editor._emit('findSearchBox',{match:!c}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var l=this.editor,e=l.$search.$options.re,t=0,n=0;if(e){var i=this.searchRange?l.session.getTextRange(this.searchRange):l.getValue(),r=l.session.doc.positionToIndex(l.selection.anchor);this.searchRange&&(r-=l.session.doc.positionToIndex(this.searchRange.start));for(var o=e.lastIndex=0,a;(a=e.exec(i))&&(t++,o=a.index,o<=r&&n++,!(999<t))&&(a[0]||(e.lastIndex=o+=1,!(o>=i.length))););}this.searchCounter.textContent=n+' of '+(999<t?'999+':t)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var n=this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),a=!n&&this.searchInput.value;d.setCssClass(this.searchBox,'ace_nomatch',a),this.editor._emit('findSearchBox',{match:!a}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off('changeSession',this.setSession),this.element.style.display='none',this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(n,e){this.active=!0,this.editor.on('changeSession',this.setSession),this.element.style.display='',this.replaceOption.checked=e,n&&(this.searchInput.value=n),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var t=document.activeElement;return t==this.searchInput||t==this.replaceInput}}).call(r.prototype),e.SearchBox=r,e.Search=function(n,e){(n.searchBox||new r(n)).show(n.session.getTextRange(),e)}}),function(){ace.require(['ace/ext/searchbox'],function(){})}(),ace.define('ace/mode/doc_comment_highlight_rules',['require','exports','module','ace/lib/oop','ace/mode/text_highlight_rules'],function(n,e){'use strict';var t=n('../lib/oop'),a=n('./text_highlight_rules').TextHighlightRules,r=function(){this.$rules={start:[{token:'comment.doc.tag',regex:'@[\\w\\d_]+'},r.getTagRule(),{defaultToken:'comment.doc',caseInsensitive:!0}]}};t.inherits(r,a),r.getTagRule=function(){return{token:'comment.doc.tag.storage.type',regex:'\\b(?:TODO|FIXME|XXX|HACK)\\b'}},r.getStartRule=function(t){return{token:'comment.doc',regex:'\\/\\*(?=\\*)',next:t}},r.getEndRule=function(t){return{token:'comment.doc',regex:'\\*\\/',next:t}},e.DocCommentHighlightRules=r}),ace.define('ace/mode/c_cpp_highlight_rules',['require','exports','module','ace/lib/oop','ace/mode/doc_comment_highlight_rules','ace/mode/text_highlight_rules'],function(n,e){'use strict';var t=n('../lib/oop'),i=n('./doc_comment_highlight_rules').DocCommentHighlightRules,r=n('./text_highlight_rules').TextHighlightRules,o=e.cFunctions='\\b(?:hypot(?:f|l)?|s(?:scanf|ystem|nprintf|ca(?:nf|lb(?:n(?:f|l)?|ln(?:f|l)?))|i(?:n(?:h(?:f|l)?|f|l)?|gn(?:al|bit))|tr(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?)|error|pbrk|ftime|len|rchr|xfrm)|printf|et(?:jmp|vbuf|locale|buf)|qrt(?:f|l)?|w(?:scanf|printf)|rand)|n(?:e(?:arbyint(?:f|l)?|xt(?:toward(?:f|l)?|after(?:f|l)?))|an(?:f|l)?)|c(?:s(?:in(?:h(?:f|l)?|f|l)?|qrt(?:f|l)?)|cos(?:h(?:f)?|f|l)?|imag(?:f|l)?|t(?:ime|an(?:h(?:f|l)?|f|l)?)|o(?:s(?:h(?:f|l)?|f|l)?|nj(?:f|l)?|pysign(?:f|l)?)|p(?:ow(?:f|l)?|roj(?:f|l)?)|e(?:il(?:f|l)?|xp(?:f|l)?)|l(?:o(?:ck|g(?:f|l)?)|earerr)|a(?:sin(?:h(?:f|l)?|f|l)?|cos(?:h(?:f|l)?|f|l)?|tan(?:h(?:f|l)?|f|l)?|lloc|rg(?:f|l)?|bs(?:f|l)?)|real(?:f|l)?|brt(?:f|l)?)|t(?:ime|o(?:upper|lower)|an(?:h(?:f|l)?|f|l)?|runc(?:f|l)?|gamma(?:f|l)?|mp(?:nam|file))|i(?:s(?:space|n(?:ormal|an)|cntrl|inf|digit|u(?:nordered|pper)|p(?:unct|rint)|finite|w(?:space|c(?:ntrl|type)|digit|upper|p(?:unct|rint)|lower|al(?:num|pha)|graph|xdigit|blank)|l(?:ower|ess(?:equal|greater)?)|al(?:num|pha)|gr(?:eater(?:equal)?|aph)|xdigit|blank)|logb(?:f|l)?|max(?:div|abs))|di(?:v|fftime)|_Exit|unget(?:c|wc)|p(?:ow(?:f|l)?|ut(?:s|c(?:har)?|wc(?:har)?)|error|rintf)|e(?:rf(?:c(?:f|l)?|f|l)?|x(?:it|p(?:2(?:f|l)?|f|l|m1(?:f|l)?)?))|v(?:s(?:scanf|nprintf|canf|printf|w(?:scanf|printf))|printf|f(?:scanf|printf|w(?:scanf|printf))|w(?:scanf|printf)|a_(?:start|copy|end|arg))|qsort|f(?:s(?:canf|e(?:tpos|ek))|close|tell|open|dim(?:f|l)?|p(?:classify|ut(?:s|c|w(?:s|c))|rintf)|e(?:holdexcept|set(?:e(?:nv|xceptflag)|round)|clearexcept|testexcept|of|updateenv|r(?:aiseexcept|ror)|get(?:e(?:nv|xceptflag)|round))|flush|w(?:scanf|ide|printf|rite)|loor(?:f|l)?|abs(?:f|l)?|get(?:s|c|pos|w(?:s|c))|re(?:open|e|ad|xp(?:f|l)?)|m(?:in(?:f|l)?|od(?:f|l)?|a(?:f|l|x(?:f|l)?)?))|l(?:d(?:iv|exp(?:f|l)?)|o(?:ngjmp|cal(?:time|econv)|g(?:1(?:p(?:f|l)?|0(?:f|l)?)|2(?:f|l)?|f|l|b(?:f|l)?)?)|abs|l(?:div|abs|r(?:int(?:f|l)?|ound(?:f|l)?))|r(?:int(?:f|l)?|ound(?:f|l)?)|gamma(?:f|l)?)|w(?:scanf|c(?:s(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?|mbs)|pbrk|ftime|len|r(?:chr|tombs)|xfrm)|to(?:b|mb)|rtomb)|printf|mem(?:set|c(?:hr|py|mp)|move))|a(?:s(?:sert|ctime|in(?:h(?:f|l)?|f|l)?)|cos(?:h(?:f|l)?|f|l)?|t(?:o(?:i|f|l(?:l)?)|exit|an(?:h(?:f|l)?|2(?:f|l)?|f|l)?)|b(?:s|ort))|g(?:et(?:s|c(?:har)?|env|wc(?:har)?)|mtime)|r(?:int(?:f|l)?|ound(?:f|l)?|e(?:name|alloc|wind|m(?:ove|quo(?:f|l)?|ainder(?:f|l)?))|a(?:nd|ise))|b(?:search|towc)|m(?:odf(?:f|l)?|em(?:set|c(?:hr|py|mp)|move)|ktime|alloc|b(?:s(?:init|towcs|rtowcs)|towc|len|r(?:towc|len))))\\b',l=function(){var n=this.$keywords=this.createKeywordMapper({"keyword.control":'break|case|continue|default|do|else|for|goto|if|_Pragma|return|switch|while|catch|operator|try|throw|using',"storage.type":'asm|__asm__|auto|bool|_Bool|char|_Complex|double|enum|float|_Imaginary|int|long|short|signed|struct|typedef|union|unsigned|void|class|wchar_t|template|char16_t|char32_t',"storage.modifier":'const|extern|register|restrict|static|volatile|inline|private|protected|public|friend|explicit|virtual|export|mutable|typename|constexpr|new|delete|alignas|alignof|decltype|noexcept|thread_local',"keyword.operator":'and|and_eq|bitand|bitor|compl|not|not_eq|or|or_eq|typeid|xor|xor_eqconst_cast|dynamic_cast|reinterpret_cast|static_cast|sizeof|namespace',"variable.language":'this',"constant.language":'NULL|true|false|TRUE|FALSE|nullptr'},'identifier'),a=/\\(?:['"?\\abfnrtv]|[0-7]{1,3}|x[a-fA-F\d]{2}|u[a-fA-F\d]{4}U[a-fA-F\d]{8}|.)/.source;this.$rules={start:[{token:'comment',regex:'//$',next:'start'},{token:'comment',regex:'//',next:'singleLineComment'},i.getStartRule('doc-start'),{token:'comment',regex:'\\/\\*',next:'comment'},{token:'string',regex:'\'(?:'+a+'|.)?\''},{token:'string.start',regex:'"',stateName:'qqstring',next:[{token:'string',regex:/\\\s*$/,next:'qqstring'},{token:'constant.language.escape',regex:a},{token:'constant.language.escape',regex:/%[^'"\\]/},{token:'string.end',regex:'"|$',next:'start'},{defaultToken:'string'}]},{token:'string.start',regex:'R"\\(',stateName:'rawString',next:[{token:'string.end',regex:'\\)"',next:'start'},{defaultToken:'string'}]},{token:'constant.numeric',regex:'0[xX][0-9a-fA-F]+(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b'},{token:'constant.numeric',regex:'[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b'},{token:'keyword',regex:'#\\s*(?:include|import|pragma|line|define|undef|version)\\b',next:'directive'},{token:'keyword',regex:'#\\s*(?:endif|if|ifdef|else|elif|ifndef)\\b'},{token:'support.function.C99.c',regex:o},{token:n,regex:'[a-zA-Z_$][a-zA-Z0-9_$]*'},{token:'keyword.operator',regex:/--|\+\+|<<=|>>=|>>>=|<>|&&|\|\||\?:|[*%\/+\-&\^|~!<>=]=?/},{token:'punctuation.operator',regex:'\\?|\\:|\\,|\\;|\\.'},{token:'paren.lparen',regex:'[[({]'},{token:'paren.rparen',regex:'[\\])}]'},{token:'text',regex:'\\s+'}],comment:[{token:'comment',regex:'\\*\\/',next:'start'},{defaultToken:'comment'}],singleLineComment:[{token:'comment',regex:/\\$/,next:'singleLineComment'},{token:'comment',regex:/$/,next:'start'},{defaultToken:'comment'}],directive:[{token:'constant.other.multiline',regex:/\\/},{token:'constant.other.multiline',regex:/.*\\/},{token:'constant.other',regex:'\\s*<.+?>',next:'start'},{token:'constant.other',regex:'\\s*["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]',next:'start'},{token:'constant.other',regex:'\\s*[\'](?:(?:\\\\.)|(?:[^\'\\\\]))*?[\']',next:'start'},{token:'constant.other',regex:/[^\\\/]+/,next:'start'}]},this.embedRules(i,'doc-',[i.getEndRule('start')]),this.normalizeRules()};t.inherits(l,r),e.c_cppHighlightRules=l}),ace.define('ace/mode/matching_brace_outdent',['require','exports','module','ace/range'],function(n,e){'use strict';var l=n('../range').Range,t=function(){};(function(){this.checkOutdent=function(n,e){return!!/^\s+$/.test(n)&&/^\s*\}/.test(e)},this.autoOutdent=function(i,e){var d=i.getLine(e),n=d.match(/^(\s*\})/);if(!n)return 0;var c=n[1].length,p=i.findMatchingBracket({row:e,column:c});if(!p||p.row==e)return 0;var u=this.$getIndent(i.getLine(p.row));i.replace(new l(e,0,e,c-1),u)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(t.prototype),e.MatchingBraceOutdent=t}),ace.define('ace/mode/folding/cstyle',['require','exports','module','ace/lib/oop','ace/range','ace/mode/folding/fold_mode'],function(n,e){'use strict';var t=n('../../lib/oop'),d=n('../../range').Range,a=n('./fold_mode').FoldMode,r=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,'|'+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,'|'+t.end)))};t.inherits(r,a),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(a,e,t){var n=a.getLine(t);if(this.singleLineBlockCommentRe.test(n)&&!this.startRegionRe.test(n)&&!this.tripleStarBlockCommentRe.test(n))return'';var o=this._getFoldWidgetBase(a,e,t);return!o&&this.startRegionRe.test(n)?'start':o},this.getFoldWidgetRange=function(l,e,t,n){var i=l.getLine(t);if(this.startRegionRe.test(i))return this.getCommentRegionBlock(l,i,t);var r=i.match(this.foldingStartMarker);if(r){var o=r.index;if(r[1])return this.openingBracketBlock(l,r[1],t,o);var s=l.getCommentFoldRange(t,o+r[0].length,1);return s&&!s.isMultiLine()&&(n?s=this.getSectionRange(l,t):'all'!=e&&(s=null)),s}if('markbegin'!==e){var r=i.match(this.foldingStopMarker);if(r){var o=r.index+r[0].length;return r[1]?this.closingBracketBlock(l,r[1],t,o):l.getCommentFoldRange(t,o,-1)}}},this.getSectionRange=function(r,e){var t=r.getLine(e),n=t.search(/\S/),i=e,o=t.length;e+=1;for(var s=e,a=r.getLength();++e<a;){t=r.getLine(e);var l=t.search(/\S/);if(-1!==l){if(n>l)break;var c=this.getFoldWidgetRange(r,'all',e);if(c){if(c.start.row<=i)break;if(c.isMultiLine())e=c.end.row;else if(n==l)break}s=e}}return new d(i,o,s,r.getLine(s).length)},this.getCommentRegionBlock=function(r,e,t){for(var n=e.search(/\s*$/),i=r.getLength(),o=t,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,a=1;++t<i;){e=r.getLine(t);var p=s.exec(e);if(p&&(p[1]?a--:a++,!a))break}var c=t;if(c>o)return new d(o,n,c,e.length)}}.call(r.prototype)}),ace.define('ace/mode/c_cpp',['require','exports','module','ace/lib/oop','ace/mode/text','ace/mode/c_cpp_highlight_rules','ace/mode/matching_brace_outdent','ace/range','ace/mode/behaviour/cstyle','ace/mode/folding/cstyle'],function(n,e){'use strict';var t=n('../lib/oop'),i=n('./text').Mode,r=n('./c_cpp_highlight_rules').c_cppHighlightRules,o=n('./matching_brace_outdent').MatchingBraceOutdent,s=(n('../range').Range,n('./behaviour/cstyle').CstyleBehaviour),a=n('./folding/cstyle').FoldMode,l=function(){this.HighlightRules=r,this.$outdent=new o,this.$behaviour=new s,this.foldingRules=new a};t.inherits(l,i),function(){this.lineCommentStart='//',this.blockComment={start:'/*',end:'*/'},this.getNextLineIndent=function(l,e,t){var n=this.$getIndent(e),i=this.getTokenizer().getLineTokens(e,l),r=i.tokens,o=i.state;if(r.length&&'comment'==r[r.length-1].type)return n;if('start'==l){var s=e.match(/^.*[\{\(\[]\s*$/);s&&(n+=t)}else if('doc-start'==l){if('start'==o)return'';var s=e.match(/^\s*(\/?)\*/);s&&(s[1]&&(n+=' '),n+='* ')}return n},this.checkOutdent=function(a,e,t){return this.$outdent.checkOutdent(e,t)},this.autoOutdent=function(a,e,t){this.$outdent.autoOutdent(e,t)},this.$id='ace/mode/c_cpp'}.call(l.prototype),e.Mode=l}),ace.define('ace/mode/glsl_highlight_rules',['require','exports','module','ace/lib/oop','ace/mode/c_cpp_highlight_rules'],function(n,e){'use strict';var t=n('../lib/oop'),a=n('./c_cpp_highlight_rules').c_cppHighlightRules,r=function(){var n=this.createKeywordMapper({"variable.language":'this',keyword:'layout|attribute|const|uniform|varying|break|continue|do|for|while|if|else|in|out|inout|float|int|void|bool|true|false|lowp|mediump|highp|precision|invariant|discard|return|mat2|mat3|mat4|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|sampler2D|samplerCube|struct',"constant.language":'radians|degrees|sin|cos|tan|asin|acos|atan|pow|exp|log|exp2|log2|sqrt|inversesqrt|abs|sign|floor|ceil|fract|mod|min|max|clamp|mix|step|smoothstep|length|distance|dot|cross|normalize|faceforward|reflect|refract|matrixCompMult|lessThan|lessThanEqual|greaterThan|greaterThanEqual|equal|notEqual|any|all|not|dFdx|dFdy|fwidth|texture2D|texture2DProj|texture2DLod|texture2DProjLod|textureCube|textureCubeLod|gl_MaxVertexAttribs|gl_MaxVertexUniformVectors|gl_MaxVaryingVectors|gl_MaxVertexTextureImageUnits|gl_MaxCombinedTextureImageUnits|gl_MaxTextureImageUnits|gl_MaxFragmentUniformVectors|gl_MaxDrawBuffers|gl_DepthRangeParameters|gl_DepthRange|gl_Position|gl_PointSize|gl_FragCoord|gl_FrontFacing|gl_PointCoord|gl_FragColor|gl_FragData'},'identifier');this.$rules=new a().$rules,this.$rules.start.forEach(function(e){'function'==typeof e.token&&(e.token=n)})};t.inherits(r,a),e.glslHighlightRules=r}),ace.define('ace/mode/glsl',['require','exports','module','ace/lib/oop','ace/mode/c_cpp','ace/mode/glsl_highlight_rules','ace/mode/matching_brace_outdent','ace/range','ace/mode/behaviour/cstyle','ace/mode/folding/cstyle'],function(n,e){'use strict';var t=n('../lib/oop'),i=n('./c_cpp').Mode,r=n('./glsl_highlight_rules').glslHighlightRules,o=n('./matching_brace_outdent').MatchingBraceOutdent,s=(n('../range').Range,n('./behaviour/cstyle').CstyleBehaviour),a=n('./folding/cstyle').FoldMode,l=function(){this.HighlightRules=r,this.$outdent=new o,this.$behaviour=new s,this.foldingRules=new a};t.inherits(l,i),function(){this.$id='ace/mode/glsl'}.call(l.prototype),e.Mode=l}),o.exports=ace},function(a,e,t){var n=t(8);'string'==typeof n&&(n=[[a.i,n,'']]),t(1)(n,{insertInto:'html'}),n.locals&&(a.exports=n.locals)},function(a,e,t){var n=t(9);'string'==typeof n&&(n=[[a.i,n,'']]),t(1)(n,{insertInto:'html'}),n.locals&&(a.exports=n.locals)},function(a,e,t){e=a.exports=t(0)(void 0),e.push([a.i,'code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}',''])},function(a,e,t){e=a.exports=t(0)(void 0),e.push([a.i,'@import url(https://fonts.googleapis.com/css?family=Montserrat:300,400);','']),e.push([a.i,'.resultViewComponent{position:absolute;z-index:99999;border:1px solid #000;top:0;left:0;bottom:0;right:0;background-color:#222;opacity:1;visibility:hidden;display:none;color:#f9f9f9;font-family:Consolas,monaco,monospace;font-size:14px;font-weight:500}.resultViewComponent.active{visibility:visible;display:block}.resultViewComponent,.resultViewComponent:after,.resultViewComponent:before{box-sizing:content-box}.resultViewMenuComponent{font-family:Montserrat,sans-serif;font-size:13px;font-weight:300;line-height:40px;flex:1 100%;height:42px;outline:0 none;border-bottom:2px solid #222;box-sizing:border-box;list-style:none;margin:0;background:#2c2c2c;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;justify-content:flex-end}.resultViewMenuComponent .resultViewMenuOpen{display:none;visibility:hidden}.resultViewMenuComponent a{outline:0 none;text-decoration:none;display:block;padding:0 20px;color:#ccc;background:#2c2c2c;box-sizing:border-box;height:100%}.resultViewMenuComponent a.active{background:#222;color:#fff;font-weight:400;border-bottom:2px solid #f0640d}.resultViewMenuComponent a:hover{background:#222;color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.resultViewMenuComponent a:hover.active{color:#f0640d;transition:color 0;-webkit-transition:color 0;-moz-transition:color 0}.resultViewMenuComponent a.clearSearch{display:inline-block;padding:0;margin-left:-30px;margin-right:20px;z-index:9000;color:#f9f9f9}.resultViewMenuComponent a.clearSearch:hover{background:#2c2c2c;color:#f0640d}@media (max-width:1024px){.resultViewMenuComponent{padding:0;position:absolute;overflow-y:visible;top:0;left:0;right:0;bottom:0;z-index:999999;display:block}.resultViewMenuComponent .resultViewMenuOpen{display:block;visibility:visible}.resultViewMenuComponent li:not(.resultViewMenuSmall){display:none;visibility:hidden}.resultViewMenuComponent li{background:#2c2c2c}.resultViewMenuComponent li.searchContainer{background:#464646}.resultViewMenuComponent a.active{background:#2c2c2c}}.resultViewMenuComponent input{border:0;font-family:Montserrat,sans-serif;font-weight:300;padding:0 20px;background:#464646;color:#f9f9f9;height:100%;position:relative;top:-1px;box-sizing:border-box}.resultViewMenuComponent input:focus{border:0;outline:0 none}.resultViewMenuComponent .clearSearch{position:relative;background:transparent;display:inline;padding:0;margin-left:-30px;z-index:9000;color:#f0640d}.resultViewMenuComponent .clearSearch:hover{background:transparent!important}.resultViewMenuComponent ::-webkit-input-placeholder{color:#ccc}.resultViewMenuComponent :-moz-placeholder,.resultViewMenuComponent ::-moz-placeholder{color:#ccc}.resultViewMenuComponent :-ms-input-placeholder{color:#ccc}.resultViewContentComponent{position:absolute;top:40px;left:0;bottom:0;right:0}.informationColumnLeftComponent{left:0;right:50%}.informationColumnLeftComponent,.informationColumnRightComponent{position:absolute;top:0;bottom:0;overflow:auto;overflow-x:hidden;overflow-y:visible}.informationColumnRightComponent{left:50%;right:0}.captureListComponent{position:absolute;top:40px;left:0;bottom:0;right:0;background:#222;z-index:9000;display:none;visibility:hidden;overflow-y:visible;overflow-x:hidden}.captureListComponent.active{display:block;visibility:visible}.captureListComponent .openCaptureFile{border:1px dashed #f9f9f9;display:block;margin:5px;padding:5px;text-align:center;font-style:italic}.captureListComponent .openCaptureFile span{line-height:100%;vertical-align:middle}.captureListComponent ul{margin:0;padding:0;list-style:none;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;justify-content:flex-start}.captureListComponent ul li{margin:5px;border:1px solid #606060}.captureListComponent ul li img{width:295px;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(.25,#c9c9c9),color-stop(.25,transparent)),-webkit-gradient(linear,0 0,100% 100%,color-stop(.25,#c9c9c9),color-stop(.25,transparent)),-webkit-gradient(linear,0 100%,100% 0,color-stop(.75,transparent),color-stop(.75,#c9c9c9)),-webkit-gradient(linear,0 0,100% 100%,color-stop(.75,transparent),color-stop(.75,#c9c9c9));background-image:-moz-linear-gradient(45deg,#d9d9d9 25%,transparent 25%),-moz-linear-gradient(-45deg,#d9d9d9 25%,transparent 25%),-moz-linear-gradient(45deg,transparent 75%,#d9d9d9 75%),-moz-linear-gradient(-45deg,transparent 75%,#d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0,25px 0,25px -25px,0 25px;display:block}.captureListComponent ul li span{display:block;text-align:center;border:5px solid #222}.captureListComponent ul li span .captureListItemSave{color:#f9f9f9;font-size:16px;margin-left:10px;position:relative;padding:3px 8px 3px 32px}.captureListComponent ul li span .captureListItemSave:after,.captureListComponent ul li span .captureListItemSave:before{box-sizing:border-box;content:"";position:absolute}.captureListComponent ul li span .captureListItemSave:before{background:#d9d9d9;border-color:#f9f9f9;border-style:solid;border-width:7px 2px 1px;border-radius:1px;height:16px;left:8px;top:5px;width:16px}.captureListComponent ul li span .captureListItemSave:after{background:#f9f9f9;border-color:#d9d9d9;border-style:solid;border-width:1px 1px 1px 4px;height:5px;left:13px;top:5px;width:7px}.captureListComponent ul li:hover{cursor:pointer}.captureListComponent ul li.active span{background:#f0640d;border:5px solid #f0640d}.captureListComponent ul li.active span .captureListItemSave:before{background:#f0640d}.captureListComponent ul li.active span .captureListItemSave:after{border-color:#f0640d}.visualStateListComponent{position:absolute;top:0;left:0;bottom:0;padding:5px;right:80%;overflow-y:visible;overflow-x:hidden}.visualStateListComponent ul{margin:0;padding:0;list-style:none}.visualStateListComponent ul li{margin:20px 15px 0;border:1px solid #606060}.visualStateListComponent ul li img{display:block;width:100%;margin:0;padding:0;box-sizing:border-box;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(.25,#c9c9c9),color-stop(.25,transparent)),-webkit-gradient(linear,0 0,100% 100%,color-stop(.25,#c9c9c9),color-stop(.25,transparent)),-webkit-gradient(linear,0 100%,100% 0,color-stop(.75,transparent),color-stop(.75,#c9c9c9)),-webkit-gradient(linear,0 0,100% 100%,color-stop(.75,transparent),color-stop(.75,#c9c9c9));background-image:-moz-linear-gradient(45deg,#d9d9d9 25%,transparent 25%),-moz-linear-gradient(-45deg,#d9d9d9 25%,transparent 25%),-moz-linear-gradient(45deg,transparent 75%,#d9d9d9 75%),-moz-linear-gradient(-45deg,transparent 75%,#d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0,25px 0,25px -25px,0 25px}.visualStateListComponent ul li:hover{cursor:pointer}.visualStateListComponent ul li span{border:5px solid #222;background:#222;box-sizing:border-box;display:inline-block;width:100%;margin:0;padding:5px;word-wrap:break-word}.visualStateListComponent ul li.active{border:2px solid #f0640d}.commandListComponent{position:absolute;top:0;left:20%;right:40%;bottom:0;color:#d3d3d3}.commandListComponent ul{margin:0;padding:0;list-style:none;overflow-y:visible;overflow-x:hidden;height:100%}.commandListComponent ul li{padding:8px}.commandListComponent ul li span{word-wrap:break-word;line-height:22px}.commandListComponent ul li:hover{color:#f9f9f9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.commandListComponent ul li:nth-child(2n){background:#2c2c2c}.commandListComponent ul li:nth-child(odd){background:#222}.commandListComponent ul li .important{font-weight:800}.commandListComponent ul li .important.deprecated{color:red}.commandListComponent ul li .important.unused{color:#ff0}.commandListComponent ul li .important.disabled{color:gray}.commandListComponent ul li .important.redundant{color:orange}.commandListComponent ul li .important.valid{color:#adff2f}.commandListComponent ul li .marker{font-size:16px;font-weight:900;color:#adff2f}.commandListComponent ul li.active{background:#f37628;color:#222}.commandListComponent ul li.drawCall{background:#5db0d7;color:#222}.commandListComponent ul li a{margin-left:5px;margin-right:5px;color:#5db0d7;background:#222;padding:5px;font-weight:900;display:inline-block}.commandDetailComponent{position:absolute;top:0;left:60%;right:0;bottom:0;overflow-y:visible;overflow-x:hidden}.jsonGroupComponent{display:block;margin:10px;padding:10px;padding-bottom:5px}.jsonGroupComponent .jsonGroupComponentTitle{display:block;font-size:16px;color:#5db0d7;border-bottom:1px solid #5db0d7;padding-bottom:5px;margin-bottom:5px;text-transform:capitalize}.jsonGroupComponent ul{margin:0;padding:0;list-style:none}.jsonGroupComponent ul li:nth-child(2n),.jsonGroupComponent ul li:nth-child(odd){background:#222}.jsonItemComponentKey{color:#f0640d}.jsonItemComponentValue{white-space:pre-wrap}.jsonItemImageHolder{width:50%;margin:auto}.jsonItemImageHolder .jsonItemImage{margin:5px;display:block;border:1px solid #606060;width:100%}.jsonItemImageHolder .jsonItemImage img{width:100%;display:block;margin:auto;max-width:256px;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(.25,#c9c9c9),color-stop(.25,transparent)),-webkit-gradient(linear,0 0,100% 100%,color-stop(.25,#c9c9c9),color-stop(.25,transparent)),-webkit-gradient(linear,0 100%,100% 0,color-stop(.75,transparent),color-stop(.75,#c9c9c9)),-webkit-gradient(linear,0 0,100% 100%,color-stop(.75,transparent),color-stop(.75,#c9c9c9));background-image:-moz-linear-gradient(45deg,#d9d9d9 25%,transparent 25%),-moz-linear-gradient(-45deg,#d9d9d9 25%,transparent 25%),-moz-linear-gradient(45deg,transparent 75%,#d9d9d9 75%),-moz-linear-gradient(-45deg,transparent 75%,#d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0,25px 0,25px -25px,0 25px}.jsonItemImageHolder .jsonItemImage span{margin:0;padding:5px;word-wrap:break-word;display:inline-block;width:100%;box-sizing:border-box}[commandName=onOpenSourceClicked]:hover{color:#f9f9f9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.jsonVisualStateItemComponent{text-align:center;padding:10px}.jsonVisualStateItemComponent img{border:1px solid #606060;margin:5px;background-image:-webkit-gradient(linear,0 100%,100% 0,color-stop(.25,#c9c9c9),color-stop(.25,transparent)),-webkit-gradient(linear,0 0,100% 100%,color-stop(.25,#c9c9c9),color-stop(.25,transparent)),-webkit-gradient(linear,0 100%,100% 0,color-stop(.75,transparent),color-stop(.75,#c9c9c9)),-webkit-gradient(linear,0 0,100% 100%,color-stop(.75,transparent),color-stop(.75,#c9c9c9));background-image:-moz-linear-gradient(45deg,#d9d9d9 25%,transparent 25%),-moz-linear-gradient(-45deg,#d9d9d9 25%,transparent 25%),-moz-linear-gradient(45deg,transparent 75%,#d9d9d9 75%),-moz-linear-gradient(-45deg,transparent 75%,#d9d9d9 75%);-webkit-background-size:50px 51px;-moz-background-size:50px 50px;background-size:50px 50px;background-position:0 0,25px 0,25px -25px,0 25px;width:100%;max-width:512px}.jsonVisualStateItemComponent span{display:block}.jsonContentComponent{position:absolute;top:0;left:0;right:0;bottom:0;padding:10px;overflow-y:visible;overflow-x:hidden}.jsonItemComponentValue{word-break:break-all;white-space:normal}.jsonSourceItemComponentOpen{font-weight:700;color:#5db0d7;text-decoration:underline}.sourceCodeMenuComponentContainer{position:absolute;left:0;top:0;right:40%}.sourceCodeMenuComponent{font-family:Montserrat,sans-serif;font-size:13px;font-weight:300;line-height:40px;flex:1 100%;height:42px;outline:0 none;border-bottom:2px solid #222;box-sizing:border-box;list-style:none;margin:0;background:#2c2c2c;display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-flex-flow:row wrap;flex-flow:row wrap;justify-content:flex-end}.sourceCodeMenuComponent .resultViewMenuOpen{display:none;visibility:hidden}.sourceCodeMenuComponent a{outline:0 none;text-decoration:none;display:block;padding:0 20px;color:#ccc;background:#2c2c2c;box-sizing:border-box;height:100%}.sourceCodeMenuComponent a.active{background:#222;color:#fff;font-weight:400;border-bottom:2px solid #f0640d}.sourceCodeMenuComponent a:hover{background:#222;color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.sourceCodeMenuComponent a:hover.active{color:#f0640d;transition:color 0;-webkit-transition:color 0;-moz-transition:color 0}.sourceCodeMenuComponent a.clearSearch{display:inline-block;padding:0;margin-left:-30px;margin-right:20px;z-index:9000;color:#f9f9f9}.sourceCodeMenuComponent a.clearSearch:hover{background:#2c2c2c;color:#f0640d}.sourceCodeMenuComponent input{border:0;font-family:Montserrat,sans-serif;font-weight:300;padding:0 20px;background:#464646;color:#f9f9f9;height:100%;position:relative;top:-1px;box-sizing:border-box}.sourceCodeMenuComponent input:focus{border:0;outline:0 none}.sourceCodeMenuComponent .clearSearch{position:relative;background:transparent;display:inline;padding:0;margin-left:-30px;z-index:9000;color:#f0640d}.sourceCodeMenuComponent .clearSearch:hover{background:transparent!important}.sourceCodeMenuComponent ::-webkit-input-placeholder{color:#ccc}.sourceCodeMenuComponent :-moz-placeholder,.sourceCodeMenuComponent ::-moz-placeholder{color:#ccc}.sourceCodeMenuComponent :-ms-input-placeholder{color:#ccc}.sourceCodeComponent,.sourceCodeComponentEditable{position:absolute;top:42px;left:0;bottom:0;right:40%;background:#222;z-index:9000;overflow-x:visible;overflow:auto}.sourceCodeComponent .sourceCodeComponentTitle,.sourceCodeComponentEditable .sourceCodeComponentTitle{font-size:16px;font-weight:800;line-height:50px;color:#f0640d;padding:1em;margin:.5em 0}.captureMenuComponent{position:absolute;padding:7px;z-index:99999;top:10px;left:50%;margin-left:-209px;height:40px;width:400px;border:2px solid #222;background-color:#2c2c2c;visibility:hidden;display:none;color:#f9f9f9;font-family:Consolas,monaco,monospace;font-size:14px;font-weight:500}.captureMenuComponent.active{visibility:visible;display:block}.captureMenuComponent,.captureMenuComponent:after,.captureMenuComponent:before{box-sizing:content-box}.captureMenuLogComponent{position:absolute;padding:7px;z-index:80000;top:66px;left:50%;margin-left:-209px;height:40px;width:400px;border:2px solid #222;background-color:#2c2c2c;visibility:hidden;display:none;color:#f9f9f9;font-family:Consolas,monaco,monospace;font-size:14px;font-weight:500}.captureMenuLogComponent.active{visibility:visible;display:block}.captureMenuLogComponent,.captureMenuLogComponent:after,.captureMenuLogComponent:before{box-sizing:content-box}.captureMenuLogComponent span.error{color:red}.canvasListComponent{float:left;width:50%;height:100%}.canvasListComponent [commandName=onCanvasSelection]{vertical-align:center;line-height:40px;white-space:nowrap;text-overflow:ellipsis;width:190px;display:inline-block;overflow:hidden;margin:0 5px}.canvasListComponent [commandName=onCanvasSelection]:hover{color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.canvasListComponent ul{margin:0;padding:7px;list-style:none;position:absolute;top:54px;left:-2px;width:400px;border:2px solid #222;background-color:#2c2c2c}.canvasListComponent ul li{margin:5px}.canvasListComponent ul li:hover{color:#c9c9c9;cursor:pointer;transition:color .3s;-webkit-transition:color .3s;-moz-transition:color .3s}.captureMenuActionsComponent{float:left;width:30%;height:100%;margin-top:7.5px}.captureMenuActionsComponent div{float:left}.captureMenuActionsComponent [commandName=onCaptureRequested]{border-radius:50%;background:#2c2c2c;border:2px solid red;width:21px;height:21px}.captureMenuActionsComponent [commandName=onCaptureRequested]:hover{background:red;cursor:pointer;transition:background .3s;-webkit-transition:background .3s;-moz-transition:background .3s}.captureMenuActionsComponent [commandName=onPlayNextFrameRequested],.captureMenuActionsComponent [commandName=onPlayRequested]{width:21px;height:21px;border:2px solid #f9f9f9;border-radius:50%;margin-left:9px}.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:before,.captureMenuActionsComponent [commandName=onPlayRequested]:before{content:"";position:absolute;display:inline-block;margin-top:6px;margin-left:4px;width:7px;height:7px;border-top:2px solid #f9f9f9;border-right:2px solid #f9f9f9;background-color:#f9f9f9;-moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);transform:rotate(45deg);z-index:-20}.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:after,.captureMenuActionsComponent [commandName=onPlayRequested]:after{content:"";position:absolute;display:inline-block;width:8px;height:20px;background-color:#2c2c2c;z-index:-10}.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:hover,.captureMenuActionsComponent [commandName=onPlayRequested]:hover{cursor:pointer;border:2px solid #c9c9c9;transition:border .3s;-webkit-transition:border .3s;-moz-transition:border .3s}.captureMenuActionsComponent [commandName=onPauseRequested]{width:21px;height:21px;border:2px solid #f9f9f9;border-radius:50%;margin-left:9px}.captureMenuActionsComponent [commandName=onPauseRequested]:before{content:"";position:absolute;display:inline-block;width:2px;height:13px;margin-left:12px;margin-top:4px;background-color:#f9f9f9}.captureMenuActionsComponent [commandName=onPauseRequested]:after{content:"";position:absolute;display:inline-block;width:2px;height:13px;margin-left:7px;margin-top:4px;background-color:#f9f9f9}.captureMenuActionsComponent [commandName=onPauseRequested]:hover{cursor:pointer;border:2px solid #c9c9c9;transition:border .3s;-webkit-transition:border .3s;-moz-transition:border .3s}.captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:before{background-color:#2c2c2c}.fpsCounterComponent{float:left;width:20%;vertical-align:center;line-height:40px;white-space:nowrap}',''])},function(t){t.exports=function(a){var r='undefined'!=typeof window&&window.location;if(!r)throw new Error('fixUrls requires window.location');if(!a||'string'!=typeof a)return a;var s=r.protocol+'//'+r.host,n=s+r.pathname.replace(/\/[^\/]*$/,'/');return a.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(a,e){var t=e.trim().replace(/^"(.*)"$/,function(n,e){return e}).replace(/^'(.*)'$/,function(n,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(t))return a;var r;return r=0===t.indexOf('//')?t:0===t.indexOf('/')?s+t:n+t.replace(/^\.\//,''),'url('+JSON.stringify(r)+')'})}},function(t){var e=function(){return this}();try{e=e||Function('return this')()||(0,eval)('this')}catch(t){'object'==typeof window&&(e=window)}t.exports=e},function(a,e,t){t(7),t(6),t(3),t(5),a.exports=t(4)}])})},function(e,t,n){'use strict';function updateRenderer(){l._renderer=new r.a(s,l)}Object.defineProperty(t,'__esModule',{value:!0});var a=n(1),r=n(15),o=n(31),i=n(2),s=new o.a;a.camera.position.set(3,61,21),a.cameraControls.target.set(0,60,21),a.gl.enable(a.gl.DEPTH_TEST),a.gl.enable(a.gl.BLEND),a.gl.blendEquation(a.gl.FUNC_ADD),a.gl.blendFunc(a.gl.SRC_ALPHA,a.gl.ONE_MINUS_SRC_ALPHA);var l={noise:0.15,size:300,amplitude:1e-4,wind:10,speed:0.1,choppiness:1,wireframe:!1,terrain:!1,_renderer:null};l._renderer=new r.a(s,l),a.gui.add(l,'amplitude',1e-4,9e-4).onChange(updateRenderer),a.gui.add(l,'wind',1,100).onChange(updateRenderer),a.gui.add(l,'speed',1e-3,0.3).onChange(updateRenderer),a.gui.add(l,'choppiness',0.01,2).onChange(updateRenderer),a.gui.add(l,'wireframe').onChange(updateRenderer),a.gui.add(l,'terrain').onChange(updateRenderer),Object(a.makeRenderLoop)(function render(){s.update(),l._renderer.render(a.camera,s)})()},function(e,t,n){'use strict';function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var a=n(1),r=n(16),o=n(22),i=n(24),s=n.n(i),l=n(25),d=n(26),c=n.n(d),p=n(27),u=n(28),m=n.n(u),g=n(29),h=n(30),f=function(){function Renderer(e,t){_classCallCheck(this,Renderer),this._shaderProgramTerrain=Object(o.a)(c.a,Object(p.a)(),{uniforms:['u_viewProjectionMatrix','u_noise'],attribs:['a_position']}),this._shaderProgramOcean=Object(o.a)(s.a,Object(l.a)(),{uniforms:['u_viewProjectionMatrix','u_viewMatrix','u_noise','u_time','u_L','u_resolution','u_cameraPos','u_A','u_V','u_choppiness'],attribs:['a_position','a_heightMap','a_w']}),this._shaderProgramSkybox=Object(o.a)(m.a,Object(g.a)(),{uniforms:['u_viewProjectionMatrix'],attribs:['a_coords']}),this._projectionMatrix=r.a.create(),this._viewMatrix=r.a.create(),this._viewProjectionMatrix=r.a.create(),this._noise=t.noise,this._wind=t.wind,this._speed=t.speed,this._choppiness=t.choppiness,this._terrain=t.terrain,e.wireframe=t.wireframe,e.OCEAN_SIZE=t.size,e.amplitude=t.amplitude,e.createBuffers(),e.createPatchBuffers(),e.createTerrainBuffers()}return Renderer.prototype.render=function render(e,t){e.updateMatrixWorld(),r.a.invert(this._viewMatrix,e.matrixWorld.elements),r.a.copy(this._projectionMatrix,e.projectionMatrix.elements),r.a.multiply(this._viewProjectionMatrix,this._projectionMatrix,this._viewMatrix),a.gl.bindFramebuffer(a.gl.FRAMEBUFFER,null),a.gl.viewport(0,0,canvas.width,canvas.height),a.gl.clear(a.gl.COLOR_BUFFER_BIT|a.gl.DEPTH_BUFFER_BIT),a.gl.useProgram(this._shaderProgramSkybox.glShaderProgram),a.gl.uniformMatrix4fv(this._shaderProgramSkybox.u_viewProjectionMatrix,!1,this._viewProjectionMatrix),t.loadTexture(),t.drawSkybox(this._shaderProgramSkybox),this._terrain&&(a.gl.useProgram(this._shaderProgramTerrain.glShaderProgram),a.gl.uniformMatrix4fv(this._shaderProgramTerrain.u_viewProjectionMatrix,!1,this._viewProjectionMatrix),a.gl.uniform1f(this._shaderProgramTerrain.u_noise,this._noise),t.drawTerrain(this._shaderProgramTerrain)),a.gl.useProgram(this._shaderProgramOcean.glShaderProgram),a.gl.uniformMatrix4fv(this._shaderProgramOcean.u_viewProjectionMatrix,!1,this._viewProjectionMatrix),a.gl.uniformMatrix4fv(this._shaderProgramOcean.u_viewMatrix,!1,this._viewMatrix),a.gl.uniform3f(this._shaderProgramOcean.u_cameraPos,e.position.x,e.position.y,e.position.z),a.gl.uniform1f(this._shaderProgramOcean.u_time,t.time*this._speed),a.gl.uniform1f(this._shaderProgramOcean.u_L,t.OCEAN_SIZE),a.gl.uniform1i(this._shaderProgramOcean.u_resolution,t.OCEAN_RESOLUTION),a.gl.uniform1f(this._shaderProgramOcean.u_A,t.amplitude),a.gl.uniform1f(this._shaderProgramOcean.u_V,this._wind),a.gl.uniform1f(this._shaderProgramOcean.u_choppiness,this._choppiness),t.loadTexture(),t.drawOcean(this._shaderProgramOcean),a.gl.uniform1i(this._shaderProgramOcean.u_resolution,t.OCEAN_LOW_RES),t.bindOceanLowResBuffers(this._shaderProgramOcean);for(var n=0;9>n;n++)4!=n&&t.drawOceanLowRes(this._shaderProgramOcean,n)},Renderer}();t.a=f},function(e,t,n){'use strict';var a=n(0),r=n(17),o=n(18),i=n(3),s=n(19),l=n(20),d=n(21),c=n(4),p=n(5);n.d(t,'a',function(){return s})},function(e,t,n){'use strict';var a=Math.sin,r=Math.cos,o=Math.pow,i=Math.max,s=Math.abs,l=n(0)},function(e,t,n){'use strict';var a=Math.sin,r=Math.cos,o=Math.pow,i=Math.max,s=Math.abs,l=n(0)},function(e,t,n){'use strict';function multiply(e,t,n){let a=t[0],r=t[1],o=t[2],i=t[3],s=t[4],l=t[5],d=t[6],c=t[7],p=t[8],u=t[9],m=t[10],g=t[11],h=t[12],f=t[13],E=t[14],_=t[15],C=n[0],y=n[1],A=n[2],b=n[3];return e[0]=C*a+y*s+A*p+b*h,e[1]=C*r+y*l+A*u+b*f,e[2]=C*o+y*d+A*m+b*E,e[3]=C*i+y*c+A*g+b*_,C=n[4],y=n[5],A=n[6],b=n[7],e[4]=C*a+y*s+A*p+b*h,e[5]=C*r+y*l+A*u+b*f,e[6]=C*o+y*d+A*m+b*E,e[7]=C*i+y*c+A*g+b*_,C=n[8],y=n[9],A=n[10],b=n[11],e[8]=C*a+y*s+A*p+b*h,e[9]=C*r+y*l+A*u+b*f,e[10]=C*o+y*d+A*m+b*E,e[11]=C*i+y*c+A*g+b*_,C=n[12],y=n[13],A=n[14],b=n[15],e[12]=C*a+y*s+A*p+b*h,e[13]=C*r+y*l+A*u+b*f,e[14]=C*o+y*d+A*m+b*E,e[15]=C*i+y*c+A*g+b*_,e}function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}var a=Math.tan,r=Math.sin,o=Math.cos,i=Math.sqrt,s=Math.pow,l=Math.max,d=Math.abs,c=Math.PI;Object.defineProperty(t,'__esModule',{value:!0}),t.create=function create(){let e=new p.a(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.clone=function clone(e){let t=new p.a(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.copy=function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.fromValues=function fromValues(e,t,n,a,r,o,i,s,l,d,c,u,m,g,h,f){let E=new p.a(16);return E[0]=e,E[1]=t,E[2]=n,E[3]=a,E[4]=r,E[5]=o,E[6]=i,E[7]=s,E[8]=l,E[9]=d,E[10]=c,E[11]=u,E[12]=m,E[13]=g,E[14]=h,E[15]=f,E},t.set=function set(e,t,n,a,r,o,i,s,l,d,c,p,u,m,g,h,f){return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e[4]=o,e[5]=i,e[6]=s,e[7]=l,e[8]=d,e[9]=c,e[10]=p,e[11]=u,e[12]=m,e[13]=g,e[14]=h,e[15]=f,e},t.identity=function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.transpose=function transpose(e,t){if(e===t){let n=t[1],a=t[2],r=t[3],o=t[6],i=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=a,e[9]=o,e[11]=t[14],e[12]=r,e[13]=i,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},t.invert=function invert(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=t[4],s=t[5],l=t[6],d=t[7],c=t[8],p=t[9],u=t[10],m=t[11],g=t[12],h=t[13],f=t[14],E=t[15],_=n*s-a*i,C=n*l-r*i,y=n*d-o*i,A=a*l-r*s,b=a*d-o*s,x=r*d-o*l,v=c*h-p*g,S=c*f-u*g,T=c*E-m*g,R=p*f-u*h,F=p*E-m*h,w=u*E-m*f,L=_*w-C*F+y*R+A*T-b*S+x*v;return L?(L=1/L,e[0]=(s*w-l*F+d*R)*L,e[1]=(r*F-a*w-o*R)*L,e[2]=(h*x-f*b+E*A)*L,e[3]=(u*b-p*x-m*A)*L,e[4]=(l*T-i*w-d*S)*L,e[5]=(n*w-r*T+o*S)*L,e[6]=(f*y-g*x-E*C)*L,e[7]=(c*x-u*y+m*C)*L,e[8]=(i*F-s*T+d*v)*L,e[9]=(a*T-n*F-o*v)*L,e[10]=(g*b-h*y+E*_)*L,e[11]=(p*y-c*b-m*_)*L,e[12]=(s*S-i*R-l*v)*L,e[13]=(n*R-a*S+r*v)*L,e[14]=(h*C-g*A-f*_)*L,e[15]=(c*A-p*C+u*_)*L,e):null},t.adjoint=function adjoint(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=t[4],s=t[5],l=t[6],d=t[7],c=t[8],p=t[9],u=t[10],m=t[11],g=t[12],h=t[13],f=t[14],E=t[15];return e[0]=s*(u*E-m*f)-p*(l*E-d*f)+h*(l*m-d*u),e[1]=-(a*(u*E-m*f)-p*(r*E-o*f)+h*(r*m-o*u)),e[2]=a*(l*E-d*f)-s*(r*E-o*f)+h*(r*d-o*l),e[3]=-(a*(l*m-d*u)-s*(r*m-o*u)+p*(r*d-o*l)),e[4]=-(i*(u*E-m*f)-c*(l*E-d*f)+g*(l*m-d*u)),e[5]=n*(u*E-m*f)-c*(r*E-o*f)+g*(r*m-o*u),e[6]=-(n*(l*E-d*f)-i*(r*E-o*f)+g*(r*d-o*l)),e[7]=n*(l*m-d*u)-i*(r*m-o*u)+c*(r*d-o*l),e[8]=i*(p*E-m*h)-c*(s*E-d*h)+g*(s*m-d*p),e[9]=-(n*(p*E-m*h)-c*(a*E-o*h)+g*(a*m-o*p)),e[10]=n*(s*E-d*h)-i*(a*E-o*h)+g*(a*d-o*s),e[11]=-(n*(s*m-d*p)-i*(a*m-o*p)+c*(a*d-o*s)),e[12]=-(i*(p*f-u*h)-c*(s*f-l*h)+g*(s*u-l*p)),e[13]=n*(p*f-u*h)-c*(a*f-r*h)+g*(a*u-r*p),e[14]=-(n*(s*f-l*h)-i*(a*f-r*h)+g*(a*l-r*s)),e[15]=n*(s*u-l*p)-i*(a*u-r*p)+c*(a*l-r*s),e},t.determinant=function determinant(e){let t=e[0],n=e[1],a=e[2],r=e[3],o=e[4],i=e[5],s=e[6],l=e[7],d=e[8],c=e[9],p=e[10],u=e[11],m=e[12],g=e[13],h=e[14],f=e[15];return(t*i-n*o)*(p*f-u*h)-(t*s-a*o)*(c*f-u*g)+(t*l-r*o)*(c*h-p*g)+(n*s-a*i)*(d*f-u*m)-(n*l-r*i)*(d*h-p*m)+(a*l-r*s)*(d*g-c*m)},t.multiply=multiply,t.translate=function translate(e,t,n){let a=n[0],r=n[1],o=n[2],i,s,l,d,c,p,u,m,g,h,f,E;return t===e?(e[12]=t[0]*a+t[4]*r+t[8]*o+t[12],e[13]=t[1]*a+t[5]*r+t[9]*o+t[13],e[14]=t[2]*a+t[6]*r+t[10]*o+t[14],e[15]=t[3]*a+t[7]*r+t[11]*o+t[15]):(i=t[0],s=t[1],l=t[2],d=t[3],c=t[4],p=t[5],u=t[6],m=t[7],g=t[8],h=t[9],f=t[10],E=t[11],e[0]=i,e[1]=s,e[2]=l,e[3]=d,e[4]=c,e[5]=p,e[6]=u,e[7]=m,e[8]=g,e[9]=h,e[10]=f,e[11]=E,e[12]=i*a+c*r+g*o+t[12],e[13]=s*a+p*r+h*o+t[13],e[14]=l*a+u*r+f*o+t[14],e[15]=d*a+m*r+E*o+t[15]),e},t.scale=function scale(e,t,n){let a=n[0],r=n[1],o=n[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.rotate=function rotate(e,n,a,l){let u=l[0],m=l[1],g=l[2],h=i(u*u+m*m+g*g),f,s,c,t,E,_,C,y,A,b,x,v,S,T,R,F,w,L,M,B,D,I,N,P;return d(h)<p.b?null:(h=1/h,u*=h,m*=h,g*=h,f=r(a),s=o(a),c=1-s,t=n[0],E=n[1],_=n[2],C=n[3],y=n[4],A=n[5],b=n[6],x=n[7],v=n[8],S=n[9],T=n[10],R=n[11],F=u*u*c+s,w=m*u*c+g*f,L=g*u*c-m*f,M=u*m*c-g*f,B=m*m*c+s,D=g*m*c+u*f,I=u*g*c+m*f,N=m*g*c-u*f,P=g*g*c+s,e[0]=t*F+y*w+v*L,e[1]=E*F+A*w+S*L,e[2]=_*F+b*w+T*L,e[3]=C*F+x*w+R*L,e[4]=t*M+y*B+v*D,e[5]=E*M+A*B+S*D,e[6]=_*M+b*B+T*D,e[7]=C*M+x*B+R*D,e[8]=t*I+y*N+v*P,e[9]=E*I+A*N+S*P,e[10]=_*I+b*N+T*P,e[11]=C*I+x*N+R*P,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},t.rotateX=function rotateX(e,t,n){let a=r(n),i=o(n),s=t[4],l=t[5],d=t[6],c=t[7],p=t[8],u=t[9],m=t[10],g=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*i+p*a,e[5]=l*i+u*a,e[6]=d*i+m*a,e[7]=c*i+g*a,e[8]=p*i-s*a,e[9]=u*i-l*a,e[10]=m*i-d*a,e[11]=g*i-c*a,e},t.rotateY=function rotateY(e,t,n){let a=r(n),i=o(n),s=t[0],l=t[1],d=t[2],c=t[3],p=t[8],u=t[9],m=t[10],g=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i-p*a,e[1]=l*i-u*a,e[2]=d*i-m*a,e[3]=c*i-g*a,e[8]=s*a+p*i,e[9]=l*a+u*i,e[10]=d*a+m*i,e[11]=c*a+g*i,e},t.rotateZ=function rotateZ(e,t,n){let a=r(n),i=o(n),s=t[0],l=t[1],d=t[2],c=t[3],p=t[4],u=t[5],m=t[6],g=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*i+p*a,e[1]=l*i+u*a,e[2]=d*i+m*a,e[3]=c*i+g*a,e[4]=p*i-s*a,e[5]=u*i-l*a,e[6]=m*i-d*a,e[7]=g*i-c*a,e},t.fromTranslation=function fromTranslation(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},t.fromScaling=function fromScaling(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotation=function fromRotation(e,n,a){let l=a[0],u=a[1],m=a[2],g=i(l*l+u*u+m*m),h,s,c;return d(g)<p.b?null:(g=1/g,l*=g,u*=g,m*=g,h=r(n),s=o(n),c=1-s,e[0]=l*l*c+s,e[1]=u*l*c+m*h,e[2]=m*l*c-u*h,e[3]=0,e[4]=l*u*c-m*h,e[5]=u*u*c+s,e[6]=m*u*c+l*h,e[7]=0,e[8]=l*m*c+u*h,e[9]=u*m*c-l*h,e[10]=m*m*c+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},t.fromXRotation=function fromXRotation(e,t){let n=r(t),a=o(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromYRotation=function fromYRotation(e,t){let n=r(t),a=o(t);return e[0]=a,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromZRotation=function fromZRotation(e,t){let n=r(t),a=o(t);return e[0]=a,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.fromRotationTranslation=function fromRotationTranslation(e,t,n){let a=t[0],r=t[1],o=t[2],i=t[3],s=a+a,l=r+r,d=o+o,c=a*s,p=a*l,u=a*d,m=r*l,g=r*d,h=o*d,f=i*s,E=i*l,_=i*d;return e[0]=1-(m+h),e[1]=p+_,e[2]=u-E,e[3]=0,e[4]=p-_,e[5]=1-(c+h),e[6]=g+f,e[7]=0,e[8]=u+E,e[9]=g-f,e[10]=1-(c+m),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},t.getTranslation=function getTranslation(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},t.getScaling=function getScaling(e,t){let n=t[0],a=t[1],r=t[2],o=t[4],s=t[5],l=t[6],d=t[8],c=t[9],p=t[10];return e[0]=i(n*n+a*a+r*r),e[1]=i(o*o+s*s+l*l),e[2]=i(d*d+c*c+p*p),e},t.getRotation=function getRotation(e,t){let n=t[0]+t[5]+t[10],a=0;return 0<n?(a=2*i(n+1),e[3]=0.25*a,e[0]=(t[6]-t[9])/a,e[1]=(t[8]-t[2])/a,e[2]=(t[1]-t[4])/a):t[0]>t[5]&t[0]>t[10]?(a=2*i(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/a,e[0]=0.25*a,e[1]=(t[1]+t[4])/a,e[2]=(t[8]+t[2])/a):t[5]>t[10]?(a=2*i(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/a,e[0]=(t[1]+t[4])/a,e[1]=0.25*a,e[2]=(t[6]+t[9])/a):(a=2*i(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/a,e[0]=(t[8]+t[2])/a,e[1]=(t[6]+t[9])/a,e[2]=0.25*a),e},t.fromRotationTranslationScale=function fromRotationTranslationScale(e,t,n,a){let r=t[0],o=t[1],i=t[2],s=t[3],l=r+r,d=o+o,c=i+i,p=r*l,u=r*d,m=r*c,g=o*d,h=o*c,f=i*c,E=s*l,_=s*d,C=s*c,y=a[0],A=a[1],b=a[2];return e[0]=(1-(g+f))*y,e[1]=(u+C)*y,e[2]=(m-_)*y,e[3]=0,e[4]=(u-C)*A,e[5]=(1-(p+f))*A,e[6]=(h+E)*A,e[7]=0,e[8]=(m+_)*b,e[9]=(h-E)*b,e[10]=(1-(p+g))*b,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},t.fromRotationTranslationScaleOrigin=function fromRotationTranslationScaleOrigin(e,t,n,a,r){let o=t[0],i=t[1],s=t[2],l=t[3],d=o+o,c=i+i,p=s+s,u=o*d,m=o*c,g=o*p,h=i*c,f=i*p,E=s*p,_=l*d,C=l*c,y=l*p,A=a[0],b=a[1],x=a[2],v=r[0],S=r[1],T=r[2];return e[0]=(1-(h+E))*A,e[1]=(m+y)*A,e[2]=(g-C)*A,e[3]=0,e[4]=(m-y)*b,e[5]=(1-(u+E))*b,e[6]=(f+_)*b,e[7]=0,e[8]=(g+C)*x,e[9]=(f-_)*x,e[10]=(1-(u+h))*x,e[11]=0,e[12]=n[0]+v-(e[0]*v+e[4]*S+e[8]*T),e[13]=n[1]+S-(e[1]*v+e[5]*S+e[9]*T),e[14]=n[2]+T-(e[2]*v+e[6]*S+e[10]*T),e[15]=1,e},t.fromQuat=function fromQuat(e,t){let n=t[0],a=t[1],r=t[2],o=t[3],i=n+n,s=a+a,l=r+r,d=n*i,c=a*i,p=a*s,u=r*i,m=r*s,g=r*l,h=o*i,f=o*s,E=o*l;return e[0]=1-p-g,e[1]=c+E,e[2]=u-f,e[3]=0,e[4]=c-E,e[5]=1-d-g,e[6]=m+h,e[7]=0,e[8]=u+f,e[9]=m-h,e[10]=1-d-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},t.frustum=function frustum(e,t,n,a,r,o,i){let s=1/(n-t),l=1/(r-a),d=1/(o-i);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(r+a)*l,e[10]=(i+o)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*(i*o)*d,e[15]=0,e},t.perspective=function perspective(e,t,n,r,o){let i=1/a(t/2),s=1/(r-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*s,e[15]=0,e},t.perspectiveFromFieldOfView=function perspectiveFromFieldOfView(e,t,n,r){let o=a(t.upDegrees*c/180),i=a(t.downDegrees*c/180),s=a(t.leftDegrees*c/180),l=a(t.rightDegrees*c/180),d=2/(s+l),p=2/(o+i);return e[0]=d,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=p,e[6]=0,e[7]=0,e[8]=-(0.5*((s-l)*d)),e[9]=0.5*((o-i)*p),e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},t.ortho=function ortho(e,t,n,a,r,o,i){let s=1/(t-n),l=1/(a-r),d=1/(o-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+n)*s,e[13]=(r+a)*l,e[14]=(i+o)*d,e[15]=1,e},t.lookAt=function lookAt(e,t,n,a){let r=t[0],o=t[1],s=t[2],l=a[0],c=a[1],u=a[2],m=n[0],g=n[1],h=n[2],f,E,_,C,y,A,b,x,v,S;return d(r-m)<p.b&&d(o-g)<p.b&&d(s-h)<p.b?mat4.identity(e):(b=r-m,x=o-g,v=s-h,S=1/i(b*b+x*x+v*v),b*=S,x*=S,v*=S,f=c*v-u*x,E=u*b-l*v,_=l*x-c*b,S=i(f*f+E*E+_*_),S?(S=1/S,f*=S,E*=S,_*=S):(f=0,E=0,_=0),C=x*_-v*E,y=v*f-b*_,A=b*E-x*f,S=i(C*C+y*y+A*A),S?(S=1/S,C*=S,y*=S,A*=S):(C=0,y=0,A=0),e[0]=f,e[1]=C,e[2]=b,e[3]=0,e[4]=E,e[5]=y,e[6]=x,e[7]=0,e[8]=_,e[9]=A,e[10]=v,e[11]=0,e[12]=-(f*r+E*o+_*s),e[13]=-(C*r+y*o+A*s),e[14]=-(b*r+x*o+v*s),e[15]=1,e)},t.targetTo=function targetTo(e,t,n,a){let r=t[0],o=t[1],s=t[2],l=a[0],d=a[1],c=a[2],p=r-n[0],u=o-n[1],m=s-n[2],g=p*p+u*u+m*m;0<g&&(g=1/i(g),p*=g,u*=g,m*=g);let h=d*m-c*u,f=c*p-l*m,E=l*u-d*p;return e[0]=h,e[1]=f,e[2]=E,e[3]=0,e[4]=u*E-m*f,e[5]=m*h-p*E,e[6]=p*f-u*h,e[7]=0,e[8]=p,e[9]=u,e[10]=m,e[11]=0,e[12]=r,e[13]=o,e[14]=s,e[15]=1,e},t.str=function str(e){return'mat4('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+', '+e[6]+', '+e[7]+', '+e[8]+', '+e[9]+', '+e[10]+', '+e[11]+', '+e[12]+', '+e[13]+', '+e[14]+', '+e[15]+')'},t.frob=function frob(e){return i(s(e[0],2)+s(e[1],2)+s(e[2],2)+s(e[3],2)+s(e[4],2)+s(e[5],2)+s(e[6],2)+s(e[7],2)+s(e[8],2)+s(e[9],2)+s(e[10],2)+s(e[11],2)+s(e[12],2)+s(e[13],2)+s(e[14],2)+s(e[15],2))},t.add=function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},t.subtract=subtract,t.multiplyScalar=function multiplyScalar(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},t.multiplyScalarAndAdd=function multiplyScalarAndAdd(e,t,n,a){return e[0]=t[0]+n[0]*a,e[1]=t[1]+n[1]*a,e[2]=t[2]+n[2]*a,e[3]=t[3]+n[3]*a,e[4]=t[4]+n[4]*a,e[5]=t[5]+n[5]*a,e[6]=t[6]+n[6]*a,e[7]=t[7]+n[7]*a,e[8]=t[8]+n[8]*a,e[9]=t[9]+n[9]*a,e[10]=t[10]+n[10]*a,e[11]=t[11]+n[11]*a,e[12]=t[12]+n[12]*a,e[13]=t[13]+n[13]*a,e[14]=t[14]+n[14]*a,e[15]=t[15]+n[15]*a,e},t.exactEquals=function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},t.equals=function equals(e,t){let n=e[0],a=e[1],r=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],m=e[8],g=e[9],h=e[10],f=e[11],E=e[12],_=e[13],C=e[14],y=e[15],A=t[0],b=t[1],x=t[2],v=t[3],S=t[4],T=t[5],R=t[6],F=t[7],w=t[8],L=t[9],M=t[10],B=t[11],D=t[12],I=t[13],N=t[14],P=t[15];return d(n-A)<=p.b*l(1,d(n),d(A))&&d(a-b)<=p.b*l(1,d(a),d(b))&&d(r-x)<=p.b*l(1,d(r),d(x))&&d(o-v)<=p.b*l(1,d(o),d(v))&&d(i-S)<=p.b*l(1,d(i),d(S))&&d(s-T)<=p.b*l(1,d(s),d(T))&&d(c-R)<=p.b*l(1,d(c),d(R))&&d(u-F)<=p.b*l(1,d(u),d(F))&&d(m-w)<=p.b*l(1,d(m),d(w))&&d(g-L)<=p.b*l(1,d(g),d(L))&&d(h-M)<=p.b*l(1,d(h),d(M))&&d(f-B)<=p.b*l(1,d(f),d(B))&&d(E-D)<=p.b*l(1,d(E),d(D))&&d(_-I)<=p.b*l(1,d(_),d(I))&&d(C-N)<=p.b*l(1,d(C),d(N))&&d(y-P)<=p.b*l(1,d(y),d(P))};var p=n(0);t.mul=multiply;t.sub=subtract},function(e,t,n){'use strict';function create(){let e=new i.a(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function setAxisAngle(e,t,n){n*=0.5;let r=o(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a(n),e}function slerp(e,n,a,i){let t=n[0],s=n[1],l=n[2],d=n[3],c=a[0],p=a[1],u=a[2],m=a[3],g,h,f,E,_;return h=t*c+s*p+l*u+d*m,0>h&&(h=-h,c=-c,p=-p,u=-u,m=-m),1e-6<1-h?(g=r(h),f=o(g),E=o((1-i)*g)/f,_=o(i*g)/f):(E=1-i,_=i),e[0]=E*t+_*c,e[1]=E*s+_*p,e[2]=E*l+_*u,e[3]=E*d+_*m,e}function fromMat3(e,t){let n=t[0]+t[4]+t[8],a;if(0<n)a=s(n+1),e[3]=0.5*a,a=0.5/a,e[0]=(t[5]-t[7])*a,e[1]=(t[6]-t[2])*a,e[2]=(t[1]-t[3])*a;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);let r=(n+1)%3,o=(n+2)%3;a=s(t[3*n+n]-t[3*r+r]-t[3*o+o]+1),e[n]=0.5*a,a=0.5/a,e[3]=(t[3*r+o]-t[3*o+r])*a,e[r]=(t[3*r+n]+t[3*n+r])*a,e[o]=(t[3*o+n]+t[3*n+o])*a}return e}var r=Math.acos,o=Math.sin,a=Math.cos,s=Math.sqrt,i=n(0),l=n(3),d=n(4),c=n(5);const p=c.b,u=c.g,m=c.c,g=c.l,h=c.a,f=c.k,E=c.d,_=c.i,C=c.h,y=c.m,A=c.j,b=c.f,x=c.e,v=function(){let e=d.a(),t=d.d(1,0,0),n=d.d(0,1,0);return function(r,o,a){let i=d.c(o,a);return-0.999999>i?(d.b(e,t,o),1e-6>d.e(e)&&d.b(e,n,o),d.f(e,e),setAxisAngle(r,e,Math.PI),r):0.999999<i?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(d.b(e,o,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+i,A(r,r))}}(),S=function(){let e=create(),n=create();return function(r,o,a,i,s,l){return slerp(e,o,s,l),slerp(n,a,i,l),slerp(r,e,n,2*l*(1-l)),r}}(),T=function(){let e=l.a();return function(t,n,a,r){return e[0]=a[0],e[3]=a[1],e[6]=a[2],e[1]=r[0],e[4]=r[1],e[7]=r[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],A(t,fromMat3(t,e))}}()},function(e,t,n){'use strict';function create(){let e=new c.a(2);return e[0]=0,e[1]=0,e}var a=Math.sqrt,r=Math.ceil,o=Math.round,s=Math.min,i=Math.floor,l=Math.max,d=Math.abs,c=n(0);(function(){let e=create();return function(t,n,a,r,o,d){let c,i;for(n||(n=2),a||(a=0),i=r?s(r*n+a,t.length):t.length,c=a;c<i;c+=n)e[0]=t[c],e[1]=t[c+1],o(e,e,d),t[c]=e[0],t[c+1]=e[1];return t}})()},function(e,t,n){'use strict';function compileShader(e,t){var n=a.gl.createShader(t);return a.gl.shaderSource(n,e),a.gl.compileShader(n),a.gl.getShaderParameter(n,a.gl.COMPILE_STATUS)||(console.error(e),Object(a.abort)('shader compiler error:\n'+a.gl.getShaderInfoLog(n))),n}function linkShader(e,t){var n=a.gl.createProgram();return a.gl.attachShader(n,e),a.gl.attachShader(n,t),a.gl.linkProgram(n),a.gl.getProgramParameter(n,a.gl.LINK_STATUS)||Object(a.abort)('shader linker error:\n'+a.gl.getProgramInfoLog(n)),n}function addShaderLocations(e,t){if(t&&t.uniforms&&t.uniforms.length)for(var n=0;n<t.uniforms.length;++n){var r;e=Object.assign(e,(r={},r[t.uniforms[n]]=a.gl.getUniformLocation(e.glShaderProgram,t.uniforms[n]),r))}if(t&&t.attribs&&t.attribs.length)for(var o=0;o<t.attribs.length;++o){var i;e=Object.assign(e,(i={},i[t.attribs[o]]=a.gl.getAttribLocation(e.glShaderProgram,t.attribs[o]),i))}return e}t.a=function loadShaderProgram(e,t,n){var r=compileShader(e,a.gl.VERTEX_SHADER),o=compileShader(t,a.gl.FRAGMENT_SHADER);return addShaderLocations({glShaderProgram:linkShader(r,o)},n)};var a=n(1),r=n(23),o=n.n(r);var i=new Float32Array([-1,-1,0,1,-1,0,-1,1,0,1,1,0]),s=a.gl.createBuffer();a.gl.bindBuffer(a.gl.ARRAY_BUFFER,s),a.gl.bufferData(a.gl.ARRAY_BUFFER,i,a.gl.STATIC_DRAW)},function(e){e.exports='#version 300 es\r\nprecision highp float;\r\n\r\nin vec3 a_position;\r\n\r\nout vec2 v_uv;\r\n\r\nout vec4 v_position;\r\n\r\nvoid main() {\r\n    gl_Position = vec4(a_position, 1.0);\r\n    v_uv = a_position.xy * 0.5 + 0.5;\r\n    v_position = vec4(a_position, 1.0);\r\n}'},function(e){e.exports='#version 300 es\r\nprecision highp float;\r\n\r\nconst float PI = 3.14159265359;\r\nconst float g = 9.81;\r\nconst vec2 wind = vec2(1.0, 1.0);\r\n\r\nuniform mat4 u_viewProjectionMatrix;\r\nuniform mat4 u_viewMatrix;\r\n\r\nuniform float u_time;\r\nuniform float u_L;\r\nuniform float u_A;\r\nuniform float u_V;\r\nuniform int u_resolution;\r\nuniform vec3 u_cameraPos;\r\nuniform float u_choppiness;\r\n\r\nin vec3 a_position;\r\n// in vec4 a_heightMap;\r\n// in float a_w;\r\n\r\nout vec3 v_position;\r\nout vec3 v_normal;\r\nout vec3 v_R;\r\nout float v_random;\r\n\r\n// taken from http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\r\nhighp float rand(vec2 co)\r\n{\r\n    highp float a = 12.9898;\r\n    highp float b = 78.233;\r\n    highp float c = 43758.5453;\r\n    highp float dt = dot(co.xy ,vec2(a,b));\r\n    highp float sn = mod(dt,3.14);\r\n    return fract(sin(sn) * c);\r\n}\r\n\r\nvec2 complexExp(float x) {\r\n    return vec2(cos(x), sin(x));\r\n}\r\n\r\nvec2 complexProduct(vec2 a, vec2 b) {\r\n    return vec2(a.x * b.x - a.y * b.y, a.x * b.y + a.y * b.x);\r\n}\r\n\r\nfloat gausRand(float r1, float r2) {\r\n    return sqrt(-2.0 * log(r1)) * cos(2.0 * PI * r2);\r\n}\r\n\r\nvec2 getH_0 (vec2 k, float P) {\r\n    float r1 = rand(vec2(k.x, k.y)) * 2.0 - 1.0;\r\n    float r2 = rand(vec2((mod(k.y * r1, 11.0), mod(k.x, 17.0)))) * 2.0 - 1.0;\r\n\r\n    return vec2( 1.0 / pow (2.0, 0.5) * r1 * sqrt(P), 1.0 / sqrt(2.0) * r2 * pow(P, 0.5));\r\n}\r\n\r\n// first value is heightfield, second is x displacement\r\nvec2 getHeightField(vec3 pos) {\r\n    float n = pos.x;\r\n    float m = pos.z;\r\n    vec2 k = vec2(2.0 * PI * n / u_L, 2.0 * PI * m / u_L);\r\n    float lengthK = length(k);\r\n\r\n    // largest possible waves arising from a continuous wind of speed\r\n    float L = u_V * u_V / g;\r\n\r\n    float cosP = length(dot (normalize(k), normalize(wind)));\r\n    float temp = lengthK * L;\r\n    float P = u_A * exp( -1.0 / (temp * temp)) * pow(lengthK, -4.0) * cosP * cosP;\r\n\r\n    float wl = L / 10000.0;\r\n    P *= exp(lengthK * lengthK * (wl * wl));\r\n\r\n    vec2 h_0 = getH_0(k, P);\r\n    vec2 h_0_star = getH_0(-k, P);\r\n\r\n    float w = sqrt(g * lengthK);\r\n\r\n    vec2 h_01 = complexProduct(h_0, complexExp( w * u_time));\r\n    vec2 h_0_star1 = complexProduct(h_0_star, complexExp(-w * u_time));\r\n\r\n    // h(k, t)\r\n    vec2 h_t = h_01 + h_0_star1;\r\n\r\n    vec2 h_x_t = complexProduct(h_t, complexExp(dot(k, vec2(n,m))));\r\n\r\n    vec2 k_normalized = normalize(k);\r\n\r\n    float lambda = u_choppiness;\r\n    vec2 d_x_t = lambda * clamp( complexProduct(-k_normalized, vec2(h_x_t.y, h_x_t.x)), 0.0,0.3);\r\n\r\n    return vec2(h_x_t.x, d_x_t.x);\r\n}\r\n\r\nvoid main() {\r\n    vec3 a = a_position;\r\n    float scale = 10.0;\r\n    float random = rand(vec2(a.x, a.z * u_time));\r\n    float waveDisplacement = 1.5 * sin(0.07*(a.x + 10.0 * u_time)) * cos(0.06*(a.z + u_time));\r\n    \r\n    float delta = u_L/float(u_resolution);\r\n    vec2 a_delta = getHeightField(a);\r\n    float y = clamp(a_delta.x, 0.0, 0.3) + 55.0;\r\n    a.y = y + waveDisplacement;\r\n    a.x += a_delta.y;\r\n\r\n    vec3 b = vec3(a_position.x + delta, a_position.y, a_position.z);\r\n    vec2 b_delta = getHeightField(b);\r\n    b.y = b_delta.x + 55.0 + waveDisplacement;\r\n    b.x += b_delta.y;\r\n\r\n    vec3 c = vec3(a_position.x, a_position.y, a_position.z + delta);\t\t\r\n    vec2 c_delta = getHeightField(c);\r\n    c.y = c_delta.x + 55.0 + waveDisplacement;\r\n    c.x += c_delta.y;\r\n\r\n    vec3 dir = normalize(cross((b - a), (c - a)));\r\n    v_normal = dir;\r\n\r\n    v_position = a;\r\n    gl_Position = u_viewProjectionMatrix * vec4(a, 1.0);\r\n\r\n    // Reflection\r\n    vec3 eyePos = normalize(a - u_cameraPos);\r\n    vec4 NN = u_viewMatrix * vec4(v_normal, 1.0);\r\n    vec3 N = normalize(NN.xyz);\r\n    v_R = reflect(eyePos, v_normal); \r\n\r\n    // v_random = rand(vec2(a.x, a.z));\r\n\r\n    // gl_Position = u_viewProjectionMatrix * vec4(a, 1.0);\r\n}'},function(e,t){'use strict';t.a=function(){return'#version 300 es\n  precision highp float;\n\n  in vec3 v_position;\n  in vec3 v_normal;\n  in vec3 v_viewCoords;\n  in vec3 v_R;\n  in float v_random;\n\n  out vec4 v_color;\n\n  uniform samplerCube skybox;\n  uniform mat4 u_viewMatrix;\n\n  void main() {\n    vec3 albedo = vec3(0.6, 0.6, 0.6);\n    vec3 normal = v_normal;\n    vec3 pos = v_position;\n    \n    vec3 fragColor = vec3(0.0);\n\n    vec3 lightDir = normalize(vec3(0, 75, -5) - pos);\n    float NdotL = clamp(dot(normal, lightDir), 0.1, 1.0);\n\n    mat4 invViewMatrix = inverse(u_viewMatrix);\n    vec4 cameraWorldPos = invViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n    vec3 V = normalize(cameraWorldPos.xyz - v_position);\n    vec3 H = normalize(lightDir + V);\n    float NdotH = max(dot(H, normal), 0.0);\n    float specular = pow(NdotH, 50.0);\n    fragColor += (albedo + vec3(specular)) * NdotL;\n\n    vec3 darkBlue = vec3(27.0/255.0, 56.0/255.0, 81.0/255.0);\n\n    // Refraction\n    float rIndex = 1.5;\n    float R_0 = pow((1.0 - rIndex) / (1.0 + rIndex), 2.0); // Reflective index\n\t  float dot = abs(dot(normal, lightDir));\n    float fresnel = R_0 + (1.0 - R_0) * pow(1.0 - dot, 5.0);\n    \n    fragColor += (fresnel + 0.1) * vec3(texture(skybox, v_R)) + (1.0 - fresnel) * darkBlue;\n    v_color = vec4(fragColor, 0.9);\n  }\n  '}},function(e){e.exports='#version 300 es\r\nprecision highp float;\r\n\r\nuniform mat4 u_viewProjectionMatrix;\r\n\r\nuniform float u_noise;\r\n\r\nin vec3 a_position;\r\n\r\nout vec3 v_position;\r\nout vec3 v_normal;\r\n\r\nfloat Noise(float x, float y) {\r\n    int n = int(x) + int(y) * 57;\r\n    n = (n<<13) ^ n;\r\n    float noise = float( 1 - ( (n * (n * n * 15731 + 789221) + 1376312589) & 0x7fffffff) / 1073741824);\r\n    noise = (noise + 1.0) / 2.0;\r\n    return noise;\r\n}\r\n\r\nfloat LinearInterpolate(float a, float b, float x) {\r\n    return  (a * (1.0 - x)) + b * x;\r\n}\r\n\r\nfloat SmoothNoise(float x, float y) {\r\n    float corners = (Noise(x - 1.0, y - 1.0) + Noise(x + 1.0, y - 1.0) + Noise(x - 1.0, y + 1.0) + Noise(x + 1.0, y + 1.0)) / 16.0;\r\n    float sides = (Noise(x - 1.0, y) + Noise(x + 1.0, y) + Noise(x, y - 1.0) + Noise(x, y + 1.0)) / 8.0;\r\n    float center = Noise(x, y) / 4.0;\r\n    return corners + sides + center;\r\n}\r\n\r\nfloat InterpolateNoise(float x, float y) {\r\n    int integer_X = int(x);\r\n    float fractional_X = abs(x - float(integer_X));\r\n    int integer_Y = int(y);\r\n    float fractional_Y = abs(y - float(integer_Y));\r\n\r\n    float v1 = SmoothNoise(float(integer_X), float(integer_Y));\r\n    float v2 = SmoothNoise(float(integer_X) + 1.0, float(integer_Y));\r\n    float v3 = SmoothNoise(float(integer_X), float(integer_Y) + 1.0);\r\n    float v4 = SmoothNoise(float(integer_X) + 1.0, float(integer_Y) + 1.0);\r\n\r\n    float i1 = LinearInterpolate(v1, v2, fractional_X);\r\n    float i2 = LinearInterpolate(v3, v4, fractional_X);\r\n\r\n    return LinearInterpolate(i1, i2, fractional_Y);\r\n}\r\n\r\nfloat PerlinNoise(float x, float y, float c) {\r\n    x = x * c;\r\n    y = y * c;\r\n    float total = 0.0;\r\n    float p = 0.5;\r\n    // number of octaves\r\n    int n = 6;\r\n    float max = 1.4;\r\n\r\n    for (int i = 0; i < n; i++) {\r\n        float frequency = pow(2.0, float(i));\r\n        float amplitude = pow(p, float(i));\r\n\r\n        total = total + InterpolateNoise(float(x) * frequency, float(y) * frequency) * amplitude;\r\n    }\r\n    return (total/max);\r\n}\r\n\r\nvoid main() {\r\n    float amplitude = u_noise;\r\n    float y = PerlinNoise(a_position.x, a_position.z, amplitude) * 40.0 + 8.0;\r\n    vec3 a = a_position;\r\n\r\n    float delta = 0.1;\r\n    a.y = y;\t\t\r\n    vec3 b = vec3(a_position.x + delta, a_position.y, a_position.z);\r\n    b.y = PerlinNoise(b.x, b.z, amplitude) * 40.0 + 8.0;\t\t\r\n    vec3 c = vec3(a_position.x, a_position.y, a_position.z + delta);\t\t\r\n    c.y = PerlinNoise(c.x, c.z, amplitude) * 40.0 + 8.0;\r\n\r\n    vec3 dir = normalize(cross((b - a), (c - a)));\r\n    v_normal = dir;\r\n\r\n\r\n    v_position = a;\r\n    gl_Position = u_viewProjectionMatrix * vec4(a, 1.0);\r\n}'},function(e,t){'use strict';t.a=function(){return'#version 300 es\n    precision highp float;\n  \n    in vec3 v_position;\n    in vec3 v_normal;\n\n    out vec4 v_color;\n\n    void main() {\n      vec3 albedo = vec3(0.9, 0.9, 0.9);\n      vec3 normal = v_normal;\n      vec3 pos = v_position;\n  \n      vec3 fragColor = vec3(0.0);\n  \n      vec3 lightDir = normalize(vec3(0, 65, -100) - pos);\n      float NdotL = clamp(dot(normal, lightDir), 0.2, 0.7);\n      fragColor += albedo * NdotL;\n  \n      const vec3 ambientLight = vec3(0.25);\n      fragColor += albedo * ambientLight;\n      v_color = vec4(fragColor, 1.0);\n    }\n    '}},function(e){e.exports='#version 300 es\r\nprecision highp float;\r\n\r\nuniform mat4 u_viewProjectionMatrix;\r\n\r\nin vec3 a_coords;\r\n\r\nout vec3 v_coords;\r\n\r\nvoid main() {\r\n    gl_Position = u_viewProjectionMatrix * vec4(a_coords, 1.0);\r\n    v_coords = a_coords;\r\n}'},function(e,t){'use strict';t.a=function(){return'#version 300 es\n    precision highp float;\n\n    uniform samplerCube skybox;\n    \n    in vec3 v_coords;\n\n    out vec4 v_color;\n  \n    void main() {\n      v_color = texture(skybox, v_coords);\n    }\n    '}},function(e,t,n){'use strict';function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var a=n(1),r=function(){function defineProperties(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,'value'in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),o=function(){function TextureBuffer(e,t){_classCallCheck(this,TextureBuffer),this._glTexture=a.gl.createTexture(),a.gl.bindTexture(a.gl.TEXTURE_2D,this._glTexture),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MIN_FILTER,a.gl.NEAREST),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MAG_FILTER,a.gl.NEAREST),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_S,a.gl.CLAMP_TO_EDGE),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_T,a.gl.CLAMP_TO_EDGE),this._pixelsPerElement=Math.ceil(t/4),this._elementCount=e,a.gl.texImage2D(a.gl.TEXTURE_2D,0,a.gl.RGBA,e,this._pixelsPerElement,0,a.gl.RGBA,a.gl.FLOAT,null),a.gl.bindTexture(a.gl.TEXTURE_2D,null),this._buffer=new Float32Array(4*e*this._pixelsPerElement)}return TextureBuffer.prototype.bufferIndex=function bufferIndex(e,t){return 4*e+4*t*this._elementCount},TextureBuffer.prototype.update=function update(){a.gl.bindTexture(a.gl.TEXTURE_2D,this._glTexture),a.gl.texSubImage2D(a.gl.TEXTURE_2D,0,0,0,this._elementCount,this._pixelsPerElement,a.gl.RGBA,a.gl.FLOAT,this._buffer),a.gl.bindTexture(a.gl.TEXTURE_2D,null)},r(TextureBuffer,[{key:'glTexture',get:function get(){return this._glTexture}},{key:'buffer',get:function get(){return this._buffer}}]),TextureBuffer}()},function(e,t,n){'use strict';function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var a=Math.sqrt,r=Math.pow,o=Math.PI,i=n(1),s=n(2),l=4,d=9.81,c=function(){function Scene(){_classCallCheck(this,Scene),this.aCoords_Skybox,this.uProjection_Skybox,this.uModelview_Skybox,this._texID,this.cube,this.noise=[],this.time=0,this.wind=new s.Vector2(1,1),this.amplitude=1e-5,this.OCEAN_RESOLUTION=512,this.vertices=[],this.indices=[],this.heightMap=[],this.w=[],this.TERRAIN_RESOLUTION=256,this.terrainVertices=[],this.terrainIndices=[],this.OCEAN_LOW_RES=128,this.verticesLowRes=[],this.indicesLowRes=[],this.heightMapLowRes=[],this.wLowRes=[]}var e=Math.exp;return Scene.prototype.update=function update(){this.time+=1},Scene.prototype.createTerrainBuffers=function createTerrainBuffers(){this.terrainVertices=[];for(var e=0;e<this.TERRAIN_RESOLUTION;e++)for(var t=0;t<this.TERRAIN_RESOLUTION;t++)this.terrainVertices.push(t*this.OCEAN_SIZE/(this.TERRAIN_RESOLUTION-1)-this.OCEAN_SIZE/2),this.terrainVertices.push(0),this.terrainVertices.push(e*this.OCEAN_SIZE/(this.TERRAIN_RESOLUTION-1)-this.OCEAN_SIZE/2);this.terrainIndices=[];for(var n=0;n<this.TERRAIN_RESOLUTION-1;n++)for(var a=0;a<this.TERRAIN_RESOLUTION-1;a++){var r=n*this.TERRAIN_RESOLUTION+a,o=r+this.TERRAIN_RESOLUTION,i=o+1;this.terrainIndices.push(r),this.terrainIndices.push(o),this.terrainIndices.push(i),this.terrainIndices.push(i),this.terrainIndices.push(r+1),this.terrainIndices.push(r)}},Scene.prototype.createBuffers=function createBuffers(){this.vertices=[];for(var e=0;e<this.OCEAN_RESOLUTION;e++)for(var t=0;t<this.OCEAN_RESOLUTION;t++)this.vertices.push(t*this.OCEAN_SIZE/(this.OCEAN_RESOLUTION-1)-this.OCEAN_SIZE/2),this.vertices.push(0),this.vertices.push(e*this.OCEAN_SIZE/(this.OCEAN_RESOLUTION-1)-this.OCEAN_SIZE/2);this.indices=[];for(var n=0;n<this.OCEAN_RESOLUTION-1;n++)for(var a=0;a<this.OCEAN_RESOLUTION-1;a++){var r=n*this.OCEAN_RESOLUTION+a,o=r+this.OCEAN_RESOLUTION,i=o+1;this.indices.push(r),this.indices.push(o),this.indices.push(i),this.indices.push(i),this.indices.push(r+1),this.indices.push(r)}},Scene.prototype.createPatchBuffers=function createPatchBuffers(){this.verticesLowRes=[];for(var e=0;3>e;e++)for(var t=0;3>t;t++)for(var n=0;n<this.OCEAN_LOW_RES;n++)for(var a=0;a<this.OCEAN_LOW_RES;a++)this.verticesLowRes.push(a*this.OCEAN_SIZE/(this.OCEAN_LOW_RES-1)-this.OCEAN_SIZE/2+(e-1)*this.OCEAN_SIZE),this.verticesLowRes.push(0),this.verticesLowRes.push(n*this.OCEAN_SIZE/(this.OCEAN_LOW_RES-1)-this.OCEAN_SIZE/2+(t-1)*this.OCEAN_SIZE);this.indicesLowRes=[];for(var r=0;r<this.OCEAN_LOW_RES-1;r++)for(var o=0;o<this.OCEAN_LOW_RES-1;o++){var i=r*this.OCEAN_LOW_RES+o,s=i+this.OCEAN_LOW_RES,l=s+1;this.indicesLowRes.push(i),this.indicesLowRes.push(s),this.indicesLowRes.push(l),this.indicesLowRes.push(l),this.indicesLowRes.push(i+1),this.indicesLowRes.push(i)}},Scene.prototype.createHeightMapBuffers=function createHeightMapBuffers(){this.heightMap=[],this.w=[];for(var t=0;t<this.OCEAN_RESOLUTION;t++)for(var n=0;n<this.OCEAN_RESOLUTION;n++){var i=n*this.OCEAN_SIZE/(this.OCEAN_RESOLUTION-1)-this.OCEAN_SIZE/2,l=t*this.OCEAN_SIZE/(this.OCEAN_RESOLUTION-1)-this.OCEAN_SIZE/2,c=this.OCEAN_SIZE,p=10,u=this.amplitude,m=new s.Vector2(2*o*i/c,2*o*l/c),g=m.length(),h=p*p/d,f=m.normalize(),E=f.dot(this.wind.normalize()),_=E,C=h*g,y=u*e(-1/(C*C))*r(g,-4)*_*_,A=h/1e4;y*=e(g*g*(A*A));var b=this.getH_0(m,y),x=this.getH_0(-m,y),v=a(d*g);this.heightMap.push(b.x),this.heightMap.push(b.y),this.heightMap.push(x.x),this.heightMap.push(x.y),this.w.push(v)}},Scene.prototype.createHeightMapLowResBuffers=function createHeightMapLowResBuffers(){this.heightMapLowRes=[],this.wLowRes=[];for(var t=0;t<this.OCEAN_LOW_RES;t++)for(var i=0;i<this.OCEAN_LOW_RES;i++){var l=i*this.OCEAN_SIZE/(this.OCEAN_LOW_RES-1)-this.OCEAN_SIZE/2,c=t*this.OCEAN_SIZE/(this.OCEAN_LOW_RES-1)-this.OCEAN_SIZE/2,p=this.OCEAN_SIZE,u=10,g=this.amplitude,h=l+this.OCEAN_SIZE/2,n=c+this.OCEAN_SIZE/2,m=new s.Vector2(2*o*h/p,2*o*n/p),f=m.length(),E=u*u/d,_=m.normalize(),C=_.dot(this.wind.normalize()),y=C,A=E*f,b=g*e(-1/(A*A))*r(f,-4)*y*y,x=E/1e4;b*=e(f*f*(x*x));var v=this.getH_0(m,b),S=this.getH_0(-m,b),T=a(d*f);this.heightMapLowRes.push(v.x),this.heightMapLowRes.push(v.y),this.heightMapLowRes.push(S.x),this.heightMapLowRes.push(S.y),this.wLowRes.push(T)}},Scene.prototype.skybox=function skybox(e){function face(e,t){var s=n.length/3,l;for(l=0;12>l;l++)n.push(e[l]);for(l=0;4>l;l++)a.push(t[0],t[1],t[2]);r.push(0,0,1,0,1,1,0,1),o.push(s+3,s+2,s,s+2,s+1,s)}var t=(e||1)/2,n=[],a=[],r=[],o=[];return face([-t,-t,t,t,-t,t,t,t,t,-t,t,t],[0,0,1]),face([-t,-t,-t,-t,t,-t,t,t,-t,t,-t,-t],[0,0,-1]),face([-t,t,-t,-t,t,t,t,t,t,t,t,-t],[0,1,0]),face([-t,-t,-t,t,-t,-t,t,-t,t,-t,-t,t],[0,-1,0]),face([t,-t,-t,t,t,-t,t,t,t,t,-t,t],[1,0,0]),face([-t,-t,-t,-t,-t,t,-t,t,t,-t,t,-t],[-1,0,0]),{vertexPositions:new Float32Array(n),vertexNormals:new Float32Array(a),vertexTextureCoords:new Float32Array(r),indices:new Uint16Array(o)}},Scene.prototype.loadTexture=function loadTexture(){for(var e=0,t=[,,,,,,],n=['../img/cloudtop_ft.jpg','../img/cloudtop_bk.jpg','../img/cloudtop_up.jpg','../img/cloudtop_dn.jpg','../img/cloudtop_rt.jpg','../img/cloudtop_lf.jpg'],a=0;6>a;a++)t[a]=new Image,t[a].onload=function(){if(e++,6==e){p=i.gl.createTexture(),i.gl.bindTexture(i.gl.TEXTURE_CUBE_MAP,p);for(var n=[i.gl.TEXTURE_CUBE_MAP_POSITIVE_X,i.gl.TEXTURE_CUBE_MAP_NEGATIVE_X,i.gl.TEXTURE_CUBE_MAP_POSITIVE_Y,i.gl.TEXTURE_CUBE_MAP_NEGATIVE_Y,i.gl.TEXTURE_CUBE_MAP_POSITIVE_Z,i.gl.TEXTURE_CUBE_MAP_NEGATIVE_Z],a=0;6>a;a++)i.gl.texImage2D(n[a],0,i.gl.RGBA,i.gl.RGBA,i.gl.UNSIGNED_BYTE,t[a]),i.gl.texParameteri(i.gl.TEXTURE_CUBE_MAP,i.gl.TEXTURE_WRAP_S,i.gl.CLAMP_TO_EDGE),i.gl.texParameteri(i.gl.TEXTURE_CUBE_MAP,i.gl.TEXTURE_WRAP_T,i.gl.CLAMP_TO_EDGE);i.gl.generateMipmap(i.gl.TEXTURE_CUBE_MAP)}},this._texID=p,t[a].src=n[a]},Scene.prototype.gausRand=function gausRand(){for(var e=0,t=0;0==e;)e=Math.random();for(;0==t;)t=Math.random();return a(-2*Math.log(e))*Math.cos(2*o*t)},Scene.prototype.getH_0=function getH_0(e,t){var n=this.gausRand(),o=this.gausRand();return new s.Vector2(1/1.4142135623730951*n*a(t),1/1.4142135623730951*o*r(t,0.5))},Scene.prototype.getHeightMap=function getHeightMap(t,n){var i=Math.normalize,l=Math.length,c=new s.Vector2(2*PI*t/u_L,2*o*n/u_L),p=l(c),u=u_V*u_V/d,m=l(Math.dot(i(c),i(this.wind))),g=p*u,h=u_A*e(-1/(g*g))*r(p,-4)*m*m,f=u/1e4;h*=e(p*p*(f*f));var E=getH_0(c,h),_=getH_0(-c,h),C=a(d*p);return new s.Vector3(E,_,C)},Scene.prototype.drawSkybox=function drawSkybox(e){if(this._texID){var t=this.skybox(1e3),n={};n.coordsBuffer=i.gl.createBuffer(),n.indexBuffer=i.gl.createBuffer(),n.count=t.indices.length,i.gl.bindBuffer(i.gl.ARRAY_BUFFER,n.coordsBuffer),i.gl.bufferData(i.gl.ARRAY_BUFFER,new Float32Array(t.vertexPositions),i.gl.STATIC_DRAW),i.gl.enableVertexAttribArray(e.a_coords),i.gl.vertexAttribPointer(e.a_coords,3,i.gl.FLOAT,!1,0,0),i.gl.bindBuffer(i.gl.ELEMENT_ARRAY_BUFFER,n.indexBuffer),i.gl.bufferData(i.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.indices),i.gl.STATIC_DRAW),i.gl.drawElements(i.gl.TRIANGLES,n.count,i.gl.UNSIGNED_SHORT,0)}},Scene.prototype.drawOcean=function drawOcean(e){if(this._texID){var t=i.gl.createBuffer(),n=i.gl.createBuffer(),a=i.gl.createBuffer(),r=i.gl.createBuffer();i.gl.bindBuffer(i.gl.ARRAY_BUFFER,t),i.gl.bufferData(i.gl.ARRAY_BUFFER,new Float32Array(this.vertices),i.gl.STATIC_DRAW),i.gl.enableVertexAttribArray(e.a_position),i.gl.vertexAttribPointer(e.a_position,3,i.gl.FLOAT,!1,3*l,0),i.gl.bindBuffer(i.gl.ELEMENT_ARRAY_BUFFER,n),i.gl.bufferData(i.gl.ELEMENT_ARRAY_BUFFER,new Uint32Array(this.indices),i.gl.STATIC_DRAW);var o=i.gl.TRIANGLES;this.wireframe&&(o=i.gl.LINES),i.gl.drawElements(o,this.indices.length,i.gl.UNSIGNED_INT,0)}},Scene.prototype.drawOceanLowRes=function drawOceanLowRes(e,t){var n=i.gl.createBuffer(),a=3*(this.OCEAN_LOW_RES*this.OCEAN_LOW_RES)*t,r=a+3*(this.OCEAN_LOW_RES*this.OCEAN_LOW_RES),o=this.verticesLowRes.slice(a,r);i.gl.bindBuffer(i.gl.ARRAY_BUFFER,n),i.gl.bufferData(i.gl.ARRAY_BUFFER,new Float32Array(o),i.gl.STATIC_DRAW),i.gl.enableVertexAttribArray(e.a_position),i.gl.vertexAttribPointer(e.a_position,3,i.gl.FLOAT,!1,3*l,0);var s=i.gl.TRIANGLES;this.wireframe&&(s=i.gl.LINES),i.gl.drawElements(s,this.indicesLowRes.length,i.gl.UNSIGNED_INT,0)},Scene.prototype.bindOceanLowResBuffers=function bindOceanLowResBuffers(){if(this._texID){var e=i.gl.createBuffer(),t=i.gl.createBuffer(),n=i.gl.createBuffer();i.gl.bindBuffer(i.gl.ELEMENT_ARRAY_BUFFER,e),i.gl.bufferData(i.gl.ELEMENT_ARRAY_BUFFER,new Uint32Array(this.indicesLowRes),i.gl.STATIC_DRAW)}},Scene.prototype.drawTerrain=function drawTerrain(e){if(this._texID){var t=i.gl.createBuffer(),n=i.gl.createBuffer();i.gl.bindBuffer(i.gl.ARRAY_BUFFER,t),i.gl.bufferData(i.gl.ARRAY_BUFFER,new Float32Array(this.terrainVertices),i.gl.STATIC_DRAW),i.gl.enableVertexAttribArray(e.a_position),i.gl.vertexAttribPointer(e.a_position,3,i.gl.FLOAT,!1,3*l,0),i.gl.bindBuffer(i.gl.ELEMENT_ARRAY_BUFFER,n),i.gl.bufferData(i.gl.ELEMENT_ARRAY_BUFFER,new Uint32Array(this.terrainIndices),i.gl.STATIC_DRAW);var a=i.gl.TRIANGLES;this.wireframe&&(a=i.gl.LINES),i.gl.drawElements(a,this.terrainIndices.length,i.gl.UNSIGNED_INT,0)}},Scene}(),p;t.a=c}]);